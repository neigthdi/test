<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Babylonjs</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.urOXdSm2.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Oq9-TQ1s.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.Cwhj3AdM.js">
    <link rel="modulepreload" href="/assets/chunks/framework.C9yAFGvZ.js">
    <link rel="modulepreload" href="/assets/chunks/GlslCanvas.es.CWX1RJa-.js">
    <link rel="modulepreload" href="/assets/components_shaderToy1.md.D2_Wtm3c.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-83f5a6c3><!--[--><!--]--><!--[--><span tabindex="-1" data-v-a518995d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-a518995d> Skip to content </a><!--]--><!----><header class="VPNav" data-v-83f5a6c3 data-v-12116636><div class="VPNavBar has-sidebar top" data-v-12116636 data-v-c1d78b9f><div class="wrapper" data-v-c1d78b9f><div class="container" data-v-c1d78b9f><div class="title" data-v-c1d78b9f><div class="VPNavBarTitle has-sidebar" data-v-c1d78b9f data-v-82b36183><a class="title" href="/" data-v-82b36183><!--[--><!--]--><!----><span data-v-82b36183>Babylonjs</span><!--[--><!--]--></a></div></div><div class="content" data-v-c1d78b9f><div class="content-body" data-v-c1d78b9f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-c1d78b9f><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-c1d78b9f data-v-abd6d188><span id="main-nav-aria-label" class="visually-hidden" data-v-abd6d188> Main Navigation </span><!--[--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://doc.babylonjs.com/typedoc/modules/BABYLON" target="_blank" rel="noreferrer" tabindex="0" data-v-abd6d188 data-v-8d9c5f75><!--[--><span data-v-8d9c5f75>babylon文档</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.babylonjs-playground.com/" target="_blank" rel="noreferrer" tabindex="0" data-v-abd6d188 data-v-8d9c5f75><!--[--><span data-v-8d9c5f75>babylon官网案例</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene" target="_blank" rel="noreferrer" tabindex="0" data-v-abd6d188 data-v-8d9c5f75><!--[--><span data-v-8d9c5f75>three案例及文档</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://thebookofshaders.com/?lan=ch" target="_blank" rel="noreferrer" tabindex="0" data-v-abd6d188 data-v-8d9c5f75><!--[--><span data-v-8d9c5f75>shader入门</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.shadertoy.com/browse" target="_blank" rel="noreferrer" tabindex="0" data-v-abd6d188 data-v-8d9c5f75><!--[--><span data-v-8d9c5f75>shader案例</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-c1d78b9f data-v-9111f3f5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-9111f3f5 data-v-bff99e46 data-v-8b6fe691><span class="check" data-v-8b6fe691><span class="icon" data-v-8b6fe691><!--[--><span class="vpi-sun sun" data-v-bff99e46></span><span class="vpi-moon moon" data-v-bff99e46></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-c1d78b9f data-v-84df4d42 data-v-e28b0197><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e28b0197><span class="vpi-more-horizontal icon" data-v-e28b0197></span></button><div class="menu" data-v-e28b0197><div class="VPMenu" data-v-e28b0197 data-v-937c5afa><!----><!--[--><!--[--><!----><div class="group" data-v-84df4d42><div class="item appearance" data-v-84df4d42><p class="label" data-v-84df4d42>Appearance</p><div class="appearance-action" data-v-84df4d42><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-84df4d42 data-v-bff99e46 data-v-8b6fe691><span class="check" data-v-8b6fe691><span class="icon" data-v-8b6fe691><!--[--><span class="vpi-sun sun" data-v-bff99e46></span><span class="vpi-moon moon" data-v-bff99e46></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c1d78b9f data-v-d86f42be><span class="container" data-v-d86f42be><span class="top" data-v-d86f42be></span><span class="middle" data-v-d86f42be></span><span class="bottom" data-v-d86f42be></span></span></button></div></div></div></div><div class="divider" data-v-c1d78b9f><div class="divider-line" data-v-c1d78b9f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-83f5a6c3 data-v-14a1fbee><div class="container" data-v-14a1fbee><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-14a1fbee><span class="vpi-align-left menu-icon" data-v-14a1fbee></span><span class="menu-text" data-v-14a1fbee>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-14a1fbee data-v-dd4cdfaf><button data-v-dd4cdfaf>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-83f5a6c3 data-v-2fc172ba><div class="curtain" data-v-2fc172ba></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-2fc172ba><span class="visually-hidden" id="sidebar-aria-label" data-v-2fc172ba> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>基本元素</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/base.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>三大属性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/camera.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>相机</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/model.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/light.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>光线</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/animation.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>动画</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/materialAndTexture.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>材质和纹理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/gui.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>GUI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/sound.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>声音</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/spirit.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>精灵</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/particle.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>粒子系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/base/postProcess.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>后处理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>事件</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/events/register.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>注册事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/events/collision.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>碰撞检测</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>其他</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/other/shader.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>着色器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/other/hook.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>钩子</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/other/storage.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/other/cloneAndCreateInstance.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>clone和createInstance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/other/light.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>光相关</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>webgl相关</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/webgl/variable.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>变量</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/webgl/uvMap.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>UVMap</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/webgl/dataType.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>数据类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/webgl/funcs.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>内置函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/webgl/matrixTransformation.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>矩阵变换</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>案例-babylon</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonCamera.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>相机</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonLight.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>光照</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonVertexData.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>顶点数据</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonAnimation.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>动画</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonSprite.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>精灵</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonParticle.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>粒子</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonCollision.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>碰撞</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonTexture.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>纹理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonRpg.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>RPG相关</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonShader1.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>shader1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/babylonShader2.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>shader2</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>案例-three</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/threePart1.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/threePart2.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/threePart3.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/threePart4.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part4</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>案例-canvas</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/canvasPart1.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/canvasPart2.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/canvasPart3.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/canvasPart4.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>part4</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0 has-active" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>案例-shaderToy</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/shaderToy1.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>shaderToy1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/shaderToy2.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>shaderToy2</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d9b56e08><section class="VPSidebarItem level-0" data-v-d9b56e08 data-v-07e4782b><div class="item" role="button" tabindex="0" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><h2 class="text" data-v-07e4782b>案例-webgl</h2><!----></div><div class="items" data-v-07e4782b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-07e4782b data-v-07e4782b><div class="item" data-v-07e4782b><div class="indicator" data-v-07e4782b></div><a class="VPLink link link" href="/components/webgl.html" data-v-07e4782b><!--[--><p class="text" data-v-07e4782b>webgl</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-83f5a6c3 data-v-6e4abfba><div class="VPDoc has-sidebar has-aside" data-v-6e4abfba data-v-19fd377e><!--[--><!--]--><div class="container" data-v-19fd377e><div class="aside" data-v-19fd377e><div class="aside-curtain" data-v-19fd377e></div><div class="aside-container" data-v-19fd377e><div class="aside-content" data-v-19fd377e><div class="VPDocAside" data-v-19fd377e data-v-c7aa946d><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-c7aa946d data-v-8062ed2e><div class="content" data-v-8062ed2e><div class="outline-marker" data-v-8062ed2e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-8062ed2e>On this page</div><ul class="VPDocOutlineItem root" data-v-8062ed2e data-v-bd9537d5><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c7aa946d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-19fd377e><div class="content-container" data-v-19fd377e><!--[--><!--]--><main class="main" data-v-19fd377e><div style="position:relative;" class="vp-doc _components_shaderToy1" data-v-19fd377e><div><h2 id="sincos" tabindex="-1">SinCos <a class="header-anchor" href="#sincos" aria-label="Permalink to &quot;SinCos&quot;">​</a></h2><div class="vitepress-demo-preview__element-plus__container" suffixname="vue" absolutepath="D:\test\docs\demo\shaderToy\shaderToy1\sinCos.vue" relativepath="../demo/shaderToy/shaderToy1/sinCos.vue"><section class="vitepress-demo-preview-preview"><!--[--><div><div class="pointer">点击运行</div><!----></div><!--]--></section><section class="vitepress-demo-preview-description"><div class="vitepress-demo-preview-description__split-line"></div><div class="vitepress-demo-preview-description__handle-btn"><svg t="1661231422733" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3259" width="20" height="20"><path d="M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z" p-id="3260"></path></svg><svg viewBox="0 0 544 560" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z" fill="currentColor"></path></svg></div></section><section class="vitepress-demo-preview-source"><div class="language-vue"><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">onTrigger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"pointer"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>点击{{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '运行'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '关闭'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"sinCos"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stage"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ts"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { ref, nextTick } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onTrigger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning.value) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nextTick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    onStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'glslCanvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sinCos'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> glslCanvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(canvas)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    glslCanvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      precision highp float;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform float u_time;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform vec2 u_resolution;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      const int AA = 2; // 抗锯齿级别，可以根据需要调整</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      void main() {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 fragCoord = gl_FragCoord.xy;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 uv = (fragCoord - 0.5 * u_resolution.xy) / min(u_resolution.y, u_resolution.x);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        uv *= 10.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float amplitude = 1.0;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float frequency = 1.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 没有AA采样</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // float y = amplitude * sin(u_time) * cos(uv.x * frequency + u_time);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // if(uv.y &#x3C; y) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        //   color = vec3(1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 累积采样结果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float totalSampled = 0.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 对每个像素进行多次采样</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        for (int i = 0; i &#x3C; AA; ++i) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          for (int j = 0; j &#x3C; AA; ++j) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 计算当前采样点的偏移量，范围是[-0.5, 0.5]，但经过除以AA后，范围会缩小到[-(1/2AA), (1/2AA)]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            vec2 offset = vec2(float(i), float(j)) / float(AA) - 0.5;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 根据偏移量和原始UV坐标计算采样点的UV坐标。这里再次考虑了分辨率的纵横比，以确保采样均匀</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            vec2 sampleUV = uv + offset / min(u_resolution.y, u_resolution.x);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 根据采样点的UV坐标和时间计算波形的高度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float y = amplitude * sin(u_time) * cos(sampleUV.x * frequency + u_time);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 使用step函数判断采样点的y坐标是否小于波形的y坐标。如果是，则返回1；否则返回0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float sample = step(sampleUV.y, y); // step 函数返回0或1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 将判断结果累加到totalSampled中</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            totalSampled += sample;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 计算平均采样结果，并根据结果决定颜色</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float alpha = totalSampled / float(AA * AA); // 平均后的透明度值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 color = vec3(1.0) * alpha; // 根据透明度值决定颜色</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        gl_FragColor = vec4(color, 1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre></div></section></div><h2 id="星星" tabindex="-1">星星 <a class="header-anchor" href="#星星" aria-label="Permalink to &quot;星星&quot;">​</a></h2><div class="vitepress-demo-preview__element-plus__container" suffixname="vue" absolutepath="D:\test\docs\demo\shaderToy\shaderToy1\stars.vue" relativepath="../demo/shaderToy/shaderToy1/stars.vue"><section class="vitepress-demo-preview-preview"><!--[--><div><div class="pointer">点击运行</div><!----></div><!--]--></section><section class="vitepress-demo-preview-description"><div class="vitepress-demo-preview-description__split-line"></div><div class="vitepress-demo-preview-description__handle-btn"><svg t="1661231422733" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3259" width="20" height="20"><path d="M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z" p-id="3260"></path></svg><svg viewBox="0 0 544 560" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z" fill="currentColor"></path></svg></div></section><section class="vitepress-demo-preview-source"><div class="language-vue"><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">onTrigger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"pointer"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>点击{{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '运行'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '关闭'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stars"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stage"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ts"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { ref, nextTick } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onTrigger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning.value) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nextTick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    onStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'glslCanvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'stars'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> glslCanvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(canvas)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    glslCanvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      #extension GL_OES_standard_derivatives : enable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      precision highp float;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform float u_time;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform vec2 u_resolution;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 旋转</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      mat2 rot(float a) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float s = sin(a);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float c = cos(a);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return mat2(c, -s, s, c);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // uv , 星辉的亮度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float star(vec2 uv, float flare) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 画圆形</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float d = length(uv);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float m = 0.05 / d;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 大的十字</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float r = max(0.0, 1.0 - abs(uv.x * uv.y * 1000.0));</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        m += r * flare;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 小的十字</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        uv *= rot(3.1415926 / 4.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float r2 = max(0.0, 1.0 - abs(uv.x * uv.y * 1000.0));</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        m += r2 * flare * 0.25;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // d > 0.8 为0， d &#x3C; 0.2 为1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return  m * smoothstep(0.8, 0.2, d);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 将星星绘制的更加错落有致，利用一个Hash函数来让每个格子里的星星发生一点点偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float hash21(vec2 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        p = fract(p * vec2(123.45, 456.21));</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        p += dot(p, p + 45.32);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return fract(p.x + p.y);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      vec3 layer(vec2 uv) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 col = vec3(0.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float splitNumb = 3.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 st = fract(uv * splitNumb) - 0.5;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 由于想要的是每个格子产生的随机数需要保持一致，所以不能够使用st 坐标来产生随机数</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 而是要获取每个格子的index或者说是 id来产生随机数</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 即每次遍历都是该id为参数的随机函数产生的结果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 使用floor 函数来获取每个格子的id。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 id = floor(uv * splitNumb);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 此时会有断层出现</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // float offset = hash21(id) * 0.3;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // col += star(st - offset, 1.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 解决断层</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // y -> -1.0，0.0，1.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // x -> -1.0，0.0，1.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 在一个3x3的邻域内，对于每个邻域点，都计算一个基于哈希函数的内部偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 并使用这个偏移和邻域偏移来调用一个Star函数来计算某种效果（可能是星星或亮点）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 然后将这个效果累加到col上。这种技术常用于生成复杂的纹理、噪声或其他视觉效果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // ------------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 这两个循环，正在遍历一个3x3的网格（以当前点为中心），这通常用于某种邻域操作或采样</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 代码遍历了当前像素 uv 周围的一些格子（即邻近的格子），并对每个格子应用星星效果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 循环遍历了y值从-1到1的整数范围，代表垂直方向上的三个点（通常是中心点以及上下两个相邻的点）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        for(float y = -1.0; y &#x3C;= 1.0; y++) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // 循环遍历了x值从-1到1的整数范围，代表水平方向上的三个点（通常是中心点以及左右两个相邻的点）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          for(float x = -1.0; x &#x3C;= 1.0; x++) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 创建了一个二维向量neighborOffset，它表示从当前点到邻域中某个点的偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 用于定义当前正在处理的邻居（或称为“邻近格子”）的偏移量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 代码的目的是遍历当前像素所在位置（由 uv 表示）附近的格子或“细胞”（cells），并为每个这样的格子或细胞计算星星的效果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            vec2 neighborOffset = vec2(x, y);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 使用哈希函数Hash21，结合一个标识符id和邻域偏移来计算一个浮点数值n</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 这是一个伪随机值，用于生成某种噪声或纹理</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float n = hash21(id + neighborOffset);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 计算了一个内部偏移innerOffset，它基于之前计算的哈希值n</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 可以把下面三个innerOffset分别查看效果</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // fract函数返回其参数的小数部分，所以fract(n * 52.)将n乘以52并取其小数部分</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 这会为innerOffset引入某种随机或周期性的变化</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // vec2 innerOffset = vec2(n - 0.5, n - 0.3);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // vec2 innerOffset = vec2(x - 0.5, y - 0.3);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            vec2 innerOffset = vec2(n - 0.5, fract(n * 25.) - 0.5);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 通过size来改变星辉的亮度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float size = fract(n * 345.34) * 0.8 + 0.2;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float flare = smoothstep(0.4, 0.8, size);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 星星颜色</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            vec3 color = sin(vec3(0.2, 0.5, 0.9) * fract(n * 2345.2) * 6.28) * 0.5 + 0.5;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            color *= vec3(0.3 + size * 0.2, 0.5, 0.5 + size * 1.5);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // st 是一个二维向量，表示当前像素或片段的屏幕空间位置（通常是一个 (x, y) 坐标对）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // neighborOffset 是一个二维向量，表示从当前位置到某个邻接位置的偏移量（例如，上下左右或对角线方向的偏移）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // innerOffset 同样是一个二维向量，是基于某种哈希函数或其他随机机制生成的，用于为邻接位置引入额外的随机或周期性偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // st - neighborOffset - innerOffset 的结果就是计算出一个新的二维位置，相对于当前位置的一个偏移点，并且这个偏移点被 innerOffset 进一步随机化或扰动了</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            // 把innerOffset换成0.1之类的值，则是所有的星星都偏移固定的值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            float s = star(st - neighborOffset - innerOffset, flare);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            col += s * size * color;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 nuv = fract(uv * splitNumb);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 网格</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // if (abs(nuv.x) &#x3C; fwidth(nuv.x) || abs(nuv.y) &#x3C; fwidth(nuv.y)) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        //   col = vec3(1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // if (abs(uv.x) &#x3C; fwidth(uv.x)) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        //   col = vec3(0.0, 1.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // if (abs(uv.y) &#x3C; fwidth(uv.y)) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        //   col = vec3(1.0, 0.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return col;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      void main() {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 fragCoord = gl_FragCoord.xy;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 uv = (fragCoord.xy - 0.5 * u_resolution.xy) / min(u_resolution.y, u_resolution.x);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3 col = layer(uv);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 col = vec3(0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float t = u_time * 0.1;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 把uv旋转</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        uv *= rot(t);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        for(float i = 0.0; i &#x3C; 1.0; i += 1. / 2.0) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // t的作用是模拟深度，z轴的方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          float depth = fract(i + t);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          float fade = smoothstep(0.0, 0.3, depth) * smoothstep(1.0, 0.9, depth);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          float scale = mix(20.0, .05, depth);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          col += layer(uv * scale + i * 435.32) * fade;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        gl_FragColor = vec4(col, 1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre></div></section></div><h2 id="合并两个物体、光照、阴影" tabindex="-1">合并两个物体、光照、阴影 <a class="header-anchor" href="#合并两个物体、光照、阴影" aria-label="Permalink to &quot;合并两个物体、光照、阴影&quot;">​</a></h2><div class="vitepress-demo-preview__element-plus__container" suffixname="vue" absolutepath="D:\test\docs\demo\shaderToy\shaderToy1\lightShadow.vue" relativepath="../demo/shaderToy/shaderToy1/lightShadow.vue"><section class="vitepress-demo-preview-preview"><!--[--><div><div class="pointer">点击运行</div><!----></div><!--]--></section><section class="vitepress-demo-preview-description"><div class="vitepress-demo-preview-description__split-line"></div><div class="vitepress-demo-preview-description__handle-btn"><svg t="1661231422733" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3259" width="20" height="20"><path d="M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z" p-id="3260"></path></svg><svg viewBox="0 0 544 560" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z" fill="currentColor"></path></svg></div></section><section class="vitepress-demo-preview-source"><div class="language-vue"><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">onTrigger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"pointer"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>点击{{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '运行'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '关闭'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"lightShadow"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stage"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ts"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { ref, nextTick } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isRunning</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onTrigger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRunning.value) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nextTick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    onStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    isRunning.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'glslCanvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'lightShadow'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> glslCanvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(canvas)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    glslCanvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      #extension GL_OES_standard_derivatives : enable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      precision highp float;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform float u_time;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      uniform vec2 u_resolution;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // minVec2 比较两个 vec2 类型的向量 a 和 b，返回其中第一个分量（x）较小的那个向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 假设一个函数</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // vec2 tempFun(vec3 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      //   vec2 a = vec2(sdSphere(p - vec3(0., 1., 0.), 1.), 2.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      //   vec2 b = vec2(sdPlane(p), 1.);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      //   return minVec2(a, b);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 光线的当前位置 p 为 (0.5, 0.5, 0.5)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 球体的距离：sdSphere(p - vec3(0., 1., 0.), 1.) = length(vec3(0.5, -0.5, 0.5)) - 1.0 ≈ 0.3536</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 平面的距离：sdPlane(p) = 0.5</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 比较两个距离：min(vec2(0.3536, 2.0), vec2(0.5, 1.0))，返回 vec2(0.3536, 2.0)，表示最近的物体是球体</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 通过这种方式，tempFun 函数可以有效地组合多个物体，并在光线行进算法中正确地处理它们</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      vec2 minVec2(vec2 a, vec2 b) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return a.x &#x3C; b.x ? a : b;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 计算一个点 p 到一个无限大水平平面（地面）的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 这个平面通常被定义为 y=0 的平面，即地面位于 y 轴的零点</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float getGroundDist(vec3 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float groundDist = p.y;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return groundDist;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 计算一个点 p 到一个球体的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 球体的中心由 sphere 表示，半径由 radius 表示</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float getSphereDist(vec3 p, vec3 spherePos, float radius) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 从当前点的位置 p 到球体中心的距离中减去球体的半径，得到点 p 到球体表面的最短距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果点 p 在球体内部，sphereDist 为负值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果点 p 在球体表面，sphereDist 为零</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果点 p 在球体外部，sphereDist 为正值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float sphereDist = length(p - spherePos) - radius;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return sphereDist;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 计算一个点 p 到一个立方体的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 假设立方体的半尺寸为 cubeSize = vec3(1.0, 1.0, 1.0)，表示立方体在 x、y、z 轴上的半长度都为 1.0立方体的中心位于原点 (0, 0, 0)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 如果点 p = vec3(1.5, 1.5, 1.5)，则 p 在立方体外部</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 如果点 p = vec3(0.5, 0.5, 0.5)，则 p 在立方体内部</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 如果点 p = vec3(1.0, 1.0, 1.0)，则 p 在立方体边界上</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 通过 sdBox 函数，可以计算出点 p 到立方体的最短距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float getCubeDist(vec3 p, vec3 cubePos, vec3 cubeSize) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // abs(p - cubePos) - cubeSize 计算点 p 相对于立方体中心 cubePos 的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 首先计算点 p 与立方体中心 c 之间的差值 p − cubePos</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 然后取绝对值 abs(p − cubePos)，表示点 p 相对于立方体中心的水平、垂直和深度方向的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 最后减去立方体的半尺寸 cubeSize，得到 tempDist</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // tempDist 的每个分量表示点在对应方向上超出立方体边界的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果点 p 在立方体内部，tempDist 的某些分量可能是负值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果点 p 在立方体外部，tempDist 的所有分量都是正值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 tempDist = abs(p - cubePos) - cubeSize;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // max(tempDist, 0.0) 将 tempDist 的所有负分量设置为 0，只保留正分量，表示点到立方体外部的距离（假如其中有一个是负值，则 p 是在立方体内）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // length(max(tempDist, 0.0)) 计算这个向量的长度，即点到立方体外部的最短距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // max(tempDist.x, tempDist.y, tempDist.z) 取 tempDist 的 x、y、z 分量中的最大值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // min(max(tempDist.x, tempDist.y, tempDist.z), 0.0) 将这个最大值与 0 比较，取较小值，表示点到立方体内部的距离，如果点在立方体外部，这个值为 0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 最后合并距离，将点到立方体外部的距离和点到立方体内部的距离相加，得到点到立方体的最短距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float cubeDist = length(max(tempDist, 0.0)) + min(max(tempDist.x, max(tempDist.y, tempDist.z)), 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return cubeDist;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 多个物体的合并的dist取min，即物体距离相机最近的dist</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float getDist(vec3 pos) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 SPHERE_POS = vec3(0.5, 1.0, 6.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float SPHERE_RADIUS = 1.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 CUBE_POS = vec3(0.0, 0.0, 6.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 CUBE_SIZE = vec3(1.0, 1.0, 1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float groundDist = getGroundDist(pos);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float cubeDist = getCubeDist(pos, CUBE_POS, CUBE_SIZE);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float sphereDist = getSphereDist(pos, SPHERE_POS, SPHERE_RADIUS);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return min(groundDist, min(cubeDist, sphereDist));</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 联合形状</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 两个形状距离值的最小值，表示两个形状的并集</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float unionShape(float shapeA, float shapeB) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return min(shapeA, shapeB);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // ro：相机的位置（Ray Origin），即相机在三维空间中的坐标。这个点是所有视线（或光线）的起点</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // target：相机的目标点，即相机“看”向的点。这个点决定了相机的前进方向（Forward向量）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // up：相机的向上方向（Up向量），通常与相机的前进方向垂直，这个向量用于确定相机的右侧方向（Right向量）和确保相机的坐标系是正交的</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 相机源点、目标、向上方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // R、U、F分别是Right、Up和Forward向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      mat3 getCameraMat(vec3 ro, vec3 target, vec3 up) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 f = normalize(target - ro); // 计算Forward向量（F）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 叉积 cross(a, b) 的结果是一个垂直于向量 a 和 b 的向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // cross(U, F) 生成的向量指向相机的右侧，而 cross(F, U) 生成的向量指向相机的左侧</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 使用右手：伸开右手</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 使食指指向（Up向量）的方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 使中指指向 （Forward向量）的方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 r = normalize(cross(up, f)); // Right向量（R）是Forward向量和Up向量的叉积，表示相机的右侧方向</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 u = normalize(cross(f, r)); // 为了确保Up向量垂直于Forward向量，需要重新计算Up向量为Right向量和Forward向量的叉积</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return mat3(r, u, f);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // ro 代表光线的起点</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // rd 代表光线的方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      float rayMarching(vec3 ro, vec3 rd) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // d0 是光线从 ro 出发后行进的总距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float d0 = 0.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        const float MAX_STEPS = 100.0;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float SURFACE_DIST = 0.0001;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float MAX_DIST = 1000.0;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        for(float i = 0.0; i &#x3C; MAX_STEPS; i += 1.0) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // 光线的当前位置 pos</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // rd * d0 计算光线在方向 rd 上行进距离 d0 后的向量，然后将这个向量加到源点 ro 上，得到新的位置 pos。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          vec3 pos = ro + d0 * rd;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // dS 表示从当前光线位置 p 到最近的场景物体表面的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          float dS = getDist(pos);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          d0 += dS;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // 如果从当前位置到球面的距离 dS 小于某个阈值 SURFACE_DIST（该阈值也未在此代码段中定义），则可能表示光线已经“击中”了表面，因此退出循环</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // 如果光线行进的距离 d0 大于某个最大距离 MAX_DIST（同样，该值未在此代码段中定义），则退出循环，可能是因为光线已经行进得太远而没有“击中”任何物体</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          if (dS &#x3C; SURFACE_DIST || d0 > MAX_DIST) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">            break;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return d0;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 黑白网格</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      vec3 groundGrid(vec3 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 c1 = vec3(1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 c2 = vec3(0.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // floor(p.x) 和 floor(p.z) 分别取 p.x 和 p.z 的整数部分</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // p.x + floor(p.z) 将 x 坐标和 z 坐标的整数部分相加</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // mod(..., 2.0) 取上述和对 2 的模，结果为 0 或 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float s = mod(floor(p.x + floor(p.z)), 2.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // mix(c1, c2, s) 根据 s 的值在 c1 和 c2 之间进行插值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 当 s 为 0 时，返回 c1（白色）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 当 s 为 1 时，返回 c2（黑色）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return mix(c1, c2, s);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 在基于距离场（Distance Field）的渲染中，法线（Normal）的计算是一个关键步骤</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 距离场是一种标量场，其中每个点的值表示该点到最近表面的距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 由于距离场本身是一个标量函数，而法线是一个向量，因此需要通过某种方式从标量场中提取出向量信息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 有限差分法（Finite Difference Method）是一种自然且有效的方法，用于从标量场中近似计算梯度，进而得到法线</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 对于x方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // grad_x ≈ [f(p + eps_x) - f(p - eps_x)] / (2 * eps) * ex</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 具体查看（自定义效果-两个物体的合并-1.png）、（自定义效果-两个物体的合并-2.png）、（自定义效果-两个物体的合并-3.png）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      vec3 getNormal(vec3 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float e = 0.001;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3(..., 0.0, 0.0)：构造一个三维向量，只有x分量有效</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 通过对点p在x方向上加上和减去e，然后计算距离差，这个差值反映了距离场在x方向上的变化率，可以得到x方向上的梯度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 结果是一个三维向量，但只有x分量是非零的，表示梯度在x方向上的分量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 grad_x = vec3((getDist(p + vec3(e, 0.0, 0.0)) - getDist(p - vec3(e, 0.0, 0.0))) / (2.0 * e), 0.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3(0.0, ..., 0.0)：构造一个三维向量，只有y分量有效</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 通过对点p在y方向上加上和减去e，然后计算距离差，这个差值反映了距离场在y方向上的变化率，可以得到y方向上的梯度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 结果是一个三维向量，但只有y分量是非零的，表示梯度在y方向上的分量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 grad_y = vec3(0.0, (getDist(p + vec3(0.0, e, 0.0)) - getDist(p - vec3(0.0, e, 0.0))) / (2.0 * e), 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3(0.0, 0.0, ...)：构造一个三维向量，只有z分量有效</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 通过对点p在z方向上加上和减去e，然后计算距离差，这个差值反映了距离场在z方向上的变化率，可以得到z方向上的梯度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 结果是一个三维向量，但只有z分量是非零的，表示梯度在z方向上的分量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 grad_z = vec3(0.0, 0.0, (getDist(p + vec3(0.0, 0.0, e)) - getDist(p - vec3(0.0, 0.0, e))) / (2.0 * e));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 将三个方向上的梯度向量相加，得到该点的总梯度向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 然后使用normalize函数将其标准化（即长度变为1），得到法向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 因为梯度向量指向函数值增长最快的方向，而对于表示表面的函数，其法向量与梯度向量方向相反（或相同，取决于表面函数的定义，但通常通过取梯度来近似法向量，并可能需要根据具体情况调整方向）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 标准化确保了返回的法向量是一个单位向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return normalize(grad_x + grad_y + grad_z);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      // 计算一个3D点p与光源之间的漫反射光照强度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      vec3 getLight(vec3 lightPos, vec3 p) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float SHADOW = 0.1;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 计算从点p到光源的方向，方向的箭头指向lightPos</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 首先计算从点p到光源lightPos的向量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 然后，使用normalize函数将这个向量标准化（或归一化），使其长度为1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 标准化后的向量l表示，从点p指向光源的方向</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 l = normalize(lightPos - p);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 n = getNormal(p);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 计算漫反射光照强度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 使用点积（dot函数）来计算法线向量n和光源方向向量l之间的角度的余弦值</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 这个余弦值表示了光源方向和表面法线之间的“对齐”程度，从而决定了光照的强度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 由于余弦值可能是负的（当光源在表面的背面时），使用max函数确保结果始终是非负的</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 因此，dif变量存储了漫反射光照的强度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float dif = max(dot(n, l), 0.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 如果不需要阴影</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // return dif;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 阴影检测（偏移起点防止自相交）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float dis = rayMarching(p + 0.01 * n, l);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        if (dis &#x3C; length(lightPos - p)) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          // 存在遮挡则减弱光照</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          dif *= SHADOW;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 地面的黑白格子</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 由于getDist中有planeDist，所以p点包含了地面</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 修改不同的groundY，会看到最远处的变化</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float groundY = 0.05;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        if(p.y &#x3C; groundY) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          return groundGrid(p) * dif;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        return vec3(dif);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      void main() {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 fragCoord = gl_FragCoord.xy;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec2 uv = (fragCoord.xy - 0.5 * u_resolution.xy) / min(u_resolution.y, u_resolution.x);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 color = vec3(0.0, 0.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 lightPos = vec3(2.0, 5.0, 2.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        lightPos.xz += vec2(sin(u_time) + 2.0, cos(u_time)) * 2.0;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 相机信息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3 cameraPos = vec3(0.0, 3.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 cameraPos = vec3(0.0, 3.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 cameraUp = vec3(0.0, 1.0, 0.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 cameraTarget = vec3(0.0, 1.0, 6.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // rd 是光线的方向向量，表示光线沿着哪个方向行进</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 之所以 * vec3(uv, 1.0)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // uv.x 表示水平方向的偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // uv.y 表示垂直方向的偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 1.0 表示沿着相机的前进方向（即深度方向）的偏移</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // vec3(uv, 1.0) 将二维的 uv 坐标扩展为一个三维向量，其中 z 分量为 1.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 rd = getCameraMat(cameraPos, cameraTarget, cameraUp) * vec3(uv, 1.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 光线步进行进了多少距离</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        float d = rayMarching(cameraPos, rd);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 光线的当前位置 p</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // rd * d 计算光线在方向 rd 上行进距离 d 后的向量，然后将这个向量加到源点 cameraTarget 上，得到新的位置 p。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 p = cameraPos + rd * d;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        vec3 curLightColor = getLight(lightPos, p);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // 没有光照</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        // color = vec3(d / 6.0);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        color = curLightColor;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        gl_FragColor = vec4(color, 1.0);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre></div></section></div></div></div></main><footer class="VPDocFooter" data-v-19fd377e data-v-fa833ed1><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-fa833ed1><span class="visually-hidden" id="doc-footer-aria-label" data-v-fa833ed1>Pager</span><div class="pager" data-v-fa833ed1><a class="VPLink link pager-link prev" href="/components/canvasPart4.html" data-v-fa833ed1><!--[--><span class="desc" data-v-fa833ed1>Previous page</span><span class="title" data-v-fa833ed1>part4</span><!--]--></a></div><div class="pager" data-v-fa833ed1><a class="VPLink link pager-link next" href="/components/shaderToy2.html" data-v-fa833ed1><!--[--><span class="desc" data-v-fa833ed1>Next page</span><span class="title" data-v-fa833ed1>shaderToy2</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"base_animation.md\":\"CzzJF48Y\",\"base_base.md\":\"3RRaaiW_\",\"base_camera.md\":\"C40b_YLX\",\"base_gui.md\":\"BaxAl0v_\",\"base_light.md\":\"ryIHKkQ5\",\"base_materialandtexture.md\":\"Cvw9iihy\",\"base_model.md\":\"BWlRHOL2\",\"base_particle.md\":\"Dfa45j6E\",\"base_postprocess.md\":\"3JIqOO7a\",\"base_sound.md\":\"D7FxXWx-\",\"base_spirit.md\":\"xK9GtH7P\",\"components_babylonanimation.md\":\"D0IOwWP4\",\"components_babyloncamera.md\":\"Dme4MR50\",\"components_babyloncollision.md\":\"DOuWQwSV\",\"components_babylonlight.md\":\"Bm1Vl0BK\",\"components_babylonparticle.md\":\"CfWZiZSx\",\"components_babylonrpg.md\":\"78E4GabX\",\"components_babylonshader1.md\":\"B7l9gOEn\",\"components_babylonshader2.md\":\"D4z2ZxWl\",\"components_babylonsprite.md\":\"CPtGGyh_\",\"components_babylontexture.md\":\"BAL95IcV\",\"components_babylonvertexdata.md\":\"DouwAX4i\",\"components_canvaspart1.md\":\"YAIgp_kR\",\"components_canvaspart2.md\":\"5xkbUFbm\",\"components_canvaspart3.md\":\"8Sa3vqRx\",\"components_canvaspart4.md\":\"DCXJQavi\",\"components_shadertoy1.md\":\"D2_Wtm3c\",\"components_shadertoy2.md\":\"BoxnigSD\",\"components_threepart1.md\":\"bKYoqqun\",\"components_threepart2.md\":\"DLVm_a9v\",\"components_threepart3.md\":\"BR9Oq-n7\",\"components_threepart4.md\":\"J5cJeoWw\",\"components_webgl.md\":\"C5yyu14q\",\"events_collision.md\":\"BHiZcpWq\",\"events_register.md\":\"Db421ZmI\",\"index.md\":\"IFUfh6g1\",\"other_cloneandcreateinstance.md\":\"4yZQaEl1\",\"other_hook.md\":\"EAguzyXY\",\"other_light.md\":\"DpyBctdy\",\"other_shader.md\":\"D9UIJT96\",\"other_storage.md\":\"BRap0Eh3\",\"webgl_datatype.md\":\"CZqGRRwU\",\"webgl_funcs.md\":\"CbOhVeoF\",\"webgl_matrixtransformation.md\":\"Bx_hKjf1\",\"webgl_uvmap.md\":\"BXY5Q2uX\",\"webgl_variable.md\":\"Bf0j_IO7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Babylonjs\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"smoothScroll\":true,\"nav\":[{\"text\":\"babylon文档\",\"link\":\"https://doc.babylonjs.com/typedoc/modules/BABYLON\"},{\"text\":\"babylon官网案例\",\"link\":\"https://www.babylonjs-playground.com/\"},{\"text\":\"three案例及文档\",\"link\":\"https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene\"},{\"text\":\"shader入门\",\"link\":\"https://thebookofshaders.com/?lan=ch\"},{\"text\":\"shader案例\",\"link\":\"https://www.shadertoy.com/browse\"}],\"sidebar\":{\"/\":[{\"text\":\"基本元素\",\"collapsible\":true,\"items\":[{\"text\":\"三大属性\",\"link\":\"/base/base\"},{\"text\":\"相机\",\"link\":\"/base/camera\"},{\"text\":\"模型\",\"link\":\"/base/model\"},{\"text\":\"光线\",\"link\":\"/base/light\"},{\"text\":\"动画\",\"link\":\"/base/animation\"},{\"text\":\"材质和纹理\",\"link\":\"/base/materialAndTexture\"},{\"text\":\"GUI\",\"link\":\"/base/gui\"},{\"text\":\"声音\",\"link\":\"/base/sound\"},{\"text\":\"精灵\",\"link\":\"/base/spirit\"},{\"text\":\"粒子系统\",\"link\":\"/base/particle\"},{\"text\":\"后处理\",\"link\":\"/base/postProcess\"}]},{\"text\":\"事件\",\"collapsible\":true,\"items\":[{\"text\":\"注册事件\",\"link\":\"/events/register\"},{\"text\":\"碰撞检测\",\"link\":\"/events/collision\"}]},{\"text\":\"其他\",\"collapsible\":true,\"items\":[{\"text\":\"着色器\",\"link\":\"/other/shader\"},{\"text\":\"钩子\",\"link\":\"/other/hook\"},{\"text\":\"存储\",\"link\":\"/other/storage\"},{\"text\":\"clone和createInstance\",\"link\":\"/other/cloneAndCreateInstance\"},{\"text\":\"光相关\",\"link\":\"/other/light\"}]},{\"text\":\"webgl相关\",\"collapsible\":true,\"items\":[{\"text\":\"变量\",\"link\":\"/webgl/variable\"},{\"text\":\"UVMap\",\"link\":\"/webgl/uvMap\"},{\"text\":\"数据类型\",\"link\":\"/webgl/dataType\"},{\"text\":\"内置函数\",\"link\":\"/webgl/funcs\"},{\"text\":\"矩阵变换\",\"link\":\"/webgl/matrixTransformation\"}]},{\"text\":\"案例-babylon\",\"collapsible\":true,\"items\":[{\"text\":\"相机\",\"link\":\"/components/babylonCamera.md\"},{\"text\":\"光照\",\"link\":\"/components/babylonLight.md\"},{\"text\":\"顶点数据\",\"link\":\"/components/babylonVertexData.md\"},{\"text\":\"动画\",\"link\":\"/components/babylonAnimation.md\"},{\"text\":\"精灵\",\"link\":\"/components/babylonSprite.md\"},{\"text\":\"粒子\",\"link\":\"/components/babylonParticle.md\"},{\"text\":\"碰撞\",\"link\":\"/components/babylonCollision.md\"},{\"text\":\"纹理\",\"link\":\"/components/babylonTexture.md\"},{\"text\":\"RPG相关\",\"link\":\"/components/babylonRpg.md\"},{\"text\":\"shader1\",\"link\":\"/components/babylonShader1.md\"},{\"text\":\"shader2\",\"link\":\"/components/babylonShader2.md\"}]},{\"text\":\"案例-three\",\"collapsible\":true,\"items\":[{\"text\":\"part1\",\"link\":\"/components/threePart1.md\"},{\"text\":\"part2\",\"link\":\"/components/threePart2.md\"},{\"text\":\"part3\",\"link\":\"/components/threePart3.md\"},{\"text\":\"part4\",\"link\":\"/components/threePart4.md\"}]},{\"text\":\"案例-canvas\",\"collapsible\":true,\"items\":[{\"text\":\"part1\",\"link\":\"/components/canvasPart1.md\"},{\"text\":\"part2\",\"link\":\"/components/canvasPart2.md\"},{\"text\":\"part3\",\"link\":\"/components/canvasPart3.md\"},{\"text\":\"part4\",\"link\":\"/components/canvasPart4.md\"}]},{\"text\":\"案例-shaderToy\",\"collapsible\":true,\"items\":[{\"text\":\"shaderToy1\",\"link\":\"/components/shaderToy1.md\"},{\"text\":\"shaderToy2\",\"link\":\"/components/shaderToy2.md\"}]},{\"text\":\"案例-webgl\",\"collapsible\":true,\"items\":[{\"text\":\"webgl\",\"link\":\"/components/webgl.md\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>