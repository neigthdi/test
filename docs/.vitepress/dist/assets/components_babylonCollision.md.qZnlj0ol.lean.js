import{p as f3}from"./chunks/index.CWpfXp9-.js";import{d as y3,s as b3,y as v3,R as z3,o as d3,c as u3,j as St,t as N3,D as w3,I as A3,w as M3,a as I3}from"./chunks/framework.BXFFLb3j.js";var S3=typeof window<"u",Zt=null;S3?Zt=window:Zt=global;(function(ki,xs){typeof exports=="object"&&typeof module<"u"?xs(exports):typeof define=="function"&&define.amd?define(["exports"],xs):xs((ki=ki||Zt).OIMO={})})(void 0,function(ki){Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(s){return s<0?-1:s>0?1:+s}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(s),h=1;h<arguments.length;h++){var a=arguments[h];if(a!=null)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t});var xs,Gs,Vs,ds,Us="1.0.9",nt=0,$s=1,Qs=2,lt=3,ot=0,qs=0,us=1,Fs=2,gs=3,Bs=4,Js=5,q2=0,Ws=1,rt=2,pt=3,it=4,st=5,Et=6,f={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(s,t,h){return(1-h)*s+h*t},randInt:function(s,t){return s+f.floor(f.random()*(t-s+1))},rand:function(s,t){return s+f.random()*(t-s)},generateUUID:(Gs="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Vs=new Array(36),ds=0,function(){for(var s=0;s<36;s++)s===8||s===13||s===18||s===23?Vs[s]="-":s===14?Vs[s]="4":(ds<=2&&(ds=33554432+16777216*Math.random()|0),xs=15&ds,ds>>=4,Vs[s]=Gs[s===19?3&xs|8:xs]);return Vs.join("")}),int:function(s){return f.floor(s)},fix:function(s,t){return s.toFixed(t||3,10)},clamp:function(s,t,h){return f.max(t,f.min(h,s))},distance:function(s,t){var h=t[0]-s[0],a=t[1]-s[1],e=t[2]-s[2];return f.sqrt(h*h+a*a+e*e)},acosClamp:function(s){return s>1?0:s<-1?f.PI:f.acos(s)},distanceVector:function(s,t){var h=s.x-t.x,a=s.y-t.y,e=s.z-t.z;return h*h+a*a+e*e},dotVectors:function(s,t){return s.x*t.x+s.y*t.y+s.z*t.z}};function U2(s,t){console.error("[OIMO] "+s+": "+t)}function V2(s){this.parent=s,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=Us,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}function B(s,t,h){this.x=s||0,this.y=t||0,this.z=h||0}function Gi(s,t,h,a){this.x=s||0,this.y=t||0,this.z=h||0,this.w=a!==void 0?a:1}function n2(s,t,h,a,e,n,l,E,r){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.")}function Ls(s,t,h,a,e,n){this.elements=new Float32Array(6);var l=this.elements;l[0]=s||0,l[1]=h||0,l[2]=e||0,l[3]=t||0,l[4]=a||0,l[5]=n||0}Object.assign(V2.prototype,{setTime:function(s){this.times[s||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),this.tt===100&&this.resetMax(),this.tt>100&&(this.broadPhaseTime>this.MaxBroadPhaseTime&&(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime>this.MaxNarrowPhaseTime&&(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime>this.MaxSolvingTime&&(this.MaxSolvingTime=this.solvingTime),this.totalTime>this.MaxTotalTime&&(this.MaxTotalTime=this.totalTime),this.updateTime>this.MaxUpdateTime&&(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt>500&&(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){return["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconds<br><br>","broadphase &nbsp;"+f.fix(this.broadPhaseTime)+" | "+f.fix(this.MaxBroadPhaseTime)+"<br>","narrowphase "+f.fix(this.narrowPhaseTime)+" | "+f.fix(this.MaxNarrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;"+f.fix(this.solvingTime)+" | "+f.fix(this.MaxSolvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+f.fix(this.totalTime)+" | "+f.fix(this.MaxTotalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;"+f.fix(this.updateTime)+" | "+f.fix(this.MaxUpdateTime)+"<br>"].join(`
`)},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}}),Object.assign(B.prototype,{Vec3:!0,set:function(s,t,h){return this.x=s,this.y=t,this.z=h,this},add:function(s,t){return t!==void 0?this.addVectors(s,t):(this.x+=s.x,this.y+=s.y,this.z+=s.z,this)},addVectors:function(s,t){return this.x=s.x+t.x,this.y=s.y+t.y,this.z=s.z+t.z,this},addEqual:function(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z,this},sub:function(s,t){return t!==void 0?this.subVectors(s,t):(this.x-=s.x,this.y-=s.y,this.z-=s.z,this)},subVectors:function(s,t){return this.x=s.x-t.x,this.y=s.y-t.y,this.z=s.z-t.z,this},subEqual:function(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z,this},scale:function(s,t){return this.x=s.x*t,this.y=s.y*t,this.z=s.z*t,this},scaleEqual:function(s){return this.x*=s,this.y*=s,this.z*=s,this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z,this},addScaledVector:function(s,t){return this.x+=s.x*t,this.y+=s.y*t,this.z+=s.z*t,this},subScaledVector:function(s,t){return this.x-=s.x*t,this.y-=s.y*t,this.z-=s.z*t,this},cross:function(s,t){if(t!==void 0)return this.crossVectors(s,t);var h=this.x,a=this.y,e=this.z;return this.x=a*s.z-e*s.y,this.y=e*s.x-h*s.z,this.z=h*s.y-a*s.x,this},crossVectors:function(s,t){var h=s.x,a=s.y,e=s.z,n=t.x,l=t.y,E=t.z;return this.x=a*E-e*l,this.y=e*n-h*E,this.z=h*l-a*n,this},tangent:function(s){var t=s.x,h=s.y,a=s.z;return this.x=h*t-a*a,this.y=-a*h-t*t,this.z=t*a+h*h,this},invert:function(s){return this.x=-s.x,this.y=-s.y,this.z=-s.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return f.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z,this},applyMatrix3:function(s,t){var h=this.x,a=this.y,e=this.z,n=s.elements;return t?(this.x=n[0]*h+n[1]*a+n[2]*e,this.y=n[3]*h+n[4]*a+n[5]*e,this.z=n[6]*h+n[7]*a+n[8]*e):(this.x=n[0]*h+n[3]*a+n[6]*e,this.y=n[1]*h+n[4]*a+n[7]*e,this.z=n[2]*h+n[5]*a+n[8]*e),this},applyQuaternion:function(s){var t=this.x,h=this.y,a=this.z,e=s.x,n=s.y,l=s.z,E=s.w,r=E*t+n*a-l*h,p=E*h+l*t-e*a,o=E*a+e*h-n*t,A=-e*t-n*h-l*a;return this.x=r*E+A*-e+p*-l-o*-n,this.y=p*E+A*-n+o*-e-r*-l,this.z=o*E+A*-l+r*-n-p*-e,this},testZero:function(){return this.x!==0||this.y!==0||this.z!==0},testDiff:function(s){return!this.equals(s)},equals:function(s){return s.x===this.x&&s.y===this.y&&s.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(s){return isFinite(s)?(this.x*=s,this.y*=s,this.z*=s):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(s){return this.multiplyScalar(1/s)},normalize:function(){return this.divideScalar(this.length())},toArray:function(s,t){t===void 0&&(t=0),s[t]=this.x,s[t+1]=this.y,s[t+2]=this.z},fromArray:function(s,t){return t===void 0&&(t=0),this.x=s[t],this.y=s[t+1],this.z=s[t+2],this}}),Object.assign(Gi.prototype,{Quat:!0,set:function(s,t,h,a){return this.x=s,this.y=t,this.z=h,this.w=a,this},addTime:function(s,t){var h=s.x,a=s.y,e=s.z,n=this.w,l=this.x,E=this.y,r=this.z;return t*=.5,this.x+=t*(h*n+a*r-e*E),this.y+=t*(a*n+e*l-h*r),this.z+=t*(e*n+h*E-a*l),this.w+=t*(-h*l-a*E-e*r),this.normalize(),this},multiply:function(s,t){return t!==void 0?this.multiplyQuaternions(s,t):this.multiplyQuaternions(this,s)},multiplyQuaternions:function(s,t){var h=s.x,a=s.y,e=s.z,n=s.w,l=t.x,E=t.y,r=t.z,p=t.w;return this.x=h*p+n*l+a*r-e*E,this.y=a*p+n*E+e*l-h*r,this.z=e*p+n*r+h*E-a*l,this.w=n*p-h*l-a*E-e*r,this},setFromUnitVectors:function(s,t){var h=new B,a=s.dot(t)+1;return a<f.EPS2?(a=0,f.abs(s.x)>f.abs(s.z)?h.set(-s.y,s.x,0):h.set(0,-s.z,s.y)):h.crossVectors(s,t),this._x=h.x,this._y=h.y,this._z=h.z,this._w=a,this.normalize()},arc:function(s,t){var h=s.x,a=s.y,e=s.z,n=t.x,l=t.y,E=t.z,r=h*n+a*l+e*E;if(r==-1)return n=a*h-e*e,l=-e*a-h*h,E=h*e+a*a,r=1/f.sqrt(n*n+l*l+E*E),this.w=0,this.x=n*r,this.y=l*r,this.z=E*r,this;var p=a*E-e*l,o=e*n-h*E,A=h*l-a*n;return this.w=f.sqrt(.5*(1+r)),r=.5/this.w,this.x=p*r,this.y=o*r,this.z=A*r,this},normalize:function(){var s=this.length();return s===0?this.set(0,0,0,1):(s=1/s,this.x=this.x*s,this.y=this.y*s,this.z=this.z*s,this.w=this.w*s),this},inverse:function(){return this.conjugate().normalize()},invert:function(s){return this.x=s.x,this.y=s.y,this.z=s.z,this.w=s.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return f.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z,this.w=s.w,this},clone:function(s){return new Gi(this.x,this.y,this.z,this.w)},testDiff:function(s){return!this.equals(s)},equals:function(s){return this.x===s.x&&this.y===s.y&&this.z===s.z&&this.w===s.w},toString:function(){return"Quat["+this.x.toFixed(4)+", ("+this.y.toFixed(4)+", "+this.z.toFixed(4)+", "+this.w.toFixed(4)+")]"},setFromEuler:function(s,t,h){var a=Math.cos(.5*s),e=Math.cos(.5*t),n=Math.cos(.5*h),l=Math.sin(.5*s),E=Math.sin(.5*t),r=Math.sin(.5*h);return this.x=l*e*n+a*E*r,this.y=a*E*n-l*e*r,this.z=a*e*r+l*E*n,this.w=a*e*n-l*E*r,this},setFromAxis:function(s,t){s.normalize(),t*=.5;var h=f.sin(t);return this.x=h*s.x,this.y=h*s.y,this.z=h*s.z,this.w=f.cos(t),this},setFromMat33:function(s){var t,h=s[0]+s[4]+s[8];if(h>0)t=f.sqrt(h+1),this.w=.5/t,t=.5/t,this.x=(s[5]-s[7])*t,this.y=(s[6]-s[2])*t,this.z=(s[1]-s[3])*t;else{var a=[],e=0;s[4]>s[0]&&(e=1),s[8]>s[3*e+e]&&(e=2);var n=(e+1)%3,l=(e+2)%3;t=f.sqrt(s[3*e+e]-s[3*n+n]-s[3*l+l]+1),a[e]=.5*fRoot,t=.5/fRoot,this.w=(s[3*n+l]-s[3*l+n])*t,a[n]=(s[3*n+e]+s[3*e+n])*t,a[l]=(s[3*l+e]+s[3*e+l])*t,this.x=a[1],this.y=a[2],this.z=a[3]}return this},toArray:function(s,t){s[t=t||0]=this.x,s[t+1]=this.y,s[t+2]=this.z,s[t+3]=this.w},fromArray:function(s,t){return t=t||0,this.set(s[t],s[t+1],s[t+2],s[t+3]),this}}),Object.assign(n2.prototype,{Mat33:!0,set:function(s,t,h,a,e,n,l,E,r){var p=this.elements;return p[0]=s,p[1]=t,p[2]=h,p[3]=a,p[4]=e,p[5]=n,p[6]=l,p[7]=E,p[8]=r,this},add:function(s,t){if(t!==void 0)return this.addMatrixs(s,t);var h=this.elements,a=s.elements;return h[0]+=a[0],h[1]+=a[1],h[2]+=a[2],h[3]+=a[3],h[4]+=a[4],h[5]+=a[5],h[6]+=a[6],h[7]+=a[7],h[8]+=a[8],this},addMatrixs:function(s,t){var h=this.elements,a=s.elements,e=t.elements;return h[0]=a[0]+e[0],h[1]=a[1]+e[1],h[2]=a[2]+e[2],h[3]=a[3]+e[3],h[4]=a[4]+e[4],h[5]=a[5]+e[5],h[6]=a[6]+e[6],h[7]=a[7]+e[7],h[8]=a[8]+e[8],this},addEqual:function(s){var t=this.elements,h=s.elements;return t[0]+=h[0],t[1]+=h[1],t[2]+=h[2],t[3]+=h[3],t[4]+=h[4],t[5]+=h[5],t[6]+=h[6],t[7]+=h[7],t[8]+=h[8],this},sub:function(s,t){if(t!==void 0)return this.subMatrixs(s,t);var h=this.elements,a=s.elements;return h[0]-=a[0],h[1]-=a[1],h[2]-=a[2],h[3]-=a[3],h[4]-=a[4],h[5]-=a[5],h[6]-=a[6],h[7]-=a[7],h[8]-=a[8],this},subMatrixs:function(s,t){var h=this.elements,a=s.elements,e=t.elements;return h[0]=a[0]-e[0],h[1]=a[1]-e[1],h[2]=a[2]-e[2],h[3]=a[3]-e[3],h[4]=a[4]-e[4],h[5]=a[5]-e[5],h[6]=a[6]-e[6],h[7]=a[7]-e[7],h[8]=a[8]-e[8],this},subEqual:function(s){var t=this.elements,h=s.elements;return t[0]-=h[0],t[1]-=h[1],t[2]-=h[2],t[3]-=h[3],t[4]-=h[4],t[5]-=h[5],t[6]-=h[6],t[7]-=h[7],t[8]-=h[8],this},scale:function(s,t){var h=this.elements,a=s.elements;return h[0]=a[0]*t,h[1]=a[1]*t,h[2]=a[2]*t,h[3]=a[3]*t,h[4]=a[4]*t,h[5]=a[5]*t,h[6]=a[6]*t,h[7]=a[7]*t,h[8]=a[8]*t,this},scaleEqual:function(s){var t=this.elements;return t[0]*=s,t[1]*=s,t[2]*=s,t[3]*=s,t[4]*=s,t[5]*=s,t[6]*=s,t[7]*=s,t[8]*=s,this},multiplyMatrices:function(s,t,h){h&&(t=t.clone().transpose());var a=this.elements,e=s.elements,n=t.elements,l=e[0],E=e[3],r=e[6],p=e[1],o=e[4],A=e[7],c=e[2],k=e[5],m=e[8],u=n[0],g=n[3],S=n[6],d=n[1],I=n[4],M=n[7],O=n[2],R=n[5],P=n[8];return a[0]=l*u+p*g+c*S,a[1]=l*d+p*I+c*M,a[2]=l*O+p*R+c*P,a[3]=E*u+o*g+k*S,a[4]=E*d+o*I+k*M,a[5]=E*O+o*R+k*P,a[6]=r*u+A*g+m*S,a[7]=r*d+A*I+m*M,a[8]=r*O+A*R+m*P,this},transpose:function(s){if(s!==void 0){var t=s.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this}var h=this.elements,a=h[1],e=h[2],n=h[5];return h[1]=h[3],h[2]=h[6],h[3]=a,h[5]=h[7],h[6]=e,h[7]=n,this},setQuat:function(s){var t=this.elements,h=s.x,a=s.y,e=s.z,n=s.w,l=h+h,E=a+a,r=e+e,p=h*l,o=h*E,A=h*r,c=a*E,k=a*r,m=e*r,u=n*l,g=n*E,S=n*r;return t[0]=1-(c+m),t[1]=o-S,t[2]=A+g,t[3]=o+S,t[4]=1-(p+m),t[5]=k-u,t[6]=A-g,t[7]=k+u,t[8]=1-(p+c),this},invert:function(s){var t=this.elements,h=s.elements,a=h[0],e=h[3],n=h[6],l=h[1],E=h[4],r=h[7],p=h[2],o=h[5],A=h[8],c=A*E-o*r,k=-A*e+o*n,m=r*e-E*n,u=a*c+l*k+p*m;return u===0?(console.log("can't invert matrix, determinant is 0"),this.identity()):(u=1/u,t[0]=c*u,t[1]=(-A*l+p*r)*u,t[2]=(o*l-p*E)*u,t[3]=k*u,t[4]=(A*a-p*n)*u,t[5]=(-o*a+p*e)*u,t[6]=m*u,t[7]=(-r*a+l*n)*u,t[8]=(E*a-l*e)*u,this)},addOffset:function(s,t){var h=t.x,a=t.y,e=t.z,n=this.elements;n[0]+=s*(a*a+e*e),n[4]+=s*(h*h+e*e),n[8]+=s*(h*h+a*a);var l=s*h*a,E=s*a*e,r=s*e*h;return n[1]-=l,n[3]-=l,n[2]-=E,n[6]-=E,n[5]-=r,n[7]-=r,this},subOffset:function(s,t){var h=t.x,a=t.y,e=t.z,n=this.elements;n[0]-=s*(a*a+e*e),n[4]-=s*(h*h+e*e),n[8]-=s*(h*h+a*a);var l=s*h*a,E=s*a*e,r=s*e*h;return n[1]+=l,n[3]+=l,n[2]+=E,n[6]+=E,n[5]+=r,n[7]+=r,this},multiplyScalar:function(s){var t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new n2().fromArray(this.elements)},copy:function(s){for(var t=0;t<9;t++)this.elements[t]=s.elements[t];return this},determinant:function(){var s=this.elements,t=s[0],h=s[1],a=s[2],e=s[3],n=s[4],l=s[5],E=s[6],r=s[7],p=s[8];return t*n*p-t*l*r-h*e*p+h*l*E+a*e*r-a*n*E},fromArray:function(s,t){t===void 0&&(t=0);for(var h=0;h<9;h++)this.elements[h]=s[h+t];return this},toArray:function(s,t){s===void 0&&(s=[]),t===void 0&&(t=0);var h=this.elements;return s[t]=h[0],s[t+1]=h[1],s[t+2]=h[2],s[t+3]=h[3],s[t+4]=h[4],s[t+5]=h[5],s[t+6]=h[6],s[t+7]=h[7],s[t+8]=h[8],s}}),Object.assign(Ls.prototype,{AABB:!0,set:function(s,t,h,a,e,n){var l=this.elements;return l[0]=s,l[3]=t,l[1]=h,l[4]=a,l[2]=e,l[5]=n,this},intersectTest:function(s){var t=this.elements,h=s.elements;return t[0]>h[3]||t[1]>h[4]||t[2]>h[5]||t[3]<h[0]||t[4]<h[1]||t[5]<h[2]},intersectTestTwo:function(s){var t=this.elements,h=s.elements;return t[0]<h[0]||t[1]<h[1]||t[2]<h[2]||t[3]>h[3]||t[4]>h[4]||t[5]>h[5]},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(s,t){var h=t||0,a=s.elements;return this.set(a[0]-h,a[3]+h,a[1]-h,a[4]+h,a[2]-h,a[5]+h),this},fromArray:function(s){return this.elements.set(s),this},combine:function(s,t){var h=s.elements,a=t.elements,e=this.elements;return e[0]=h[0]<a[0]?h[0]:a[0],e[1]=h[1]<a[1]?h[1]:a[1],e[2]=h[2]<a[2]?h[2]:a[2],e[3]=h[3]>a[3]?h[3]:a[3],e[4]=h[4]>a[4]?h[4]:a[4],e[5]=h[5]>a[5]?h[5]:a[5],this},surfaceArea:function(){var s=this.elements,t=s[3]-s[0],h=s[4]-s[1],a=s[5]-s[2];return 2*(t*(h+a)+h*a)},intersectsWithPoint:function(s,t,h){var a=this.elements;return s>=a[0]&&s<=a[3]&&t>=a[1]&&t<=a[4]&&h>=a[2]&&h<=a[5]},setFromPoints:function(s){this.makeEmpty();for(var t=0;t<s.length;t++)this.expandByPoint(s[t])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(s){var t=this.elements;this.set(f.min(t[0],s.x),f.min(t[1],s.y),f.min(t[2],s.z),f.max(t[3],s.x),f.max(t[4],s.y),f.max(t[5],s.z))},expandByScalar:function(s){var t=this.elements;t[0]+=-s,t[1]+=-s,t[2]+=-s,t[3]+=s,t[4]+=s,t[5]+=s}});var F3=0;function Ds(s){this.type=qs,this.id=F3++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new B,this.rotation=new n2,this.relativePosition=new B().copy(s.relativePosition),this.relativeRotation=new n2().copy(s.relativeRotation),this.aabb=new Ls,this.density=s.density,this.friction=s.friction,this.restitution=s.restitution,this.belongsTo=s.belongsTo,this.collidesWith=s.collidesWith}function ct(s,t,h,a){Ds.call(this,s),this.type=Fs,this.width=t,this.height=h,this.depth=a,this.halfWidth=.5*t,this.halfHeight=.5*h,this.halfDepth=.5*a,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}function kt(s,t){Ds.call(this,s),this.type=us,this.radius=t}function mt(s,t,h){Ds.call(this,s),this.type=gs,this.radius=t,this.height=h,this.halfHeight=.5*h,this.normalDirection=new B,this.halfDirection=new B}function Ct(s,t){Ds.call(this,s),this.type=Bs,this.normal=new B(0,1,0)}function Pt(s,t){Ds.call(this,s),this.type=Js}function Xt(){this.relativePosition=new B,this.relativeRotation=new n2,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function L2(s,t){t=t||!1,this.axis=s,this.angle=0,this.lowerLimit=t?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}function tt(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}function Gt(s){this.prev=null,this.next=null,this.body=null,this.joint=s}function ps(s){tt.call(this),this.scale=1,this.invScale=1,this.name="",this.id=NaN,this.type=q2,this.prev=null,this.next=null,this.body1=s.body1,this.body2=s.body2,this.localAnchorPoint1=new B().copy(s.localAnchorPoint1),this.localAnchorPoint2=new B().copy(s.localAnchorPoint2),this.relativeAnchorPoint1=new B,this.relativeAnchorPoint2=new B,this.anchorPoint1=new B,this.anchorPoint2=new B,this.allowCollision=s.allowCollision,this.b1Link=new Gt(this),this.b2Link=new Gt(this)}function Vt(s){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=s,this.r1=s.relativeAnchorPoint1,this.r2=s.relativeAnchorPoint2,this.p1=s.anchorPoint1,this.p2=s.anchorPoint2,this.b1=s.body1,this.b2=s.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}function At(s,t,h,a){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=t,this.limitMotor2=h,this.limitMotor3=a,this.b1=s.body1,this.b2=s.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}function yt(s,t,h){ps.call(this,s),this.type=pt,this.localAxis1=s.localAxis1.clone().normalize(),this.localAxis2=s.localAxis2.clone().normalize();var a=new n2().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new B().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.limitMotor=new L2(this.nor,!1),this.limitMotor.lowerLimit=t,this.limitMotor.upperLimit=h,this.lc=new Vt(this),this.r3=new At(this,this.limitMotor,new L2(this.tan,!0),new L2(this.bin,!0))}function dt(s){ps.call(this,s),this.type=rt,this.lc=new Vt(this)}function $t(s,t){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=t,this.b1=s.body1,this.b2=s.body2,this.p1=s.anchorPoint1,this.p2=s.anchorPoint2,this.r1=s.relativeAnchorPoint1,this.r2=s.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}function ut(s,t,h){ps.call(this,s),this.type=Ws,this.nor=new B,this.limitMotor=new L2(this.nor,!0),this.limitMotor.lowerLimit=t,this.limitMotor.upperLimit=h,this.t=new $t(this,this.limitMotor)}function Qt(s,t){this.joint=s,this.targetOrientation=new Gi().invert(t),this.relativeOrientation=new Gi,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new B,this.imp=new B,this.rn0=new B,this.rn1=new B,this.rn2=new B,this.b1=s.body1,this.b2=s.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}function Ft(s,t,h,a){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=t,this.limitMotor2=h,this.limitMotor3=a,this.b1=s.body1,this.b2=s.body2,this.p1=s.anchorPoint1,this.p2=s.anchorPoint2,this.r1=s.relativeAnchorPoint1,this.r2=s.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}function Dt(s,t,h){ps.call(this,s),this.type=Et,this.localAxis1=s.localAxis1.clone().normalize(),this.localAxis2=s.localAxis2.clone().normalize(),this.ax1=new B,this.ax2=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.ac=new Qt(this,new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new L2(this.nor,!0),this.limitMotor.lowerLimit=t,this.limitMotor.upperLimit=h,this.t3=new Ft(this,this.limitMotor,new L2(this.tan,!0),new L2(this.bin,!0))}function Bt(s,t,h){ps.call(this,s),this.type=st,this.localAxis1=s.localAxis1.clone().normalize(),this.localAxis2=s.localAxis2.clone().normalize();var a=new n2().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new B().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.rotationalLimitMotor=new L2(this.nor,!1),this.r3=new At(this,this.rotationalLimitMotor,new L2(this.tan,!0),new L2(this.bin,!0)),this.translationalLimitMotor=new L2(this.nor,!0),this.translationalLimitMotor.lowerLimit=t,this.translationalLimitMotor.upperLimit=h,this.t3=new Ft(this,this.translationalLimitMotor,new L2(this.tan,!0),new L2(this.bin,!0))}function xt(s){ps.call(this,s),this.type=it,this.localAxis1=s.localAxis1.clone().normalize(),this.localAxis2=s.localAxis2.clone().normalize(),this.localAngle1=new B,this.localAngle2=new B;var t=f.dotVectors(this.localAxis1,this.localAxis2);if(t>-1&&t<1)this.localAngle1.set(this.localAxis2.x-t*this.localAxis1.x,this.localAxis2.y-t*this.localAxis1.y,this.localAxis2.z-t*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-t*this.localAxis2.x,this.localAxis1.y-t*this.localAxis2.y,this.localAxis1.z-t*this.localAxis2.z).normalize();else{var h=new n2().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(h,!0)}this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.translationalLimitMotor=new L2(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new L2(this.tan,!1),this.rotationalLimitMotor2=new L2(this.bin,!1),this.t3=new Ft(this,new L2(this.nor,!0),this.translationalLimitMotor,new L2(this.bin,!0)),this.t3.weight=1,this.r3=new At(this,new L2(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}function i3(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new B,this.localAnchorPoint2=new B,this.localAxis1=new B,this.localAxis2=new B,this.allowCollision=!1}function D3(){this.mass=0,this.inertia=new n2}function gt(s){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=s}function ft(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function bt(){this.warmStarted=!1,this.position=new B,this.localPoint1=new B,this.localPoint2=new B,this.normal=new B,this.tangent=new B,this.binormal=new B,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function Lt(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new bt,new bt,new bt,new bt]}function vt(){this.nor=new B,this.tan=new B,this.bin=new B,this.norU1=new B,this.tanU1=new B,this.binU1=new B,this.norU2=new B,this.tanU2=new B,this.binU2=new B,this.norT1=new B,this.tanT1=new B,this.binT1=new B,this.norT2=new B,this.tanT2=new B,this.binT2=new B,this.norTU1=new B,this.tanTU1=new B,this.binTU1=new B,this.norTU2=new B,this.tanTU2=new B,this.binTU2=new B,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function Tt(s){tt.call(this),this.manifold=s,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new B,this.tmpC1=new B,this.tmpC2=new B,this.tmpP1=new B,this.tmpP2=new B,this.tmplv1=new B,this.tmplv2=new B,this.tmpav1=new B,this.tmpav2=new B,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=s.points,this.cs=new vt,this.cs.next=new vt,this.cs.next.next=new vt,this.cs.next.next.next=new vt}function s3(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=f.INF,this.b1Link=new gt(this),this.b2Link=new gt(this),this.s1Link=new gt(this),this.s2Link=new gt(this),this.manifold=new Lt,this.buffer=[new ft,new ft,new ft,new ft],this.points=this.manifold.points,this.constraint=new Tt(this.manifold)}function Hs(s,t){this.position=s||new B,this.orientation=t||new Gi,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name="",this.prev=null,this.next=null,this.type=ot,this.massInfo=new D3,this.newPosition=new B,this.controlPos=!1,this.newOrientation=new Gi,this.newRotation=new B,this.currentRotation=new B,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new Gi,this.pos=new B,this.linearVelocity=new B,this.angularVelocity=new B,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new B,this.sleepOrientation=new Gi,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new n2,this.mass=0,this.inverseMass=0,this.inverseInertia=new n2,this.localInertia=new n2,this.inverseLocalInertia=new n2,this.tmpInertia=new n2,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}function B3(s,t){this.shape1=s||null,this.shape2=t||null}function Ys(){this.types=nt,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(Ds.prototype,{Shape:!0,calculateMassInfo:function(s){U2("Shape","Inheritance error.")},updateProxy:function(){U2("Shape","Inheritance error.")}}),ct.prototype=Object.assign(Object.create(Ds.prototype),{constructor:ct,calculateMassInfo:function(s){var t=this.width*this.height*this.depth*this.density;s.mass=t,s.inertia.set(t*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,t*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,t*(this.width*this.width+this.height*this.height)*(1/12))},updateProxy:function(){var s=this.rotation.elements,t=this.dimentions;t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8],t[9]=s[0]*this.halfWidth,t[10]=s[3]*this.halfWidth,t[11]=s[6]*this.halfWidth,t[12]=s[1]*this.halfHeight,t[13]=s[4]*this.halfHeight,t[14]=s[7]*this.halfHeight,t[15]=s[2]*this.halfDepth,t[16]=s[5]*this.halfDepth,t[17]=s[8]*this.halfDepth;var h=t[9],a=t[10],e=t[11],n=t[12],l=t[13],E=t[14],r=t[15],p=t[16],o=t[17],A=this.position.x,c=this.position.y,k=this.position.z,m=this.elements;m[0]=A+h+n+r,m[1]=c+a+l+p,m[2]=k+e+E+o,m[3]=A+h+n-r,m[4]=c+a+l-p,m[5]=k+e+E-o,m[6]=A+h-n+r,m[7]=c+a-l+p,m[8]=k+e-E+o,m[9]=A+h-n-r,m[10]=c+a-l-p,m[11]=k+e-E-o,m[12]=A-h+n+r,m[13]=c-a+l+p,m[14]=k-e+E+o,m[15]=A-h+n-r,m[16]=c-a+l-p,m[17]=k-e+E-o,m[18]=A-h-n+r,m[19]=c-a-l+p,m[20]=k-e-E+o,m[21]=A-h-n-r,m[22]=c-a-l-p,m[23]=k-e-E-o;var u=t[9]<0?-t[9]:t[9],g=t[10]<0?-t[10]:t[10],S=t[11]<0?-t[11]:t[11];u=t[12]<0?u-t[12]:u+t[12],g=t[13]<0?g-t[13]:g+t[13],S=t[14]<0?S-t[14]:S+t[14],u=t[15]<0?u-t[15]:u+t[15],g=t[16]<0?g-t[16]:g+t[16],S=t[17]<0?S-t[17]:S+t[17];var d=.005;this.aabb.set(this.position.x-u-d,this.position.x+u+d,this.position.y-g-d,this.position.y+g+d,this.position.z-S-d,this.position.z+S+d),this.proxy!=null&&this.proxy.update()}}),kt.prototype=Object.assign(Object.create(Ds.prototype),{constructor:kt,volume:function(){return f.PI*this.radius*1.333333},calculateMassInfo:function(s){var t=this.volume()*this.radius*this.radius*this.density;s.mass=t;var h=t*this.radius*this.radius*.4;s.inertia.set(h,0,0,0,h,0,0,0,h)},updateProxy:function(){var s=.005;this.aabb.set(this.position.x-this.radius-s,this.position.x+this.radius+s,this.position.y-this.radius-s,this.position.y+this.radius+s,this.position.z-this.radius-s,this.position.z+this.radius+s),this.proxy!=null&&this.proxy.update()}}),mt.prototype=Object.assign(Object.create(Ds.prototype),{constructor:mt,calculateMassInfo:function(s){var t=this.radius*this.radius,h=f.PI*t*this.height*this.density,a=(.25*t+.0833*this.height*this.height)*h,e=.5*t;s.mass=h,s.inertia.set(a,0,0,0,e,0,0,0,a)},updateProxy:function(){var s,t,h,a,e,n,l,E,r,p,o,A=this.rotation.elements;e=A[1]*A[1],n=A[4]*A[4],l=A[7]*A[7],this.normalDirection.set(A[1],A[4],A[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),t=1-e,(s=f.sqrt(t*t+e*n+e*l))>0&&(s=this.radius/s),t*=s,h=1-n,(s=f.sqrt(n*e+h*h+n*l))>0&&(s=this.radius/s),h*=s,a=1-l,(s=f.sqrt(l*e+l*n+a*a))>0&&(s=this.radius/s),a*=s,E=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,r=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,p=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,E=t<0?E-t:E+t,r=h<0?r-h:r+h,p=a<0?p-a:p+a,o=.005,this.aabb.set(this.position.x-E-o,this.position.x+E+o,this.position.y-r-o,this.position.y+r+o,this.position.z-p-o,this.position.z+p+o),this.proxy!=null&&this.proxy.update()}}),Ct.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Ct,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(s){s.mass=this.density,s.inertia.set(1,0,0,0,1,0,0,0,1)},updateProxy:function(){var s=.005,t=-f.INF,h=f.INF,a=this.normal;this.aabb.set(a.x===-1?this.position.x-s:t,a.x===1?this.position.x+s:h,a.y===-1?this.position.y-s:t,a.y===1?this.position.y+s:h,a.z===-1?this.position.z-s:t,a.z===1?this.position.z+s:h),this.proxy!=null&&this.proxy.update()}}),Pt.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Pt,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(s){s.inertia.set(0,0,0,0,0,0,0,0,0)},updateProxy:function(){this.aabb.set(this.position.x-0,this.position.x+0,this.position.y-0,this.position.y+0,this.position.z-0,this.position.z+0),this.proxy!=null&&this.proxy.update()}}),Object.assign(L2.prototype,{LimitMotor:!0,setLimit:function(s,t){this.lowerLimit=s,this.upperLimit=t},setMotor:function(s,t){this.motorSpeed=s,this.maxMotorForce=t},setSpring:function(s,t){this.frequency=s,this.dampingRatio=t}}),Object.assign(tt.prototype,{Constraint:!0,preSolve:function(s,t){U2("Constraint","Inheritance error.")},solve:function(){U2("Constraint","Inheritance error.")},postSolve:function(){U2("Constraint","Inheritance error.")}}),ps.prototype=Object.assign(Object.create(tt.prototype),{constructor:ps,setId:function(s){this.id=i},setParent:function(s){this.parent=s,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name="J"+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(s){this.b1Link.body=this.body2,this.b2Link.body=this.body1,s?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(this.body1.jointLink!=null?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,this.body2.jointLink!=null?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(s){if(s)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var t=this.b1Link.prev,h=this.b1Link.next;t!=null&&(t.next=h),h!=null&&(h.prev=t),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=h),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,t=this.b2Link.prev,h=this.b2Link.next,t!=null&&(t.next=h),h!=null&&(h.prev=t),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=h),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(s,t){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){return[new B().scale(this.anchorPoint1,this.scale),new B().scale(this.anchorPoint2,this.scale)]}}),Object.assign(Vt.prototype,{LinearConstraint:!0,preSolve:function(s,t){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var h=this.ii1.elements,a=this.ii2.elements;this.ax1x=this.r1z*h[1]+-this.r1y*h[2],this.ax1y=this.r1z*h[4]+-this.r1y*h[5],this.ax1z=this.r1z*h[7]+-this.r1y*h[8],this.ay1x=-this.r1z*h[0]+this.r1x*h[2],this.ay1y=-this.r1z*h[3]+this.r1x*h[5],this.ay1z=-this.r1z*h[6]+this.r1x*h[8],this.az1x=this.r1y*h[0]+-this.r1x*h[1],this.az1y=this.r1y*h[3]+-this.r1x*h[4],this.az1z=this.r1y*h[6]+-this.r1x*h[7],this.ax2x=this.r2z*a[1]+-this.r2y*a[2],this.ax2y=this.r2z*a[4]+-this.r2y*a[5],this.ax2z=this.r2z*a[7]+-this.r2y*a[8],this.ay2x=-this.r2z*a[0]+this.r2x*a[2],this.ay2y=-this.r2z*a[3]+this.r2x*a[5],this.ay2z=-this.r2z*a[6]+this.r2x*a[8],this.az2x=this.r2y*a[0]+-this.r2x*a[1],this.az2y=this.r2y*a[3]+-this.r2x*a[4],this.az2z=this.r2y*a[6]+-this.r2x*a[7];var e=this.m1+this.m2,n=new n2().set(e,0,0,0,e,0,0,0,e).elements;n[0]+=h[4]*this.r1z*this.r1z-(h[7]+h[5])*this.r1y*this.r1z+h[8]*this.r1y*this.r1y,n[1]+=(h[6]*this.r1y+h[5]*this.r1x)*this.r1z-h[3]*this.r1z*this.r1z-h[8]*this.r1x*this.r1y,n[2]+=(h[3]*this.r1y-h[4]*this.r1x)*this.r1z-h[6]*this.r1y*this.r1y+h[7]*this.r1x*this.r1y,n[3]+=(h[2]*this.r1y+h[7]*this.r1x)*this.r1z-h[1]*this.r1z*this.r1z-h[8]*this.r1x*this.r1y,n[4]+=h[0]*this.r1z*this.r1z-(h[6]+h[2])*this.r1x*this.r1z+h[8]*this.r1x*this.r1x,n[5]+=(h[1]*this.r1x-h[0]*this.r1y)*this.r1z-h[7]*this.r1x*this.r1x+h[6]*this.r1x*this.r1y,n[6]+=(h[1]*this.r1y-h[4]*this.r1x)*this.r1z-h[2]*this.r1y*this.r1y+h[5]*this.r1x*this.r1y,n[7]+=(h[3]*this.r1x-h[0]*this.r1y)*this.r1z-h[5]*this.r1x*this.r1x+h[2]*this.r1x*this.r1y,n[8]+=h[0]*this.r1y*this.r1y-(h[3]+h[1])*this.r1x*this.r1y+h[4]*this.r1x*this.r1x,n[0]+=a[4]*this.r2z*this.r2z-(a[7]+a[5])*this.r2y*this.r2z+a[8]*this.r2y*this.r2y,n[1]+=(a[6]*this.r2y+a[5]*this.r2x)*this.r2z-a[3]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,n[2]+=(a[3]*this.r2y-a[4]*this.r2x)*this.r2z-a[6]*this.r2y*this.r2y+a[7]*this.r2x*this.r2y,n[3]+=(a[2]*this.r2y+a[7]*this.r2x)*this.r2z-a[1]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,n[4]+=a[0]*this.r2z*this.r2z-(a[6]+a[2])*this.r2x*this.r2z+a[8]*this.r2x*this.r2x,n[5]+=(a[1]*this.r2x-a[0]*this.r2y)*this.r2z-a[7]*this.r2x*this.r2x+a[6]*this.r2x*this.r2y,n[6]+=(a[1]*this.r2y-a[4]*this.r2x)*this.r2z-a[2]*this.r2y*this.r2y+a[5]*this.r2x*this.r2y,n[7]+=(a[3]*this.r2x-a[0]*this.r2y)*this.r2z-a[5]*this.r2x*this.r2x+a[2]*this.r2x*this.r2y,n[8]+=a[0]*this.r2y*this.r2y-(a[3]+a[1])*this.r2x*this.r2y+a[4]*this.r2x*this.r2x;var l=1/(n[0]*(n[4]*n[8]-n[7]*n[5])+n[3]*(n[7]*n[2]-n[1]*n[8])+n[6]*(n[1]*n[5]-n[4]*n[2]));this.dd=new n2().set(n[4]*n[8]-n[5]*n[7],n[2]*n[7]-n[1]*n[8],n[1]*n[5]-n[2]*n[4],n[5]*n[6]-n[3]*n[8],n[0]*n[8]-n[2]*n[6],n[2]*n[3]-n[0]*n[5],n[3]*n[7]-n[4]*n[6],n[1]*n[6]-n[0]*n[7],n[0]*n[4]-n[1]*n[3]).scaleEqual(l),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var E=f.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);E>.005?(E=(.005-E)/E*t*.05,this.velx*=E,this.vely*=E,this.velz*=E):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var s=this.dd.elements,t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,h=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,a=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,e=t*s[0]+h*s[1]+a*s[2],n=t*s[3]+h*s[4]+a*s[5],l=t*s[6]+h*s[7]+a*s[8];this.impx+=e,this.impy+=n,this.impz+=l,this.l1.x+=e*this.m1,this.l1.y+=n*this.m1,this.l1.z+=l*this.m1,this.a1.x+=e*this.ax1x+n*this.ay1x+l*this.az1x,this.a1.y+=e*this.ax1y+n*this.ay1y+l*this.az1y,this.a1.z+=e*this.ax1z+n*this.ay1z+l*this.az1z,this.l2.x-=e*this.m2,this.l2.y-=n*this.m2,this.l2.z-=l*this.m2,this.a2.x-=e*this.ax2x+n*this.ay2x+l*this.az2x,this.a2.y-=e*this.ax2y+n*this.ay2y+l*this.az2y,this.a2.z-=e*this.ax2z+n*this.ay2z+l*this.az2z}}),Object.assign(At.prototype,{Rotational3Constraint:!0,preSolve:function(s,t){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var h=this.i1.elements,a=this.i2.elements;this.i1e00=h[0],this.i1e01=h[1],this.i1e02=h[2],this.i1e10=h[3],this.i1e11=h[4],this.i1e12=h[5],this.i1e20=h[6],this.i1e21=h[7],this.i1e22=h[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var e=this.limitMotor1.frequency,n=this.limitMotor2.frequency,l=this.limitMotor3.frequency,E=e>0,r=n>0,p=l>0,o=this.lowerLimit1<=this.upperLimit1,A=this.lowerLimit2<=this.upperLimit2,c=this.lowerLimit3<=this.upperLimit3,k=this.limitMotor1.angle;o?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-k):k<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-k):k>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-k):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),E||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var m=this.limitMotor2.angle;A?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-m):m<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-m):m>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-m):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),r||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var u=this.limitMotor3.angle;if(c?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-u):u<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-u):u>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-u):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),p||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||E)?this.maxMotorImpulse1=this.maxMotorForce1*s:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||r)?this.maxMotorImpulse2=this.maxMotorForce2*s:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||p)?this.maxMotorImpulse3=this.maxMotorForce3*s:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,E&&this.limitState1!=2){var g=6.2831853*e,S=g*g*s,d=t/(S+2*this.limitMotor1.dampingRatio*g);this.cfm1=this.kv00*d,this.limitVelocity1*=S*d}else this.cfm1=0,this.limitVelocity1*=.05*t;r&&this.limitState2!=2?(d=t/((S=(g=6.2831853*n)*g*s)+2*this.limitMotor2.dampingRatio*g),this.cfm2=this.kv11*d,this.limitVelocity2*=S*d):(this.cfm2=0,this.limitVelocity2*=.05*t),p&&this.limitState3!=2?(d=t/((S=(g=6.2831853*l)*g*s)+2*this.limitMotor3.dampingRatio*g),this.cfm3=this.kv22*d,this.limitVelocity3*=S*d):(this.cfm3=0,this.limitVelocity3*=.05*t),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var I=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*I,this.d01=(this.k02*this.k21-this.k01*this.k22)*I,this.d02=(this.k01*this.k12-this.k02*this.k11)*I,this.d10=(this.k12*this.k20-this.k10*this.k22)*I,this.d11=(this.k00*this.k22-this.k02*this.k20)*I,this.d12=(this.k02*this.k10-this.k00*this.k12)*I,this.d20=(this.k10*this.k21-this.k11*this.k20)*I,this.d21=(this.k01*this.k20-this.k00*this.k21)*I,this.d22=(this.k00*this.k11-this.k01*this.k10)*I,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var M=this.limitImpulse1+this.motorImpulse1,O=this.limitImpulse2+this.motorImpulse2,R=this.limitImpulse3+this.motorImpulse3;this.a1.x+=M*this.a1x1+O*this.a1x2+R*this.a1x3,this.a1.y+=M*this.a1y1+O*this.a1y2+R*this.a1y3,this.a1.z+=M*this.a1z1+O*this.a1z2+R*this.a1z3,this.a2.x-=M*this.a2x1+O*this.a2x2+R*this.a2x3,this.a2.y-=M*this.a2y1+O*this.a2y2+R*this.a2y3,this.a2.z-=M*this.a2z1+O*this.a2z2+R*this.a2z3},solve_:function(){var s=this.a2.x-this.a1.x,t=this.a2.y-this.a1.y,h=this.a2.z-this.a1.z;this.limitVelocity3=30;var a=s*this.ax1+t*this.ay1+h*this.az1-this.limitVelocity1,e=s*this.ax2+t*this.ay2+h*this.az2-this.limitVelocity2,n=s*this.ax3+t*this.ay3+h*this.az3-this.limitVelocity3,l=a*this.d00+e*this.d01+n*this.d02,E=a*this.d10+e*this.d11+n*this.d12,r=a*this.d20+e*this.d21+n*this.d22;this.limitImpulse1+=l,this.limitImpulse2+=E,this.limitImpulse3+=r,this.a1.x+=l*this.a1x1+E*this.a1x2+r*this.a1x3,this.a1.y+=l*this.a1y1+E*this.a1y2+r*this.a1y3,this.a1.z+=l*this.a1z1+E*this.a1z2+r*this.a1z3,this.a2.x-=l*this.a2x1+E*this.a2x2+r*this.a2x3,this.a2.y-=l*this.a2y1+E*this.a2y2+r*this.a2y3,this.a2.z-=l*this.a2z1+E*this.a2z2+r*this.a2z3},solve:function(){var s=this.a2.x-this.a1.x,t=this.a2.y-this.a1.y,h=this.a2.z-this.a1.z,a=s*this.ax1+t*this.ay1+h*this.az1,e=s*this.ax2+t*this.ay2+h*this.az2,n=s*this.ax3+t*this.ay3+h*this.az3,l=this.motorImpulse1,E=this.motorImpulse2,r=this.motorImpulse3,p=0,o=0,A=0;this.enableMotor1&&(p=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=p,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),p=this.motorImpulse1-l),this.enableMotor2&&(o=(e-this.motorSpeed2)*this.dv11,this.motorImpulse2+=o,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),o=this.motorImpulse2-E),this.enableMotor3&&(A=(n-this.motorSpeed3)*this.dv22,this.motorImpulse3+=A,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),A=this.motorImpulse3-r),a+=p*this.kv00+o*this.k01+A*this.k02,e+=p*this.k10+o*this.kv11+A*this.k12,n+=p*this.k20+o*this.k21+A*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,e-=this.limitVelocity2+this.limitImpulse2*this.cfm2,n-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var c=this.limitImpulse1,k=this.limitImpulse2,m=this.limitImpulse3,u=a*this.d00+e*this.d01+n*this.d02,g=a*this.d10+e*this.d11+n*this.d12,S=a*this.d20+e*this.d21+n*this.d22;this.limitImpulse1+=u,this.limitImpulse2+=g,this.limitImpulse3+=S;var d,I=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(e+=(u=-c)*this.k10,n+=u*this.k20,I|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(g=-k)*this.k01,n+=g*this.k21,I|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(S=-m)*this.k02,e+=S*this.k12,I|=4),I){case 1:d=1/(this.k11*this.k22-this.k12*this.k21),g=(this.k22*e+-this.k12*n)*d,S=(-this.k21*e+this.k11*n)*d;break;case 2:d=1/(this.k00*this.k22-this.k02*this.k20),u=(this.k22*a+-this.k02*n)*d,S=(-this.k20*a+this.k00*n)*d;break;case 3:S=n/this.k22;break;case 4:d=1/(this.k00*this.k11-this.k01*this.k10),u=(this.k11*a+-this.k01*e)*d,g=(-this.k10*a+this.k00*e)*d;break;case 5:g=e/this.k11;break;case 6:u=a/this.k00}this.limitImpulse1=u+c,this.limitImpulse2=g+k,this.limitImpulse3=S+m;var M=p+u,O=o+g,R=A+S;this.a1.x+=M*this.a1x1+O*this.a1x2+R*this.a1x3,this.a1.y+=M*this.a1y1+O*this.a1y2+R*this.a1y3,this.a1.z+=M*this.a1z1+O*this.a1z2+R*this.a1z3,this.a2.x-=M*this.a2x1+O*this.a2x2+R*this.a2x3,this.a2.y-=M*this.a2y1+O*this.a2y2+R*this.a2y3,this.a2.z-=M*this.a2z1+O*this.a2z2+R*this.a2z3,s=this.a2.x-this.a1.x,t=this.a2.y-this.a1.y,h=this.a2.z-this.a1.z,e=s*this.ax2+t*this.ay2+h*this.az2}}),yt.prototype=Object.assign(Object.create(ps.prototype),{constructor:yt,preSolve:function(s,t){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var h=f.acosClamp(f.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),f.dotVectors(this.nor,this.tmp)<0?this.limitMotor.angle=-h:this.limitMotor.angle=h,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=f.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=f.dotVectors(this.bin,this.tmp),this.r3.preSolve(s,t),this.lc.preSolve(s,t)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}}),dt.prototype=Object.assign(Object.create(ps.prototype),{constructor:dt,preSolve:function(s,t){this.updateAnchorPoints(),this.lc.preSolve(s,t)},solve:function(){this.lc.solve()},postSolve:function(){}}),Object.assign($t.prototype,{TranslationalConstraint:!0,preSolve:function(s,t){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var h=this.i1.elements,a=this.i2.elements;this.i1e00=h[0],this.i1e01=h[1],this.i1e02=h[2],this.i1e10=h[3],this.i1e11=h[4],this.i1e12=h[5],this.i1e20=h[6],this.i1e21=h[7],this.i1e22=h[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var e=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,l=this.p2.z-this.p1.z,E=e*this.ax+n*this.ay+l*this.az,r=this.limitMotor.frequency,p=r>0;(p&&E>20||E<-20)&&(p=!1),this.lowerLimit<=this.upperLimit?(this.lowerLimit==this.upperLimit?(this.limitState!=0&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-E,p||(E=this.lowerLimit)):E<this.lowerLimit?(this.limitState!=-1&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-E,p||(E=this.lowerLimit)):E>this.upperLimit?(this.limitState!=1&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-E,p||(E=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),p||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(this.limitState!=0||p)?this.maxMotorImpulse=this.maxMotorForce*s:(this.motorImpulse=0,this.maxMotorImpulse=0);var o=E*this.ax,A=E*this.ay,c=E*this.az,k=this.m1/(this.m1+this.m2),m=1-k;if(this.r1x=this.r1.x+o*k,this.r1y=this.r1.y+A*k,this.r1z=this.r1.z+c*k,this.r2x=this.r2.x-o*m,this.r2y=this.r2.y-A*m,this.r2z=this.r2.z-c*m,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,p&&this.limitState!=2){var u=6.2831853*r,g=u*u*s,S=t/(g+2*this.limitMotor.dampingRatio*u);this.cfm=this.motorDenom*S,this.limitVelocity*=g*S}else this.cfm=0,this.limitVelocity*=.05*t;this.invDenom=1/(this.motorDenom+this.cfm);var d=this.limitImpulse+this.motorImpulse;this.l1.x+=d*this.l1x,this.l1.y+=d*this.l1y,this.l1.z+=d*this.l1z,this.a1.x+=d*this.a1x,this.a1.y+=d*this.a1y,this.a1.z+=d*this.a1z,this.l2.x-=d*this.l2x,this.l2.y-=d*this.l2y,this.l2.z-=d*this.l2z,this.a2.x-=d*this.a2x,this.a2.y-=d*this.a2y,this.a2.z-=d*this.a2z},solve:function(){var s,t,h=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){s=(h-this.motorSpeed)*this.invMotorDenom;var a=this.motorImpulse;this.motorImpulse+=s,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),h-=(s=this.motorImpulse-a)*this.motorDenom}else s=0;if(this.limitState!=2){t=(h-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var e=this.limitImpulse;this.limitImpulse+=t,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),t=this.limitImpulse-e}else t=0;var n=t+s;this.l1.x+=n*this.l1x,this.l1.y+=n*this.l1y,this.l1.z+=n*this.l1z,this.a1.x+=n*this.a1x,this.a1.y+=n*this.a1y,this.a1.z+=n*this.a1z,this.l2.x-=n*this.l2x,this.l2.y-=n*this.l2y,this.l2.z-=n*this.l2z,this.a2.x-=n*this.a2x,this.a2.y-=n*this.a2y,this.a2.z-=n*this.a2z}}),ut.prototype=Object.assign(Object.create(ps.prototype),{constructor:ut,preSolve:function(s,t){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(s,t)},solve:function(){this.t.solve()},postSolve:function(){}}),Object.assign(Qt.prototype,{AngularConstraint:!0,preSolve:function(s,t){var h,a,e;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),h=1/((e=new n2().add(this.ii1,this.ii2).elements)[0]*(e[4]*e[8]-e[7]*e[5])+e[3]*(e[7]*e[2]-e[1]*e[8])+e[6]*(e[1]*e[5]-e[4]*e[2])),this.dd=new n2().set(e[4]*e[8]-e[5]*e[7],e[2]*e[7]-e[1]*e[8],e[1]*e[5]-e[2]*e[4],e[5]*e[6]-e[3]*e[8],e[0]*e[8]-e[2]*e[6],e[2]*e[3]-e[0]*e[5],e[3]*e[7]-e[4]*e[6],e[1]*e[6]-e[0]*e[7],e[0]*e[4]-e[1]*e[3]).multiplyScalar(h),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),h=2*this.relativeOrientation.w,this.vel.copy(this.relativeOrientation).multiplyScalar(h),(a=this.vel.length())>.02?(a=(.02-a)/a*t*.05,this.vel.multiplyScalar(a)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var s=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(s).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}}),Object.assign(Ft.prototype,{Translational3Constraint:!0,preSolve:function(s,t){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var h=this.i1.elements,a=this.i2.elements;this.i1e00=h[0],this.i1e01=h[1],this.i1e02=h[2],this.i1e10=h[3],this.i1e11=h[4],this.i1e12=h[5],this.i1e20=h[6],this.i1e21=h[7],this.i1e22=h[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var e=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,l=this.p2.z-this.p1.z,E=e*this.ax1+n*this.ay1+l*this.az1,r=e*this.ax2+n*this.ay2+l*this.az2,p=e*this.ax3+n*this.ay3+l*this.az3,o=this.limitMotor1.frequency,A=this.limitMotor2.frequency,c=this.limitMotor3.frequency,k=o>0,m=A>0,u=c>0,g=this.lowerLimit1<=this.upperLimit1,S=this.lowerLimit2<=this.upperLimit2,d=this.lowerLimit3<=this.upperLimit3;(k&&E>20||E<-20)&&(k=!1),(m&&r>20||r<-20)&&(m=!1),(u&&p>20||p<-20)&&(u=!1),g?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-E,k||(E=this.lowerLimit1)):E<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-E,k||(E=this.lowerLimit1)):E>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-E,k||(E=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),k||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),S?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-r,m||(r=this.lowerLimit2)):r<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-r,m||(r=this.lowerLimit2)):r>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-r,m||(r=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),m||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),d?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-p,u||(p=this.lowerLimit3)):p<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-p,u||(p=this.lowerLimit3)):p>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-p,u||(p=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),u||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||k)?this.maxMotorImpulse1=this.maxMotorForce1*s:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||m)?this.maxMotorImpulse2=this.maxMotorForce2*s:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||u)?this.maxMotorImpulse3=this.maxMotorForce3*s:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var I=E*this.ax1+r*this.ax2+p*this.ax2,M=E*this.ay1+r*this.ay2+p*this.ay2,O=E*this.az1+r*this.az2+p*this.az2,R=this.m2/(this.m1+this.m2);this.weight>=0&&(R=this.weight);var P=1-R;this.r1x=this.r1.x+I*R,this.r1y=this.r1.y+M*R,this.r1z=this.r1.z+O*R,this.r2x=this.r2.x-I*P,this.r2y=this.r2.y-M*P,this.r2z=this.r2.z-O*P,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var $=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*$,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*$,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*$,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*$,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*$,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*$,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*$,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*$,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*$,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,k&&this.limitState1!=2){var z=6.2831853*o,L=z*z*s,_=t/(L+2*this.limitMotor1.dampingRatio*z);this.cfm1=this.kv00*_,this.limitVelocity1*=L*_}else this.cfm1=0,this.limitVelocity1*=.05*t;m&&this.limitState2!=2?(_=t/((L=(z=6.2831853*A)*z*s)+2*this.limitMotor2.dampingRatio*z),this.cfm2=this.kv11*_,this.limitVelocity2*=L*_):(this.cfm2=0,this.limitVelocity2*=.05*t),u&&this.limitState3!=2?(_=t/((L=(z=6.2831853*c)*z*s)+2*this.limitMotor3.dampingRatio*z),this.cfm3=this.kv22*_,this.limitVelocity3*=L*_):(this.cfm3=0,this.limitVelocity3*=.05*t),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var w=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*w,this.d01=(this.k02*this.k21-this.k01*this.k22)*w,this.d02=(this.k01*this.k12-this.k02*this.k11)*w,this.d10=(this.k12*this.k20-this.k10*this.k22)*w,this.d11=(this.k00*this.k22-this.k02*this.k20)*w,this.d12=(this.k02*this.k10-this.k00*this.k12)*w,this.d20=(this.k10*this.k21-this.k11*this.k20)*w,this.d21=(this.k01*this.k20-this.k00*this.k21)*w,this.d22=(this.k00*this.k11-this.k01*this.k10)*w;var T=this.limitImpulse1+this.motorImpulse1,U=this.limitImpulse2+this.motorImpulse2,ri=this.limitImpulse3+this.motorImpulse3;this.l1.x+=T*this.l1x1+U*this.l1x2+ri*this.l1x3,this.l1.y+=T*this.l1y1+U*this.l1y2+ri*this.l1y3,this.l1.z+=T*this.l1z1+U*this.l1z2+ri*this.l1z3,this.a1.x+=T*this.a1x1+U*this.a1x2+ri*this.a1x3,this.a1.y+=T*this.a1y1+U*this.a1y2+ri*this.a1y3,this.a1.z+=T*this.a1z1+U*this.a1z2+ri*this.a1z3,this.l2.x-=T*this.l2x1+U*this.l2x2+ri*this.l2x3,this.l2.y-=T*this.l2y1+U*this.l2y2+ri*this.l2y3,this.l2.z-=T*this.l2z1+U*this.l2z2+ri*this.l2z3,this.a2.x-=T*this.a2x1+U*this.a2x2+ri*this.a2x3,this.a2.y-=T*this.a2y1+U*this.a2y2+ri*this.a2y3,this.a2.z-=T*this.a2z1+U*this.a2z2+ri*this.a2z3},solve:function(){var s=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,t=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,h=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,a=s*this.ax1+t*this.ay1+h*this.az1,e=s*this.ax2+t*this.ay2+h*this.az2,n=s*this.ax3+t*this.ay3+h*this.az3,l=this.motorImpulse1,E=this.motorImpulse2,r=this.motorImpulse3,p=0,o=0,A=0;this.enableMotor1&&(p=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=p,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),p=this.motorImpulse1-l),this.enableMotor2&&(o=(e-this.motorSpeed2)*this.dv11,this.motorImpulse2+=o,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),o=this.motorImpulse2-E),this.enableMotor3&&(A=(n-this.motorSpeed3)*this.dv22,this.motorImpulse3+=A,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),A=this.motorImpulse3-r),a+=p*this.kv00+o*this.k01+A*this.k02,e+=p*this.k10+o*this.kv11+A*this.k12,n+=p*this.k20+o*this.k21+A*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,e-=this.limitVelocity2+this.limitImpulse2*this.cfm2,n-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var c=this.limitImpulse1,k=this.limitImpulse2,m=this.limitImpulse3,u=a*this.d00+e*this.d01+n*this.d02,g=a*this.d10+e*this.d11+n*this.d12,S=a*this.d20+e*this.d21+n*this.d22;this.limitImpulse1+=u,this.limitImpulse2+=g,this.limitImpulse3+=S;var d,I=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(e+=(u=-c)*this.k10,n+=u*this.k20,I|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(g=-k)*this.k01,n+=g*this.k21,I|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(S=-m)*this.k02,e+=S*this.k12,I|=4),I){case 1:d=1/(this.k11*this.k22-this.k12*this.k21),g=(this.k22*e+-this.k12*n)*d,S=(-this.k21*e+this.k11*n)*d;break;case 2:d=1/(this.k00*this.k22-this.k02*this.k20),u=(this.k22*a+-this.k02*n)*d,S=(-this.k20*a+this.k00*n)*d;break;case 3:S=n/this.k22;break;case 4:d=1/(this.k00*this.k11-this.k01*this.k10),u=(this.k11*a+-this.k01*e)*d,g=(-this.k10*a+this.k00*e)*d;break;case 5:g=e/this.k11;break;case 6:u=a/this.k00}this.limitImpulse1=c+u,this.limitImpulse2=k+g,this.limitImpulse3=m+S;var M=p+u,O=o+g,R=A+S;this.l1.x+=M*this.l1x1+O*this.l1x2+R*this.l1x3,this.l1.y+=M*this.l1y1+O*this.l1y2+R*this.l1y3,this.l1.z+=M*this.l1z1+O*this.l1z2+R*this.l1z3,this.a1.x+=M*this.a1x1+O*this.a1x2+R*this.a1x3,this.a1.y+=M*this.a1y1+O*this.a1y2+R*this.a1y3,this.a1.z+=M*this.a1z1+O*this.a1z2+R*this.a1z3,this.l2.x-=M*this.l2x1+O*this.l2x2+R*this.l2x3,this.l2.y-=M*this.l2y1+O*this.l2y2+R*this.l2y3,this.l2.z-=M*this.l2z1+O*this.l2z2+R*this.l2z3,this.a2.x-=M*this.a2x1+O*this.a2x2+R*this.a2x3,this.a2.y-=M*this.a2y1+O*this.a2y2+R*this.a2y3,this.a2.z-=M*this.a2z1+O*this.a2z2+R*this.a2z3}}),Dt.prototype=Object.assign(Object.create(ps.prototype),{constructor:Dt,preSolve:function(s,t){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(s,t),this.t3.preSolve(s,t)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}}),Bt.prototype=Object.assign(Object.create(ps.prototype),{constructor:Bt,preSolve:function(s,t){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var h=f.acosClamp(f.dotVectors(this.an1,this.an2));f.dotVectors(this.nor,this.tmp)<0?this.rotationalLimitMotor.angle=-h:this.rotationalLimitMotor.angle=h,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=f.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=f.dotVectors(this.bin,this.tmp),this.r3.preSolve(s,t),this.t3.preSolve(s,t)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),xt.prototype=Object.assign(Object.create(ps.prototype),{constructor:xt,preSolve:function(s,t){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=f.dotVectors(this.ax1,this.ax2);var h=f.dotVectors(this.an1,this.ax2);f.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))<0?this.rotationalLimitMotor1.angle=-h:this.rotationalLimitMotor1.angle=h,h=f.dotVectors(this.an2,this.ax1),f.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))<0?this.rotationalLimitMotor2.angle=-h:this.rotationalLimitMotor2.angle=h,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(s,t),this.t3.preSolve(s,t)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),Lt.prototype={constructor:Lt,reset:function(s,t){this.body1=s.parent,this.body2=t.parent,this.numPoints=0},addPointVec:function(s,t,h,a){var e=this.points[this.numPoints++];e.position.copy(s),e.localPoint1.sub(s,this.body1.position).applyMatrix3(this.body1.rotation),e.localPoint2.sub(s,this.body2.position).applyMatrix3(this.body2.rotation),e.normal.copy(t),a&&e.normal.negate(),e.normalImpulse=0,e.penetration=h,e.warmStarted=!1},addPoint:function(s,t,h,a,e,n,l,E){var r=this.points[this.numPoints++];r.position.set(s,t,h),r.localPoint1.sub(r.position,this.body1.position).applyMatrix3(this.body1.rotation),r.localPoint2.sub(r.position,this.body2.position).applyMatrix3(this.body2.rotation),r.normalImpulse=0,r.normal.set(a,e,n),E&&r.normal.negate(),r.penetration=l,r.warmStarted=!1}},Tt.prototype=Object.assign(Object.create(tt.prototype),{constructor:Tt,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(s,t){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var h=this.m1+this.m2;this.num=this.manifold.numPoints;for(var a,e,n,l,E,r,p,o=this.cs,A=0;A<this.num;A++)a=this.ps[A],this.tmpP1.sub(a.position,this.p1),this.tmpP2.sub(a.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),o.norImp=a.normalImpulse,o.tanImp=a.tangentImpulse,o.binImp=a.binormalImpulse,o.nor.copy(a.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),e=f.dotVectors(o.nor,this.tmp),o.tan.set(this.tmp.x-e*o.nor.x,this.tmp.y-e*o.nor.y,this.tmp.z-e*o.nor.z),f.dotVectors(o.tan,o.tan)<=.04&&o.tan.tangent(o.nor),o.tan.normalize(),o.bin.crossVectors(o.nor,o.tan),o.norU1.scale(o.nor,this.m1),o.norU2.scale(o.nor,this.m2),o.tanU1.scale(o.tan,this.m1),o.tanU2.scale(o.tan,this.m2),o.binU1.scale(o.bin,this.m1),o.binU2.scale(o.bin,this.m2),o.norT1.crossVectors(this.tmpP1,o.nor),o.tanT1.crossVectors(this.tmpP1,o.tan),o.binT1.crossVectors(this.tmpP1,o.bin),o.norT2.crossVectors(this.tmpP2,o.nor),o.tanT2.crossVectors(this.tmpP2,o.tan),o.binT2.crossVectors(this.tmpP2,o.bin),r=this.i1,p=this.i2,o.norTU1.copy(o.norT1).applyMatrix3(r,!0),o.tanTU1.copy(o.tanT1).applyMatrix3(r,!0),o.binTU1.copy(o.binT1).applyMatrix3(r,!0),o.norTU2.copy(o.norT2).applyMatrix3(p,!0),o.tanTU2.copy(o.tanT2).applyMatrix3(p,!0),o.binTU2.copy(o.binT2).applyMatrix3(p,!0),this.tmpC1.crossVectors(o.norTU1,this.tmpP1),this.tmpC2.crossVectors(o.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),o.norDen=1/(h+f.dotVectors(o.nor,this.tmp)),this.tmpC1.crossVectors(o.tanTU1,this.tmpP1),this.tmpC2.crossVectors(o.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),o.tanDen=1/(h+f.dotVectors(o.tan,this.tmp)),this.tmpC1.crossVectors(o.binTU1,this.tmpP1),this.tmpC2.crossVectors(o.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),o.binDen=1/(h+f.dotVectors(o.bin,this.tmp)),a.warmStarted?(n=a.normalImpulse,this.lv1.addScaledVector(o.norU1,n),this.av1.addScaledVector(o.norTU1,n),this.lv2.subScaledVector(o.norU2,n),this.av2.subScaledVector(o.norTU2,n),o.norImp=n,o.tanImp=0,o.binImp=0,e=0):(o.norImp=0,o.tanImp=0,o.binImp=0),e>-1&&(e=0),(l=this.restitution*-e)<(E=-(a.penetration+.005)*t*.05)&&(l=E),o.norTar=l,o.last=A==this.num-1,o=o.next},solve:function(){var s,t,h,a,e,n,l,E,r;this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var p=this.cs;e=p.norImp,n=p.tanImp,l=p.binImp,E=-e*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),s=n,h=l,(r=(n+=t=(f.dotVectors(this.tmp,p.tan)+f.dotVectors(this.tmpav2,p.tanT2)-f.dotVectors(this.tmpav1,p.tanT1))*p.tanDen)*n+(l+=a=(f.dotVectors(this.tmp,p.bin)+f.dotVectors(this.tmpav2,p.binT2)-f.dotVectors(this.tmpav1,p.binT1))*p.binDen)*l)>E*E&&(n*=r=E/f.sqrt(r),l*=r),t=n-s,a=l-h,this.tmp.set(p.tanU1.x*t+p.binU1.x*a,p.tanU1.y*t+p.binU1.y*a,p.tanU1.z*t+p.binU1.z*a),this.tmplv1.addEqual(this.tmp),this.tmp.set(p.tanTU1.x*t+p.binTU1.x*a,p.tanTU1.y*t+p.binTU1.y*a,p.tanTU1.z*t+p.binTU1.z*a),this.tmpav1.addEqual(this.tmp),this.tmp.set(p.tanU2.x*t+p.binU2.x*a,p.tanU2.y*t+p.binU2.y*a,p.tanU2.z*t+p.binU2.z*a),this.tmplv2.subEqual(this.tmp),this.tmp.set(p.tanTU2.x*t+p.binTU2.x*a,p.tanTU2.y*t+p.binTU2.y*a,p.tanTU2.z*t+p.binTU2.z*a),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),s=e,(e+=t=(f.dotVectors(this.tmp,p.nor)+f.dotVectors(this.tmpav2,p.norT2)-f.dotVectors(this.tmpav1,p.norT1)-p.norTar)*p.norDen)>0&&(e=0),t=e-s,this.tmplv1.addScaledVector(p.norU1,t),this.tmpav1.addScaledVector(p.norTU1,t),this.tmplv2.subScaledVector(p.norU2,t),this.tmpav2.subScaledVector(p.norTU2,t),p.norImp=e,p.tanImp=n,p.binImp=l,!p.last;)p=p.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var s,t=this.cs,h=this.num;h--;)(s=this.ps[h]).normal.copy(t.nor),s.tangent.copy(t.tan),s.binormal.copy(t.bin),s.normalImpulse=t.norImp,s.tangentImpulse=t.tanImp,s.binormalImpulse=t.binImp,s.normalDenominator=t.norDen,s.tangentDenominator=t.tanDen,s.binormalDenominator=t.binDen,t=t.next}}),Object.assign(s3.prototype,{Contact:!0,mixRestitution:function(s,t){return f.sqrt(s*t)},mixFriction:function(s,t){return f.sqrt(s*t)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var s=this.manifold.numPoints,t=s;t--;){var h=this.buffer[t],a=this.points[t];h.lp1X=a.localPoint1.x,h.lp1Y=a.localPoint1.y,h.lp1Z=a.localPoint1.z,h.lp2X=a.localPoint2.x,h.lp2Y=a.localPoint2.y,h.lp2Z=a.localPoint2.z,h.impulse=a.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var e=this.manifold.numPoints;if(e==0)return this.touching=!1,this.close=!1,void(this.dist=f.INF);for((this.touching||this.dist<.001)&&(this.close=!0),this.touching=!0,t=e;t--;){for(var n=(a=this.points[t]).localPoint1.x,l=a.localPoint1.y,E=a.localPoint1.z,r=a.localPoint2.x,p=a.localPoint2.y,o=a.localPoint2.z,A=-1,c=4e-4,k=s;k--;){var m=(h=this.buffer[k]).lp1X-n,u=h.lp1Y-l,g=h.lp1Z-E,S=m*m+u*u+g*g,d=(m=h.lp2X-r)*m+(u=h.lp2Y-p)*u+(g=h.lp2Z-o)*g;S<d?S<c&&(c=S,A=k):d<c&&(c=d,A=k),c<this.dist&&(this.dist=c)}if(A!=-1){var I=this.buffer[A];this.buffer[A]=this.buffer[--s],this.buffer[s]=I,a.normalImpulse=I.impulse,a.warmStarted=!0}else a.normalImpulse=0,a.warmStarted=!1}},attach:function(s,t){this.shape1=s,this.shape2=t,this.body1=s.parent,this.body2=t.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=t,this.s1Link.body=this.body2,this.s2Link.shape=s,this.s2Link.body=this.body1,s.contactLink!=null?(this.s1Link.next=s.contactLink).prev=this.s1Link:this.s1Link.next=null,s.contactLink=this.s1Link,s.numContacts++,t.contactLink!=null?(this.s2Link.next=t.contactLink).prev=this.s2Link:this.s2Link.next=null,t.contactLink=this.s2Link,t.numContacts++,this.b1Link.shape=t,this.b1Link.body=this.body2,this.b2Link.shape=s,this.b2Link.body=this.body1,this.body1.contactLink!=null?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,this.body2.contactLink!=null?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var s=this.s1Link.prev,t=this.s1Link.next;s!==null&&(s.next=t),t!==null&&(t.prev=s),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=t),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,s=this.s2Link.prev,t=this.s2Link.next,s!==null&&(s.next=t),t!==null&&(t.prev=s),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=t),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,s=this.b1Link.prev,t=this.b1Link.next,s!==null&&(s.next=t),t!==null&&(t.prev=s),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=t),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,s=this.b2Link.prev,t=this.b2Link.next,s!==null&&(s.next=t),t!==null&&(t.prev=s),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=t),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}}),Object.assign(Hs.prototype,{setParent:function(s){this.parent=s,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(s){s.parent&&U2("RigidBody","It is not possible that you add a shape which already has an associated body."),this.shapes!=null&&((this.shapes.prev=s).next=this.shapes),this.shapes=s,s.parent=this,this.parent&&this.parent.addShape(s),this.numShapes++},removeShape:function(s){var t=s;if(t.parent==this){var h=t.prev,a=t.next;h!=null&&(h.next=a),a!=null&&(a.prev=h),this.shapes==t&&(this.shapes=a),t.prev=null,t.next=null,t.parent=null,this.parent&&this.parent.removeShape(t),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(s){this.parent.checkContact(this.name,s)},setupMass:function(s,t){var h=t===void 0||t;this.type=s||2,this.isDynamic=this.type===1,this.isStatic=this.type===2,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var a=new n2,e=new B,n=this.shapes;n!==null;n=n.next){n.calculateMassInfo(this.massInfo);var l=this.massInfo.mass;e.addScaledVector(n.relativePosition,l),this.mass+=l,this.rotateInertia(n.relativeRotation,this.massInfo.inertia,a),this.localInertia.add(a),this.localInertia.addOffset(l,n.relativePosition)}if(this.inverseMass=1/this.mass,e.scaleEqual(this.inverseMass),h){for(this.position.add(e),n=this.shapes;n!==null;n=n.next)n.relativePosition.subEqual(e);this.localInertia.subOffset(this.mass,e)}this.inverseLocalInertia.invert(this.localInertia),this.type===2&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var s=this.contactLink;s!=null;)s.body.sleepTime=0,s.body.sleeping=!1,s=s.next;for(var t=this.jointLink;t!=null;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var h=this.shapes;h!=null;h=h.next)h.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var s=this.shapes;s!=null;s=s.next)s.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&&this.awake()},isLonely:function(){return this.numJoints==0&&this.numContacts==0},updatePosition:function(s){switch(this.type){case 2:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case 1:this.isKinematic&&(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&&(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/s),this.controlPos=!1),this.controlRot&&(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,s),this.orientation.addTime(this.angularVelocity,s),this.updateMesh();break;default:U2("RigidBody","Invalid type.")}this.syncShapes(),this.updateMesh()},getAxis:function(){return new B(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(s,t,h){this.tmpInertia.multiplyMatrices(s,t),h.multiplyMatrices(this.tmpInertia,s,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var s=this.shapes;s!=null;s=s.next)s.position.copy(s.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),s.rotation.multiplyMatrices(this.rotation,s.relativeRotation),s.updateProxy()},applyImpulse:function(s,t){this.linearVelocity.addScaledVector(t,this.inverseMass);var h=new B().copy(s).sub(this.position).cross(t).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(h)},setPosition:function(s){this.newPosition.copy(s).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(s){this.newOrientation.set(s.x,s.y,s.z,s.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(s){this.newOrientation=new Gi().setFromEuler(s.x*f.degtorad,s.y*f.degtorad,s.z*f.degtorad),this.controlRot=!0},resetPosition:function(s,t,h){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(s,t,h).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(s){this.angularVelocity.set(0,0,0),this.orientation=new Gi(s.x,s.y,s.z,s.w),this.awake()},resetRotation:function(s,t,h){this.angularVelocity.set(0,0,0),this.orientation=new Gi().setFromEuler(s*f.degtorad,t*f.degtorad,h*f.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(s){this.mesh=s,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),this.mesh!==null&&(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}}),Object.assign(Ys.prototype,{BroadPhase:!0,createProxy:function(s){U2("BroadPhase","Inheritance error.")},addProxy:function(s){U2("BroadPhase","Inheritance error.")},removeProxy:function(s){U2("BroadPhase","Inheritance error.")},isAvailablePair:function(s,t){var h,a=s.parent,e=t.parent;if(a==e||!a.isDynamic&&!e.isDynamic||!(s.belongsTo&t.collidesWith)||!(t.belongsTo&s.collidesWith))return!1;for(h=a.numJoints<e.numJoints?a.jointLink:e.jointLink;h!==null;){var n=h.joint;if(!n.allowCollision&&(n.body1==a&&n.body2==e||n.body1==e&&n.body2==a))return!1;h=h.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(s,t){var h=new B3(s,t);this.pairs.push(h),this.numPairs++}});var x3=0;function Ks(s){this.shape=s,this.aabb=s.aabb}function jt(s){Ks.call(this,s),this.id=x3++}function Ot(){Ys.call(this),this.types=$s,this.proxies=[]}function Zs(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}function Xs(s,t){this.proxy=s,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=t,this.value=0}function Rt(s,t){Ks.call(this,t),this.belongsTo=0,this.max=[],this.min=[],this.sap=s,this.min[0]=new Xs(this,!1),this.max[0]=new Xs(this,!0),this.min[1]=new Xs(this,!1),this.max[1]=new Xs(this,!0),this.min[2]=new Xs(this,!1),this.max[2]=new Xs(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}function _t(){Ys.call(this),this.types=Qs,this.numElementsD=0,this.numElementsS=0,this.axesD=[new Zs,new Zs,new Zs],this.axesS=[new Zs,new Zs,new Zs],this.index1=0,this.index2=1}function t3(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new Ls}function h3(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new Ls}function Ut(s){Ks.call(this,s),this.leaf=new t3,this.leaf.proxy=this}function qt(){Ys.call(this),this.types=lt,this.tree=new h3,this.stack=[],this.leaves=[],this.numLeaves=0}function W2(){this.flip=!1}function Jt(){W2.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}function zt(s){W2.call(this),this.flip=s}function Wt(){W2.call(this)}function Nt(s){W2.call(this),this.flip=s}function wt(s){W2.call(this),this.flip=s}function Ht(){W2.call(this)}function Mt(s){W2.call(this),this.flip=s,this.n=new B,this.p=new B}function It(s){W2.call(this),this.flip=s,this.n=new B,this.p=new B,this.dix=new B,this.diy=new B,this.diz=new B,this.cc=new B,this.cc2=new B}function a3(s){switch(s instanceof Object||(s={}),this.scale=s.worldscale||1,this.invScale=1/this.scale,this.timeStep=s.timestep||.01666,this.timerate=1e3*this.timeStep,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=s.iterations||8,s.broadphase||2){case 1:this.broadPhase=new Ot;break;case 2:default:this.broadPhase=new _t;break;case 3:this.broadPhase=new qt}this.Btypes=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhaseType=this.Btypes[s.broadphase||2],this.performance=null,this.isStat=s.info!==void 0&&s.info,this.isStat&&(this.performance=new V2(this)),this.enableRandomizer=s.random===void 0||s.random,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new B(0,-9.8,0),s.gravity!==void 0&&this.gravity.fromArray(s.gravity),this.detectors=[],this.detectors.length=5;for(var t=5;t--;)this.detectors[t]=[],this.detectors[t].length=5;this.detectors[us][us]=new Ht,this.detectors[us][Fs]=new Nt(!1),this.detectors[Fs][us]=new Nt(!0),this.detectors[Fs][Fs]=new Jt,this.detectors[gs][gs]=new Wt,this.detectors[gs][Fs]=new zt(!0),this.detectors[Fs][gs]=new zt(!1),this.detectors[gs][us]=new wt(!0),this.detectors[us][gs]=new wt(!1),this.detectors[Bs][us]=new Mt(!0),this.detectors[us][Bs]=new Mt(!1),this.detectors[Bs][Fs]=new It(!0),this.detectors[Fs][Bs]=new It(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(Ks.prototype,{Proxy:!0,update:function(){U2("Proxy","Inheritance error.")}}),jt.prototype=Object.assign(Object.create(Ks.prototype),{constructor:jt,update:function(){}}),Ot.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Ot,createProxy:function(s){return new jt(s)},addProxy:function(s){this.proxies.push(s)},removeProxy:function(s){var t=this.proxies.indexOf(s);t>-1&&this.proxies.splice(t,1)},collectPairs:function(){var s,t,h,a=0,e=this.proxies,n=e.length;for(this.numPairChecks=n*(n-1)>>1;a<n;)for(t=e[a++],s=a+1;s<n;)h=e[s++],!t.aabb.intersectTest(h.aabb)&&this.isAvailablePair(t.shape,h.shape)&&this.addPair(t.shape,h.shape)}}),Object.assign(Zs.prototype,{SAPAxis:!0,addElements:function(s,t){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var h=[],a=this.numElements;a--;)h[a]=this.elements[a]}this.elements[this.numElements++]=s,this.elements[this.numElements++]=t},removeElements:function(s,t){for(var h=-1,a=-1,e=0,n=this.numElements;e<n;e++){var l=this.elements[e];if(l==s||l==t){if(h!=-1){a=e;break}h=e}}for(e=h+1,n=a;e<n;e++)this.elements[e-1]=this.elements[e];for(e=a+1,n=this.numElements;e<n;e++)this.elements[e-2]=this.elements[e];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var s=0,t=1;this.numElements>>t;)t++;t=t*this.numElements>>2,s=0;for(var h=!1,a=this.elements,e=1,n=this.numElements;e<n;e++){var l=a[e],E=l.value,r=a[e-1];if(r.value>E){var p=e;do{if(a[p]=r,--p==0)break;r=a[p-1]}while(r.value>E);if(a[p]=l,(s+=e-p)>t){h=!0;break}}}if(h){s=2;var o=this.stack;for(o[0]=0,o[1]=this.numElements-1;s>0;){var A=o[--s],c=o[--s],k=A-c;if(k>16){var m=c+f.floor(.5*k);for(l=a[m],a[m]=a[A],a[A]=l,E=l.value,e=c-1,p=A;;){var u,g;do u=a[++e];while(u.value<E);do g=a[--p];while(E<g.value&&p!=c);if(e>=p)break;a[e]=g,a[p]=u}a[A]=a[e],a[e]=l,e-c>A-e?(o[s++]=c,o[s++]=e-1,o[s++]=e+1,o[s++]=A):(o[s++]=e+1,o[s++]=A,o[s++]=c,o[s++]=e-1)}else for(e=c+1;e<=A;e++)if(E=(l=a[e]).value,(r=a[e-1]).value>E){p=e;do{if(a[p]=r,--p==0)break;r=a[p-1]}while(r.value>E);a[p]=l}}}},calculateTestCount:function(){for(var s=1,t=0,h=1,a=this.numElements;h<a;h++)this.elements[h].max?s--:(t+=s,s++);return t}}),Rt.prototype=Object.assign(Object.create(Ks.prototype),{constructor:Rt,isDynamic:function(){var s=this.shape.parent;return s.isDynamic&&!s.sleeping},update:function(){var s=this.aabb.elements;this.min[0].value=s[0],this.min[1].value=s[1],this.min[2].value=s[2],this.max[0].value=s[3],this.max[1].value=s[4],this.max[2].value=s[5],(this.belongsTo==1&&!this.isDynamic()||this.belongsTo==2&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))}}),_t.prototype=Object.assign(Object.create(Ys.prototype),{constructor:_t,createProxy:function(s){return new Rt(this,s)},addProxy:function(s){var t=s;t.isDynamic()?(this.axesD[0].addElements(t.min[0],t.max[0]),this.axesD[1].addElements(t.min[1],t.max[1]),this.axesD[2].addElements(t.min[2],t.max[2]),t.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(t.min[0],t.max[0]),this.axesS[1].addElements(t.min[1],t.max[1]),this.axesS[2].addElements(t.min[2],t.max[2]),t.belongsTo=2,this.numElementsS+=2)},removeProxy:function(s){var t=s;if(t.belongsTo!=0){switch(t.belongsTo){case 1:this.axesD[0].removeElements(t.min[0],t.max[0]),this.axesD[1].removeElements(t.min[1],t.max[1]),this.axesD[2].removeElements(t.min[2],t.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(t.min[0],t.max[0]),this.axesS[1].removeElements(t.min[1],t.max[1]),this.axesS[2].removeElements(t.min[2],t.max[2]),this.numElementsS-=2}t.belongsTo=0}},collectPairs:function(){if(this.numElementsD!=0){var s,t,h,a,e=this.axesD[this.index1],n=this.axesD[this.index2];e.sort(),n.sort(),e.calculateTestCount()<=n.calculateTestCount()?((n=this.axesS[this.index1]).sort(),s=e.elements,t=n.elements):((e=this.axesS[this.index2]).sort(),s=n.elements,t=e.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var l=0,E=0;l<this.numElementsD;){var r,p;if(E==this.numElementsS)r=s[l],p=!0,l++;else{var o=s[l],A=t[E];o.value<A.value?(r=o,p=!0,l++):(r=A,p=!1,E++)}if(r.max){var c=r.pair;if(p){if(c==h){h=h.pair;continue}r=h}else{if(c==a){a=a.pair;continue}r=a}for(;r;){if((d=r.pair)==c){r.pair=d.pair;break}r=d}}else{for(var k=r.proxy.shape,m=r.min1.value,u=r.max1.value,g=r.min2.value,S=r.max2.value,d=h;d!=null;d=d.pair){var I=d.proxy.shape;this.numPairChecks++,m>d.max1.value||u<d.min1.value||g>d.max2.value||S<d.min2.value||!this.isAvailablePair(k,I)||this.addPair(k,I)}if(p){for(d=a;d!=null;d=d.pair)I=d.proxy.shape,this.numPairChecks++,m>d.max1.value||u<d.min1.value||g>d.max2.value||S<d.min2.value||!this.isAvailablePair(k,I)||this.addPair(k,I);r.pair=h,h=r}else r.pair=a,a=r}}this.index2=3^(this.index1|this.index2)}}}),Object.assign(h3.prototype,{DBVT:!0,moveLeaf:function(s){this.deleteLeaf(s),this.insertLeaf(s)},insertLeaf:function(s){if(this.root!=null){for(var t,h,a=s.aabb,e=this.root;e.proxy==null;){var n=e.child1,l=e.child2,E=e.aabb,r=n.aabb,p=l.aabb;t=E.surfaceArea(),this.aabb.combine(a,E);var o=2*(h=this.aabb.surfaceArea()),A=2*(h-t),c=A;this.aabb.combine(a,r),n.proxy!=null?c+=this.aabb.surfaceArea():c+=this.aabb.surfaceArea()-r.surfaceArea();var k=A;if(this.aabb.combine(a,p),l.proxy!=null?k+=this.aabb.surfaceArea():k+=this.aabb.surfaceArea()-p.surfaceArea(),c<k){if(o<c)break;e=n}else{if(o<k)break;e=l}}var m,u=e.parent;(m=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new t3).parent=u,m.child1=s,m.child2=e,m.aabb.combine(s.aabb,e.aabb),m.height=e.height+1,e.parent=m,s.parent=m,e==this.root?this.root=m:u.child1==e?u.child1=m:u.child2=m;do m=this.balance(m),this.fix(m),m=m.parent;while(m!=null)}else this.root=s},getBalance:function(s){return s.proxy!=null?0:s.child1.height-s.child2.height},deleteLeaf:function(s){if(s!=this.root){var t,h=s.parent;if(t=h.child1==s?h.child2:h.child1,h==this.root)return this.root=t,void(t.parent=null);var a=h.parent;t.parent=a,a.child1==h?a.child1=t:a.child2=t,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=h);do a=this.balance(a),this.fix(a),a=a.parent;while(a!=null)}else this.root=null},balance:function(s){var t=s.height;if(t<2)return s;var h,a=s.parent,e=s.child1,n=s.child2,l=e.height,E=n.height,r=l-E;if(r>1){var p=e.child1,o=e.child2,A=p.height,c=o.height;return A>c?(e.child2=s,s.parent=e,s.child1=o,o.parent=s,s.aabb.combine(o.aabb,n.aabb),h=c-E,s.height=c-(h&h>>31)+1,e.aabb.combine(p.aabb,s.aabb),h=A-t,e.height=A-(h&h>>31)+1):(e.child1=s,s.parent=e,s.child1=p,p.parent=s,s.aabb.combine(p.aabb,n.aabb),h=A-E,s.height=A-(h&h>>31)+1,e.aabb.combine(s.aabb,o.aabb),h=t-c,e.height=t-(h&h>>31)+1),a!=null?a.child1==s?a.child1=e:a.child2=e:this.root=e,e.parent=a,e}if(r<-1){var k=n.child1,m=n.child2,u=k.height,g=m.height;return u>g?(n.child2=s,s.parent=n,s.child2=m,m.parent=s,s.aabb.combine(e.aabb,m.aabb),h=l-g,s.height=l-(h&h>>31)+1,n.aabb.combine(k.aabb,s.aabb),h=u-t,n.height=u-(h&h>>31)+1):(n.child1=s,s.parent=n,s.child2=k,k.parent=s,s.aabb.combine(e.aabb,k.aabb),h=l-u,s.height=l-(h&h>>31)+1,n.aabb.combine(s.aabb,m.aabb),h=t-g,n.height=t-(h&h>>31)+1),a!=null?a.child1==s?a.child1=n:a.child2=n:this.root=n,n.parent=a,n}return s},fix:function(s){var t=s.child1,h=s.child2;s.aabb.combine(t.aabb,h.aabb),s.height=t.height<h.height?h.height+1:t.height+1}}),Ut.prototype=Object.assign(Object.create(Ks.prototype),{constructor:Ut,update:function(){}}),qt.prototype=Object.assign(Object.create(Ys.prototype),{constructor:qt,createProxy:function(s){return new Ut(s)},addProxy:function(s){this.tree.insertLeaf(s.leaf),this.leaves.push(s.leaf),this.numLeaves++},removeProxy:function(s){this.tree.deleteLeaf(s.leaf);var t=this.leaves.indexOf(s.leaf);t>-1&&(this.leaves.splice(t,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves<2))for(var s,t=this.numLeaves;t--;)(s=this.leaves[t]).proxy.aabb.intersectTestTwo(s.aabb)&&(s.aabb.copy(s.proxy.aabb,.1),this.tree.deleteLeaf(s),this.tree.insertLeaf(s),this.collide(s,this.tree.root))},collide:function(s,t){var h,a,e,n,l,E,r=2;for(this.stack[0]=s,this.stack[1]=t;r>0;)if(e=this.stack[--r],n=this.stack[--r],l=e.proxy!=null,E=n.proxy!=null,this.numPairChecks++,l&&E){if((h=e.proxy.shape)==(a=n.proxy.shape)||h.aabb.intersectTest(a.aabb)||!this.isAvailablePair(h,a))continue;this.addPair(h,a)}else{if(e.aabb.intersectTest(n.aabb))continue;E||!l&&e.aabb.surfaceArea()>n.aabb.surfaceArea()?(this.stack[r++]=e.child1,this.stack[r++]=n,this.stack[r++]=e.child2,this.stack[r++]=n):(this.stack[r++]=e,this.stack[r++]=n.child1,this.stack[r++]=e,this.stack[r++]=n.child2)}}}),Object.assign(W2.prototype,{CollisionDetector:!0,detectCollision:function(s,t,h){U2("CollisionDetector","Inheritance error.")}}),Jt.prototype=Object.assign(Object.create(W2.prototype),{constructor:Jt,detectCollision:function(s,t,h){var a,e;s.id<t.id?(a=s,e=t):(a=t,e=s);var n,l,E,r,p,o,A,c,k,m,u,g,S,d,I,M,O,R,P,$,z,L,_,w,T,U,ri,Ki,Zi,Ri,D,Fi,y,C,V,F=a.elements,x=e.elements,Ei=a.dimentions,ci=e.dimentions,Z=a.position,X=e.position,v=Z.x,q=Z.y,Q=Z.z,T2=X.x,Xi=X.y,E2=X.z,_i=T2-v,Ui=Xi-q,ai=E2-Q,K=a.halfWidth,N=a.halfHeight,j=a.halfDepth,ii=e.halfWidth,Yi=e.halfHeight,xi=e.halfDepth,pi=Ei[0],Ai=Ei[1],yi=Ei[2],H=Ei[3],J=Ei[4],W=Ei[5],gi=Ei[6],di=Ei[7],ui=Ei[8],Pi=Ei[9],Mi=Ei[10],mi=Ei[11],ei=Ei[12],Ci=Ei[13],s2=Ei[14],fi=Ei[15],hi=Ei[16],si=Ei[17],G=ci[0],ti=ci[1],Di=ci[2],Bi=ci[3],vi=ci[4],ji=ci[5],qi=ci[6],Ji=ci[7],Wi=ci[8],fs=ci[9],C2=ci[10],g2=ci[11],f2=ci[12],bi=ci[13],j2=ci[14],O2=ci[15],R2=ci[16],Si=ci[17],Ni=Ai*Di-yi*ti,t2=yi*G-pi*Di,wi=pi*ti-Ai*G,N2=Ai*ji-yi*vi,w2=yi*Bi-pi*ji,M2=pi*vi-Ai*Bi,I2=Ai*Wi-yi*Ji,S2=yi*qi-pi*Wi,P2=pi*Ji-Ai*qi,l2=J*Di-W*ti,o2=W*G-H*Di,A2=H*ti-J*G,H2=J*ji-W*vi,Y2=W*Bi-H*ji,K2=H*vi-J*Bi,Z2=J*Wi-W*Ji,X2=W*qi-H*Wi,G2=H*Ji-J*qi,$2=di*Di-ui*ti,Q2=ui*G-gi*Di,is=gi*ti-di*G,ss=di*ji-ui*vi,ts=ui*Bi-gi*ji,hs=gi*vi-di*Bi,Y=di*Wi-ui*Ji,Rs=ui*qi-gi*Wi,_s=gi*Ji-di*qi,e3=!1,n3=!1,l3=!1,o3=!1,r3=!1,p3=!1,E3=!1,c3=!1,k3=!1;if((n=(D=pi*_i+Ai*Ui+yi*ai)>0)||(D=-D),(y=pi*G+Ai*ti+yi*Di)<0&&(y=-y),(C=pi*Bi+Ai*vi+yi*ji)<0&&(C=-C),(V=pi*qi+Ai*Ji+yi*Wi)<0&&(V=-V),!((M=D-(Fi=K)-(y*ii+C*Yi+V*xi))>0||((l=(D=H*_i+J*Ui+W*ai)>0)||(D=-D),(y=H*G+J*ti+W*Di)<0&&(y=-y),(C=H*Bi+J*vi+W*ji)<0&&(C=-C),(V=H*qi+J*Ji+W*Wi)<0&&(V=-V),(O=D-(Fi=N)-(y*ii+C*Yi+V*xi))>0||((E=(D=gi*_i+di*Ui+ui*ai)>0)||(D=-D),(y=gi*G+di*ti+ui*Di)<0&&(y=-y),(C=gi*Bi+di*vi+ui*ji)<0&&(C=-C),(V=gi*qi+di*Ji+ui*Wi)<0&&(V=-V),(R=D-(Fi=j)-(y*ii+C*Yi+V*xi))>0||((r=(D=G*_i+ti*Ui+Di*ai)>0)||(D=-D),(y=G*pi+ti*Ai+Di*yi)<0&&(y=-y),(C=G*H+ti*J+Di*W)<0&&(C=-C),(V=G*gi+ti*di+Di*ui)<0&&(V=-V),(P=1*(D-(Fi=y*K+C*N+V*j)-ii))>0||((p=(D=Bi*_i+vi*Ui+ji*ai)>0)||(D=-D),(y=Bi*pi+vi*Ai+ji*yi)<0&&(y=-y),(C=Bi*H+vi*J+ji*W)<0&&(C=-C),(V=Bi*gi+vi*di+ji*ui)<0&&(V=-V),($=1*(D-(Fi=y*K+C*N+V*j)-Yi))>0||((o=(D=qi*_i+Ji*Ui+Wi*ai)>0)||(D=-D),(y=qi*pi+Ji*Ai+Wi*yi)<0&&(y=-y),(C=qi*H+Ji*J+Wi*W)<0&&(C=-C),(V=qi*gi+Ji*di+Wi*ui)<0&&(V=-V),(z=1*(D-(Fi=y*K+C*N+V*j)-xi))>0))))))){if((D=Ni*Ni+t2*t2+wi*wi)>1e-5){if((A=(D=(Ni*=D=1/f.sqrt(D))*_i+(t2*=D)*Ui+(wi*=D)*ai)>0)||(D=-D),(y=Ni*H+t2*J+wi*W)<0&&(y=-y),(C=Ni*gi+t2*di+wi*ui)<0&&(C=-C),Fi=y*N+C*j,(y=Ni*Bi+t2*vi+wi*ji)<0&&(y=-y),(C=Ni*qi+t2*Ji+wi*Wi)<0&&(C=-C),(L=D-Fi-(y*Yi+C*xi))>0)return}else A=!1,L=0,e3=!0;if((D=N2*N2+w2*w2+M2*M2)>1e-5){if((c=(D=(N2*=D=1/f.sqrt(D))*_i+(w2*=D)*Ui+(M2*=D)*ai)>0)||(D=-D),(y=N2*H+w2*J+M2*W)<0&&(y=-y),(C=N2*gi+w2*di+M2*ui)<0&&(C=-C),Fi=y*N+C*j,(y=N2*G+w2*ti+M2*Di)<0&&(y=-y),(C=N2*qi+w2*Ji+M2*Wi)<0&&(C=-C),(_=D-Fi-(y*ii+C*xi))>0)return}else c=!1,_=0,n3=!0;if((D=I2*I2+S2*S2+P2*P2)>1e-5){if((k=(D=(I2*=D=1/f.sqrt(D))*_i+(S2*=D)*Ui+(P2*=D)*ai)>0)||(D=-D),(y=I2*H+S2*J+P2*W)<0&&(y=-y),(C=I2*gi+S2*di+P2*ui)<0&&(C=-C),Fi=y*N+C*j,(y=I2*G+S2*ti+P2*Di)<0&&(y=-y),(C=I2*Bi+S2*vi+P2*ji)<0&&(C=-C),(w=D-Fi-(y*ii+C*Yi))>0)return}else k=!1,w=0,l3=!0;if((D=l2*l2+o2*o2+A2*A2)>1e-5){if((m=(D=(l2*=D=1/f.sqrt(D))*_i+(o2*=D)*Ui+(A2*=D)*ai)>0)||(D=-D),(y=l2*pi+o2*Ai+A2*yi)<0&&(y=-y),(C=l2*gi+o2*di+A2*ui)<0&&(C=-C),Fi=y*K+C*j,(y=l2*Bi+o2*vi+A2*ji)<0&&(y=-y),(C=l2*qi+o2*Ji+A2*Wi)<0&&(C=-C),(T=D-Fi-(y*Yi+C*xi))>0)return}else m=!1,T=0,o3=!0;if((D=H2*H2+Y2*Y2+K2*K2)>1e-5){if((u=(D=(H2*=D=1/f.sqrt(D))*_i+(Y2*=D)*Ui+(K2*=D)*ai)>0)||(D=-D),(y=H2*pi+Y2*Ai+K2*yi)<0&&(y=-y),(C=H2*gi+Y2*di+K2*ui)<0&&(C=-C),Fi=y*K+C*j,(y=H2*G+Y2*ti+K2*Di)<0&&(y=-y),(C=H2*qi+Y2*Ji+K2*Wi)<0&&(C=-C),(U=D-Fi-(y*ii+C*xi))>0)return}else u=!1,U=0,r3=!0;if((D=Z2*Z2+X2*X2+G2*G2)>1e-5){if((g=(D=(Z2*=D=1/f.sqrt(D))*_i+(X2*=D)*Ui+(G2*=D)*ai)>0)||(D=-D),(y=Z2*pi+X2*Ai+G2*yi)<0&&(y=-y),(C=Z2*gi+X2*di+G2*ui)<0&&(C=-C),Fi=y*K+C*j,(y=Z2*G+X2*ti+G2*Di)<0&&(y=-y),(C=Z2*Bi+X2*vi+G2*ji)<0&&(C=-C),(ri=D-Fi-(y*ii+C*Yi))>0)return}else g=!1,ri=0,p3=!0;if((D=$2*$2+Q2*Q2+is*is)>1e-5){if((S=(D=($2*=D=1/f.sqrt(D))*_i+(Q2*=D)*Ui+(is*=D)*ai)>0)||(D=-D),(y=$2*pi+Q2*Ai+is*yi)<0&&(y=-y),(C=$2*H+Q2*J+is*W)<0&&(C=-C),Fi=y*K+C*N,(y=$2*Bi+Q2*vi+is*ji)<0&&(y=-y),(C=$2*qi+Q2*Ji+is*Wi)<0&&(C=-C),(Ki=D-Fi-(y*Yi+C*xi))>0)return}else S=!1,Ki=0,E3=!0;if((D=ss*ss+ts*ts+hs*hs)>1e-5){if((d=(D=(ss*=D=1/f.sqrt(D))*_i+(ts*=D)*Ui+(hs*=D)*ai)>0)||(D=-D),(y=ss*pi+ts*Ai+hs*yi)<0&&(y=-y),(C=ss*H+ts*J+hs*W)<0&&(C=-C),Fi=y*K+C*N,(y=ss*G+ts*ti+hs*Di)<0&&(y=-y),(C=ss*qi+ts*Ji+hs*Wi)<0&&(C=-C),(Zi=D-Fi-(y*ii+C*xi))>0)return}else d=!1,Zi=0,c3=!0;if((D=Y*Y+Rs*Rs+_s*_s)>1e-5){if((I=(D=(Y*=D=1/f.sqrt(D))*_i+(Rs*=D)*Ui+(_s*=D)*ai)>0)||(D=-D),(y=Y*pi+Rs*Ai+_s*yi)<0&&(y=-y),(C=Y*H+Rs*J+_s*W)<0&&(C=-C),Fi=y*K+C*N,(y=Y*G+Rs*ti+_s*Di)<0&&(y=-y),(C=Y*Bi+Rs*vi+_s*ji)<0&&(C=-C),(Ri=D-Fi-(y*ii+C*Yi))>0)return}else I=!1,Ri=0,k3=!0;var J2=M,p2=M,$i=0,_2=n;O>p2&&(J2=O,p2=O,$i=1,_2=l),R>p2&&(J2=R,p2=R,$i=2,_2=E),P>p2&&(J2=P,p2=P,$i=3,_2=r),$>p2&&(J2=$,p2=$,$i=4,_2=p),z>p2&&(J2=z,p2=z,$i=5,_2=o),L-.01>p2&&!e3&&(J2=L,p2=L-.01,$i=6,_2=A),_-.01>p2&&!n3&&(J2=_,p2=_-.01,$i=7,_2=c),w-.01>p2&&!l3&&(J2=w,p2=w-.01,$i=8,_2=k),T-.01>p2&&!o3&&(J2=T,p2=T-.01,$i=9,_2=m),U-.01>p2&&!r3&&(J2=U,p2=U-.01,$i=10,_2=u),ri-.01>p2&&!p3&&(J2=ri,p2=ri-.01,$i=11,_2=g),Ki-.01>p2&&!E3&&(J2=Ki,p2=Ki-.01,$i=12,_2=S),Zi-.01>p2&&!c3&&(J2=Zi,p2=Zi-.01,$i=13,_2=d),Ri-.01>p2&&!k3&&(J2=Ri,$i=14,_2=I);var ni=0,li=0,oi=0,y2=0,d2=0,u2=0,b2=0,v2=0,z2=0,c2=0,k2=0,m2=0,bs=0,vs=0,zs=0,Ns=0,ws=0,Ms=0,ht=!1;if($i==0?(_2?(c2=v+Pi,k2=q+Mi,m2=Q+mi,ni=pi,li=Ai,oi=yi):(c2=v-Pi,k2=q-Mi,m2=Q-mi,ni=-pi,li=-Ai,oi=-yi),bs=ei,vs=Ci,zs=s2,y2=-H,d2=-J,u2=-W,Ns=fi,ws=hi,Ms=si,b2=-gi,v2=-di,z2=-ui):$i==1?(_2?(c2=v+ei,k2=q+Ci,m2=Q+s2,ni=H,li=J,oi=W):(c2=v-ei,k2=q-Ci,m2=Q-s2,ni=-H,li=-J,oi=-W),bs=Pi,vs=Mi,zs=mi,y2=-pi,d2=-Ai,u2=-yi,Ns=fi,ws=hi,Ms=si,b2=-gi,v2=-di,z2=-ui):$i==2?(_2?(c2=v+fi,k2=q+hi,m2=Q+si,ni=gi,li=di,oi=ui):(c2=v-fi,k2=q-hi,m2=Q-si,ni=-gi,li=-di,oi=-ui),bs=Pi,vs=Mi,zs=mi,y2=-pi,d2=-Ai,u2=-yi,Ns=ei,ws=Ci,Ms=s2,b2=-H,v2=-J,z2=-W):$i==3?(ht=!0,_2?(c2=T2-fs,k2=Xi-C2,m2=E2-g2,ni=-G,li=-ti,oi=-Di):(c2=T2+fs,k2=Xi+C2,m2=E2+g2,ni=G,li=ti,oi=Di),bs=f2,vs=bi,zs=j2,y2=-Bi,d2=-vi,u2=-ji,Ns=O2,ws=R2,Ms=Si,b2=-qi,v2=-Ji,z2=-Wi):$i==4?(ht=!0,_2?(c2=T2-f2,k2=Xi-bi,m2=E2-j2,ni=-Bi,li=-vi,oi=-ji):(c2=T2+f2,k2=Xi+bi,m2=E2+j2,ni=Bi,li=vi,oi=ji),bs=fs,vs=C2,zs=g2,y2=-G,d2=-ti,u2=-Di,Ns=O2,ws=R2,Ms=Si,b2=-qi,v2=-Ji,z2=-Wi):$i==5?(ht=!0,_2?(c2=T2-O2,k2=Xi-R2,m2=E2-Si,ni=-qi,li=-Ji,oi=-Wi):(c2=T2+O2,k2=Xi+R2,m2=E2+Si,ni=qi,li=Ji,oi=Wi),bs=fs,vs=C2,zs=g2,y2=-G,d2=-ti,u2=-Di,Ns=f2,ws=bi,Ms=j2,b2=-Bi,v2=-vi,z2=-ji):$i==6?(ni=Ni,li=t2,oi=wi,y2=pi,d2=Ai,u2=yi,b2=G,v2=ti,z2=Di):$i==7?(ni=N2,li=w2,oi=M2,y2=pi,d2=Ai,u2=yi,b2=Bi,v2=vi,z2=ji):$i==8?(ni=I2,li=S2,oi=P2,y2=pi,d2=Ai,u2=yi,b2=qi,v2=Ji,z2=Wi):$i==9?(ni=l2,li=o2,oi=A2,y2=H,d2=J,u2=W,b2=G,v2=ti,z2=Di):$i==10?(ni=H2,li=Y2,oi=K2,y2=H,d2=J,u2=W,b2=Bi,v2=vi,z2=ji):$i==11?(ni=Z2,li=X2,oi=G2,y2=H,d2=J,u2=W,b2=qi,v2=Ji,z2=Wi):$i==12?(ni=$2,li=Q2,oi=is,y2=gi,d2=di,u2=ui,b2=G,v2=ti,z2=Di):$i==13?(ni=ss,li=ts,oi=hs,y2=gi,d2=di,u2=ui,b2=Bi,v2=vi,z2=ji):$i==14&&(ni=Y,li=Rs,oi=_s,y2=gi,d2=di,u2=ui,b2=qi,v2=Ji,z2=Wi),$i>5){var r2,Qi,h2,a2,e2,Is,Ss,Ps,Ts,js,Os;_2||(ni=-ni,li=-li,oi=-oi),Qi=ni*(Is=F[0])+li*(Ss=F[1])+oi*(Ps=F[2]),(r2=ni*(h2=F[3])+li*(a2=F[4])+oi*(e2=F[5]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[6])+li*(a2=F[7])+oi*(e2=F[8]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[9])+li*(a2=F[10])+oi*(e2=F[11]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[12])+li*(a2=F[13])+oi*(e2=F[14]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[15])+li*(a2=F[16])+oi*(e2=F[17]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[18])+li*(a2=F[19])+oi*(e2=F[20]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),(r2=ni*(h2=F[21])+li*(a2=F[22])+oi*(e2=F[23]))>Qi&&(Qi=r2,Is=h2,Ss=a2,Ps=e2),Qi=ni*(Ts=x[0])+li*(js=x[1])+oi*(Os=x[2]),(r2=ni*(h2=x[3])+li*(a2=x[4])+oi*(e2=x[5]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[6])+li*(a2=x[7])+oi*(e2=x[8]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[9])+li*(a2=x[10])+oi*(e2=x[11]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[12])+li*(a2=x[13])+oi*(e2=x[14]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[15])+li*(a2=x[16])+oi*(e2=x[17]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[18])+li*(a2=x[19])+oi*(e2=x[20]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2),(r2=ni*(h2=x[21])+li*(a2=x[22])+oi*(e2=x[23]))<Qi&&(Qi=r2,Ts=h2,js=a2,Os=e2);var Oi=((h2=Ts-Is)*(y2-b2*(y=y2*b2+d2*v2+u2*z2))+(a2=js-Ss)*(d2-v2*y)+(e2=Os-Ps)*(u2-z2*y))/(1-y*y);h.addPoint(Is+y2*Oi+ni*J2*.5,Ss+d2*Oi+li*J2*.5,Ps+u2*Oi+oi*J2*.5,ni,li,oi,J2,!1)}else{var as,es,ns,ls,os,rs,Es,cs,ks,ms,Cs,As,ys,Ii,b,Vi,Li,Ti,F2,D2,B2,i2=1,zi=0,x2=0;ht?((zi=pi*ni+Ai*li+yi*oi)<i2&&(i2=zi,x2=0),-zi<i2&&(i2=-zi,x2=1),(zi=H*ni+J*li+W*oi)<i2&&(i2=zi,x2=2),-zi<i2&&(i2=-zi,x2=3),(zi=gi*ni+di*li+ui*oi)<i2&&(i2=zi,x2=4),-zi<i2&&(i2=-zi,x2=5),x2==0?(as=F[0],es=F[1],ns=F[2],ls=F[6],os=F[7],rs=F[8],Es=F[9],cs=F[10],ks=F[11],ms=F[3],Cs=F[4],As=F[5]):x2==1?(as=F[15],es=F[16],ns=F[17],ls=F[21],os=F[22],rs=F[23],Es=F[18],cs=F[19],ks=F[20],ms=F[12],Cs=F[13],As=F[14]):x2==2?(as=F[12],es=F[13],ns=F[14],ls=F[0],os=F[1],rs=F[2],Es=F[3],cs=F[4],ks=F[5],ms=F[15],Cs=F[16],As=F[17]):x2==3?(as=F[21],es=F[22],ns=F[23],ls=F[9],os=F[10],rs=F[11],Es=F[6],cs=F[7],ks=F[8],ms=F[18],Cs=F[19],As=F[20]):x2==4?(as=F[12],es=F[13],ns=F[14],ls=F[18],os=F[19],rs=F[20],Es=F[6],cs=F[7],ks=F[8],ms=F[0],Cs=F[1],As=F[2]):x2==5&&(as=F[3],es=F[4],ns=F[5],ls=x[9],os=x[10],rs=x[11],Es=F[21],cs=F[22],ks=F[23],ms=F[15],Cs=F[16],As=F[17])):((zi=G*ni+ti*li+Di*oi)<i2&&(i2=zi,x2=0),-zi<i2&&(i2=-zi,x2=1),(zi=Bi*ni+vi*li+ji*oi)<i2&&(i2=zi,x2=2),-zi<i2&&(i2=-zi,x2=3),(zi=qi*ni+Ji*li+Wi*oi)<i2&&(i2=zi,x2=4),-zi<i2&&(i2=-zi,x2=5),x2==0?(as=x[0],es=x[1],ns=x[2],ls=x[6],os=x[7],rs=x[8],Es=x[9],cs=x[10],ks=x[11],ms=x[3],Cs=x[4],As=x[5]):x2==1?(as=x[15],es=x[16],ns=x[17],ls=x[21],os=x[22],rs=x[23],Es=x[18],cs=x[19],ks=x[20],ms=x[12],Cs=x[13],As=x[14]):x2==2?(as=x[12],es=x[13],ns=x[14],ls=x[0],os=x[1],rs=x[2],Es=x[3],cs=x[4],ks=x[5],ms=x[15],Cs=x[16],As=x[17]):x2==3?(as=x[21],es=x[22],ns=x[23],ls=x[9],os=x[10],rs=x[11],Es=x[6],cs=x[7],ks=x[8],ms=x[18],Cs=x[19],As=x[20]):x2==4?(as=x[12],es=x[13],ns=x[14],ls=x[18],os=x[19],rs=x[20],Es=x[6],cs=x[7],ks=x[8],ms=x[0],Cs=x[1],As=x[2]):x2==5&&(as=x[3],es=x[4],ns=x[5],ls=x[9],os=x[10],rs=x[11],Es=x[21],cs=x[22],ks=x[23],ms=x[15],Cs=x[16],As=x[17])),this.clipVertices1[0]=as,this.clipVertices1[1]=es,this.clipVertices1[2]=ns,this.clipVertices1[3]=ls,this.clipVertices1[4]=os,this.clipVertices1[5]=rs,this.clipVertices1[6]=Es,this.clipVertices1[7]=cs,this.clipVertices1[8]=ks,this.clipVertices1[9]=ms,this.clipVertices1[10]=Cs,this.clipVertices1[11]=As,Ii=0,y=((Vi=this.clipVertices1[9])-c2-bs)*y2+((Li=this.clipVertices1[10])-k2-vs)*d2+((Ti=this.clipVertices1[11])-m2-zs)*u2;for(var Hi=0;Hi<4;Hi++)b=3*Hi,C=((F2=this.clipVertices1[b])-c2-bs)*y2+((D2=this.clipVertices1[b+1])-k2-vs)*d2+((B2=this.clipVertices1[b+2])-m2-zs)*u2,y>0?C>0?(b=3*Ii,Ii++,this.clipVertices2[b]=F2,this.clipVertices2[b+1]=D2,this.clipVertices2[b+2]=B2):(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices2[b]=Vi+(F2-Vi)*Oi,this.clipVertices2[b+1]=Li+(D2-Li)*Oi,this.clipVertices2[b+2]=Ti+(B2-Ti)*Oi):C>0&&(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices2[b]=Vi+(F2-Vi)*Oi,this.clipVertices2[b+1]=Li+(D2-Li)*Oi,this.clipVertices2[b+2]=Ti+(B2-Ti)*Oi,b=3*Ii,Ii++,this.clipVertices2[b]=F2,this.clipVertices2[b+1]=D2,this.clipVertices2[b+2]=B2),Vi=F2,Li=D2,Ti=B2,y=C;if((ys=Ii)!=0){for(Ii=0,b=3*(ys-1),y=((Vi=this.clipVertices2[b])-c2-Ns)*b2+((Li=this.clipVertices2[b+1])-k2-ws)*v2+((Ti=this.clipVertices2[b+2])-m2-Ms)*z2,Hi=0;Hi<ys;Hi++)b=3*Hi,C=((F2=this.clipVertices2[b])-c2-Ns)*b2+((D2=this.clipVertices2[b+1])-k2-ws)*v2+((B2=this.clipVertices2[b+2])-m2-Ms)*z2,y>0?C>0?(b=3*Ii,Ii++,this.clipVertices1[b]=F2,this.clipVertices1[b+1]=D2,this.clipVertices1[b+2]=B2):(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices1[b]=Vi+(F2-Vi)*Oi,this.clipVertices1[b+1]=Li+(D2-Li)*Oi,this.clipVertices1[b+2]=Ti+(B2-Ti)*Oi):C>0&&(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices1[b]=Vi+(F2-Vi)*Oi,this.clipVertices1[b+1]=Li+(D2-Li)*Oi,this.clipVertices1[b+2]=Ti+(B2-Ti)*Oi,b=3*Ii,Ii++,this.clipVertices1[b]=F2,this.clipVertices1[b+1]=D2,this.clipVertices1[b+2]=B2),Vi=F2,Li=D2,Ti=B2,y=C;if((ys=Ii)!=0){for(Ii=0,b=3*(ys-1),y=((Vi=this.clipVertices1[b])-c2+bs)*-y2+((Li=this.clipVertices1[b+1])-k2+vs)*-d2+((Ti=this.clipVertices1[b+2])-m2+zs)*-u2,Hi=0;Hi<ys;Hi++)b=3*Hi,C=((F2=this.clipVertices1[b])-c2+bs)*-y2+((D2=this.clipVertices1[b+1])-k2+vs)*-d2+((B2=this.clipVertices1[b+2])-m2+zs)*-u2,y>0?C>0?(b=3*Ii,Ii++,this.clipVertices2[b]=F2,this.clipVertices2[b+1]=D2,this.clipVertices2[b+2]=B2):(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices2[b]=Vi+(F2-Vi)*Oi,this.clipVertices2[b+1]=Li+(D2-Li)*Oi,this.clipVertices2[b+2]=Ti+(B2-Ti)*Oi):C>0&&(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices2[b]=Vi+(F2-Vi)*Oi,this.clipVertices2[b+1]=Li+(D2-Li)*Oi,this.clipVertices2[b+2]=Ti+(B2-Ti)*Oi,b=3*Ii,Ii++,this.clipVertices2[b]=F2,this.clipVertices2[b+1]=D2,this.clipVertices2[b+2]=B2),Vi=F2,Li=D2,Ti=B2,y=C;if((ys=Ii)!=0){for(Ii=0,b=3*(ys-1),y=((Vi=this.clipVertices2[b])-c2+Ns)*-b2+((Li=this.clipVertices2[b+1])-k2+ws)*-v2+((Ti=this.clipVertices2[b+2])-m2+Ms)*-z2,Hi=0;Hi<ys;Hi++)b=3*Hi,C=((F2=this.clipVertices2[b])-c2+Ns)*-b2+((D2=this.clipVertices2[b+1])-k2+ws)*-v2+((B2=this.clipVertices2[b+2])-m2+Ms)*-z2,y>0?C>0?(b=3*Ii,Ii++,this.clipVertices1[b]=F2,this.clipVertices1[b+1]=D2,this.clipVertices1[b+2]=B2):(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices1[b]=Vi+(F2-Vi)*Oi,this.clipVertices1[b+1]=Li+(D2-Li)*Oi,this.clipVertices1[b+2]=Ti+(B2-Ti)*Oi):C>0&&(b=3*Ii,Ii++,Oi=y/(y-C),this.clipVertices1[b]=Vi+(F2-Vi)*Oi,this.clipVertices1[b+1]=Li+(D2-Li)*Oi,this.clipVertices1[b+2]=Ti+(B2-Ti)*Oi,b=3*Ii,Ii++,this.clipVertices1[b]=F2,this.clipVertices1[b+1]=D2,this.clipVertices1[b+2]=B2),Vi=F2,Li=D2,Ti=B2,y=C;if(ht){var g3=a;a=e,e=g3}if((ys=Ii)!=0){var at=a!=s;if(ys>4){y2=as-(Vi=.25*(as+ls+Es+ms)),d2=es-(Li=.25*(es+os+cs+Cs)),u2=ns-(Ti=.25*(ns+rs+ks+As)),b2=ls-Vi,v2=os-Li,z2=rs-Ti;var Yt=0,m3=0,Kt=0,C3=0,et=-this.INF;for(i2=this.INF,Hi=0;Hi<ys;Hi++)this.used[Hi]=!1,b=3*Hi,(zi=(Vi=this.clipVertices1[b])*y2+(Li=this.clipVertices1[b+1])*d2+(Ti=this.clipVertices1[b+2])*u2)<i2&&(i2=zi,Yt=Hi),zi>et&&(et=zi,Kt=Hi);for(this.used[Yt]=!0,this.used[Kt]=!0,et=-this.INF,i2=this.INF,Hi=0;Hi<ys;Hi++)this.used[Hi]||(b=3*Hi,(zi=(Vi=this.clipVertices1[b])*b2+(Li=this.clipVertices1[b+1])*v2+(Ti=this.clipVertices1[b+2])*z2)<i2&&(i2=zi,m3=Hi),zi>et&&(et=zi,C3=Hi));b=3*Yt,(zi=((Vi=this.clipVertices1[b])-c2)*ni+((Li=this.clipVertices1[b+1])-k2)*li+((Ti=this.clipVertices1[b+2])-m2)*oi)<0&&h.addPoint(Vi,Li,Ti,ni,li,oi,zi,at),b=3*m3,(zi=((Vi=this.clipVertices1[b])-c2)*ni+((Li=this.clipVertices1[b+1])-k2)*li+((Ti=this.clipVertices1[b+2])-m2)*oi)<0&&h.addPoint(Vi,Li,Ti,ni,li,oi,zi,at),b=3*Kt,(zi=((Vi=this.clipVertices1[b])-c2)*ni+((Li=this.clipVertices1[b+1])-k2)*li+((Ti=this.clipVertices1[b+2])-m2)*oi)<0&&h.addPoint(Vi,Li,Ti,ni,li,oi,zi,at),b=3*C3,(zi=((Vi=this.clipVertices1[b])-c2)*ni+((Li=this.clipVertices1[b+1])-k2)*li+((Ti=this.clipVertices1[b+2])-m2)*oi)<0&&h.addPoint(Vi,Li,Ti,ni,li,oi,zi,at)}else for(Hi=0;Hi<ys;Hi++)b=3*Hi,(zi=((Vi=this.clipVertices1[b])-c2)*ni+((Li=this.clipVertices1[b+1])-k2)*li+((Ti=this.clipVertices1[b+2])-m2)*oi)<0&&h.addPoint(Vi,Li,Ti,ni,li,oi,zi,at)}}}}}}}}),zt.prototype=Object.assign(Object.create(W2.prototype),{constructor:zt,getSep:function(s,t,h,a,e){var n,l,E,r,p,o,A,c,k,m,u,g,S,d=new B,I=s.position.x,M=s.position.y,O=s.position.z,R=t.position.x,P=t.position.y,$=t.position.z,z=R-I,L=P-M,_=$-O;z*z+L*L+_*_==0&&(L=.001);var w=-z,T=-L,U=-_;this.supportPointB(s,-w,-T,-U,d);var ri=d.x,Ki=d.y,Zi=d.z;this.supportPointC(t,w,T,U,d);var Ri=d.x,D=d.y,Fi=d.z,y=Ri-ri,C=D-Ki,V=Fi-Zi;if(y*w+C*T+V*U<=0)return!1;if((w=C*_-V*L)*w+(T=V*z-y*_)*T+(U=y*L-C*z)*U==0)return h.set(y-z,C-L,V-_).normalize(),a.set(.5*(ri+Ri),.5*(Ki+D),.5*(Zi+Fi)),!0;this.supportPointB(s,-w,-T,-U,d);var F=d.x,x=d.y,Ei=d.z;this.supportPointC(t,w,T,U,d);var ci=d.x,Z=d.y,X=d.z,v=ci-F,q=Z-x,Q=X-Ei;if(v*w+q*T+Q*U<=0)return!1;(w=(l=C-L)*(o=Q-_)-(E=V-_)*(p=q-L))*z+(T=E*(r=v-z)-(n=y-z)*o)*L+(U=n*p-l*r)*_>0&&(n=y,l=C,E=V,y=v,C=q,V=Q,v=n,q=l,Q=E,n=ri,l=Ki,E=Zi,ri=F,Ki=x,Zi=Ei,F=n,x=l,Ei=E,n=Ri,l=D,E=Fi,Ri=ci,D=Z,Fi=X,ci=n,Z=l,X=E,w=-w,T=-T,U=-U);for(var T2=0;;){if(++T2>100)return!1;this.supportPointB(s,-w,-T,-U,d);var Xi=d.x,E2=d.y,_i=d.z;this.supportPointC(t,w,T,U,d);var Ui=d.x,ai=d.y,K=d.z,N=Ui-Xi,j=ai-E2,ii=K-_i;if(N*w+j*T+ii*U<=0)return!1;if((C*ii-V*j)*z+(V*N-y*ii)*L+(y*j-C*N)*_<0)v=N,q=j,Q=ii,F=Xi,x=E2,Ei=_i,ci=Ui,Z=ai,X=K,w=(l=C-L)*(o=ii-_)-(E=V-_)*(p=j-L),T=E*(r=N-z)-(n=y-z)*o,U=n*p-l*r;else if((j*Q-ii*q)*z+(ii*v-N*Q)*L+(N*q-j*v)*_<0)y=N,C=j,V=ii,ri=Xi,Ki=E2,Zi=_i,Ri=Ui,D=ai,Fi=K,w=(l=j-L)*(o=Q-_)-(E=ii-_)*(p=q-L),T=E*(r=v-z)-(n=N-z)*o,U=n*p-l*r;else for(var Yi=!1;;){if(w=(l=q-C)*(o=ii-V)-(E=Q-V)*(p=j-C),T=E*(r=N-y)-(n=v-y)*o,U=n*p-l*r,(w*=A=1/f.sqrt(w*w+T*T+U*U))*y+(T*=A)*C+(U*=A)*V>=0&&!Yi){var xi=(C*Q-V*q)*N+(V*v-y*Q)*j+(y*q-C*v)*ii,pi=(j*Q-ii*q)*z+(ii*v-N*Q)*L+(N*q-j*v)*_,Ai=(L*V-_*C)*N+(_*y-z*V)*j+(z*C-L*y)*ii,yi=(q*V-Q*C)*z+(Q*y-v*V)*L+(v*C-q*y)*_,H=xi+pi+Ai+yi;H<=0&&(xi=0,H=(pi=(q*ii-Q*j)*w+(Q*N-v*ii)*T+(v*j-q*N)*U)+(Ai=(j*Q-ii*q)*w+(ii*v-N*Q)*T+(N*q-j*v)*U)+(yi=(C*Q-V*q)*w+(V*v-y*Q)*T+(y*q-C*v)*U));var J=1/H;c=(I*xi+ri*pi+F*Ai+Xi*yi)*J,k=(M*xi+Ki*pi+x*Ai+E2*yi)*J,m=(O*xi+Zi*pi+Ei*Ai+_i*yi)*J,u=(R*xi+Ri*pi+ci*Ai+Ui*yi)*J,g=(P*xi+D*pi+Z*Ai+ai*yi)*J,S=($*xi+Fi*pi+X*Ai+K*yi)*J,Yi=!0}this.supportPointB(s,-w,-T,-U,d);var W=d.x,gi=d.y,di=d.z;this.supportPointC(t,w,T,U,d);var ui=d.x,Pi=d.y,Mi=d.z,mi=ui-W,ei=Pi-gi,Ci=Mi-di,s2=-(mi*w+ei*T+Ci*U);if((mi-N)*w+(ei-j)*T+(Ci-ii)*U<=.01||s2>=0)return!!Yi&&(h.set(-w,-T,-U),a.set(.5*(c+u),.5*(k+g),.5*(m+S)),e.x=s2,!0);(ei*V-Ci*C)*z+(Ci*y-mi*V)*L+(mi*C-ei*y)*_<0?(ei*Q-Ci*q)*z+(Ci*v-mi*Q)*L+(mi*q-ei*v)*_<0?(y=mi,C=ei,V=Ci,ri=W,Ki=gi,Zi=di,Ri=ui,D=Pi,Fi=Mi):(N=mi,j=ei,ii=Ci,Xi=W,E2=gi,_i=di,Ui=ui,ai=Pi,K=Mi):(ei*ii-Ci*j)*z+(Ci*N-mi*ii)*L+(mi*j-ei*N)*_<0?(v=mi,q=ei,Q=Ci,F=W,x=gi,Ei=di,ci=ui,Z=Pi,X=Mi):(y=mi,C=ei,V=Ci,ri=W,Ki=gi,Zi=di,Ri=ui,D=Pi,Fi=Mi)}}},supportPointB:function(s,t,h,a,e){var n,l,E,r=s.rotation.elements,p=r[0]*t+r[3]*h+r[6]*a,o=r[1]*t+r[4]*h+r[7]*a,A=r[2]*t+r[5]*h+r[8]*a,c=s.halfWidth,k=s.halfHeight,m=s.halfDepth;n=p<0?-c:c,l=o<0?-k:k,E=A<0?-m:m,p=r[0]*n+r[1]*l+r[2]*E+s.position.x,o=r[3]*n+r[4]*l+r[5]*E+s.position.y,A=r[6]*n+r[7]*l+r[8]*E+s.position.z,e.set(p,o,A)},supportPointC:function(s,t,h,a,e){var n,l,E,r=s.rotation.elements,p=r[0]*t+r[3]*h+r[6]*a,o=r[1]*t+r[4]*h+r[7]*a,A=r[2]*t+r[5]*h+r[8]*a,c=p,k=A,m=c*c+k*k,u=s.radius,g=s.halfHeight;m==0?o<0?(n=u,l=-g,E=0):(n=u,l=g,E=0):(m=s.radius/f.sqrt(m),o<0?(n=c*m,l=-g,E=k*m):(n=c*m,l=g,E=k*m)),p=r[0]*n+r[1]*l+r[2]*E+s.position.x,o=r[3]*n+r[4]*l+r[5]*E+s.position.y,A=r[6]*n+r[7]*l+r[8]*E+s.position.z,e.set(p,o,A)},detectCollision:function(s,t,h){var a,e;this.flip?(a=t,e=s):(a=s,e=t);var n=new B,l=new B,E=new B;if(this.getSep(a,e,n,l,E)){var r=a.position.x,p=a.position.y,o=a.position.z,A=e.position.x,c=e.position.y,k=e.position.z,m=a.halfWidth,u=a.halfHeight,g=a.halfDepth,S=e.halfHeight,d=e.radius,I=a.dimentions,M=I[0],O=I[1],R=I[2],P=I[3],$=I[4],z=I[5],L=I[6],_=I[7],w=I[8],T=I[9],U=I[10],ri=I[11],Ki=I[12],Zi=I[13],Ri=I[14],D=I[15],Fi=I[16],y=I[17],C=e.normalDirection.x,V=e.normalDirection.y,F=e.normalDirection.z,x=e.halfDirection.x,Ei=e.halfDirection.y,ci=e.halfDirection.z,Z=n.x,X=n.y,v=n.z,q=Z*M+X*O+v*R,Q=Z*P+X*$+v*z,T2=Z*L+X*_+v*w,Xi=Z*C+X*V+v*F,E2=q>0,_i=Q>0,Ui=T2>0,ai=Xi>0;E2||(q=-q),_i||(Q=-Q),Ui||(T2=-T2),ai||(Xi=-Xi);var K,N,j,ii,Yi,xi,pi,Ai,yi,H,J,W,gi,di,ui,Pi,Mi,mi,ei,Ci,s2,fi,hi,si,G,ti,Di,Bi,vi,ji,qi,Ji,Wi,fs,C2,g2,f2,bi,j2,O2,R2,Si,Ni,t2,wi,N2,w2,M2,I2,S2,P2,l2,o2,A2=0;if(Xi>.999?A2=q>.999?q>Xi?1:4:Q>.999?Q>Xi?2:4:T2>.999&&T2>Xi?3:4:q>.999?A2=1:Q>.999?A2=2:T2>.999&&(A2=3),A2==0)h.addPoint(l.x,l.y,l.z,Z,X,v,E.x,this.flip);else if(A2==4){var H2,Y2,K2,Z2,X2,G2,$2,Q2,is,ss,ts,hs;ai?(ii=A-x,Yi=c-Ei,xi=k-ci,Z=-C,X=-V,v=-F):(ii=A+x,Yi=c+Ei,xi=k+ci,Z=C,X=V,v=F),A2=0,(Ni=M*Z+O*X+R*v)<(Ci=1)&&(Ci=Ni,A2=0),-Ni<Ci&&(Ci=-Ni,A2=1),(Ni=P*Z+$*X+z*v)<Ci&&(Ci=Ni,A2=2),-Ni<Ci&&(Ci=-Ni,A2=3),(Ni=L*Z+_*X+w*v)<Ci&&(Ci=Ni,A2=4),-Ni<Ci&&(Ci=-Ni,A2=5);var Y=a.elements;switch(A2){case 0:H2=Y[0],Y2=Y[1],K2=Y[2],Z2=Y[6],X2=Y[7],G2=Y[8],$2=Y[9],Q2=Y[10],is=Y[11],ss=Y[3],ts=Y[4],hs=Y[5];break;case 1:H2=Y[15],Y2=Y[16],K2=Y[17],Z2=Y[21],X2=Y[22],G2=Y[23],$2=Y[18],Q2=Y[19],is=Y[20],ss=Y[12],ts=Y[13],hs=Y[14];break;case 2:H2=Y[12],Y2=Y[13],K2=Y[14],Z2=Y[0],X2=Y[1],G2=Y[2],$2=Y[3],Q2=Y[4],is=Y[5],ss=Y[15],ts=Y[16],hs=Y[17];break;case 3:H2=Y[21],Y2=Y[22],K2=Y[23],Z2=Y[9],X2=Y[10],G2=Y[11],$2=Y[6],Q2=Y[7],is=Y[8],ss=Y[18],ts=Y[19],hs=Y[20];break;case 4:H2=Y[12],Y2=Y[13],K2=Y[14],Z2=Y[18],X2=Y[19],G2=Y[20],$2=Y[6],Q2=Y[7],is=Y[8],ss=Y[0],ts=Y[1],hs=Y[2];break;case 5:H2=Y[3],Y2=Y[4],K2=Y[5],Z2=Y[9],X2=Y[10],G2=Y[11],$2=Y[21],Q2=Y[22],is=Y[23],ss=Y[15],ts=Y[16],hs=Y[17]}(ei=Z*(H2-ii)+X*(Y2-Yi)+v*(K2-xi))<=0&&h.addPoint(H2,Y2,K2,-Z,-X,-v,ei,this.flip),(ei=Z*(Z2-ii)+X*(X2-Yi)+v*(G2-xi))<=0&&h.addPoint(Z2,X2,G2,-Z,-X,-v,ei,this.flip),(ei=Z*($2-ii)+X*(Q2-Yi)+v*(is-xi))<=0&&h.addPoint($2,Q2,is,-Z,-X,-v,ei,this.flip),(ei=Z*(ss-ii)+X*(ts-Yi)+v*(hs-xi))<=0&&h.addPoint(ss,ts,hs,-Z,-X,-v,ei,this.flip)}else{switch(A2){case 1:E2?(K=r+T,N=p+U,j=o+ri,Z=M,X=O,v=R):(K=r-T,N=p-U,j=o-ri,Z=-M,X=-O,v=-R),N2=P,w2=$,M2=z,l2=u,I2=L,S2=_,P2=w,o2=g;break;case 2:_i?(K=r+Ki,N=p+Zi,j=o+Ri,Z=P,X=$,v=z):(K=r-Ki,N=p-Zi,j=o-Ri,Z=-P,X=-$,v=-z),N2=M,w2=O,M2=R,l2=m,I2=L,S2=_,P2=w,o2=g;break;case 3:Ui?(K=r+D,N=p+Fi,j=o+y,Z=L,X=_,v=w):(K=r-D,N=p-Fi,j=o-y,Z=-L,X=-_,v=-w),N2=M,w2=O,M2=R,l2=m,I2=P,S2=$,P2=z,o2=u}if(ii=A+(s2=(Ci=Z*C+X*V+v*F)<0?S:-S)*C,Yi=c+s2*V,xi=k+s2*F,Xi>=.999999?(fi=-X,hi=v,si=Z):(fi=Z,hi=X,si=v),ti=(s2=fi*C+hi*V+si*F)*C-fi,Di=s2*V-hi,Bi=s2*F-si,(s2=f.sqrt(ti*ti+Di*Di+Bi*Bi))==0)return;if(fi=ii+(ti*=s2=d/s2),hi=Yi+(Di*=s2),si=xi+(Bi*=s2),Ci<-.96||Ci>.96)pi=C*C*1.5-.5,Ai=C*V*1.5-.866025403*F,yi=C*F*1.5+.866025403*V,H=V*C*1.5+.866025403*F,J=V*V*1.5-.5,W=V*F*1.5-.866025403*C,gi=F*C*1.5-.866025403*V,di=F*V*1.5+.866025403*C,ui=F*F*1.5-.5,(bi=N2*(fi=(Pi=fi)-(ei=Z*(Pi-K)+X*((Mi=hi)-N)+v*((mi=si)-j))*Z-K)+w2*(hi=Mi-ei*X-N)+M2*(si=mi-ei*v-j))<-l2?bi=-l2:bi>l2&&(bi=l2),(Si=I2*fi+S2*hi+P2*si)<-o2?Si=-o2:Si>o2&&(Si=o2),Pi=K+(fi=bi*N2+Si*I2),Mi=N+(hi=bi*w2+Si*S2),mi=j+(si=bi*M2+Si*P2),h.addPoint(Pi,Mi,mi,Z,X,v,ei,this.flip),Mi=ti*H+Di*J+Bi*W,mi=ti*gi+Di*di+Bi*ui,(ei=Z*((Pi=(ti=Pi=ti*pi+Di*Ai+Bi*yi)+ii)-K)+X*((Mi=(Di=Mi)+Yi)-N)+v*((mi=(Bi=mi)+xi)-j))<=0&&((bi=N2*(fi=Pi-ei*Z-K)+w2*(hi=Mi-ei*X-N)+M2*(si=mi-ei*v-j))<-l2?bi=-l2:bi>l2&&(bi=l2),(Si=I2*fi+S2*hi+P2*si)<-o2?Si=-o2:Si>o2&&(Si=o2),Pi=K+(fi=bi*N2+Si*I2),Mi=N+(hi=bi*w2+Si*S2),mi=j+(si=bi*M2+Si*P2),h.addPoint(Pi,Mi,mi,Z,X,v,ei,this.flip)),Mi=ti*H+Di*J+Bi*W,mi=ti*gi+Di*di+Bi*ui,(ei=Z*((Pi=(ti=Pi=ti*pi+Di*Ai+Bi*yi)+ii)-K)+X*((Mi=(Di=Mi)+Yi)-N)+v*((mi=(Bi=mi)+xi)-j))<=0&&((bi=N2*(fi=Pi-ei*Z-K)+w2*(hi=Mi-ei*X-N)+M2*(si=mi-ei*v-j))<-l2?bi=-l2:bi>l2&&(bi=l2),(Si=I2*fi+S2*hi+P2*si)<-o2?Si=-o2:Si>o2&&(Si=o2),Pi=K+(fi=bi*N2+Si*I2),Mi=N+(hi=bi*w2+Si*S2),mi=j+(si=bi*M2+Si*P2),h.addPoint(Pi,Mi,mi,Z,X,v,ei,this.flip));else{if(C2=fi,Ci>0?(j2=fi+2*x,O2=hi+2*Ei,R2=si+2*ci):(j2=fi-2*x,O2=hi-2*Ei,R2=si-2*ci),fi=(j2-=(Si=Z*(j2-K)+X*(O2-N)+v*(R2-j))*Z)-(C2-=(bi=Z*(C2-K)+X*((g2=hi)-N)+v*((f2=si)-j))*Z),hi=(O2-=Si*X)-(g2-=bi*X),si=(R2-=Si*v)-(f2-=bi*v),G=Si-bi,t2=(Q=(Ji=j2-K)*N2+(Wi=O2-N)*w2+(fs=R2-j)*M2)-l2,(Ni=(q=(vi=C2-K)*N2+(ji=g2-N)*w2+(qi=f2-j)*M2)-l2)>0){if(t2>0)return;q=(vi=(C2+=fi*(wi=Ni/(Ni-t2)))-K)*N2+(ji=(g2+=hi*wi)-N)*w2+(qi=(f2+=si*wi)-j)*M2,fi=j2-C2,hi=O2-g2,si=R2-f2,G=Si-(bi+=G*wi)}else t2>0&&(Q=(Ji=(j2=C2+fi*(wi=Ni/(Ni-t2)))-K)*N2+(Wi=(O2=g2+hi*wi)-N)*w2+(fs=(R2=f2+si*wi)-j)*M2,fi=j2-C2,hi=O2-g2,si=R2-f2,G=(Si=bi+G*wi)-bi);if(t2=Q+l2,(Ni=q+l2)<0){if(t2<0)return;vi=(C2+=fi*(wi=Ni/(Ni-t2)))-K,ji=(g2+=hi*wi)-N,qi=(f2+=si*wi)-j,fi=j2-C2,hi=O2-g2,si=R2-f2,G=Si-(bi+=G*wi)}else t2<0&&(Ji=(j2=C2+fi*(wi=Ni/(Ni-t2)))-K,Wi=(O2=g2+hi*wi)-N,fs=(R2=f2+si*wi)-j,fi=j2-C2,hi=O2-g2,si=R2-f2,G=(Si=bi+G*wi)-bi);if(t2=(Q=Ji*I2+Wi*S2+fs*P2)-o2,(Ni=(q=vi*I2+ji*S2+qi*P2)-o2)>0){if(t2>0)return;q=(vi=(C2+=fi*(wi=Ni/(Ni-t2)))-K)*I2+(ji=(g2+=hi*wi)-N)*S2+(qi=(f2+=si*wi)-j)*P2,fi=j2-C2,hi=O2-g2,si=R2-f2,G=Si-(bi+=G*wi)}else t2>0&&(Q=(Ji=(j2=C2+fi*(wi=Ni/(Ni-t2)))-K)*I2+(Wi=(O2=g2+hi*wi)-N)*S2+(fs=(R2=f2+si*wi)-j)*P2,fi=j2-C2,hi=O2-g2,si=R2-f2,G=(Si=bi+G*wi)-bi);if(t2=Q+o2,(Ni=q+o2)<0){if(t2<0)return;C2+=fi*(wi=Ni/(Ni-t2)),g2+=hi*wi,f2+=si*wi,bi+=G*wi}else t2<0&&(j2=C2+fi*(wi=Ni/(Ni-t2)),O2=g2+hi*wi,R2=f2+si*wi,Si=bi+G*wi);bi<0&&h.addPoint(C2,g2,f2,Z,X,v,bi,this.flip),Si<0&&h.addPoint(j2,O2,R2,Z,X,v,Si,this.flip)}}}}}),Wt.prototype=Object.assign(Object.create(W2.prototype),{constructor:Wt,getSep:function(s,t,h,a,e){var n,l,E,r,p,o,A,c,k,m,u,g,S,d=new B,I=s.position.x,M=s.position.y,O=s.position.z,R=t.position.x,P=t.position.y,$=t.position.z,z=R-I,L=P-M,_=$-O;z*z+L*L+_*_==0&&(L=.001);var w=-z,T=-L,U=-_;this.supportPoint(s,-w,-T,-U,d);var ri=d.x,Ki=d.y,Zi=d.z;this.supportPoint(t,w,T,U,d);var Ri=d.x,D=d.y,Fi=d.z,y=Ri-ri,C=D-Ki,V=Fi-Zi;if(y*w+C*T+V*U<=0)return!1;if((w=C*_-V*L)*w+(T=V*z-y*_)*T+(U=y*L-C*z)*U==0)return h.set(y-z,C-L,V-_).normalize(),a.set(.5*(ri+Ri),.5*(Ki+D),.5*(Zi+Fi)),!0;this.supportPoint(s,-w,-T,-U,d);var F=d.x,x=d.y,Ei=d.z;this.supportPoint(t,w,T,U,d);var ci=d.x,Z=d.y,X=d.z,v=ci-F,q=Z-x,Q=X-Ei;if(v*w+q*T+Q*U<=0)return!1;(w=(l=C-L)*(o=Q-_)-(E=V-_)*(p=q-L))*z+(T=E*(r=v-z)-(n=y-z)*o)*L+(U=n*p-l*r)*_>0&&(n=y,l=C,E=V,y=v,C=q,V=Q,v=n,q=l,Q=E,n=ri,l=Ki,E=Zi,ri=F,Ki=x,Zi=Ei,F=n,x=l,Ei=E,n=Ri,l=D,E=Fi,Ri=ci,D=Z,Fi=X,ci=n,Z=l,X=E,w=-w,T=-T,U=-U);for(var T2=0;;){if(++T2>100)return!1;this.supportPoint(s,-w,-T,-U,d);var Xi=d.x,E2=d.y,_i=d.z;this.supportPoint(t,w,T,U,d);var Ui=d.x,ai=d.y,K=d.z,N=Ui-Xi,j=ai-E2,ii=K-_i;if(N*w+j*T+ii*U<=0)return!1;if((C*ii-V*j)*z+(V*N-y*ii)*L+(y*j-C*N)*_<0)v=N,q=j,Q=ii,F=Xi,x=E2,Ei=_i,ci=Ui,Z=ai,X=K,w=(l=C-L)*(o=ii-_)-(E=V-_)*(p=j-L),T=E*(r=N-z)-(n=y-z)*o,U=n*p-l*r;else if((j*Q-ii*q)*z+(ii*v-N*Q)*L+(N*q-j*v)*_<0)y=N,C=j,V=ii,ri=Xi,Ki=E2,Zi=_i,Ri=Ui,D=ai,Fi=K,w=(l=j-L)*(o=Q-_)-(E=ii-_)*(p=q-L),T=E*(r=v-z)-(n=N-z)*o,U=n*p-l*r;else for(var Yi=!1;;){if(w=(l=q-C)*(o=ii-V)-(E=Q-V)*(p=j-C),T=E*(r=N-y)-(n=v-y)*o,U=n*p-l*r,(w*=A=1/f.sqrt(w*w+T*T+U*U))*y+(T*=A)*C+(U*=A)*V>=0&&!Yi){var xi=(C*Q-V*q)*N+(V*v-y*Q)*j+(y*q-C*v)*ii,pi=(j*Q-ii*q)*z+(ii*v-N*Q)*L+(N*q-j*v)*_,Ai=(L*V-_*C)*N+(_*y-z*V)*j+(z*C-L*y)*ii,yi=(q*V-Q*C)*z+(Q*y-v*V)*L+(v*C-q*y)*_,H=xi+pi+Ai+yi;H<=0&&(xi=0,H=(pi=(q*ii-Q*j)*w+(Q*N-v*ii)*T+(v*j-q*N)*U)+(Ai=(j*Q-ii*q)*w+(ii*v-N*Q)*T+(N*q-j*v)*U)+(yi=(C*Q-V*q)*w+(V*v-y*Q)*T+(y*q-C*v)*U));var J=1/H;c=(I*xi+ri*pi+F*Ai+Xi*yi)*J,k=(M*xi+Ki*pi+x*Ai+E2*yi)*J,m=(O*xi+Zi*pi+Ei*Ai+_i*yi)*J,u=(R*xi+Ri*pi+ci*Ai+Ui*yi)*J,g=(P*xi+D*pi+Z*Ai+ai*yi)*J,S=($*xi+Fi*pi+X*Ai+K*yi)*J,Yi=!0}this.supportPoint(s,-w,-T,-U,d);var W=d.x,gi=d.y,di=d.z;this.supportPoint(t,w,T,U,d);var ui=d.x,Pi=d.y,Mi=d.z,mi=ui-W,ei=Pi-gi,Ci=Mi-di,s2=-(mi*w+ei*T+Ci*U);if((mi-N)*w+(ei-j)*T+(Ci-ii)*U<=.01||s2>=0)return!!Yi&&(h.set(-w,-T,-U),a.set(.5*(c+u),.5*(k+g),.5*(m+S)),e.x=s2,!0);(ei*V-Ci*C)*z+(Ci*y-mi*V)*L+(mi*C-ei*y)*_<0?(ei*Q-Ci*q)*z+(Ci*v-mi*Q)*L+(mi*q-ei*v)*_<0?(y=mi,C=ei,V=Ci,ri=W,Ki=gi,Zi=di,Ri=ui,D=Pi,Fi=Mi):(N=mi,j=ei,ii=Ci,Xi=W,E2=gi,_i=di,Ui=ui,ai=Pi,K=Mi):(ei*ii-Ci*j)*z+(Ci*N-mi*ii)*L+(mi*j-ei*N)*_<0?(v=mi,q=ei,Q=Ci,F=W,x=gi,Ei=di,ci=ui,Z=Pi,X=Mi):(y=mi,C=ei,V=Ci,ri=W,Ki=gi,Zi=di,Ri=ui,D=Pi,Fi=Mi)}}},supportPoint:function(s,t,h,a,e){var n,l,E,r=s.rotation.elements,p=r[0]*t+r[3]*h+r[6]*a,o=r[1]*t+r[4]*h+r[7]*a,A=r[2]*t+r[5]*h+r[8]*a,c=p,k=A,m=c*c+k*k,u=s.radius,g=s.halfHeight;m==0?o<0?(n=u,l=-g,E=0):(n=u,l=g,E=0):(m=s.radius/f.sqrt(m),o<0?(n=c*m,l=-g,E=k*m):(n=c*m,l=g,E=k*m)),p=r[0]*n+r[1]*l+r[2]*E+s.position.x,o=r[3]*n+r[4]*l+r[5]*E+s.position.y,A=r[6]*n+r[7]*l+r[8]*E+s.position.z,e.set(p,o,A)},detectCollision:function(s,t,h){var a,e;s.id<t.id?(a=s,e=t):(a=t,e=s);var n,l,E,r,p,o,A,c,k,m,u,g,S,d,I,M,O,R,P,$,z,L=a.position,_=e.position,w=L.x,T=L.y,U=L.z,ri=_.x,Ki=_.y,Zi=_.z,Ri=a.halfHeight,D=e.halfHeight,Fi=a.normalDirection,y=e.normalDirection,C=a.halfDirection,V=e.halfDirection,F=a.radius,x=e.radius,Ei=Fi.x,ci=Fi.y,Z=Fi.z,X=y.x,v=y.y,q=y.z,Q=C.x,T2=C.y,Xi=C.z,E2=V.x,_i=V.y,Ui=V.z,ai=w-ri,K=T-Ki,N=U-Zi,j=new B,ii=new B,Yi=new B;if(this.getSep(a,e,j,ii,Yi)){var xi=j.x*Ei+j.y*ci+j.z*Z,pi=j.x*X+j.y*v+j.z*q,Ai=xi>0,yi=pi>0;Ai||(xi=-xi),yi||(pi=-pi);var H,J,W,gi=0;(xi>.999||pi>.999)&&(gi=xi>pi?1:2);var di,ui,Pi,Mi,mi,ei,Ci,s2,fi,hi,si,G,ti,Di,Bi,vi,ji=Yi.x;switch(H=j.x,J=j.y,W=j.z,gi){case 0:h.addPoint(ii.x,ii.y,ii.z,H,J,W,ji,!1);break;case 1:if(Ai?(l=w+Q,E=T+T2,r=U+Xi,H=Ei,J=ci,W=Z):(l=w-Q,E=T-T2,r=U-Xi,H=-Ei,J=-ci,W=-Z),p=ri+(n=(P=H*X+J*v+W*q)<0?D:-D)*X,o=Ki+n*v,A=Zi+n*q,pi>=.999999?(c=-J,k=W,m=H):(c=H,k=J,m=W),ai=(n=c*X+k*v+m*q)*X-c,K=n*v-k,N=n*q-m,(n=f.sqrt(ai*ai+K*K+N*N))==0)break;if(c=p+(ai*=n=x/n),k=o+(K*=n),m=A+(N*=n),P<-.96||P>.96)di=X*X*1.5-.5,ui=X*v*1.5-.866025403*q,Pi=X*q*1.5+.866025403*v,Mi=v*X*1.5+.866025403*q,mi=v*v*1.5-.5,ei=v*q*1.5-.866025403*X,Ci=q*X*1.5-.866025403*v,s2=q*v*1.5+.866025403*X,fi=q*q*1.5-.5,(n=(c=(hi=c)-(ti=H*(hi-l)+J*((si=k)-E)+W*((G=m)-r))*H-l)*c+(k=si-ti*J-E)*k+(m=G-ti*W-r)*m)>F*F&&(c*=n=F/f.sqrt(n),k*=n,m*=n),hi=l+c,si=E+k,G=r+m,h.addPoint(hi,si,G,H,J,W,ti,!1),si=ai*Mi+K*mi+N*ei,G=ai*Ci+K*s2+N*fi,(ti=H*((hi=(ai=hi=ai*di+K*ui+N*Pi)+p)-l)+J*((si=(K=si)+o)-E)+W*((G=(N=G)+A)-r))<=0&&((n=(c=hi-ti*H-l)*c+(k=si-ti*J-E)*k+(m=G-ti*W-r)*m)>F*F&&(c*=n=F/f.sqrt(n),k*=n,m*=n),hi=l+c,si=E+k,G=r+m,h.addPoint(hi,si,G,H,J,W,ti,!1)),si=ai*Mi+K*mi+N*ei,G=ai*Ci+K*s2+N*fi,(ti=H*((hi=(ai=hi=ai*di+K*ui+N*Pi)+p)-l)+J*((si=(K=si)+o)-E)+W*((G=(N=G)+A)-r))<=0&&((n=(c=hi-ti*H-l)*c+(k=si-ti*J-E)*k+(m=G-ti*W-r)*m)>F*F&&(c*=n=F/f.sqrt(n),k*=n,m*=n),hi=l+c,si=E+k,G=r+m,h.addPoint(hi,si,G,H,J,W,ti,!1));else{if(u=c,P>0?(d=c+X*D*2,I=k+v*D*2,M=m+q*D*2):(d=c-X*D*2,I=k-v*D*2,M=m-q*D*2),(vi=(Di=(ai=l-(u-=(O=H*(u-l)+J*((g=k)-E)+W*((S=m)-r))*H))*(c=(d-=(R=H*(d-l)+J*(I-E)+W*(M-r))*H)-u)+(K=E-(g-=O*J))*(k=(I-=R*J)-g)+(N=r-(S-=O*W))*(m=(M-=R*W)-S))*Di-(Bi=c*c+k*k+m*m)*(ai*ai+K*K+N*N-F*F))<0)break;(z=(Di-(vi=f.sqrt(vi)))/Bi)<($=(Di+vi)/Bi)&&(n=$,$=z,z=n),z>1&&(z=1),$<0&&($=0),c=u+(d-u)*$,k=g+(I-g)*$,m=S+(M-S)*$,d=u+(d-u)*z,I=g+(I-g)*z,M=S+(M-S)*z,u=c,g=k,S=m,n=O+(R-O)*$,R=O+(R-O)*z,(O=n)<0&&h.addPoint(u,g,S,H,J,W,ti,!1),R<0&&h.addPoint(d,I,M,H,J,W,ti,!1)}break;case 2:if(yi?(p=ri-E2,o=Ki-_i,A=Zi-Ui,H=-X,J=-v,W=-q):(p=ri+E2,o=Ki+_i,A=Zi+Ui,H=X,J=v,W=q),l=w+(n=(P=H*Ei+J*ci+W*Z)<0?Ri:-Ri)*Ei,E=T+n*ci,r=U+n*Z,xi>=.999999?(c=-J,k=W,m=H):(c=H,k=J,m=W),ai=(n=c*Ei+k*ci+m*Z)*Ei-c,K=n*ci-k,N=n*Z-m,(n=f.sqrt(ai*ai+K*K+N*N))==0)break;if(c=l+(ai*=n=F/n),k=E+(K*=n),m=r+(N*=n),P<-.96||P>.96)di=Ei*Ei*1.5-.5,ui=Ei*ci*1.5-.866025403*Z,Pi=Ei*Z*1.5+.866025403*ci,Mi=ci*Ei*1.5+.866025403*Z,mi=ci*ci*1.5-.5,ei=ci*Z*1.5-.866025403*Ei,Ci=Z*Ei*1.5-.866025403*ci,s2=Z*ci*1.5+.866025403*Ei,fi=Z*Z*1.5-.5,(n=(c=(hi=c)-(ti=H*(hi-p)+J*((si=k)-o)+W*((G=m)-A))*H-p)*c+(k=si-ti*J-o)*k+(m=G-ti*W-A)*m)>x*x&&(c*=n=x/f.sqrt(n),k*=n,m*=n),hi=p+c,si=o+k,G=A+m,h.addPoint(hi,si,G,-H,-J,-W,ti,!1),si=ai*Mi+K*mi+N*ei,G=ai*Ci+K*s2+N*fi,(ti=H*((hi=(ai=hi=ai*di+K*ui+N*Pi)+l)-p)+J*((si=(K=si)+E)-o)+W*((G=(N=G)+r)-A))<=0&&((n=(c=hi-ti*H-p)*c+(k=si-ti*J-o)*k+(m=G-ti*W-A)*m)>x*x&&(c*=n=x/f.sqrt(n),k*=n,m*=n),hi=p+c,si=o+k,G=A+m,h.addPoint(hi,si,G,-H,-J,-W,ti,!1)),si=ai*Mi+K*mi+N*ei,G=ai*Ci+K*s2+N*fi,(ti=H*((hi=(ai=hi=ai*di+K*ui+N*Pi)+l)-p)+J*((si=(K=si)+E)-o)+W*((G=(N=G)+r)-A))<=0&&((n=(c=hi-ti*H-p)*c+(k=si-ti*J-o)*k+(m=G-ti*W-A)*m)>x*x&&(c*=n=x/f.sqrt(n),k*=n,m*=n),hi=p+c,si=o+k,G=A+m,h.addPoint(hi,si,G,-H,-J,-W,ti,!1));else{if(u=c,P>0?(d=c+Ei*Ri*2,I=k+ci*Ri*2,M=m+Z*Ri*2):(d=c-Ei*Ri*2,I=k-ci*Ri*2,M=m-Z*Ri*2),(vi=(Di=(ai=p-(u-=(O=H*(u-p)+J*((g=k)-o)+W*((S=m)-A))*H))*(c=(d-=(R=H*(d-p)+J*(I-o)+W*(M-A))*H)-u)+(K=o-(g-=O*J))*(k=(I-=R*J)-g)+(N=A-(S-=O*W))*(m=(M-=R*W)-S))*Di-(Bi=c*c+k*k+m*m)*(ai*ai+K*K+N*N-x*x))<0)break;(z=(Di-(vi=f.sqrt(vi)))/Bi)<($=(Di+vi)/Bi)&&(n=$,$=z,z=n),z>1&&(z=1),$<0&&($=0),c=u+(d-u)*$,k=g+(I-g)*$,m=S+(M-S)*$,d=u+(d-u)*z,I=g+(I-g)*z,M=S+(M-S)*z,u=c,g=k,S=m,n=O+(R-O)*$,R=O+(R-O)*z,(O=n)<0&&h.addPoint(u,g,S,-H,-J,-W,O,!1),R<0&&h.addPoint(d,I,M,-H,-J,-W,R,!1)}}}}}),Nt.prototype=Object.assign(Object.create(W2.prototype),{constructor:Nt,detectCollision:function(s,t,h){var a,e;this.flip?(a=t,e=s):(a=s,e=t);var n,l,E,r,p,o=e.dimentions,A=a.position,c=A.x,k=A.y,m=A.z,u=e.position,g=u.x,S=u.y,d=u.z,I=a.radius,M=e.halfWidth,O=e.halfHeight,R=e.halfDepth,P=c-g,$=k-S,z=m-d,L=o[0]*P+o[1]*$+o[2]*z,_=o[3]*P+o[4]*$+o[5]*z,w=o[6]*P+o[7]*$+o[8]*z,T=0;L>M?L=M:L<-M?L=-M:T=1,_>O?_=O:_<-O?_=-O:T|=2,w>R?w=R:w<-R?w=-R:T|=4,T==7?(z=w<0?R+w:R-w,(P=L<0?M+L:M-L)<($=_<0?O+_:O-_)?P<z?(r=P-M,L<0?(L=-M,P=o[0],$=o[1],z=o[2]):(L=M,P=-o[0],$=-o[1],z=-o[2])):(r=z-R,w<0?(w=-R,P=o[6],$=o[7],z=o[8]):(w=R,P=-o[6],$=-o[7],z=-o[8])):$<z?(r=$-O,_<0?(_=-O,P=o[3],$=o[4],z=o[5]):(_=O,P=-o[3],$=-o[4],z=-o[5])):(r=z-R,w<0?(w=-R,P=o[6],$=o[7],z=o[8]):(w=R,P=-o[6],$=-o[7],z=-o[8])),n=g+L*o[0]+_*o[3]+w*o[6],l=S+L*o[1]+_*o[4]+w*o[7],E=d+L*o[2]+_*o[5]+w*o[8],h.addPoint(c+I*P,k+I*$,m+I*z,P,$,z,r-I,this.flip)):(n=g+L*o[0]+_*o[3]+w*o[6],l=S+L*o[1]+_*o[4]+w*o[7],E=d+L*o[2]+_*o[5]+w*o[8],(r=(P=n-A.x)*P+($=l-A.y)*$+(z=E-A.z)*z)>0&&r<I*I&&(P*=p=1/(r=f.sqrt(r)),$*=p,z*=p,h.addPoint(c+I*P,k+I*$,m+I*z,P,$,z,r-I,this.flip)))}}),wt.prototype=Object.assign(Object.create(W2.prototype),{constructor:wt,detectCollision:function(s,t,h){var a,e;this.flip?(a=t,e=s):(a=s,e=t);var n=a.position,l=n.x,E=n.y,r=n.z,p=e.position,o=p.x,A=p.y,c=p.z,k=e.normalDirection.x,m=e.normalDirection.y,u=e.normalDirection.z,g=a.radius,S=e.radius,d=g+S,I=e.halfHeight,M=l-o,O=E-A,R=r-c,P=M*k+O*m+R*u;if(!(P<-I-g||P>I+g)){var $,z=o+P*k,L=A+P*m,_=c+P*u,w=l-z,T=E-L,U=r-_,ri=w*w+T*T+U*U;ri>d*d||(ri>S*S&&(w*=ri=S/f.sqrt(ri),T*=ri,U*=ri),P<-I?P=-I:P>I&&(P=I),(ri=(M=(z=o+P*k+w)-l)*M+(O=(L=A+P*m+T)-E)*O+(R=(_=c+P*u+U)-r)*R)>0&&ri<g*g&&(M*=$=1/(ri=f.sqrt(ri)),O*=$,R*=$,h.addPoint(l+M*g,E+O*g,r+R*g,M,O,R,ri-g,this.flip)))}}}),Ht.prototype=Object.assign(Object.create(W2.prototype),{constructor:Ht,detectCollision:function(s,t,h){var a=s,e=t,n=a.position,l=e.position,E=l.x-n.x,r=l.y-n.y,p=l.z-n.z,o=E*E+r*r+p*p,A=a.radius,c=A+e.radius;if(o>0&&o<c*c){var k=1/(o=f.sqrt(o));E*=k,r*=k,p*=k,h.addPoint(n.x+E*A,n.y+r*A,n.z+p*A,E,r,p,o-c,!1)}}}),Mt.prototype=Object.assign(Object.create(W2.prototype),{constructor:Mt,detectCollision:function(s,t,h){var a,e=this.n,n=this.p,l=this.flip?t:s,E=this.flip?s:t,r=l.radius;e.sub(l.position,E.position),e.x*=E.normal.x,e.y*=E.normal.y,e.z*=E.normal.z,(a=e.lengthSq())>0&&a<r*r&&(a=f.sqrt(a),e.copy(E.normal).negate(),n.copy(l.position).addScaledVector(e,r),h.addPointVec(n,e,a-r,this.flip))}}),It.prototype=Object.assign(Object.create(W2.prototype),{constructor:It,detectCollision:function(s,t,h){var a,e=this.n,n=this.p,l=this.cc,E=this.flip?t:s,r=this.flip?s:t,p=E.dimentions,o=E.halfWidth,A=E.halfHeight,c=E.halfDepth,k=0;this.dix.set(p[0],p[1],p[2]),this.diy.set(p[3],p[4],p[5]),this.diz.set(p[6],p[7],p[8]),e.sub(E.position,r.position),e.x*=r.normal.x,e.y*=r.normal.y,e.z*=r.normal.z,l.set(f.dotVectors(this.dix,e),f.dotVectors(this.diy,e),f.dotVectors(this.diz,e)),l.x>o?l.x=o:l.x<-o?l.x=-o:k=1,l.y>A?l.y=A:l.y<-A?l.y=-A:k|=2,l.z>c?l.z=c:l.z<-c?l.z=-c:k|=4,k===7&&(e.set(l.x<0?o+l.x:o-l.x,l.y<0?A+l.y:A-l.y,l.z<0?c+l.z:c-l.z),e.x<e.y?e.x<e.z?(a=e.x-o,l.x<0?(l.x=-o,e.copy(this.dix)):(l.x=o,e.subEqual(this.dix))):(a=e.z-c,l.z<0?(l.z=-c,e.copy(this.diz)):(l.z=c,e.subEqual(this.diz))):e.y<e.z?(a=e.y-A,l.y<0?(l.y=-A,e.copy(this.diy)):(l.y=A,e.subEqual(this.diy))):(a=e.z-c,l.z<0?(l.z=-c,e.copy(this.diz)):(l.z=c,e.subEqual(this.diz))),n.copy(r.position).addScaledVector(e,1),h.addPointVec(n,e,a,this.flip))}}),Object.assign(a3.prototype,{World:!0,play:function(){if(this.timer===null){var s=this;this.timer=setInterval(function(){s.step()},this.timerate)}},stop:function(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)},setGravity:function(s){this.gravity.fromArray(s)},getInfo:function(){return this.isStat?this.performance.show():""},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;this.joints!==null;)this.removeJoint(this.joints);for(;this.contacts!==null;)this.removeContact(this.contacts);for(;this.rigidBodies!==null;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(s){s.parent&&U2("World","It is not possible to be added to more than one world one of the rigid body"),s.setParent(this);for(var t=s.shapes;t!==null;t=t.next)this.addShape(t);this.rigidBodies!==null&&((this.rigidBodies.prev=s).next=this.rigidBodies),this.rigidBodies=s,this.numRigidBodies++},removeRigidBody:function(s){var t=s;if(t.parent===this){t.awake();for(var h=t.jointLink;h!=null;){var a=h.joint;h=h.next,this.removeJoint(a)}for(var e=s.shapes;e!==null;e=e.next)this.removeShape(e);var n=t.prev,l=t.next;n!==null&&(n.next=l),l!==null&&(l.prev=n),this.rigidBodies==t&&(this.rigidBodies=l),t.prev=null,t.next=null,t.parent=null,this.numRigidBodies--}},getByName:function(s){for(var t=this.rigidBodies;t!==null;){if(t.name===s)return t;t=t.next}for(var h=this.joints;h!==null;){if(h.name===s)return h;h=h.next}return null},addShape:function(s){s.parent&&s.parent.parent||U2("World","It is not possible to be added alone to shape world"),s.proxy=this.broadPhase.createProxy(s),s.updateProxy(),this.broadPhase.addProxy(s.proxy)},removeShape:function(s){this.broadPhase.removeProxy(s.proxy),s.proxy=null},addJoint:function(s){s.parent&&U2("World","It is not possible to be added to more than one world one of the joint"),this.joints!=null&&((this.joints.prev=s).next=this.joints),this.joints=s,s.setParent(this),this.numJoints++,s.awake(),s.attach()},removeJoint:function(s){var t=s,h=t.prev,a=t.next;h!==null&&(h.next=a),a!==null&&(a.prev=h),this.joints==t&&(this.joints=a),t.prev=null,t.next=null,this.numJoints--,t.awake(),t.detach(),t.parent=null},addContact:function(s,t){var h;this.unusedContacts!==null?(h=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):h=new s3,h.attach(s,t),h.detector=this.detectors[s.type][t.type],this.contacts&&((this.contacts.prev=h).next=this.contacts),this.contacts=h,this.numContacts++},removeContact:function(s){var t=s.prev,h=s.next;h&&(h.prev=t),t&&(t.next=h),this.contacts==s&&(this.contacts=h),s.prev=null,s.next=null,s.detach(),s.next=this.unusedContacts,this.unusedContacts=s,this.numContacts--},getContact:function(s,t){var h,a;s=s.constructor===Hs?s.name:s,t=t.constructor===Hs?t.name:t;for(var e=this.contacts;e!==null;){if(h=e.body1.name,a=e.body2.name,h===s&&a===t||a===s&&h===t)return e.touching?e:null;e=e.next}return null},checkContact:function(s,t){for(var h,a,e=this.contacts;e!==null;){if(h=e.body1.name||" ",a=e.body2.name||" ",h==s&&a==t||a==s&&h==t)return!!e.touching;e=e.next}},callSleep:function(s){return!!s.allowSleep&&!(s.linearVelocity.lengthSq()>.04)&&!(s.angularVelocity.lengthSq()>.25)},step:function(){var s=this.isStat;s&&this.performance.setTime(0);for(var t=this.rigidBodies;t!==null;)t.addedToIsland=!1,t.sleeping&&t.testWakeUp(),t=t.next;s&&this.performance.setTime(1),this.broadPhase.detectPairs();for(var h=this.broadPhase.pairs,a=this.broadPhase.numPairs;a--;){var e,n,l,E=h[a];E.shape1.id<E.shape2.id?(e=E.shape1,n=E.shape2):(e=E.shape2,n=E.shape1),l=e.numContacts<n.numContacts?e.contactLink:n.contactLink;for(var r=!1;l;){if((M=l.contact).shape1==e&&M.shape2==n){M.persisting=!0,r=!0;break}l=l.next}r||this.addContact(e,n)}for(s&&this.performance.calcBroadPhase(),this.numContactPoints=0,M=this.contacts;M!==null;)if(M.persisting||!M.shape1.aabb.intersectTest(M.shape2.aabb)){var p=M.body1,o=M.body2;(p.isDynamic&&!p.sleeping||o.isDynamic&&!o.sleeping)&&M.updateManifold(),this.numContactPoints+=M.manifold.numPoints,M.persisting=!1,M.constraint.addedToIsland=!1,M=M.next}else{var A=M.next;this.removeContact(M),M=A}s&&this.performance.calcNarrowPhase();var c,k,m=1/this.timeStep;for(c=this.joints;c!==null;c=c.next)c.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],s&&this.performance.setTime(1),this.numIslands=0;for(var u=this.rigidBodies;u!==null;u=u.next)if(!(u.addedToIsland||u.isStatic||u.sleeping))if(u.isLonely())u.isDynamic&&u.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(u)?(u.sleepTime+=this.timeStep,u.sleepTime>.5?u.sleep():u.updatePosition(this.timeStep)):(u.sleepTime=0,u.updatePosition(this.timeStep)),this.numIslands++;else{var g=0,S=0,d=1;this.islandStack[0]=u,u.addedToIsland=!0;do if(t=this.islandStack[--d],this.islandStack[d]=null,t.sleeping=!1,this.islandRigidBodies[g++]=t,!t.isStatic){for(var I=t.contactLink;I!==null;I=I.next){var M;!(k=(M=I.contact).constraint).addedToIsland&&M.touching&&(this.islandConstraints[S++]=k,k.addedToIsland=!0,(A=I.body).addedToIsland||(this.islandStack[d++]=A,A.addedToIsland=!0))}for(var O=t.jointLink;O!==null;O=O.next)(k=O.joint).addedToIsland||(this.islandConstraints[S++]=k,k.addedToIsland=!0,!(A=O.body).addedToIsland&&A.isDynamic&&(this.islandStack[d++]=A,A.addedToIsland=!0))}while(d!=0);for(var R=new B().addScaledVector(this.gravity,this.timeStep),P=g;P--;)(t=this.islandRigidBodies[P]).isDynamic&&t.linearVelocity.addEqual(R);if(this.enableRandomizer){for(P=S;P--;)if(P!==0){var $=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*P|0;k=this.islandConstraints[P],this.islandConstraints[P]=this.islandConstraints[$],this.islandConstraints[$]=k}}for(P=S;P--;)this.islandConstraints[P].preSolve(this.timeStep,m);for(var z=this.numIterations;z--;)for(P=S;P--;)this.islandConstraints[P].solve();for(P=S;P--;)this.islandConstraints[P].postSolve(),this.islandConstraints[P]=null;var L=10;for(P=g;P--;)t=this.islandRigidBodies[P],this.callSleep(t)?(t.sleepTime+=this.timeStep,t.sleepTime<L&&(L=t.sleepTime)):(t.sleepTime=0,L=0);if(L>.5)for(P=g;P--;)this.islandRigidBodies[P].sleep(),this.islandRigidBodies[P]=null;else for(P=g;P--;)this.islandRigidBodies[P].updatePosition(this.timeStep),this.islandRigidBodies[P]=null;this.numIslands++}s&&this.performance.calcEnd(),this.postLoop!==null&&this.postLoop()},remove:function(s){},add:function(s){var t=(s=s||{}).type||"box";return t.constructor===String&&(t=[t]),t[0].substring(0,5)==="joint"?this.initJoint(t[0],s):this.initBody(t,s)},initBody:function(s,t){var h=this.invScale,a=t.move||!1,e=t.kinematic||!1,n=t.pos||[0,0,0];n=n.map(function(u){return u*h});var l=t.posShape||[0,0,0];l=l.map(function(u){return u*h});var E=t.rot||[0,0,0];E=E.map(function(u){return u*f.degtorad});var r=t.rotShape;r=E.map(function(u){return u*f.degtorad});var p=t.size===void 0?[1,1,1]:t.size;p.length===1&&(p[1]=p[0]),p.length===2&&(p[2]=p[0]),p=p.map(function(u){return u*h});var o=new Xt;t.density!==void 0&&(o.density=t.density),t.friction!==void 0&&(o.friction=t.friction),t.restitution!==void 0&&(o.restitution=t.restitution),t.belongsTo!==void 0&&(o.belongsTo=t.belongsTo),t.collidesWith!==void 0&&(o.collidesWith=t.collidesWith),t.config!==void 0&&(t.config[0]!==void 0&&(o.density=t.config[0]),t.config[1]!==void 0&&(o.friction=t.config[1]),t.config[2]!==void 0&&(o.restitution=t.config[2]),t.config[3]!==void 0&&(o.belongsTo=t.config[3]),t.config[4]!==void 0&&(o.collidesWith=t.config[4]));for(var A,c,k=new Hs(new B(n[0],n[1],n[2]),new Gi().setFromEuler(E[0],E[1],E[2])),m=0;m<s.length;m++){switch(l[c=3*m]!==void 0&&o.relativePosition.set(l[c],l[c+1],l[c+2]),r[c]!==void 0&&o.relativeRotation.setQuat(new Gi().setFromEuler(r[c],r[c+1],r[c+2])),s[m]){case"sphere":A=new kt(o,p[c]);break;case"cylinder":A=new mt(o,p[c],p[c+1]);break;case"box":A=new ct(o,p[c],p[c+1],p[c+2]);break;case"plane":A=new Ct(o)}k.addShape(A)}return t.neverSleep||e?k.allowSleep=!1:k.allowSleep=!0,k.isKinematic=e,a?t.massPos||t.massRot?k.setupMass(1,!1):k.setupMass(1,!0):k.setupMass(2),t.name!==void 0&&(k.name=t.name),this.addRigidBody(k),a&&(t.sleep?k.sleep():k.awake()),k},initJoint:function(s,t){var h,a,e=this.invScale,n=t.axe1||[1,0,0],l=t.axe2||[1,0,0],E=t.pos1||[0,0,0],r=t.pos2||[0,0,0];E=E.map(function(g){return g*e}),r=r.map(function(g){return g*e}),s==="jointDistance"?(h=t.min||0,a=t.max||10,h*=e,a*=e):(h=t.min||57.29578,a=t.max||0,h*=f.degtorad,a*=f.degtorad);var p=t.limit||null,o=t.spring||null,A=t.motor||null,c=new i3;c.scale=this.scale,c.invScale=this.invScale,c.allowCollision=t.collision||!1,c.localAxis1.set(n[0],n[1],n[2]),c.localAxis2.set(l[0],l[1],l[2]),c.localAnchorPoint1.set(E[0],E[1],E[2]),c.localAnchorPoint2.set(r[0],r[1],r[2]);var k,m=null,u=null;if(t.body1===void 0||t.body2===void 0)return U2("World","Can't add joint if attach rigidbodys not define !");if(t.body1.constructor===String?m=this.getByName(t.body1):t.body1.constructor===Number?m=this.getByName(t.body1):t.body1.constructor===Hs&&(m=t.body1),t.body2.constructor===String?u=this.getByName(t.body2):t.body2.constructor===Number?u=this.getByName(t.body2):t.body2.constructor===Hs&&(u=t.body2),m===null||u===null)return U2("World","Can't add joint attach rigidbodys not find !");switch(c.body1=m,c.body2=u,s){case"jointDistance":k=new ut(c,h,a),o!==null&&k.limitMotor.setSpring(o[0],o[1]),A!==null&&k.limitMotor.setMotor(A[0],A[1]);break;case"jointHinge":case"joint":k=new yt(c,h,a),o!==null&&k.limitMotor.setSpring(o[0],o[1]),A!==null&&k.limitMotor.setMotor(A[0],A[1]);break;case"jointPrisme":k=new Dt(c,h,a);break;case"jointSlide":k=new Bt(c,h,a);break;case"jointBall":k=new dt(c);break;case"jointWheel":k=new xt(c),p!==null&&k.rotationalLimitMotor1.setLimit(p[0],p[1]),o!==null&&k.rotationalLimitMotor1.setSpring(o[0],o[1]),A!==null&&k.rotationalLimitMotor1.setMotor(A[0],A[1])}return k.name=t.name||"",this.addJoint(k),k}}),ki.Math=f,ki.Vec3=B,ki.Quat=Gi,ki.Mat33=n2,ki.Shape=Ds,ki.Box=ct,ki.Sphere=kt,ki.Cylinder=mt,ki.Plane=Ct,ki.Particle=Pt,ki.ShapeConfig=Xt,ki.LimitMotor=L2,ki.HingeJoint=yt,ki.BallAndSocketJoint=dt,ki.DistanceJoint=ut,ki.PrismaticJoint=Dt,ki.SliderJoint=Bt,ki.WheelJoint=xt,ki.JointConfig=i3,ki.RigidBody=Hs,ki.World=a3,ki.REVISION=Us,ki.BR_NULL=nt,ki.BR_BRUTE_FORCE=$s,ki.BR_SWEEP_AND_PRUNE=Qs,ki.BR_BOUNDING_VOLUME_TREE=lt,ki.BODY_NULL=ot,ki.BODY_DYNAMIC=1,ki.BODY_STATIC=2,ki.BODY_KINEMATIC=3,ki.BODY_GHOST=4,ki.SHAPE_NULL=qs,ki.SHAPE_SPHERE=us,ki.SHAPE_BOX=Fs,ki.SHAPE_CYLINDER=gs,ki.SHAPE_PLANE=Bs,ki.SHAPE_PARTICLE=Js,ki.SHAPE_TETRA=6,ki.JOINT_NULL=q2,ki.JOINT_DISTANCE=Ws,ki.JOINT_BALL_AND_SOCKET=rt,ki.JOINT_HINGE=pt,ki.JOINT_WHEEL=it,ki.JOINT_SLIDER=st,ki.JOINT_PRISMATIC=Et,ki.AABB_PROX=.005,ki.printError=U2,ki.InfoDisplay=V2,Object.defineProperty(ki,"__esModule",{value:!0})});const P3=St("canvas",{id:"collisionBall",class:"stage"},null,-1),V3=50,L3=y3({__name:"collisionBall",setup(ki){const{Engine:xs,Scene:Gs,ArcRotateCamera:Vs,Vector3:ds,Color3:Us,HemisphericLight:nt,MeshBuilder:$s,StandardMaterial:Qs,Texture:lt,OimoJSPlugin:ot,PhysicsImpostor:qs}=f3,us=b3(0);let Fs=50;const gs=async()=>{const Bs=document.getElementById("collisionBall");Bs.addEventListener("wheel",function(V2){V2.preventDefault()});const Js=new xs(Bs,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1}),q2=new Gs(Js);q2.useRightHandedSystem=!0,q2.enablePhysics(new ds(0,-10,0),new ot);const Ws=new Vs("camera",-Math.PI/1.5,Math.PI/2.2,15,new ds(0,0,0),q2);Ws.upperBetaLimit=Math.PI/2.2,Ws.wheelPrecision=30,Ws.attachControl(Bs,!0),Ws.setPosition(new ds(120,50,120));const rt=()=>new nt("light",new ds(1,1,0),q2),pt=()=>{const V2=new Qs("ground",q2),B=new lt("/images/wood.jpg",q2);V2.diffuseTexture=B,V2.specularColor=Us.Black();const Gi=$s.CreateBox("box",{size:200},q2);Gi.position.y=-20,Gi.position.x=0,Gi.scaling.y=.01,Gi.material=V2,Gi.physicsImpostor=new qs(Gi,qs.BoxImpostor,{mass:0,restitution:.9},q2)},it=(V2,B)=>Math.random()*(B-V2)+V2,st=V2=>new ds(it(-100,100),V2,it(-100,100)),Et=()=>{const V2=[],B=$s.CreateSphere("s",{diameter:8},q2);B.isVisible=!1;for(let Gi=0;Gi<V3;Gi++){const n2=B.clone(`index_${Gi}`);n2.isVisible=!0,n2.position=st(Fs),n2.physicsImpostor=new qs(n2,qs.SphereImpostor,{mass:1,restitution:.9},q2),n2.physicsImpostor.applyImpulse(new ds(1,2,-1),new ds(1,2,0));const Ls=new Qs("mat",q2);Ls.diffuseColor=new Us(.4,.4,.4),Ls.specularColor=new Us(.4,.4,.4),Ls.emissiveColor=Us.Red(),n2.material=Ls,V2.push(n2),Fs+=10}return V2},f=()=>{Js.runRenderLoop(function(){q2&&q2.activeCamera&&(q2.render(),us.value=Js.getFps().toFixed(2))})};pt();const U2=Et();rt(),f(),q2.registerBeforeRender(function(){U2.forEach(function(V2){V2.position.y<-100&&(V2.position=st(200))})})};return v3(async()=>{await z3(),gs()}),(Bs,Js)=>(d3(),u3("div",null,[St("div",null,"fps: "+N3(us.value),1),P3]))}}),T3=St("h2",{id:"",tabindex:"-1"},[I3(" "),St("a",{class:"header-anchor",href:"#","aria-label":'Permalink to ""'},"")],-1),_3=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"components/babylonCollision.md","filePath":"components/babylonCollision.md"}'),j3={name:"components/babylonCollision.md"},U3=y3({...j3,setup(ki){return(xs,Gs)=>{const Vs=w3("demo-preview");return d3(),u3("div",null,[T3,A3(Vs,{title:"",description:"",code:"%3Ctemplate%3E%0D%0A%20%20%3Cdiv%3E%0D%0A%20%20%20%20%3Cdiv%3Efps:%20%7B%7B%20fps%20%7D%7D%3C/div%3E%0D%0A%20%20%20%20%3Ccanvas%20id=%22collisionBall%22%20class=%22stage%22%3E%3C/canvas%3E%0D%0A%20%20%3C/div%3E%0D%0A%3C/template%3E%0D%0A%0D%0A%3Cscript%20lang=%22ts%22%20setup%3E%0D%0Aimport%20%7B%20onMounted,%20ref,%20nextTick%20%7D%20from%20'vue'%0D%0A%0D%0Aimport%20'./index_oimo.js'%0D%0A%0D%0Aimport%20%7B%20pkg%20%7D%20from%20'./index.js'%0D%0Aconst%20%7B%0D%0A%20%20Engine,%0D%0A%20%20Scene,%0D%0A%20%20ArcRotateCamera,%0D%0A%20%20Vector3,%0D%0A%20%20Color3,%0D%0A%20%20HemisphericLight,%0D%0A%20%20MeshBuilder,%0D%0A%20%20StandardMaterial,%0D%0A%20%20Texture,%0D%0A%20%20OimoJSPlugin,%0D%0A%20%20PhysicsImpostor%0D%0A%7D%20=%20pkg%0D%0A%0D%0A%0D%0Aconst%20fps%20=%20ref(0)%0D%0Alet%20y%20=%2050%0D%0Aconst%20max%20=%2050%0D%0A%0D%0Aconst%20initScene%20=%20async()%20=%3E%20%7B%0D%0A%20%20const%20ele%20=%20document.getElementById(%22collisionBall%22)%20as%20HTMLCanvasElement%0D%0A%0D%0A%20%20ele.addEventListener('wheel',%20function(event)%20%7B%0D%0A%20%20%20%20//%20%E6%A0%B9%E6%8D%AE%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%BB%9A%E5%8A%A8%0D%0A%20%20%20%20//%20%E4%BE%8B%E5%A6%82%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E7%9B%B8%E6%9C%BA%E7%9A%84%E5%8D%8A%E5%BE%84%E6%88%96%E8%A7%92%E5%BA%A6%0D%0A%20%20%20%20event.preventDefault();%20//%20%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA%0D%0A%20%20%7D);%0D%0A%0D%0A%20%20const%20engine:%20any%20=%20new%20Engine(ele,%20true,%20%7B%0D%0A%20%20%20%20preserveDrawingBuffer:%20true,%0D%0A%20%20%20%20stencil:%20true,%0D%0A%20%20%20%20disableWebGL2Support:%20false%0D%0A%20%20%7D)%0D%0A%0D%0A%20%20const%20scene%20=%20new%20Scene(engine)%0D%0A%20%20scene.useRightHandedSystem%20=%20true%0D%0A%20%20scene.enablePhysics(%0D%0A%20%20%20%20new%20Vector3(0,%20-10,%200),%0D%0A%20%20%20%20new%20OimoJSPlugin()%0D%0A%20%20)%0D%0A%0D%0A%20%20const%20camera%20=%20new%20ArcRotateCamera('camera',%20-Math.PI%20/%201.5,%20Math.PI%20/%202.2,%2015,%20new%20Vector3(0,%200,%200),%20scene)%0D%0A%20%20camera.upperBetaLimit%20=%20Math.PI%20/%202.2%0D%0A%20%20camera.wheelPrecision%20=%2030%0D%0A%20%20camera.attachControl(ele,%20true)%0D%0A%20%20camera.setPosition(new%20Vector3(120,%2050,%20120))%0D%0A%0D%0A%20%20const%20createLight%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20light%20=%20new%20HemisphericLight('light',new%20Vector3(1,%201,%200),%20scene)%0D%0A%20%20%20%20return%20light%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20createGround%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20mat%20=%20new%20StandardMaterial('ground',%20scene)%0D%0A%20%20%20%20const%20wood%20=%20new%20Texture('/images/wood.jpg',%20scene)%0D%0A%20%20%20%20mat.diffuseTexture%20=%20wood%0D%0A%20%20%20%20mat.specularColor%20=%20Color3.Black()%0D%0A%0D%0A%20%20%20%20const%20ground%20=%20MeshBuilder.CreateBox('box',%20%7B%20size:%20200%20%7D,%20scene)%0D%0A%20%20%20%20ground.position.y%20=%20-20%0D%0A%20%20%20%20ground.position.x%20=%200%0D%0A%20%20%20%20ground.scaling.y%20=%200.01%0D%0A%20%20%20%20ground.material%20=%20mat%0D%0A%20%20%20%20ground.physicsImpostor%20=%20new%20PhysicsImpostor(%0D%0A%20%20%20%20%20%20ground,%0D%0A%20%20%20%20%20%20PhysicsImpostor.BoxImpostor,%20//%20%E4%BD%BF%E7%94%A8%E7%9B%92%E5%AD%90%E5%BD%A2%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%0D%0A%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20mass:%200,%20//%20%E7%89%A9%E4%BD%93%E7%9A%84%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE%E4%B8%BA%200%0D%0A%20%20%20%20%20%20%20%20restitution:%200.9%20//%20%E5%BC%B9%E6%80%A7%EF%BC%88%E6%88%96%E7%A7%B0%E4%B8%BA%E6%81%A2%E5%A4%8D%E7%B3%BB%E6%95%B0%EF%BC%89%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E%200%EF%BC%88%E6%97%A0%E5%BC%B9%E6%80%A7%EF%BC%8C%E5%8D%B3%E5%AE%8C%E5%85%A8%E9%9D%9E%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%E5%88%B0%201%EF%BC%88%E5%AE%8C%E5%85%A8%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%0D%0A%20%20%20%20%20%20%7D,%0D%0A%20%20%20%20%20%20scene%0D%0A%20%20%20%20)%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20randomNumber%20=%20(min,%20max)%20=%3E%20%7B%0D%0A%20%20%20%20if%20(min%20===%20max)%20%7B%0D%0A%20%20%20%20%20%20return%20min%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20const%20random%20=%20Math.random()%0D%0A%20%20%20%20return%20random%20*%20(max%20-%20min)%20+%20min%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20getPosition%20=%20(y)%20=%3E%20%7B%0D%0A%20%20%20%20return%20new%20Vector3(randomNumber(-100,%20100),%20y,%20randomNumber(-100,%20100))%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20createSpheres%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20allSphere:%20any%20=%20%5B%5D%0D%0A%20%20%20%20const%20sphere%20=%20MeshBuilder.CreateSphere('s',%20%7B%20diameter:%208%20%7D,%20scene)%0D%0A%20%20%20%20sphere.isVisible%20=%20false%0D%0A%20%20%20%20for(let%20index%20=%200;%20index%20%3C%20max;%20index%20++)%20%7B%0D%0A%20%20%20%20%20%20const%20clone%20=%20sphere.clone(%60index_$%7Bindex%7D%60)%0D%0A%20%20%20%20%20%20clone.isVisible%20=%20true%0D%0A%20%20%20%20%20%20clone.position%20=%20getPosition(y)%0D%0A%0D%0A%20%20%20%20%20%20clone.physicsImpostor%20=%20new%20PhysicsImpostor(%0D%0A%20%20%20%20%20%20%20%20clone,%0D%0A%20%20%20%20%20%20%20%20PhysicsImpostor.SphereImpostor,%20//%20%E4%BD%BF%E7%94%A8%E7%90%83%E5%BD%A2%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%0D%0A%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20mass:%201,%20//%20%E7%89%A9%E4%BD%93%E7%9A%84%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE%E4%B8%BA%201%0D%0A%20%20%20%20%20%20%20%20%20%20restitution:%200.9%20//%20%E5%BC%B9%E6%80%A7%EF%BC%88%E6%88%96%E7%A7%B0%E4%B8%BA%E6%81%A2%E5%A4%8D%E7%B3%BB%E6%95%B0%EF%BC%89%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E%200%EF%BC%88%E6%97%A0%E5%BC%B9%E6%80%A7%EF%BC%8C%E5%8D%B3%E5%AE%8C%E5%85%A8%E9%9D%9E%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%E5%88%B0%201%EF%BC%88%E5%AE%8C%E5%85%A8%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20%7D,%0D%0A%20%20%20%20%20%20%20%20scene%0D%0A%20%20%20%20%20%20)%0D%0A%0D%0A%20%20%20%20%20%20//%20applyImpulse%20%E6%96%B9%E6%B3%95%E5%AF%B9%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%96%BD%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%86%B2%E9%87%8F%0D%0A%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E6%8E%A5%E5%8F%97%E4%B8%A4%E4%B8%AA%20Vector3%20%E5%8F%82%E6%95%B0%EF%BC%9A%0D%0A%20%20%20%20%20%20//%20%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%98%AF%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E5%92%8C%E5%A4%A7%E5%B0%8F%0D%0A%20%20%20%20%20%20//%20%E7%AC%AC%E4%BA%8C%E4%B8%AA%E6%98%AF%E6%96%BD%E5%8A%A0%E5%86%B2%E9%87%8F%E7%9A%84%E7%82%B9%0D%0A%20%20%20%20%20%20//%20%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E6%98%AF%20(1,%202,%20-1)%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%AE%83%E5%9C%A8%20x%E3%80%81y%20%E5%92%8C%20z%20%E6%96%B9%E5%90%91%E4%B8%8A%E9%83%BD%E6%9C%89%E5%88%86%E9%87%8F%0D%0A%20%20%20%20%20%20//%20%E5%8F%97%E5%8A%9B%E7%82%B9%E7%9A%84%E4%BD%8D%E7%BD%AE%E6%98%AF%20(1,%202,%200)%EF%BC%8C%E8%BF%99%E6%8C%87%E5%AE%9A%E4%BA%86%E5%9C%A8%20clone%20%E7%BD%91%E6%A0%BC%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%80%E9%83%A8%E7%A9%BA%E9%97%B4%E4%B8%AD%E6%96%BD%E5%8A%A0%E5%86%B2%E9%87%8F%E7%9A%84%E5%85%B7%E4%BD%93%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20clone.physicsImpostor.applyImpulse(%0D%0A%20%20%20%20%20%20%20%20new%20Vector3(1,%202,%20-1),%20//%20%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E5%92%8C%E5%A4%A7%E5%B0%8F%0D%0A%20%20%20%20%20%20%20%20new%20Vector3(1,%202,%200)%20//%20%E5%9C%A8%E7%89%A9%E4%BD%93%E4%B8%8A%E7%9A%84%E5%8F%97%E5%8A%9B%E7%82%B9%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20)%0D%0A%0D%0A%20%20%20%20%20%20const%20mat%20=%20new%20StandardMaterial('mat',%20scene)%0D%0A%20%20%20%20%20%20mat.diffuseColor%20=%20new%20Color3(0.4,%200.4,%200.4)%0D%0A%20%20%20%20%20%20mat.specularColor%20=%20new%20Color3(0.4,%200.4,%200.4)%0D%0A%20%20%20%20%20%20mat.emissiveColor%20=%20Color3.Red()%0D%0A%20%20%20%20%20%20clone.material%20=%20mat%20%0D%0A%0D%0A%20%20%20%20%20%20allSphere.push(clone)%0D%0A%20%20%20%20%20%20y%20+=%2010%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20return%20allSphere%0D%0A%20%20%7D%0D%0A%0D%0A%0D%0A%20%20const%20runAnimate%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20engine.runRenderLoop(function()%20%7B%0D%0A%20%20%20%20%20%20if%20(scene%20&&%20scene.activeCamera)%20%7B%0D%0A%20%20%20%20%20%20%20%20scene.render()%0D%0A%0D%0A%20%20%20%20%20%20%20%20fps.value%20=%20engine.getFps().toFixed(2)%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D)%0D%0A%20%20%7D%0D%0A%0D%0A%20%20createGround()%0D%0A%20%20const%20allSphere%20=%20createSpheres()%0D%0A%0D%0A%20%20createLight()%0D%0A%20%20runAnimate()%0D%0A%0D%0A%20%20scene.registerBeforeRender(function()%20%7B%0D%0A%20%20%20%20allSphere.forEach(function(obj)%20%7B%0D%0A%20%20%20%20%20%20if%20(obj.position.y%20%3C%20-100)%20%7B%0D%0A%20%20%20%20%20%20%20%20obj.position%20=%20getPosition(200)%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D)%0D%0A%20%20%7D)%0D%0A%7D%0D%0A%0D%0AonMounted(async()%20=%3E%20%7B%0D%0A%20%20await%20nextTick()%0D%0A%20%20initScene()%0D%0A%7D)%0D%0A%3C/script%3E%0D%0A",showCode:"%3Cpre%20class%3D%22shiki%20shiki-themes%20github-light%20github-dark%20vp-code%22%20tabindex%3D%220%22%20v-pre%3D%22%22%3E%3Ccode%3E%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3Efps%3A%20%7B%7B%20fps%20%7D%7D%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20id%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22collisionBall%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20class%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22stage%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20lang%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22ts%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20setup%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%20onMounted%2C%20ref%2C%20nextTick%20%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efrom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'vue'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'.%2Findex_oimo.js'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%20pkg%20%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efrom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'.%2Findex.js'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20ArcRotateCamera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20HemisphericLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20MeshBuilder%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20StandardMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Texture%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20OimoJSPlugin%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20PhysicsImpostor%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20pkg%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20fps%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20ref%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Elet%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2050%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20max%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2050%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20initScene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20async%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20ele%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20document.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EgetElementById%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22collisionBall%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20HTMLCanvasElement%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20ele.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EaddEventListener%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'wheel'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Eevent%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%2F%2F%20%E6%A0%B9%E6%8D%AE%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%BB%9A%E5%8A%A8%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%2F%2F%20%E4%BE%8B%E5%A6%82%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E7%9B%B8%E6%9C%BA%E7%9A%84%E5%8D%8A%E5%BE%84%E6%88%96%E8%A7%92%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20event.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EpreventDefault%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3B%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3A%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20any%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(ele%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20preserveDrawingBuffer%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20stencil%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20disableWebGL2Support%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Efalse%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(engine)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20scene.useRightHandedSystem%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20true%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20scene.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EenablePhysics%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E10%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20OimoJSPlugin%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20camera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20ArcRotateCamera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'camera'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EMath.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%201.5%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%202.2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E15%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.upperBetaLimit%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%202.2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.wheelPrecision%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2030%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EattachControl%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(ele%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EsetPosition%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E120%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E50%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E120%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E))%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20light%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20HemisphericLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'light'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20light%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createGround%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20mat%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20StandardMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'ground'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20wood%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Texture%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'%2Fimages%2Fwood.jpg'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20mat.diffuseTexture%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20wood%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20mat.specularColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Color3.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EBlack%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20ground%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20MeshBuilder.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ECreateBox%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'box'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%7B%20size%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E200%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7D%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20ground.position.y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20ground.position.x%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20ground.scaling.y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200.01%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20ground.material%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20mat%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20ground.physicsImpostor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20PhysicsImpostor%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20ground%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20PhysicsImpostor.BoxImpostor%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E4%BD%BF%E7%94%A8%E7%9B%92%E5%AD%90%E5%BD%A2%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20mass%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E7%89%A9%E4%BD%93%E7%9A%84%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE%E4%B8%BA%200%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20restitution%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.9%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%2F%2F%20%E5%BC%B9%E6%80%A7%EF%BC%88%E6%88%96%E7%A7%B0%E4%B8%BA%E6%81%A2%E5%A4%8D%E7%B3%BB%E6%95%B0%EF%BC%89%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E%200%EF%BC%88%E6%97%A0%E5%BC%B9%E6%80%A7%EF%BC%8C%E5%8D%B3%E5%AE%8C%E5%85%A8%E9%9D%9E%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%E5%88%B0%201%EF%BC%88%E5%AE%8C%E5%85%A8%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7D%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20randomNumber%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Emin%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Emax%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(min%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3D%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20max)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20min%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20random%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erandom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20random%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E*%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(max%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20min)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20min%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20getPosition%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Ey%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ErandomNumber%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E100%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E100%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20y%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ErandomNumber%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E100%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E100%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E))%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createSpheres%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20allSphere%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3A%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20any%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%5B%5D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20sphere%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20MeshBuilder.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ECreateSphere%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E's'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%7B%20diameter%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E8%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7D%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20sphere.isVisible%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20false%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20for%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Elet%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20index%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3B%20index%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20max%3B%20index%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%2B%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20clone%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20sphere.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Eclone%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%60index_%24%7B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3Eindex%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%7D%60%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20clone.isVisible%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20true%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20clone.position%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20getPosition%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(y)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20clone.physicsImpostor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20PhysicsImpostor%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20clone%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20PhysicsImpostor.SphereImpostor%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E4%BD%BF%E7%94%A8%E7%90%83%E5%BD%A2%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20%20%20mass%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E7%89%A9%E4%BD%93%E7%9A%84%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE%E4%B8%BA%201%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20%20%20restitution%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.9%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%2F%2F%20%E5%BC%B9%E6%80%A7%EF%BC%88%E6%88%96%E7%A7%B0%E4%B8%BA%E6%81%A2%E5%A4%8D%E7%B3%BB%E6%95%B0%EF%BC%89%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E%200%EF%BC%88%E6%97%A0%E5%BC%B9%E6%80%A7%EF%BC%8C%E5%8D%B3%E5%AE%8C%E5%85%A8%E9%9D%9E%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%E5%88%B0%201%EF%BC%88%E5%AE%8C%E5%85%A8%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20%7D%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20applyImpulse%20%E6%96%B9%E6%B3%95%E5%AF%B9%E7%89%A9%E7%90%86%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E6%96%BD%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%86%B2%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E6%8E%A5%E5%8F%97%E4%B8%A4%E4%B8%AA%20Vector3%20%E5%8F%82%E6%95%B0%EF%BC%9A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%98%AF%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E5%92%8C%E5%A4%A7%E5%B0%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20%E7%AC%AC%E4%BA%8C%E4%B8%AA%E6%98%AF%E6%96%BD%E5%8A%A0%E5%86%B2%E9%87%8F%E7%9A%84%E7%82%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E6%98%AF%20(1%2C%202%2C%20-1)%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%AE%83%E5%9C%A8%20x%E3%80%81y%20%E5%92%8C%20z%20%E6%96%B9%E5%90%91%E4%B8%8A%E9%83%BD%E6%9C%89%E5%88%86%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%20%20%2F%2F%20%E5%8F%97%E5%8A%9B%E7%82%B9%E7%9A%84%E4%BD%8D%E7%BD%AE%E6%98%AF%20(1%2C%202%2C%200)%EF%BC%8C%E8%BF%99%E6%8C%87%E5%AE%9A%E4%BA%86%E5%9C%A8%20clone%20%E7%BD%91%E6%A0%BC%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%80%E9%83%A8%E7%A9%BA%E9%97%B4%E4%B8%AD%E6%96%BD%E5%8A%A0%E5%86%B2%E9%87%8F%E7%9A%84%E5%85%B7%E4%BD%93%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20clone.physicsImpostor.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EapplyImpulse%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20%20%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E5%86%B2%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E5%92%8C%E5%A4%A7%E5%B0%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20%20%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E5%9C%A8%E7%89%A9%E4%BD%93%E4%B8%8A%E7%9A%84%E5%8F%97%E5%8A%9B%E7%82%B9%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20mat%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20StandardMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'mat'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20mat.diffuseColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20mat.specularColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0.4%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20mat.emissiveColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Color3.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ERed%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20clone.material%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20mat%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20allSphere.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Epush%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(clone)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%2B%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2010%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20allSphere%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20runAnimate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20engine.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ErunRenderLoop%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(scene%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x26%3B%26%23x26%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20scene.activeCamera)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20scene.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erender%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20fps.value%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20engine.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EgetFps%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E().%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EtoFixed%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createGround%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20allSphere%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createSpheres%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20runAnimate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20scene.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EregisterBeforeRender%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20allSphere.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EforEach%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Eobj%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(obj.position.y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E100%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20obj.position%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20getPosition%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E200%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EonMounted%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Easync%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20await%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20nextTick%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20initScene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fcode%3E%3C%2Fpre%3E",suffixName:"vue",absolutePath:"D:\\test\\docs\\demo\\babylon\\collisionBall.vue",relativePath:"../demo/babylon/collisionBall.vue"},{default:M3(()=>[A3(L3)]),_:1})])}}});export{_3 as __pageData,U3 as default};
