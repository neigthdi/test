import{r as Re,c as ke,p as Ie}from"./chunks/babylon.D2ngfQ3h.js";import{d as Oe,s as we,y as Ne,R as Ge,o as Pe,c as be,j as Fe,t as Ke,D as Ue,I as Me,w as Ve,a as He}from"./chunks/framework.BB87oCcu.js";var We={exports:{}};(function(Te,De){(function(me,Ce){Te.exports=Ce(Re())})(typeof self<"u"?self:typeof ke<"u"?ke:ke,ge=>(()=>{var me={"../../../dev/loaders/src/OBJ/index.ts":(R,g,E)=>{E.r(g),E.d(g,{MTLFileLoader:()=>i.MTLFileLoader,OBJFileLoader:()=>_.OBJFileLoader,SolidParser:()=>h.SolidParser});var i=E("../../../dev/loaders/src/OBJ/mtlFileLoader.ts");E("../../../dev/loaders/src/OBJ/objLoadingOptions.ts");var h=E("../../../dev/loaders/src/OBJ/solidParser.ts"),_=E("../../../dev/loaders/src/OBJ/objFileLoader.ts")},"../../../dev/loaders/src/OBJ/mtlFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{MTLFileLoader:()=>h});var i=E("babylonjs/Misc/observable"),h=function(){function _(){this.materials=[]}return _.prototype.parseMTL=function(A,l,o,n){if(!(l instanceof ArrayBuffer)){for(var t=l.split(`
`),e=/\s+/,s,r=null,a=0;a<t.length;a++){var c=t[a].trim();if(!(c.length===0||c.charAt(0)==="#")){var d=c.indexOf(" "),u=d>=0?c.substring(0,d):c;u=u.toLowerCase();var C=d>=0?c.substring(d+1).trim():"";if(u==="newmtl")r&&this.materials.push(r),A._blockEntityCollection=!!n,r=new i.StandardMaterial(C,A),r._parentContainer=n,A._blockEntityCollection=!1;else if(u==="kd"&&r)s=C.split(e,3).map(parseFloat),r.diffuseColor=i.Color3.FromArray(s);else if(u==="ka"&&r)s=C.split(e,3).map(parseFloat),r.ambientColor=i.Color3.FromArray(s);else if(u==="ks"&&r)s=C.split(e,3).map(parseFloat),r.specularColor=i.Color3.FromArray(s);else if(u==="ke"&&r)s=C.split(e,3).map(parseFloat),r.emissiveColor=i.Color3.FromArray(s);else if(u==="ns"&&r)r.specularPower=parseFloat(C);else if(u==="d"&&r)r.alpha=parseFloat(C);else if(u==="map_ka"&&r)r.ambientTexture=_._GetTexture(o,C,A);else if(u==="map_kd"&&r)r.diffuseTexture=_._GetTexture(o,C,A);else if(u==="map_ks"&&r)r.specularTexture=_._GetTexture(o,C,A);else if(u!=="map_ns")if(u==="map_bump"&&r){var v=C.split(e),F=v.indexOf("-bm"),B=null;F>=0&&(B=v[F+1],v.splice(F,2)),r.bumpTexture=_._GetTexture(o,v.join(" "),A),r.bumpTexture&&B!==null&&(r.bumpTexture.level=parseFloat(B))}else u==="map_d"&&r&&(r.opacityTexture=_._GetTexture(o,C,A))}}r&&this.materials.push(r)}},_._GetTexture=function(A,l,o){if(!l)return null;var n=A;if(A==="file:"){var t=l.lastIndexOf("\\");t===-1&&(t=l.lastIndexOf("/")),t>-1?n+=l.substr(t+1):n+=l}else n+=l;return new i.Texture(n,o,!1,_.INVERT_TEXTURE_Y)},_.INVERT_TEXTURE_Y=!0,_}()},"../../../dev/loaders/src/OBJ/objFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{OBJFileLoader:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/OBJ/mtlFileLoader.ts"),_=E("../../../dev/loaders/src/OBJ/solidParser.ts"),A=function(){function l(o){this.name="obj",this.extensions=".obj",this._assetContainer=null,this._loadingOptions=o||l._DefaultLoadingOptions}return Object.defineProperty(l,"INVERT_TEXTURE_Y",{get:function(){return h.MTLFileLoader.INVERT_TEXTURE_Y},set:function(o){h.MTLFileLoader.INVERT_TEXTURE_Y=o},enumerable:!1,configurable:!0}),Object.defineProperty(l,"_DefaultLoadingOptions",{get:function(){return{computeNormals:l.COMPUTE_NORMALS,optimizeNormals:l.OPTIMIZE_NORMALS,importVertexColors:l.IMPORT_VERTEX_COLORS,invertY:l.INVERT_Y,invertTextureY:l.INVERT_TEXTURE_Y,UVScaling:l.UV_SCALING,materialLoadingFailsSilently:l.MATERIAL_LOADING_FAILS_SILENTLY,optimizeWithUV:l.OPTIMIZE_WITH_UV,skipMaterials:l.SKIP_MATERIALS,useLegacyBehavior:l.USE_LEGACY_BEHAVIOR}},enumerable:!1,configurable:!0}),l.prototype._loadMTL=function(o,n,t,e){var s=n+o;i.Tools.LoadFile(s,t,void 0,void 0,!1,function(r,a){e(s,a)})},l.prototype.createPlugin=function(){return new l(l._DefaultLoadingOptions)},l.prototype.canDirectLoad=function(){return!1},l.prototype.importMeshAsync=function(o,n,t,e){return this._parseSolid(o,n,t,e).then(function(s){return{meshes:s,particleSystems:[],skeletons:[],animationGroups:[],transformNodes:[],geometries:[],lights:[],spriteManagers:[]}})},l.prototype.loadAsync=function(o,n,t){return this.importMeshAsync(null,o,n,t).then(function(){})},l.prototype.loadAssetContainerAsync=function(o,n,t){var e=this,s=new i.AssetContainer(o);return this._assetContainer=s,this.importMeshAsync(null,o,n,t).then(function(r){return r.meshes.forEach(function(a){return s.meshes.push(a)}),r.meshes.forEach(function(a){var c=a.material;if(c&&s.materials.indexOf(c)==-1){s.materials.push(c);var d=c.getActiveTextures();d.forEach(function(u){s.textures.indexOf(u)==-1&&s.textures.push(u)})}}),e._assetContainer=null,s}).catch(function(r){throw e._assetContainer=null,r})},l.prototype._parseSolid=function(o,n,t,e){var s=this,r="",a=new h.MTLFileLoader,c=[],d=[],u=new _.SolidParser(c,d,this._loadingOptions);u.parse(o,t,n,this._assetContainer,function(v){r=v});var C=[];return r!==""&&!this._loadingOptions.skipMaterials&&C.push(new Promise(function(v,F){s._loadMTL(r,e,function(B){try{a.parseMTL(n,B,e,s._assetContainer);for(var k=0;k<a.materials.length;k++){for(var O=0,S=[],G=void 0;(G=c.indexOf(a.materials[k].name,O))>-1;)S.push(G),O=G+1;if(G===-1&&S.length===0)a.materials[k].dispose();else for(var U=0;U<S.length;U++){var W=d[S[U]],X=a.materials[k];W.material=X,W.getTotalIndices()||(X.pointsCloud=!0)}}v()}catch(J){i.Tools.Warn("Error processing MTL file: '".concat(r,"'")),s._loadingOptions.materialLoadingFailsSilently?v():F(J)}},function(B,k){i.Tools.Warn("Error downloading MTL file: '".concat(r,"'")),s._loadingOptions.materialLoadingFailsSilently?v():F(k)})})),Promise.all(C).then(function(){var v=function(F){var B,k;return!!((k=(B=F._internalMetadata)===null||B===void 0?void 0:B._isLine)!==null&&k!==void 0&&k)};return d.forEach(function(F){var B,k;if(v(F)){var O=(B=F.material)!==null&&B!==void 0?B:new i.StandardMaterial(F.name+"_line",n),S=O.getBindedMeshes().filter(function(G){return!v(G)}).length>0;S&&(O=(k=O.clone(O.name+"_line"))!==null&&k!==void 0?k:O),O.wireframe=!0,F.material=O,F._internalMetadata&&(F._internalMetadata._isLine=void 0)}}),d})},l.OPTIMIZE_WITH_UV=!0,l.INVERT_Y=!1,l.IMPORT_VERTEX_COLORS=!1,l.COMPUTE_NORMALS=!1,l.OPTIMIZE_NORMALS=!1,l.UV_SCALING=new i.Vector2(1,1),l.SKIP_MATERIALS=!1,l.MATERIAL_LOADING_FAILS_SILENTLY=!0,l.USE_LEGACY_BEHAVIOR=!1,l}();i.SceneLoader&&i.SceneLoader.RegisterPlugin(new A)},"../../../dev/loaders/src/OBJ/objLoadingOptions.ts":(R,g,E)=>{E.r(g)},"../../../dev/loaders/src/OBJ/solidParser.ts":(R,g,E)=>{E.r(g),E.d(g,{SolidParser:()=>h});var i=E("babylonjs/Misc/observable"),h=function(){function _(A,l,o){this._positions=[],this._normals=[],this._uvs=[],this._colors=[],this._meshesFromObj=[],this._indicesForBabylon=[],this._wrappedPositionForBabylon=[],this._wrappedUvsForBabylon=[],this._wrappedColorsForBabylon=[],this._wrappedNormalsForBabylon=[],this._tuplePosNorm=[],this._curPositionInIndices=0,this._hasMeshes=!1,this._unwrappedPositionsForBabylon=[],this._unwrappedColorsForBabylon=[],this._unwrappedNormalsForBabylon=[],this._unwrappedUVForBabylon=[],this._triangles=[],this._materialNameFromObj="",this._objMeshName="",this._increment=1,this._isFirstMaterial=!0,this._grayColor=new i.Color4(.5,.5,.5,1),this._hasLineData=!1,this._materialToUse=A,this._babylonMeshesArray=l,this._loadingOptions=o}return _.prototype._isInArray=function(A,l){A[l[0]]||(A[l[0]]={normals:[],idx:[]});var o=A[l[0]].normals.indexOf(l[1]);return o===-1?-1:A[l[0]].idx[o]},_.prototype._isInArrayUV=function(A,l){A[l[0]]||(A[l[0]]={normals:[],idx:[],uv:[]});var o=A[l[0]].normals.indexOf(l[1]);return o!=1&&l[2]===A[l[0]].uv[o]?A[l[0]].idx[o]:-1},_.prototype._setData=function(A,l,o,n,t,e,s){var r;this._loadingOptions.optimizeWithUV?r=this._isInArrayUV(this._tuplePosNorm,[A,o,l]):r=this._isInArray(this._tuplePosNorm,[A,o]),r===-1?(this._indicesForBabylon.push(this._wrappedPositionForBabylon.length),this._wrappedPositionForBabylon.push(n),this._wrappedUvsForBabylon.push(t),this._wrappedNormalsForBabylon.push(e),s!==void 0&&this._wrappedColorsForBabylon.push(s),this._tuplePosNorm[A].normals.push(o),this._tuplePosNorm[A].idx.push(this._curPositionInIndices++),this._loadingOptions.optimizeWithUV&&this._tuplePosNorm[A].uv.push(l)):this._indicesForBabylon.push(r)},_.prototype._unwrapData=function(){for(var A=0;A<this._wrappedPositionForBabylon.length;A++)this._unwrappedPositionsForBabylon.push(this._wrappedPositionForBabylon[A].x*this._handednessSign,this._wrappedPositionForBabylon[A].y,this._wrappedPositionForBabylon[A].z),this._unwrappedNormalsForBabylon.push(this._wrappedNormalsForBabylon[A].x*this._handednessSign,this._wrappedNormalsForBabylon[A].y,this._wrappedNormalsForBabylon[A].z),this._unwrappedUVForBabylon.push(this._wrappedUvsForBabylon[A].x,this._wrappedUvsForBabylon[A].y),this._loadingOptions.importVertexColors&&this._unwrappedColorsForBabylon.push(this._wrappedColorsForBabylon[A].r,this._wrappedColorsForBabylon[A].g,this._wrappedColorsForBabylon[A].b,this._wrappedColorsForBabylon[A].a);this._wrappedPositionForBabylon.length=0,this._wrappedNormalsForBabylon.length=0,this._wrappedUvsForBabylon.length=0,this._wrappedColorsForBabylon.length=0,this._tuplePosNorm.length=0,this._curPositionInIndices=0},_.prototype._getTriangles=function(A,l){for(var o=l;o<A.length-1;o++)this._pushTriangle(A,o)},_.prototype._setDataForCurrentFaceWithPattern1=function(A,l){this._getTriangles(A,l);for(var o=0;o<this._triangles.length;o++){var n=parseInt(this._triangles[o])-1;this._setData(n,0,0,this._positions[n],i.Vector2.Zero(),i.Vector3.Up(),this._loadingOptions.importVertexColors?this._colors[n]:void 0)}this._triangles.length=0},_.prototype._setDataForCurrentFaceWithPattern2=function(A,l){this._getTriangles(A,l);for(var o=0;o<this._triangles.length;o++){var n=this._triangles[o].split("/"),t=parseInt(n[0])-1,e=parseInt(n[1])-1;this._setData(t,e,0,this._positions[t],this._uvs[e],i.Vector3.Up(),this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},_.prototype._setDataForCurrentFaceWithPattern3=function(A,l){this._getTriangles(A,l);for(var o=0;o<this._triangles.length;o++){var n=this._triangles[o].split("/"),t=parseInt(n[0])-1,e=parseInt(n[1])-1,s=parseInt(n[2])-1;this._setData(t,e,s,this._positions[t],this._uvs[e],this._normals[s])}this._triangles.length=0},_.prototype._setDataForCurrentFaceWithPattern4=function(A,l){this._getTriangles(A,l);for(var o=0;o<this._triangles.length;o++){var n=this._triangles[o].split("//"),t=parseInt(n[0])-1,e=parseInt(n[1])-1;this._setData(t,1,e,this._positions[t],i.Vector2.Zero(),this._normals[e],this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},_.prototype._setDataForCurrentFaceWithPattern5=function(A,l){this._getTriangles(A,l);for(var o=0;o<this._triangles.length;o++){var n=this._triangles[o].split("/"),t=this._positions.length+parseInt(n[0]),e=this._uvs.length+parseInt(n[1]),s=this._normals.length+parseInt(n[2]);this._setData(t,e,s,this._positions[t],this._uvs[e],this._normals[s],this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},_.prototype._addPreviousObjMesh=function(){this._meshesFromObj.length>0&&(this._handledMesh=this._meshesFromObj[this._meshesFromObj.length-1],this._unwrapData(),this._loadingOptions.useLegacyBehavior&&this._indicesForBabylon.reverse(),this._handledMesh.indices=this._indicesForBabylon.slice(),this._handledMesh.positions=this._unwrappedPositionsForBabylon.slice(),this._handledMesh.normals=this._unwrappedNormalsForBabylon.slice(),this._handledMesh.uvs=this._unwrappedUVForBabylon.slice(),this._handledMesh.hasLines=this._hasLineData,this._loadingOptions.importVertexColors&&(this._handledMesh.colors=this._unwrappedColorsForBabylon.slice()),this._indicesForBabylon.length=0,this._unwrappedPositionsForBabylon.length=0,this._unwrappedColorsForBabylon.length=0,this._unwrappedNormalsForBabylon.length=0,this._unwrappedUVForBabylon.length=0,this._hasLineData=!1)},_.prototype._optimizeNormals=function(A){var l=A.getVerticesData(i.VertexBuffer.PositionKind),o=A.getVerticesData(i.VertexBuffer.NormalKind),n={};if(!(!l||!o)){for(var t=0;t<l.length/3;t++){var e=l[t*3+0],s=l[t*3+1],r=l[t*3+2],a=e+"_"+s+"_"+r,c=n[a];c||(c=[],n[a]=c),c.push(t)}var d=new i.Vector3;for(var a in n){var c=n[a];if(!(c.length<2)){for(var u=c[0],t=1;t<c.length;++t){var C=c[t];o[u*3+0]+=o[C*3+0],o[u*3+1]+=o[C*3+1],o[u*3+2]+=o[C*3+2]}d.copyFromFloats(o[u*3+0],o[u*3+1],o[u*3+2]),d.normalize();for(var t=0;t<c.length;++t){var C=c[t];o[C*3+0]=d.x,o[C*3+1]=d.y,o[C*3+2]=d.z}}}A.setVerticesData(i.VertexBuffer.NormalKind,o)}},_.prototype.parse=function(A,l,o,n,t){var e=this,s,r;this._loadingOptions.useLegacyBehavior?(this._pushTriangle=function(P,f){return e._triangles.push(P[0],P[f],P[f+1])},this._handednessSign=1):o.useRightHandedSystem?(this._pushTriangle=function(P,f){return e._triangles.push(P[0],P[f+1],P[f])},this._handednessSign=1):(this._pushTriangle=function(P,f){return e._triangles.push(P[0],P[f],P[f+1])},this._handednessSign=-1);for(var a=l.split(`
`),c=0;c<a.length;c++){var d=a[c].trim().replace(/\s\s/g," "),u=void 0;if(!(d.length===0||d.charAt(0)==="#"))if(_.VertexPattern.test(d)){if(u=d.match(/[^ ]+/g),this._positions.push(new i.Vector3(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]))),this._loadingOptions.importVertexColors)if(u.length>=7){var C=parseFloat(u[4]),v=parseFloat(u[5]),F=parseFloat(u[6]);this._colors.push(new i.Color4(C>1?C/255:C,v>1?v/255:v,F>1?F/255:F,u.length===7||u[7]===void 0?1:parseFloat(u[7])))}else this._colors.push(this._grayColor)}else if((u=_.NormalPattern.exec(d))!==null)this._normals.push(new i.Vector3(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])));else if((u=_.UVPattern.exec(d))!==null)this._uvs.push(new i.Vector2(parseFloat(u[1])*this._loadingOptions.UVScaling.x,parseFloat(u[2])*this._loadingOptions.UVScaling.y));else if((u=_.FacePattern3.exec(d))!==null)this._setDataForCurrentFaceWithPattern3(u[1].trim().split(" "),1);else if((u=_.FacePattern4.exec(d))!==null)this._setDataForCurrentFaceWithPattern4(u[1].trim().split(" "),1);else if((u=_.FacePattern5.exec(d))!==null)this._setDataForCurrentFaceWithPattern5(u[1].trim().split(" "),1);else if((u=_.FacePattern2.exec(d))!==null)this._setDataForCurrentFaceWithPattern2(u[1].trim().split(" "),1);else if((u=_.FacePattern1.exec(d))!==null)this._setDataForCurrentFaceWithPattern1(u[1].trim().split(" "),1);else if((u=_.LinePattern1.exec(d))!==null)this._setDataForCurrentFaceWithPattern1(u[1].trim().split(" "),0),this._hasLineData=!0;else if((u=_.LinePattern2.exec(d))!==null)this._setDataForCurrentFaceWithPattern2(u[1].trim().split(" "),0),this._hasLineData=!0;else if((u=_.LinePattern3.exec(d))!==null)this._setDataForCurrentFaceWithPattern3(u[1].trim().split(" "),0),this._hasLineData=!0;else if(_.GroupDescriptor.test(d)||_.ObjectDescriptor.test(d)){var B={name:d.substring(2).trim(),indices:null,positions:null,normals:null,uvs:null,colors:null,materialName:this._materialNameFromObj,isObject:_.ObjectDescriptor.test(d)};this._addPreviousObjMesh(),this._meshesFromObj.push(B),this._hasMeshes=!0,this._isFirstMaterial=!0,this._increment=1}else if(_.UseMtlDescriptor.test(d)){if(this._materialNameFromObj=d.substring(7).trim(),!this._isFirstMaterial||!this._hasMeshes){this._addPreviousObjMesh();var B={name:(this._objMeshName||"mesh")+"_mm"+this._increment.toString(),indices:null,positions:null,normals:null,uvs:null,colors:null,materialName:this._materialNameFromObj,isObject:!1};this._increment++,this._meshesFromObj.push(B),this._hasMeshes=!0}this._hasMeshes&&this._isFirstMaterial&&(this._meshesFromObj[this._meshesFromObj.length-1].materialName=this._materialNameFromObj,this._isFirstMaterial=!1)}else _.MtlLibGroupDescriptor.test(d)?t(d.substring(7).trim()):_.SmoothDescriptor.test(d)||i.Logger.Log("Unhandled expression at line : "+d)}if(this._hasMeshes&&(this._handledMesh=this._meshesFromObj[this._meshesFromObj.length-1],this._loadingOptions.useLegacyBehavior&&this._indicesForBabylon.reverse(),this._unwrapData(),this._handledMesh.indices=this._indicesForBabylon,this._handledMesh.positions=this._unwrappedPositionsForBabylon,this._handledMesh.normals=this._unwrappedNormalsForBabylon,this._handledMesh.uvs=this._unwrappedUVForBabylon,this._handledMesh.hasLines=this._hasLineData,this._loadingOptions.importVertexColors&&(this._handledMesh.colors=this._unwrappedColorsForBabylon)),!this._hasMeshes){var k=null;if(this._indicesForBabylon.length)this._loadingOptions.useLegacyBehavior&&this._indicesForBabylon.reverse(),this._unwrapData();else{for(var O=0,S=this._positions;O<S.length;O++){var G=S[O];this._unwrappedPositionsForBabylon.push(G.x,G.y,G.z)}if(this._normals.length)for(var U=0,W=this._normals;U<W.length;U++){var X=W[U];this._unwrappedNormalsForBabylon.push(X.x,X.y,X.z)}if(this._uvs.length)for(var J=0,Q=this._uvs;J<Q.length;J++){var Z=Q[J];this._unwrappedUVForBabylon.push(Z.x,Z.y)}if(this._colors.length)for(var ae=0,he=this._colors;ae<he.length;ae++){var oe=he[ae];this._unwrappedColorsForBabylon.push(oe.r,oe.g,oe.b,oe.a)}this._materialNameFromObj||(k=new i.StandardMaterial(i.Geometry.RandomId(),o),k.pointsCloud=!0,this._materialNameFromObj=k.name,this._normals.length||(k.disableLighting=!0,k.emissiveColor=i.Color3.White()))}this._meshesFromObj.push({name:i.Geometry.RandomId(),indices:this._indicesForBabylon,positions:this._unwrappedPositionsForBabylon,colors:this._unwrappedColorsForBabylon,normals:this._unwrappedNormalsForBabylon,uvs:this._unwrappedUVForBabylon,materialName:this._materialNameFromObj,directMaterial:k,isObject:!0})}for(var q=0;q<this._meshesFromObj.length;q++){if(A&&this._meshesFromObj[q].name){if(A instanceof Array){if(A.indexOf(this._meshesFromObj[q].name)===-1)continue}else if(this._meshesFromObj[q].name!==A)continue}this._handledMesh=this._meshesFromObj[q],o._blockEntityCollection=!!n;var ee=new i.Mesh(this._meshesFromObj[q].name,o);if(ee._parentContainer=n,o._blockEntityCollection=!1,this._handledMesh._babylonMesh=ee,!this._handledMesh.isObject){for(var $=q-1;$>=0;--$)if(this._meshesFromObj[$].isObject&&this._meshesFromObj[$]._babylonMesh){ee.parent=this._meshesFromObj[$]._babylonMesh;break}}if(this._materialToUse.push(this._meshesFromObj[q].materialName),this._handledMesh.hasLines&&((s=ee._internalMetadata)!==null&&s!==void 0||(ee._internalMetadata={}),ee._internalMetadata._isLine=!0),((r=this._handledMesh.positions)===null||r===void 0?void 0:r.length)===0){this._babylonMeshesArray.push(ee);continue}var D=new i.VertexData;if(D.uvs=this._handledMesh.uvs,D.indices=this._handledMesh.indices,D.positions=this._handledMesh.positions,this._loadingOptions.computeNormals){var M=new Array;i.VertexData.ComputeNormals(this._handledMesh.positions,this._handledMesh.indices,M),D.normals=M}else D.normals=this._handledMesh.normals;this._loadingOptions.importVertexColors&&(D.colors=this._handledMesh.colors),D.applyToMesh(ee),this._loadingOptions.invertY&&(ee.scaling.y*=-1),this._loadingOptions.optimizeNormals&&this._optimizeNormals(ee),this._babylonMeshesArray.push(ee),this._handledMesh.directMaterial&&(ee.material=this._handledMesh.directMaterial)}},_.ObjectDescriptor=/^o/,_.GroupDescriptor=/^g/,_.MtlLibGroupDescriptor=/^mtllib /,_.UseMtlDescriptor=/^usemtl /,_.SmoothDescriptor=/^s /,_.VertexPattern=/^v(\s+[\d|.|+|\-|e|E]+){3,7}/,_.NormalPattern=/^vn(\s+[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)/,_.UVPattern=/^vt(\s+[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)/,_.FacePattern1=/^f\s+(([\d]{1,}[\s]?){3,})+/,_.FacePattern2=/^f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,_.FacePattern3=/^f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,_.FacePattern4=/^f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/,_.FacePattern5=/^f\s+(((-[\d]{1,}\/-[\d]{1,}\/-[\d]{1,}[\s]?){3,})+)/,_.LinePattern1=/^l\s+(([\d]{1,}[\s]?){2,})+/,_.LinePattern2=/^l\s+((([\d]{1,}\/[\d]{1,}[\s]?){2,})+)/,_.LinePattern3=/^l\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){2,})+)/,_}()},"../../../dev/loaders/src/SPLAT/index.ts":(R,g,E)=>{E.r(g),E.d(g,{SPLATFileLoader:()=>i.SPLATFileLoader});var i=E("../../../dev/loaders/src/SPLAT/splatFileLoader.ts")},"../../../dev/loaders/src/SPLAT/splatFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{SPLATFileLoader:()=>_});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("babylonjs/Misc/observable"),_=function(){function A(){this.name="splat",this.extensions={".splat":{isBinary:!0},".ply":{isBinary:!0}}}return A.prototype.createPlugin=function(){return new A},A.prototype.canDirectLoad=function(){return!1},A.prototype.importMeshAsync=function(l,o,n,t,e,s){return(0,i.__awaiter)(this,void 0,void 0,function(){var r;return(0,i.__generator)(this,function(a){switch(a.label){case 0:return r=new h.GaussianSplattingMesh("GaussianSplatting",null,o),[4,r.loadFileAsync(t+(s??""))];case 1:return a.sent(),[2,{meshes:[r],particleSystems:[],skeletons:[],animationGroups:[],transformNodes:[],geometries:[],lights:[],spriteManagers:[]}]}})})},A.prototype.loadAsync=function(l,o,n){var t=new h.GaussianSplattingMesh("GaussianSplatting",null,l);return t.loadDataAsync(h.GaussianSplattingMesh.ConvertPLYToSplat(o))},A.prototype.loadAssetContainerAsync=function(l,o,n){throw new Error("loadAssetContainerAsync not implemented for Gaussian Splatting loading")},A}();h.SceneLoader&&h.SceneLoader.RegisterPlugin(new _)},"../../../dev/loaders/src/STL/index.ts":(R,g,E)=>{E.r(g),E.d(g,{STLFileLoader:()=>i.STLFileLoader});var i=E("../../../dev/loaders/src/STL/stlFileLoader.ts")},"../../../dev/loaders/src/STL/stlFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{STLFileLoader:()=>h});var i=E("babylonjs/Misc/observable"),h=function(){function _(){this.solidPattern=/solid (\S*)([\S\s]*?)endsolid[ ]*(\S*)/g,this.facetsPattern=/facet([\s\S]*?)endfacet/g,this.normalPattern=/normal[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.vertexPattern=/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.name="stl",this.extensions={".stl":{isBinary:!0}}}return _.prototype.importMesh=function(A,l,o,n,t){var e;if(typeof o!="string"){if(this._isBinary(o)){var s=new i.Mesh("stlmesh",l);return this._parseBinary(s,o),t&&t.push(s),!0}o=new TextDecoder().decode(new Uint8Array(o))}for(;e=this.solidPattern.exec(o);){var r=e[1],a=e[3];if(a&&r!=a)return i.Tools.Error("Error in STL, solid name != endsolid name"),!1;if(A&&r){if(A instanceof Array){if(!A.indexOf(r))continue}else if(r!==A)continue}r=r||"stlmesh";var s=new i.Mesh(r,l);this._parseASCII(s,e[2]),t&&t.push(s)}return!0},_.prototype.load=function(A,l,o){var n=this.importMesh(null,A,l,o,null);return n},_.prototype.loadAssetContainer=function(A,l,o){var n=new i.AssetContainer(A);return A._blockEntityCollection=!0,this.importMesh(null,A,l,o,n.meshes),A._blockEntityCollection=!1,n},_.prototype._isBinary=function(A){var l=new DataView(A);if(l.byteLength<=80)return!1;var o=32/8*3+32/8*3*3+16/8,n=l.getUint32(80,!0);if(80+32/8+n*o===l.byteLength)return!0;for(var t=[115,111,108,105,100],e=0;e<5;e++)if(l.getUint8(e)!==t[e])return!0;return!1},_.prototype._parseBinary=function(A,l){for(var o=new DataView(l),n=o.getUint32(80,!0),t=84,e=12*4+2,s=0,r=new Float32Array(n*3*3),a=new Float32Array(n*3*3),c=new Uint32Array(n*3),d=0,u=0;u<n;u++){for(var C=t+u*e,v=o.getFloat32(C,!0),F=o.getFloat32(C+4,!0),B=o.getFloat32(C+8,!0),k=1;k<=3;k++){var O=C+k*12;r[s]=o.getFloat32(O,!0),a[s]=v,_.DO_NOT_ALTER_FILE_COORDINATES?(r[s+1]=o.getFloat32(O+4,!0),r[s+2]=o.getFloat32(O+8,!0),a[s+1]=F,a[s+2]=B):(r[s+2]=o.getFloat32(O+4,!0),r[s+1]=o.getFloat32(O+8,!0),a[s+2]=F,a[s+1]=B),s+=3}_.DO_NOT_ALTER_FILE_COORDINATES?(c[d]=d,c[d+1]=d+2,c[d+2]=d+1,d+=3):(c[d]=d++,c[d]=d++,c[d]=d++)}A.setVerticesData(i.VertexBuffer.PositionKind,r),A.setVerticesData(i.VertexBuffer.NormalKind,a),A.setIndices(c),A.computeWorldMatrix(!0)},_.prototype._parseASCII=function(A,l){for(var o=[],n=[],t=[],e=0,s;s=this.facetsPattern.exec(l);){var r=s[1],a=this.normalPattern.exec(r);if(this.normalPattern.lastIndex=0,!!a){for(var c=[Number(a[1]),Number(a[5]),Number(a[3])],d=void 0;d=this.vertexPattern.exec(r);)_.DO_NOT_ALTER_FILE_COORDINATES?(o.push(Number(d[1]),Number(d[3]),Number(d[5])),n.push(c[0],c[2],c[1])):(o.push(Number(d[1]),Number(d[5]),Number(d[3])),n.push(c[0],c[1],c[2]));_.DO_NOT_ALTER_FILE_COORDINATES?(t.push(e,e+2,e+1),e+=3):t.push(e++,e++,e++),this.vertexPattern.lastIndex=0}}this.facetsPattern.lastIndex=0,A.setVerticesData(i.VertexBuffer.PositionKind,o),A.setVerticesData(i.VertexBuffer.NormalKind,n),A.setIndices(t),A.computeWorldMatrix(!0)},_.DO_NOT_ALTER_FILE_COORDINATES=!1,_}();i.SceneLoader&&i.SceneLoader.RegisterPlugin(new h)},"../../../dev/loaders/src/glTF/1.0/glTFBinaryExtension.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFBinaryExtension:()=>o});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),_=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),A=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),l="binary_glTF",o=function(n){(0,i.__extends)(t,n);function t(){return n.call(this,"KHR_binary_glTF")||this}return t.prototype.loadRuntimeAsync=function(e,s,r,a){var c=s.json.extensionsUsed;return!c||c.indexOf(this.name)===-1||!s.bin?!1:(this._bin=s.bin,a(h.GLTFLoaderBase.CreateRuntime(s.json,e,r)),!0)},t.prototype.loadBufferAsync=function(e,s,r,a){return e.extensionsUsed.indexOf(this.name)===-1||s!==l?!1:(this._bin.readAsync(0,this._bin.byteLength).then(r,function(c){return a(c.message)}),!0)},t.prototype.loadTextureBufferAsync=function(e,s,r){var a=e.textures[s],c=e.images[a.source];if(!c.extensions||!(this.name in c.extensions))return!1;var d=c.extensions[this.name],u=e.bufferViews[d.bufferView],C=_.GLTFUtils.GetBufferFromBufferView(e,u,0,u.byteLength,A.EComponentType.UNSIGNED_BYTE);return r(C),!0},t.prototype.loadShaderStringAsync=function(e,s,r){var a=e.shaders[s];if(!a.extensions||!(this.name in a.extensions))return!1;var c=a.extensions[this.name],d=e.bufferViews[c.bufferView],u=_.GLTFUtils.GetBufferFromBufferView(e,d,0,d.byteLength,A.EComponentType.UNSIGNED_BYTE);return setTimeout(function(){var C=_.GLTFUtils.DecodeBufferToText(u);r(C)}),!0},t}(h.GLTFLoaderExtension);h.GLTFLoader.RegisterExtension(new o)},"../../../dev/loaders/src/glTF/1.0/glTFLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFLoader:()=>M,GLTFLoaderBase:()=>D,GLTFLoaderExtension:()=>P});var i=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),h=E("babylonjs/Misc/observable"),_=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),A=E("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),l;(function(f){f[f.IDENTIFIER=1]="IDENTIFIER",f[f.UNKNOWN=2]="UNKNOWN",f[f.END_OF_INPUT=3]="END_OF_INPUT"})(l||(l={}));var o=function(){function f(p){this._pos=0,this.currentToken=l.UNKNOWN,this.currentIdentifier="",this.currentString="",this.isLetterOrDigitPattern=/^[a-zA-Z0-9]+$/,this._toParse=p,this._maxPos=p.length}return f.prototype.getNextToken=function(){if(this.isEnd())return l.END_OF_INPUT;if(this.currentString=this.read(),this.currentToken=l.UNKNOWN,this.currentString==="_"||this.isLetterOrDigitPattern.test(this.currentString))for(this.currentToken=l.IDENTIFIER,this.currentIdentifier=this.currentString;!this.isEnd()&&(this.isLetterOrDigitPattern.test(this.currentString=this.peek())||this.currentString==="_");)this.currentIdentifier+=this.currentString,this.forward();return this.currentToken},f.prototype.peek=function(){return this._toParse[this._pos]},f.prototype.read=function(){return this._toParse[this._pos++]},f.prototype.forward=function(){this._pos++},f.prototype.isEnd=function(){return this._pos>=this._maxPos},f}(),n=["MODEL","VIEW","PROJECTION","MODELVIEW","MODELVIEWPROJECTION","JOINTMATRIX"],t=["world","view","projection","worldView","worldViewProjection","mBones"],e=["translation","rotation","scale"],s=["position","rotationQuaternion","scaling"],r=function(f,p){for(var m in f){var y=f[m];p.buffers[m]=y,p.buffersCount++}},a=function(f,p){for(var m in f){var y=f[m];p.shaders[m]=y,p.shaderscount++}},c=function(f,p,m){for(var y in f){var T=f[y];m[p][y]=T}},d=function(f){if(f)for(var p=0;p<f.length/2;p++)f[p*2+1]=1-f[p*2+1]},u=function(f){if(f.semantic==="NORMAL")return"normal";if(f.semantic==="POSITION")return"position";if(f.semantic==="JOINT")return"matricesIndices";if(f.semantic==="WEIGHT")return"matricesWeights";if(f.semantic==="COLOR")return"color";if(f.semantic&&f.semantic.indexOf("TEXCOORD_")!==-1){var p=Number(f.semantic.split("_")[1]);return"uv"+(p===0?"":p+1)}return null},C=function(f){for(var p in f.animations){var m=f.animations[p];if(!(!m.channels||!m.samplers))for(var y=null,T=0;T<m.channels.length;T++){var b=m.channels[T],L=m.samplers[b.sampler];if(L){var x=null,w=null;m.parameters?(x=m.parameters[L.input],w=m.parameters[L.output]):(x=L.input,w=L.output);var N=_.GLTFUtils.GetBufferFromAccessor(f,f.accessors[x]),I=_.GLTFUtils.GetBufferFromAccessor(f,f.accessors[w]),H=b.target.id,K=f.scene.getNodeById(H);if(K===null&&(K=f.scene.getNodeByName(H)),K===null){h.Tools.Warn("Creating animation named "+p+". But cannot find node named "+H+" to attach to");continue}var V=K instanceof h.Bone,j=b.target.path,Y=e.indexOf(j);Y!==-1&&(j=s[Y]);var te=h.Animation.ANIMATIONTYPE_MATRIX;V||(j==="rotationQuaternion"?(te=h.Animation.ANIMATIONTYPE_QUATERNION,K.rotationQuaternion=new h.Quaternion):te=h.Animation.ANIMATIONTYPE_VECTOR3);var ne=null,le=[],z=0,se=!1;V&&y&&y.getKeys().length===N.length&&(ne=y,se=!0),se||(f.scene._blockEntityCollection=!!f.assetContainer,ne=new h.Animation(p,V?"_matrix":j,1,te,h.Animation.ANIMATIONLOOPMODE_CYCLE),f.scene._blockEntityCollection=!1);for(var ie=0;ie<N.length;ie++){var ce=null;if(j==="rotationQuaternion"?(ce=h.Quaternion.FromArray([I[z],I[z+1],I[z+2],I[z+3]]),z+=4):(ce=h.Vector3.FromArray([I[z],I[z+1],I[z+2]]),z+=3),V){var ye=K,ue=h.Vector3.Zero(),_e=new h.Quaternion,Ee=h.Vector3.Zero(),pe=ye.getBaseMatrix();se&&y&&(pe=y.getKeys()[ie].value),pe.decompose(Ee,_e,ue),j==="position"?ue=ce:j==="rotationQuaternion"?_e=ce:Ee=ce,ce=h.Matrix.Compose(Ee,_e,ue)}se?y&&(y.getKeys()[ie].value=ce):le.push({frame:N[ie],value:ce})}!se&&ne&&(ne.setKeys(le),K.animations.push(ne)),y=ne,f.scene.stopAnimation(K),f.scene.beginAnimation(K,0,N[N.length-1],!0,1)}}}},v=function(f){var p=null;if(f.translation||f.rotation||f.scale){var m=h.Vector3.FromArray(f.scale||[1,1,1]),y=h.Quaternion.FromArray(f.rotation||[0,0,0,1]),T=h.Vector3.FromArray(f.translation||[0,0,0]);p=h.Matrix.Compose(m,y,T)}else p=h.Matrix.FromArray(f.matrix);return p},F=function(f,p,m,y){for(var T=0;T<y.bones.length;T++)if(y.bones[T].name===m)return y.bones[T];var b=f.nodes;for(var L in b){var x=b[L];if(x.jointName)for(var w=x.children,T=0;T<w.length;T++){var N=f.nodes[w[T]];if(N.jointName&&N.jointName===m){var I=v(x),H=new h.Bone(x.name||"",y,F(f,p,x.jointName,y),I);return H.id=L,H}}}return null},B=function(f,p){for(var m=0;m<f.length;m++)for(var y=f[m],T=0;T<y.node.children.length;T++){var b=y.node.children[T];if(b===p)return y.bone}return null},k=function(f,p){var m=f.nodes,y=m[p];if(y)return{node:y,id:p};for(var T in m)if(y=m[T],y.jointName===p)return{node:y,id:T};return null},O=function(f,p){for(var m=0;m<f.jointNames.length;m++)if(f.jointNames[m]===p)return!0;return!1},S=function(f,p,m,y){for(var T in f.nodes){var b=f.nodes[T],L=T;if(!(!b.jointName||O(m,b.jointName))){var x=v(b),w=new h.Bone(b.name||"",p,null,x);w.id=L,y.push({bone:w,node:b,id:L})}}for(var N=0;N<y.length;N++)for(var I=y[N],H=I.node.children,K=0;K<H.length;K++){for(var V=null,j=0;j<y.length;j++)if(y[j].id===H[K]){V=y[j];break}V&&(V.bone._parent=I.bone,I.bone.children.push(V.bone))}},G=function(f,p,m,y){if(y||(y=new h.Skeleton(p.name||"","",f.scene)),!p.babylonSkeleton)return y;var T=[],b=[];S(f,y,p,T),y.bones=[];for(var L=0;L<p.jointNames.length;L++){var x=k(f,p.jointNames[L]);if(x){var w=x.node;if(!w){h.Tools.Warn("Joint named "+p.jointNames[L]+" does not exist");continue}var N=x.id,I=f.scene.getBoneById(N);if(I){y.bones.push(I);continue}for(var H=!1,K=null,V=0;V<L;V++){var j=k(f,p.jointNames[V]);if(j){var Y=j.node;if(!Y){h.Tools.Warn("Joint named "+p.jointNames[V]+" does not exist when looking for parent");continue}var te=Y.children;if(te){H=!1;for(var ne=0;ne<te.length;ne++)if(te[ne]===N){K=F(f,p,p.jointNames[V],y),H=!0;break}if(H)break}}}var le=v(w);!K&&T.length>0&&(K=B(T,N),K&&b.indexOf(K)===-1&&b.push(K));var z=new h.Bone(w.jointName||"",y,K,le);z.id=N}}var se=y.bones;y.bones=[];for(var L=0;L<p.jointNames.length;L++){var x=k(f,p.jointNames[L]);if(x){for(var V=0;V<se.length;V++)if(se[V].id===x.id){y.bones.push(se[V]);break}}}y.prepare();for(var L=0;L<b.length;L++)y.bones.push(b[L]);return y},U=function(f,p,m,y,T){if(T||(f.scene._blockEntityCollection=!!f.assetContainer,T=new h.Mesh(p.name||"",f.scene),T._parentContainer=f.assetContainer,f.scene._blockEntityCollection=!1,T.id=y),!p.babylonNode)return T;for(var b=[],L=null,x=[],w=[],N=[],I=[],H=0;H<m.length;H++){var K=m[H],V=f.meshes[K];if(V)for(var j=0;j<V.primitives.length;j++){var Y=new h.VertexData,te=V.primitives[j];te.mode;var ne=te.attributes,le=null,z=null;for(var se in ne)if(le=f.accessors[ne[se]],z=_.GLTFUtils.GetBufferFromAccessor(f,le),se==="NORMAL")Y.normals=new Float32Array(z.length),Y.normals.set(z);else if(se==="POSITION"){if(A.GLTFFileLoader.HomogeneousCoordinates){Y.positions=new Float32Array(z.length-z.length/4);for(var ie=0;ie<z.length;ie+=4)Y.positions[ie]=z[ie],Y.positions[ie+1]=z[ie+1],Y.positions[ie+2]=z[ie+2]}else Y.positions=new Float32Array(z.length),Y.positions.set(z);w.push(Y.positions.length)}else if(se.indexOf("TEXCOORD_")!==-1){var ce=Number(se.split("_")[1]),ye=h.VertexBuffer.UVKind+(ce===0?"":ce+1),ue=new Float32Array(z.length);ue.set(z),d(ue),Y.set(ue,ye)}else se==="JOINT"?(Y.matricesIndices=new Float32Array(z.length),Y.matricesIndices.set(z)):se==="WEIGHT"?(Y.matricesWeights=new Float32Array(z.length),Y.matricesWeights.set(z)):se==="COLOR"&&(Y.colors=new Float32Array(z.length),Y.colors.set(z));if(le=f.accessors[te.indices],le)z=_.GLTFUtils.GetBufferFromAccessor(f,le),Y.indices=new Int32Array(z.length),Y.indices.set(z),I.push(Y.indices.length);else{for(var _e=[],ie=0;ie<Y.positions.length/3;ie++)_e.push(ie);Y.indices=new Int32Array(_e),I.push(Y.indices.length)}L?L.merge(Y):L=Y;var Ee=f.scene.getMaterialById(te.material);b.push(Ee===null?_.GLTFUtils.GetDefaultMaterial(f.scene):Ee),x.push(x.length===0?0:x[x.length-1]+w[w.length-2]),N.push(N.length===0?0:N[N.length-1]+I[I.length-2])}}var pe;f.scene._blockEntityCollection=!!f.assetContainer,b.length>1?(pe=new h.MultiMaterial("multimat"+y,f.scene),pe.subMaterials=b):pe=new h.StandardMaterial("multimat"+y,f.scene),b.length===1&&(pe=b[0]),pe._parentContainer=f.assetContainer,T.material||(T.material=pe),new h.Geometry(y,f.scene,L,!1,T),T.computeWorldMatrix(!0),f.scene._blockEntityCollection=!1,T.subMeshes=[];for(var Ae=0,H=0;H<m.length;H++){var K=m[H],V=f.meshes[K];if(V)for(var j=0;j<V.primitives.length;j++)V.primitives[j].mode,h.SubMesh.AddToMesh(Ae,x[Ae],w[Ae],N[Ae],I[Ae],T,T,!0),Ae++}return T},W=function(f,p,m,y){f.position&&(f.position=p),(f.rotationQuaternion||f.rotation)&&(f.rotationQuaternion=m),f.scaling&&(f.scaling=y)},X=function(f,p){if(p.matrix){var m=new h.Vector3(0,0,0),y=new h.Quaternion,T=new h.Vector3(0,0,0),b=h.Matrix.FromArray(p.matrix);b.decompose(T,y,m),W(f,m,y,T)}else p.translation&&p.rotation&&p.scale&&W(f,h.Vector3.FromArray(p.translation),h.Quaternion.FromArray(p.rotation),h.Vector3.FromArray(p.scale));f.computeWorldMatrix(!0)},J=function(f,p,m){var y=null;if(f.importOnlyMeshes&&(p.skin||p.meshes)&&f.importMeshesNames&&f.importMeshesNames.length>0&&f.importMeshesNames.indexOf(p.name||"")===-1)return null;if(p.skin){if(p.meshes){var T=f.skins[p.skin],b=U(f,p,p.meshes,m,p.babylonNode);b.skeleton=f.scene.getLastSkeletonById(p.skin),b.skeleton===null&&(b.skeleton=G(f,T,b,T.babylonSkeleton),T.babylonSkeleton||(T.babylonSkeleton=b.skeleton)),y=b}}else if(p.meshes){var b=U(f,p,p.mesh?[p.mesh]:p.meshes,m,p.babylonNode);y=b}else if(p.light&&!p.babylonNode&&!f.importOnlyMeshes){var L=f.lights[p.light];if(L){if(L.type==="ambient"){var x=L[L.type],w=new h.HemisphericLight(p.light,h.Vector3.Zero(),f.scene);w.name=p.name||"",x.color&&(w.diffuse=h.Color3.FromArray(x.color)),y=w}else if(L.type==="directional"){var N=L[L.type],I=new h.DirectionalLight(p.light,h.Vector3.Zero(),f.scene);I.name=p.name||"",N.color&&(I.diffuse=h.Color3.FromArray(N.color)),y=I}else if(L.type==="point"){var H=L[L.type],K=new h.PointLight(p.light,h.Vector3.Zero(),f.scene);K.name=p.name||"",H.color&&(K.diffuse=h.Color3.FromArray(H.color)),y=K}else if(L.type==="spot"){var V=L[L.type],j=new h.SpotLight(p.light,h.Vector3.Zero(),h.Vector3.Zero(),0,0,f.scene);j.name=p.name||"",V.color&&(j.diffuse=h.Color3.FromArray(V.color)),V.fallOfAngle&&(j.angle=V.fallOfAngle),V.fallOffExponent&&(j.exponent=V.fallOffExponent),y=j}}}else if(p.camera&&!p.babylonNode&&!f.importOnlyMeshes){var Y=f.cameras[p.camera];if(Y){if(f.scene._blockEntityCollection=!!f.assetContainer,Y.type==="orthographic"){var te=new h.FreeCamera(p.camera,h.Vector3.Zero(),f.scene,!1);te.name=p.name||"",te.mode=h.Camera.ORTHOGRAPHIC_CAMERA,te.attachControl(),y=te,te._parentContainer=f.assetContainer}else if(Y.type==="perspective"){var ne=Y[Y.type],le=new h.FreeCamera(p.camera,h.Vector3.Zero(),f.scene,!1);le.name=p.name||"",le.attachControl(),ne.aspectRatio||(ne.aspectRatio=f.scene.getEngine().getRenderWidth()/f.scene.getEngine().getRenderHeight()),ne.znear&&ne.zfar&&(le.maxZ=ne.zfar,le.minZ=ne.znear),y=le,le._parentContainer=f.assetContainer}f.scene._blockEntityCollection=!1}}if(!p.jointName){if(p.babylonNode)return p.babylonNode;if(y===null){f.scene._blockEntityCollection=!!f.assetContainer;var z=new h.Mesh(p.name||"",f.scene);z._parentContainer=f.assetContainer,f.scene._blockEntityCollection=!1,p.babylonNode=z,y=z}}if(y!==null){if(p.matrix&&y instanceof h.Mesh)X(y,p);else{var se=p.translation||[0,0,0],ie=p.rotation||[0,0,0,1],ce=p.scale||[1,1,1];W(y,h.Vector3.FromArray(se),h.Quaternion.FromArray(ie),h.Vector3.FromArray(ce))}y.updateCache(!0),p.babylonNode=y}return y},Q=function(f,p,m,y){y===void 0&&(y=!1);var T=f.nodes[p],b=null;if(f.importOnlyMeshes&&!y&&f.importMeshesNames?f.importMeshesNames.indexOf(T.name||"")!==-1||f.importMeshesNames.length===0?y=!0:y=!1:y=!0,!T.jointName&&y&&(b=J(f,T,p),b!==null&&(b.id=p,b.parent=m)),T.children)for(var L=0;L<T.children.length;L++)Q(f,T.children[L],b,y)},Z=function(f){var p=f.currentScene;if(p)for(var m=0;m<p.nodes.length;m++)Q(f,p.nodes[m],null);else for(var y in f.scenes){p=f.scenes[y];for(var m=0;m<p.nodes.length;m++)Q(f,p.nodes[m],null)}C(f);for(var m=0;m<f.scene.skeletons.length;m++){var T=f.scene.skeletons[m];f.scene.beginAnimation(T,0,Number.MAX_VALUE,!0,1)}},ae=function(f,p,m,y,T,b,L){var x=b.values||T.parameters;for(var w in m){var N=m[w],I=N.type;if(I===i.EParameterType.FLOAT_MAT2||I===i.EParameterType.FLOAT_MAT3||I===i.EParameterType.FLOAT_MAT4){if(N.semantic&&!N.source&&!N.node)_.GLTFUtils.SetMatrix(p.scene,f,N,w,y.getEffect());else if(N.semantic&&(N.source||N.node)){var H=p.scene.getNodeByName(N.source||N.node||"");if(H===null&&(H=p.scene.getNodeById(N.source||N.node||"")),H===null)continue;_.GLTFUtils.SetMatrix(p.scene,H,N,w,y.getEffect())}}else{var K=x[T.uniforms[w]];if(!K)continue;if(I===i.EParameterType.SAMPLER_2D){var V=p.textures[b.values?K:N.value].babylonTexture;if(V==null)continue;y.getEffect().setTexture(w,V)}else _.GLTFUtils.SetUniform(y.getEffect(),w,K,I)}}L(y)},he=function(f,p,m,y,T){var b=y.values||m.parameters,L=m.uniforms,x=function(N){var I=T[N],H=I.type,K=b[L[N]];if(K===void 0&&(K=I.value),!K)return"continue";var V=function(j){return function(Y){I.value&&j&&(p.setTexture(j,Y),delete T[j])}};H===i.EParameterType.SAMPLER_2D?P.LoadTextureAsync(f,y.values?K:I.value,V(N),function(){return V(null)}):I.value&&_.GLTFUtils.SetUniform(p,N,y.values?K:I.value,H)&&delete T[N]};for(var w in T)x(w)},oe=function(f,p,m){return function(y,T){p.dispose(!0),m("Cannot compile program named "+f.name+". Error: "+T+". Default material will be applied")}},q=function(f,p,m,y,T,b){return function(L){he(f,p,m,y,T),p.onBind=function(x){ae(x,f,T,p,m,y,b)}}},ee=function(f,p,m){for(var y in p.uniforms){var T=p.uniforms[y],b=p.parameters[T];if(f.currentIdentifier===y&&b.semantic&&!b.source&&!b.node){var L=n.indexOf(b.semantic);if(L!==-1)return delete m[y],t[L]}}return f.currentIdentifier},$=function(f){for(var p in f.materials)P.LoadMaterialAsync(f,p,function(){},function(){})},D=function(){function f(){}return f.CreateRuntime=function(p,m,y){var T={extensions:{},accessors:{},buffers:{},bufferViews:{},meshes:{},lights:{},cameras:{},nodes:{},images:{},textures:{},shaders:{},programs:{},samplers:{},techniques:{},materials:{},animations:{},skins:{},extensionsUsed:[],scenes:{},buffersCount:0,shaderscount:0,scene:m,rootUrl:y,loadedBufferCount:0,loadedBufferViews:{},loadedShaderCount:0,importOnlyMeshes:!1,dummyNodes:[],assetContainer:null};return p.extensions&&c(p.extensions,"extensions",T),p.extensionsUsed&&c(p.extensionsUsed,"extensionsUsed",T),p.buffers&&r(p.buffers,T),p.bufferViews&&c(p.bufferViews,"bufferViews",T),p.accessors&&c(p.accessors,"accessors",T),p.meshes&&c(p.meshes,"meshes",T),p.lights&&c(p.lights,"lights",T),p.cameras&&c(p.cameras,"cameras",T),p.nodes&&c(p.nodes,"nodes",T),p.images&&c(p.images,"images",T),p.textures&&c(p.textures,"textures",T),p.shaders&&a(p.shaders,T),p.programs&&c(p.programs,"programs",T),p.samplers&&c(p.samplers,"samplers",T),p.techniques&&c(p.techniques,"techniques",T),p.materials&&c(p.materials,"materials",T),p.animations&&c(p.animations,"animations",T),p.skins&&c(p.skins,"skins",T),p.scenes&&(T.scenes=p.scenes),p.scene&&p.scenes&&(T.currentScene=p.scenes[p.scene]),T},f.LoadBufferAsync=function(p,m,y,T,b){var L=p.buffers[m];h.Tools.IsBase64(L.uri)?setTimeout(function(){return y(new Uint8Array(h.Tools.DecodeBase64(L.uri)))}):h.Tools.LoadFile(p.rootUrl+L.uri,function(x){return y(new Uint8Array(x))},b,void 0,!0,function(x){x&&T(x.status+" "+x.statusText)})},f.LoadTextureBufferAsync=function(p,m,y,T){var b=p.textures[m];if(!b||!b.source){T("");return}if(b.babylonTexture){y(null);return}var L=p.images[b.source];h.Tools.IsBase64(L.uri)?setTimeout(function(){return y(new Uint8Array(h.Tools.DecodeBase64(L.uri)))}):h.Tools.LoadFile(p.rootUrl+L.uri,function(x){return y(new Uint8Array(x))},void 0,void 0,!0,function(x){x&&T(x.status+" "+x.statusText)})},f.CreateTextureAsync=function(p,m,y,T){var b=p.textures[m];if(b.babylonTexture){T(b.babylonTexture);return}var L=p.samplers[b.sampler],x=L.minFilter===i.ETextureFilterType.NEAREST_MIPMAP_NEAREST||L.minFilter===i.ETextureFilterType.NEAREST_MIPMAP_LINEAR||L.minFilter===i.ETextureFilterType.LINEAR_MIPMAP_NEAREST||L.minFilter===i.ETextureFilterType.LINEAR_MIPMAP_LINEAR,w=h.Texture.BILINEAR_SAMPLINGMODE,N=y==null?new Blob:new Blob([y]),I=URL.createObjectURL(N),H=function(){return URL.revokeObjectURL(I)},K=new h.Texture(I,p.scene,!x,!0,w,H,H);L.wrapS!==void 0&&(K.wrapU=_.GLTFUtils.GetWrapMode(L.wrapS)),L.wrapT!==void 0&&(K.wrapV=_.GLTFUtils.GetWrapMode(L.wrapT)),K.name=m,b.babylonTexture=K,T(K)},f.LoadShaderStringAsync=function(p,m,y,T){var b=p.shaders[m];if(h.Tools.IsBase64(b.uri)){var L=atob(b.uri.split(",")[1]);y&&y(L)}else h.Tools.LoadFile(p.rootUrl+b.uri,y,void 0,void 0,!1,function(x){x&&T&&T(x.status+" "+x.statusText)})},f.LoadMaterialAsync=function(p,m,y,T){var b=p.materials[m];if(!b.technique){T&&T("No technique found.");return}var L=p.techniques[b.technique];if(!L){p.scene._blockEntityCollection=!!p.assetContainer;var x=new h.StandardMaterial(m,p.scene);x._parentContainer=p.assetContainer,p.scene._blockEntityCollection=!1,x.diffuseColor=new h.Color3(.5,.5,.5),x.sideOrientation=h.Material.CounterClockWiseSideOrientation,y(x);return}var w=p.programs[L.program],N=L.states,I=h.Effect.ShadersStore[w.vertexShader+"VertexShader"],H=h.Effect.ShadersStore[w.fragmentShader+"PixelShader"],K="",V="",j=new o(I),Y=new o(H),te={},ne=[],le=[],z=[];for(var se in L.uniforms){var ie=L.uniforms[se],ce=L.parameters[ie];if(te[se]=ce,ce.semantic&&!ce.node&&!ce.source){var ye=n.indexOf(ce.semantic);ye!==-1?(ne.push(t[ye]),delete te[se]):ne.push(se)}else ce.type===i.EParameterType.SAMPLER_2D?z.push(se):ne.push(se)}for(var ue in L.attributes){var _e=L.attributes[ue],Ee=L.parameters[_e];if(Ee.semantic){var pe=u(Ee);pe&&le.push(pe)}}for(;!j.isEnd()&&j.getNextToken();){var Ae=j.currentToken;if(Ae!==l.IDENTIFIER){K+=j.currentString;continue}var Le=!1;for(var ue in L.attributes){var _e=L.attributes[ue],Ee=L.parameters[_e];if(j.currentIdentifier===ue&&Ee.semantic){K+=u(Ee),Le=!0;break}}Le||(K+=ee(j,L,te))}for(;!Y.isEnd()&&Y.getNextToken();){var Ae=Y.currentToken;if(Ae!==l.IDENTIFIER){V+=Y.currentString;continue}V+=ee(Y,L,te)}var xe={vertex:w.vertexShader+m,fragment:w.fragmentShader+m},Se={attributes:le,uniforms:ne,samplers:z,needAlphaBlending:N&&N.enable&&N.enable.indexOf(3042)!==-1};h.Effect.ShadersStore[w.vertexShader+m+"VertexShader"]=K,h.Effect.ShadersStore[w.fragmentShader+m+"PixelShader"]=V;var fe=new h.ShaderMaterial(m,p.scene,xe,Se);if(fe.onError=oe(w,fe,T),fe.onCompiled=q(p,fe,L,b,te,y),fe.sideOrientation=h.Material.CounterClockWiseSideOrientation,N&&N.functions){var Be=N.functions;Be.cullFace&&Be.cullFace[0]!==i.ECullingType.BACK&&(fe.backFaceCulling=!1);var re=Be.blendFuncSeparate;re&&(re[0]===i.EBlendingFunction.SRC_ALPHA&&re[1]===i.EBlendingFunction.ONE_MINUS_SRC_ALPHA&&re[2]===i.EBlendingFunction.ONE&&re[3]===i.EBlendingFunction.ONE?fe.alphaMode=h.Constants.ALPHA_COMBINE:re[0]===i.EBlendingFunction.ONE&&re[1]===i.EBlendingFunction.ONE&&re[2]===i.EBlendingFunction.ZERO&&re[3]===i.EBlendingFunction.ONE?fe.alphaMode=h.Constants.ALPHA_ONEONE:re[0]===i.EBlendingFunction.SRC_ALPHA&&re[1]===i.EBlendingFunction.ONE&&re[2]===i.EBlendingFunction.ZERO&&re[3]===i.EBlendingFunction.ONE?fe.alphaMode=h.Constants.ALPHA_ADD:re[0]===i.EBlendingFunction.ZERO&&re[1]===i.EBlendingFunction.ONE_MINUS_SRC_COLOR&&re[2]===i.EBlendingFunction.ONE&&re[3]===i.EBlendingFunction.ONE?fe.alphaMode=h.Constants.ALPHA_SUBTRACT:re[0]===i.EBlendingFunction.DST_COLOR&&re[1]===i.EBlendingFunction.ZERO&&re[2]===i.EBlendingFunction.ONE&&re[3]===i.EBlendingFunction.ONE?fe.alphaMode=h.Constants.ALPHA_MULTIPLY:re[0]===i.EBlendingFunction.SRC_ALPHA&&re[1]===i.EBlendingFunction.ONE_MINUS_SRC_COLOR&&re[2]===i.EBlendingFunction.ONE&&re[3]===i.EBlendingFunction.ONE&&(fe.alphaMode=h.Constants.ALPHA_MAXIMIZED))}},f}(),M=function(){function f(){}return f.RegisterExtension=function(p){if(f.Extensions[p.name]){h.Tools.Error('Tool with the same name "'+p.name+'" already exists');return}f.Extensions[p.name]=p},f.prototype.dispose=function(){},f.prototype._importMeshAsync=function(p,m,y,T,b,L,x,w){var N=this;return m.useRightHandedSystem=!0,P.LoadRuntimeAsync(m,y,T,function(I){I.assetContainer=b,I.importOnlyMeshes=!0,p===""?I.importMeshesNames=[]:typeof p=="string"?I.importMeshesNames=[p]:p&&!(p instanceof Array)?I.importMeshesNames=[p]:(I.importMeshesNames=[],h.Tools.Warn("Argument meshesNames must be of type string or string[]")),N._createNodes(I);var H=[],K=[];for(var V in I.nodes){var j=I.nodes[V];j.babylonNode instanceof h.AbstractMesh&&H.push(j.babylonNode)}for(var Y in I.skins){var te=I.skins[Y];te.babylonSkeleton instanceof h.Skeleton&&K.push(te.babylonSkeleton)}N._loadBuffersAsync(I,function(){N._loadShadersAsync(I,function(){$(I),Z(I),!A.GLTFFileLoader.IncrementalLoading&&L&&L(H,K)})}),A.GLTFFileLoader.IncrementalLoading&&L&&L(H,K)},w),!0},f.prototype.importMeshAsync=function(p,m,y,T,b,L){var x=this;return new Promise(function(w,N){x._importMeshAsync(p,m,T,b,y,function(I,H){w({meshes:I,particleSystems:[],skeletons:H,animationGroups:[],lights:[],transformNodes:[],geometries:[],spriteManagers:[]})},L,function(I){N(new Error(I))})})},f.prototype._loadAsync=function(p,m,y,T,b,L){var x=this;p.useRightHandedSystem=!0,P.LoadRuntimeAsync(p,m,y,function(w){P.LoadRuntimeExtensionsAsync(w,function(){x._createNodes(w),x._loadBuffersAsync(w,function(){x._loadShadersAsync(w,function(){$(w),Z(w),A.GLTFFileLoader.IncrementalLoading||T()})}),A.GLTFFileLoader.IncrementalLoading&&T()},L)},L)},f.prototype.loadAsync=function(p,m,y,T){var b=this;return new Promise(function(L,x){b._loadAsync(p,m,y,function(){L()},T,function(w){x(new Error(w))})})},f.prototype._loadShadersAsync=function(p,m){var y=!1,T=function(x,w){P.LoadShaderStringAsync(p,x,function(N){N instanceof ArrayBuffer||(p.loadedShaderCount++,N&&(h.Effect.ShadersStore[x+(w.type===i.EShaderType.VERTEX?"VertexShader":"PixelShader")]=N),p.loadedShaderCount===p.shaderscount&&m())},function(){h.Tools.Error("Error when loading shader program named "+x+" located at "+w.uri)})};for(var b in p.shaders){y=!0;var L=p.shaders[b];L?T.bind(this,b,L)():h.Tools.Error("No shader named: "+b)}y||m()},f.prototype._loadBuffersAsync=function(p,m){var y=!1,T=function(x,w){P.LoadBufferAsync(p,x,function(N){p.loadedBufferCount++,N&&(N.byteLength!=p.buffers[x].byteLength&&h.Tools.Error("Buffer named "+x+" is length "+N.byteLength+". Expected: "+w.byteLength),p.loadedBufferViews[x]=N),p.loadedBufferCount===p.buffersCount&&m()},function(){h.Tools.Error("Error when loading buffer named "+x+" located at "+w.uri)})};for(var b in p.buffers){y=!0;var L=p.buffers[b];L?T.bind(this,b,L)():h.Tools.Error("No buffer named: "+b)}y||m()},f.prototype._createNodes=function(p){var m=p.currentScene;if(m)for(var y=0;y<m.nodes.length;y++)Q(p,m.nodes[y],null);else for(var T in p.scenes){m=p.scenes[T];for(var y=0;y<m.nodes.length;y++)Q(p,m.nodes[y],null)}},f.Extensions={},f}(),P=function(){function f(p){this._name=p}return Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),f.prototype.loadRuntimeAsync=function(p,m,y,T,b){return!1},f.prototype.loadRuntimeExtensionsAsync=function(p,m,y){return!1},f.prototype.loadBufferAsync=function(p,m,y,T,b){return!1},f.prototype.loadTextureBufferAsync=function(p,m,y,T){return!1},f.prototype.createTextureAsync=function(p,m,y,T,b){return!1},f.prototype.loadShaderStringAsync=function(p,m,y,T){return!1},f.prototype.loadMaterialAsync=function(p,m,y,T){return!1},f.LoadRuntimeAsync=function(p,m,y,T,b){f._ApplyExtensions(function(L){return L.loadRuntimeAsync(p,m,y,T,b)},function(){setTimeout(function(){T&&T(D.CreateRuntime(m.json,p,y))})})},f.LoadRuntimeExtensionsAsync=function(p,m,y){f._ApplyExtensions(function(T){return T.loadRuntimeExtensionsAsync(p,m,y)},function(){setTimeout(function(){m()})})},f.LoadBufferAsync=function(p,m,y,T,b){f._ApplyExtensions(function(L){return L.loadBufferAsync(p,m,y,T,b)},function(){D.LoadBufferAsync(p,m,y,T,b)})},f.LoadTextureAsync=function(p,m,y,T){f._LoadTextureBufferAsync(p,m,function(b){b&&f._CreateTextureAsync(p,m,b,y,T)},T)},f.LoadShaderStringAsync=function(p,m,y,T){f._ApplyExtensions(function(b){return b.loadShaderStringAsync(p,m,y,T)},function(){D.LoadShaderStringAsync(p,m,y,T)})},f.LoadMaterialAsync=function(p,m,y,T){f._ApplyExtensions(function(b){return b.loadMaterialAsync(p,m,y,T)},function(){D.LoadMaterialAsync(p,m,y,T)})},f._LoadTextureBufferAsync=function(p,m,y,T){f._ApplyExtensions(function(b){return b.loadTextureBufferAsync(p,m,y,T)},function(){D.LoadTextureBufferAsync(p,m,y,T)})},f._CreateTextureAsync=function(p,m,y,T,b){f._ApplyExtensions(function(L){return L.createTextureAsync(p,m,y,T,b)},function(){D.CreateTextureAsync(p,m,y,T)})},f._ApplyExtensions=function(p,m){for(var y in M.Extensions){var T=M.Extensions[y];if(p(T))return}m()},f}();A.GLTFFileLoader._CreateGLTF1Loader=function(){return new M}},"../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts":(R,g,E)=>{E.r(g),E.d(g,{EBlendingFunction:()=>t,EComponentType:()=>i,ECullingType:()=>n,EParameterType:()=>_,EShaderType:()=>h,ETextureFilterType:()=>l,ETextureFormat:()=>o,ETextureWrapMode:()=>A});var i;(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.FLOAT=5126]="FLOAT"})(i||(i={}));var h;(function(e){e[e.FRAGMENT=35632]="FRAGMENT",e[e.VERTEX=35633]="VERTEX"})(h||(h={}));var _;(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D"})(_||(_={}));var A;(function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"})(A||(A={}));var l;(function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9728]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(l||(l={}));var o;(function(e){e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA"})(o||(o={}));var n;(function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(n||(n={}));var t;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(t||(t={}))},"../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFUtils:()=>_});var i=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),h=E("babylonjs/Misc/observable"),_=function(){function A(){}return A.SetMatrix=function(l,o,n,t,e){var s=null;if(n.semantic==="MODEL"?s=o.getWorldMatrix():n.semantic==="PROJECTION"?s=l.getProjectionMatrix():n.semantic==="VIEW"?s=l.getViewMatrix():n.semantic==="MODELVIEWINVERSETRANSPOSE"?s=h.Matrix.Transpose(o.getWorldMatrix().multiply(l.getViewMatrix()).invert()):n.semantic==="MODELVIEW"?s=o.getWorldMatrix().multiply(l.getViewMatrix()):n.semantic==="MODELVIEWPROJECTION"?s=o.getWorldMatrix().multiply(l.getTransformMatrix()):n.semantic==="MODELINVERSE"?s=o.getWorldMatrix().invert():n.semantic==="VIEWINVERSE"?s=l.getViewMatrix().invert():n.semantic==="PROJECTIONINVERSE"?s=l.getProjectionMatrix().invert():n.semantic==="MODELVIEWINVERSE"?s=o.getWorldMatrix().multiply(l.getViewMatrix()).invert():n.semantic==="MODELVIEWPROJECTIONINVERSE"?s=o.getWorldMatrix().multiply(l.getTransformMatrix()).invert():n.semantic==="MODELINVERSETRANSPOSE"&&(s=h.Matrix.Transpose(o.getWorldMatrix().invert())),s)switch(n.type){case i.EParameterType.FLOAT_MAT2:e.setMatrix2x2(t,h.Matrix.GetAsMatrix2x2(s));break;case i.EParameterType.FLOAT_MAT3:e.setMatrix3x3(t,h.Matrix.GetAsMatrix3x3(s));break;case i.EParameterType.FLOAT_MAT4:e.setMatrix(t,s);break}},A.SetUniform=function(l,o,n,t){switch(t){case i.EParameterType.FLOAT:return l.setFloat(o,n),!0;case i.EParameterType.FLOAT_VEC2:return l.setVector2(o,h.Vector2.FromArray(n)),!0;case i.EParameterType.FLOAT_VEC3:return l.setVector3(o,h.Vector3.FromArray(n)),!0;case i.EParameterType.FLOAT_VEC4:return l.setVector4(o,h.Vector4.FromArray(n)),!0;default:return!1}},A.GetWrapMode=function(l){switch(l){case i.ETextureWrapMode.CLAMP_TO_EDGE:return h.Texture.CLAMP_ADDRESSMODE;case i.ETextureWrapMode.MIRRORED_REPEAT:return h.Texture.MIRROR_ADDRESSMODE;case i.ETextureWrapMode.REPEAT:return h.Texture.WRAP_ADDRESSMODE;default:return h.Texture.WRAP_ADDRESSMODE}},A.GetByteStrideFromType=function(l){var o=l.type;switch(o){case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;default:return 1}},A.GetTextureFilterMode=function(l){switch(l){case i.ETextureFilterType.LINEAR:case i.ETextureFilterType.LINEAR_MIPMAP_NEAREST:case i.ETextureFilterType.LINEAR_MIPMAP_LINEAR:return h.Texture.TRILINEAR_SAMPLINGMODE;case i.ETextureFilterType.NEAREST:case i.ETextureFilterType.NEAREST_MIPMAP_NEAREST:return h.Texture.NEAREST_SAMPLINGMODE;default:return h.Texture.BILINEAR_SAMPLINGMODE}},A.GetBufferFromBufferView=function(l,o,n,t,e){n=o.byteOffset+n;var s=l.loadedBufferViews[o.buffer];if(n+t>s.byteLength)throw new Error("Buffer access is out of range");var r=s.buffer;switch(n+=s.byteOffset,e){case i.EComponentType.BYTE:return new Int8Array(r,n,t);case i.EComponentType.UNSIGNED_BYTE:return new Uint8Array(r,n,t);case i.EComponentType.SHORT:return new Int16Array(r,n,t);case i.EComponentType.UNSIGNED_SHORT:return new Uint16Array(r,n,t);default:return new Float32Array(r,n,t)}},A.GetBufferFromAccessor=function(l,o){var n=l.bufferViews[o.bufferView],t=o.count*A.GetByteStrideFromType(o);return A.GetBufferFromBufferView(l,n,o.byteOffset,t,o.componentType)},A.DecodeBufferToText=function(l){for(var o="",n=l.byteLength,t=0;t<n;++t)o+=String.fromCharCode(l[t]);return o},A.GetDefaultMaterial=function(l){if(!A._DefaultMaterial){h.Effect.ShadersStore.GLTFDefaultMaterialVertexShader=["precision highp float;","","uniform mat4 worldView;","uniform mat4 projection;","","attribute vec3 position;","","void main(void)","{","    gl_Position = projection * worldView * vec4(position, 1.0);","}"].join(`
`),h.Effect.ShadersStore.GLTFDefaultMaterialPixelShader=["precision highp float;","","uniform vec4 u_emission;","","void main(void)","{","    gl_FragColor = u_emission;","}"].join(`
`);var o={vertex:"GLTFDefaultMaterial",fragment:"GLTFDefaultMaterial"},n={attributes:["position"],uniforms:["worldView","projection","u_emission"],samplers:new Array,needAlphaBlending:!1};A._DefaultMaterial=new h.ShaderMaterial("GLTFDefaultMaterial",l,o,n),A._DefaultMaterial.setColor4("u_emission",new h.Color4(.5,.5,.5,1))}return A._DefaultMaterial},A._DefaultMaterial=null,A}()},"../../../dev/loaders/src/glTF/1.0/glTFMaterialsCommonExtension.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFMaterialsCommonExtension:()=>A});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),_=E("babylonjs/Misc/observable"),A=function(l){(0,i.__extends)(o,l);function o(){return l.call(this,"KHR_materials_common")||this}return o.prototype.loadRuntimeExtensionsAsync=function(n){if(!n.extensions)return!1;var t=n.extensions[this.name];if(!t)return!1;var e=t.lights;if(e)for(var s in e){var r=e[s];switch(r.type){case"ambient":{var a=new _.HemisphericLight(r.name,new _.Vector3(0,1,0),n.scene),c=r.ambient;c&&(a.diffuse=_.Color3.FromArray(c.color||[1,1,1]));break}case"point":{var d=new _.PointLight(r.name,new _.Vector3(10,10,10),n.scene),u=r.point;u&&(d.diffuse=_.Color3.FromArray(u.color||[1,1,1]));break}case"directional":{var C=new _.DirectionalLight(r.name,new _.Vector3(0,-1,0),n.scene),v=r.directional;v&&(C.diffuse=_.Color3.FromArray(v.color||[1,1,1]));break}case"spot":{var F=r.spot;if(F){var B=new _.SpotLight(r.name,new _.Vector3(0,10,0),new _.Vector3(0,-1,0),F.fallOffAngle||Math.PI,F.fallOffExponent||0,n.scene);B.diffuse=_.Color3.FromArray(F.color||[1,1,1])}break}default:_.Tools.Warn('GLTF Material Common extension: light type "'+r.type+"” not supported");break}}return!1},o.prototype.loadMaterialAsync=function(n,t,e,s){var r=n.materials[t];if(!r||!r.extensions)return!1;var a=r.extensions[this.name];if(!a)return!1;var c=new _.StandardMaterial(t,n.scene);return c.sideOrientation=_.Material.CounterClockWiseSideOrientation,a.technique==="CONSTANT"&&(c.disableLighting=!0),c.backFaceCulling=a.doubleSided===void 0?!1:!a.doubleSided,c.alpha=a.values.transparency===void 0?1:a.values.transparency,c.specularPower=a.values.shininess===void 0?0:a.values.shininess,typeof a.values.ambient=="string"?this._loadTexture(n,a.values.ambient,c,"ambientTexture",s):c.ambientColor=_.Color3.FromArray(a.values.ambient||[0,0,0]),typeof a.values.diffuse=="string"?this._loadTexture(n,a.values.diffuse,c,"diffuseTexture",s):c.diffuseColor=_.Color3.FromArray(a.values.diffuse||[0,0,0]),typeof a.values.emission=="string"?this._loadTexture(n,a.values.emission,c,"emissiveTexture",s):c.emissiveColor=_.Color3.FromArray(a.values.emission||[0,0,0]),typeof a.values.specular=="string"?this._loadTexture(n,a.values.specular,c,"specularTexture",s):c.specularColor=_.Color3.FromArray(a.values.specular||[0,0,0]),!0},o.prototype._loadTexture=function(n,t,e,s,r){h.GLTFLoaderBase.LoadTextureBufferAsync(n,t,function(a){h.GLTFLoaderBase.CreateTextureAsync(n,t,a,function(c){return e[s]=c})},r)},o}(h.GLTFLoaderExtension);h.GLTFLoader.RegisterExtension(new A)},"../../../dev/loaders/src/glTF/1.0/index.ts":(R,g,E)=>{E.r(g),E.d(g,{EBlendingFunction:()=>_.EBlendingFunction,EComponentType:()=>_.EComponentType,ECullingType:()=>_.ECullingType,EParameterType:()=>_.EParameterType,EShaderType:()=>_.EShaderType,ETextureFilterType:()=>_.ETextureFilterType,ETextureFormat:()=>_.ETextureFormat,ETextureWrapMode:()=>_.ETextureWrapMode,GLTFBinaryExtension:()=>i.GLTFBinaryExtension,GLTFLoader:()=>h.GLTFLoader,GLTFLoaderBase:()=>h.GLTFLoaderBase,GLTFLoaderExtension:()=>h.GLTFLoaderExtension,GLTFMaterialsCommonExtension:()=>l.GLTFMaterialsCommonExtension,GLTFUtils:()=>A.GLTFUtils});var i=E("../../../dev/loaders/src/glTF/1.0/glTFBinaryExtension.ts"),h=E("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),_=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),A=E("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),l=E("../../../dev/loaders/src/glTF/1.0/glTFMaterialsCommonExtension.ts")},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_lights_image_based.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_lights_image_based:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="EXT_lights_image_based",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null,delete this._lights},l.prototype.onLoading=function(){var o=this._loader.gltf.extensions;if(o&&o[this.name]){var n=o[this.name];this._lights=n.lights}},l.prototype.loadSceneAsync=function(o,n){var t=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(e,s){t._loader._allMaterialsDirtyRequired=!0;var r=new Array;r.push(t._loader.loadSceneAsync(o,n)),t._loader.logOpen("".concat(e));var a=h.ArrayItem.Get("".concat(e,"/light"),t._lights,s.light);return r.push(t._loadLightAsync("/extensions/".concat(t.name,"/lights/").concat(s.light),a).then(function(c){t._loader.babylonScene.environmentTexture=c})),t._loader.logClose(),Promise.all(r).then(function(){})})},l.prototype._loadLightAsync=function(o,n){var t=this;if(!n._loaded){var e=new Array;this._loader.logOpen("".concat(o));for(var s=new Array(n.specularImages.length),r=function(d){var u=n.specularImages[d];s[d]=new Array(u.length);for(var C=function(F){var B="".concat(o,"/specularImages/").concat(d,"/").concat(F);a._loader.logOpen("".concat(B));var k=u[F],O=h.ArrayItem.Get(B,a._loader.gltf.images,k);e.push(a._loader.loadImageAsync("/images/".concat(k),O).then(function(S){s[d][F]=S})),a._loader.logClose()},v=0;v<u.length;v++)C(v)},a=this,c=0;c<n.specularImages.length;c++)r(c);this._loader.logClose(),n._loaded=Promise.all(e).then(function(){var d=new i.RawCubeTexture(t._loader.babylonScene,null,n.specularImageSize);if(d.name=n.name||"environment",n._babylonTexture=d,n.intensity!=null&&(d.level=n.intensity),n.rotation){var u=i.Quaternion.FromArray(n.rotation);t._loader.babylonScene.useRightHandedSystem||(u=i.Quaternion.Inverse(u)),i.Matrix.FromQuaternionToRef(u,d.getReflectionTextureMatrix())}if(!n.irradianceCoefficients)throw new Error("".concat(o,": Irradiance coefficients are missing"));var C=i.SphericalHarmonics.FromArray(n.irradianceCoefficients);C.scaleInPlace(n.intensity),C.convertIrradianceToLambertianRadiance();var v=i.SphericalPolynomial.FromHarmonics(C),F=(s.length-1)/i.Scalar.Log2(n.specularImageSize);return d.updateRGBDAsync(s,v,F)})}return n._loaded.then(function(){return n._babylonTexture})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_mesh_gpu_instancing:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="EXT_mesh_gpu_instancing",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadNodeAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){e._loader._disableInstancedMesh++;var a=e._loader.loadNodeAsync("/nodes/".concat(n.index),n,t);if(e._loader._disableInstancedMesh--,!n._primitiveBabylonMeshes)return a;var c=new Array,d=0,u=function(C){if(r.attributes[C]==null){c.push(Promise.resolve(null));return}var v=h.ArrayItem.Get("".concat(s,"/attributes/").concat(C),e._loader.gltf.accessors,r.attributes[C]);if(c.push(e._loader._loadFloatAccessorAsync("/accessors/".concat(v.bufferView),v)),d===0)d=v.count;else if(d!==v.count)throw new Error("".concat(s,"/attributes: Instance buffer accessors do not have the same count."))};return u("TRANSLATION"),u("ROTATION"),u("SCALE"),a.then(function(C){return Promise.all(c).then(function(v){var F=v[0],B=v[1],k=v[2],O=new Float32Array(d*16);i.TmpVectors.Vector3[0].copyFromFloats(0,0,0),i.TmpVectors.Quaternion[0].copyFromFloats(0,0,0,1),i.TmpVectors.Vector3[1].copyFromFloats(1,1,1);for(var S=0;S<d;++S)F&&i.Vector3.FromArrayToRef(F,S*3,i.TmpVectors.Vector3[0]),B&&i.Quaternion.FromArrayToRef(B,S*4,i.TmpVectors.Quaternion[0]),k&&i.Vector3.FromArrayToRef(k,S*3,i.TmpVectors.Vector3[1]),i.Matrix.ComposeToRef(i.TmpVectors.Vector3[1],i.TmpVectors.Quaternion[0],i.TmpVectors.Vector3[0],i.TmpVectors.Matrix[0]),i.TmpVectors.Matrix[0].copyToArray(O,S*16);for(var G=0,U=n._primitiveBabylonMeshes;G<U.length;G++){var W=U[G];W.thinInstanceSetBuffer("matrix",O,16,!0)}return C})})})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_meshopt_compression.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_meshopt_compression:()=>A});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h=E("babylonjs/Misc/observable"),_="EXT_meshopt_compression",A=function(){function l(o){this.name=_,this.enabled=o.isExtensionUsed(_),this._loader=o}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadBufferViewAsync=function(o,n){var t=this;return i.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(e,s){var r=n;if(r._meshOptData)return r._meshOptData;var a=i.ArrayItem.Get("".concat(o,"/buffer"),t._loader.gltf.buffers,s.buffer);return r._meshOptData=t._loader.loadBufferAsync("/buffers/".concat(a.index),a,s.byteOffset||0,s.byteLength).then(function(c){return h.MeshoptCompression.Default.decodeGltfBufferAsync(c,s.count,s.byteStride,s.mode,s.filter)}),r._meshOptData})},l}();i.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_avif.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_texture_avif:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="EXT_texture_avif",_=function(){function A(l){this.name=h,this._loader=l,this.enabled=l.isExtensionUsed(h)}return A.prototype.dispose=function(){this._loader=null},A.prototype._loadTextureAsync=function(l,o,n){var t=this;return i.GLTFLoader.LoadExtensionAsync(l,o,this.name,function(e,s){var r=o.sampler==null?i.GLTFLoader.DefaultSampler:i.ArrayItem.Get("".concat(l,"/sampler"),t._loader.gltf.samplers,o.sampler),a=i.ArrayItem.Get("".concat(e,"/source"),t._loader.gltf.images,s.source);return t._loader._createTextureAsync(l,r,a,function(c){n(c)},void 0,!o._textureInfo.nonColorData)})},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_webp.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_texture_webp:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="EXT_texture_webp",_=function(){function A(l){this.name=h,this._loader=l,this.enabled=l.isExtensionUsed(h)}return A.prototype.dispose=function(){this._loader=null},A.prototype._loadTextureAsync=function(l,o,n){var t=this;return i.GLTFLoader.LoadExtensionAsync(l,o,this.name,function(e,s){var r=o.sampler==null?i.GLTFLoader.DefaultSampler:i.ArrayItem.Get("".concat(l,"/sampler"),t._loader.gltf.samplers,o.sampler),a=i.ArrayItem.Get("".concat(e,"/source"),t._loader.gltf.images,s.source);return t._loader._createTextureAsync(l,r,a,function(c){n(c)},void 0,!o._textureInfo.nonColorData)})},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/ExtrasAsMetadata.ts":(R,g,E)=>{E.r(g),E.d(g,{ExtrasAsMetadata:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="ExtrasAsMetadata",_=function(){function A(l){this.name=h,this.enabled=!0,this._loader=l}return A.prototype._assignExtras=function(l,o){if(o.extras&&Object.keys(o.extras).length>0){var n=l.metadata=l.metadata||{},t=n.gltf=n.gltf||{};t.extras=o.extras}},A.prototype.dispose=function(){this._loader=null},A.prototype.loadNodeAsync=function(l,o,n){var t=this;return this._loader.loadNodeAsync(l,o,function(e){t._assignExtras(e,o),n(e)})},A.prototype.loadCameraAsync=function(l,o,n){var t=this;return this._loader.loadCameraAsync(l,o,function(e){t._assignExtras(e,o),n(e)})},A.prototype.createMaterial=function(l,o,n){var t=this._loader.createMaterial(l,o,n);return this._assignExtras(t,o),t},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.data.ts":(R,g,E)=>{E.r(g),E.d(g,{animationPointerTree:()=>F});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("babylonjs/Misc/observable"),_=E("../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts");function A(B,k,O,S){return h.Color3.FromArray(k,O).scale(S)}function l(B,k,O,S){return k[O+3]*S}function o(B,k,O,S){return k[O]*S}function n(B,k,O,S){return-k[O]*S}function t(B,k,O,S){return k[O+1]*S}function e(B,k,O,S){return k[O]*S*2}function s(B){return{scale:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"".concat(B,".uScale"),o,function(){return 2}),new a(h.Animation.ANIMATIONTYPE_FLOAT,"".concat(B,".vScale"),t,function(){return 2})],offset:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"".concat(B,".uOffset"),o,function(){return 2}),new a(h.Animation.ANIMATIONTYPE_FLOAT,"".concat(B,".vOffset"),t,function(){return 2})],rotation:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"".concat(B,".wAng"),n,function(){return 1})]}}var r=function(B){(0,i.__extends)(k,B);function k(){return B!==null&&B.apply(this,arguments)||this}return k.prototype.buildAnimations=function(O,S,G,U,W){W(O._babylonCamera,this._buildAnimation(S,G,U))},k}(_.AnimationPropertyInfo),a=function(B){(0,i.__extends)(k,B);function k(){return B!==null&&B.apply(this,arguments)||this}return k.prototype.buildAnimations=function(O,S,G,U,W){for(var X in O._data)W(O._data[X].babylonMaterial,this._buildAnimation(S,G,U))},k}(_.AnimationPropertyInfo),c=function(B){(0,i.__extends)(k,B);function k(){return B!==null&&B.apply(this,arguments)||this}return k.prototype.buildAnimations=function(O,S,G,U,W){W(O._babylonLight,this._buildAnimation(S,G,U))},k}(_.AnimationPropertyInfo),d={__array__:(0,i.__assign)({__target__:!0},_.nodeAnimationData)},u={__array__:{__target__:!0,orthographic:{xmag:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"orthoLeft",n,function(){return 1}),new r(h.Animation.ANIMATIONTYPE_FLOAT,"orthoRight",t,function(){return 1})],ymag:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"orthoBottom",n,function(){return 1}),new r(h.Animation.ANIMATIONTYPE_FLOAT,"orthoTop",t,function(){return 1})],zfar:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"maxZ",o,function(){return 1})],znear:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"minZ",o,function(){return 1})]},perspective:{yfov:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"fov",o,function(){return 1})],zfar:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"maxZ",o,function(){return 1})],znear:[new r(h.Animation.ANIMATIONTYPE_FLOAT,"minZ",o,function(){return 1})]}}},C={__array__:{__target__:!0,pbrMetallicRoughness:{baseColorFactor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"albedoColor",A,function(){return 4}),new a(h.Animation.ANIMATIONTYPE_FLOAT,"alpha",l,function(){return 4})],metallicFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"metallic",o,function(){return 1})],roughnessFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"roughness",o,function(){return 1})],baseColorTexture:{extensions:{KHR_texture_transform:s("albedoTexture")}},metallicRoughnessTexture:{extensions:{KHR_texture_transform:s("metallicTexture")}}},emissiveFactor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"emissiveColor",A,function(){return 3})],normalTexture:{scale:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"bumpTexture.level",o,function(){return 1})],extensions:{KHR_texture_transform:s("bumpTexture")}},occlusionTexture:{strength:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"ambientTextureStrength",o,function(){return 1})],extensions:{KHR_texture_transform:s("ambientTexture")}},emissiveTexture:{extensions:{KHR_texture_transform:s("emissiveTexture")}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"anisotropy.intensity",o,function(){return 1})],anisotropyRotation:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"anisotropy.angle",o,function(){return 1})],anisotropyTexture:{extensions:{KHR_texture_transform:s("anisotropy.texture")}}},KHR_materials_clearcoat:{clearcoatFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"clearCoat.intensity",o,function(){return 1})],clearcoatRoughnessFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"clearCoat.roughness",o,function(){return 1})],clearcoatTexture:{extensions:{KHR_texture_transform:s("clearCoat.texture")}},clearcoatNormalTexture:{scale:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"clearCoat.bumpTexture.level",o,function(){return 1})],extensions:{KHR_texture_transform:s("clearCoat.bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:s("clearCoat.textureRoughness")}}},KHR_materials_dispersion:{dispersion:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"subSurface.dispersion",o,function(){return 1})]},KHR_materials_emissive_strength:{emissiveStrength:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"emissiveIntensity",o,function(){return 1})]},KHR_materials_ior:{ior:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"indexOfRefraction",o,function(){return 1})]},KHR_materials_iridescence:{iridescenceFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"iridescence.intensity",o,function(){return 1})],iridescenceIor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"iridescence.indexOfRefraction",o,function(){return 1})],iridescenceThicknessMinimum:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"iridescence.minimumThickness",o,function(){return 1})],iridescenceThicknessMaximum:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"iridescence.maximumThickness",o,function(){return 1})],iridescenceTexture:{extensions:{KHR_texture_transform:s("iridescence.texture")}},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:s("iridescence.thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"sheen.color",A,function(){return 3})],sheenRoughnessFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"sheen.roughness",o,function(){return 1})],sheenColorTexture:{extensions:{KHR_texture_transform:s("sheen.texture")}},sheenRoughnessTexture:{extensions:{KHR_texture_transform:s("sheen.textureRoughness")}}},KHR_materials_specular:{specularFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"metallicF0Factor",o,function(){return 1})],specularColorFactor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"metallicReflectanceColor",A,function(){return 3})],specularTexture:{extensions:{KHR_texture_transform:s("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:s("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"subSurface.refractionIntensity",o,function(){return 1})],transmissionTexture:{extensions:{KHR_texture_transform:s("subSurface.refractionIntensityTexture")}}},KHR_materials_volume:{attenuationColor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"subSurface.tintColor",A,function(){return 3})],attenuationDistance:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"subSurface.tintColorAtDistance",o,function(){return 1})],thicknessFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"subSurface.maximumThickness",o,function(){return 1})],thicknessTexture:{extensions:{KHR_texture_transform:s("subSurface.thicknessTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:[new a(h.Animation.ANIMATIONTYPE_FLOAT,"subSurface.translucencyIntensity",o,function(){return 1})],diffuseTransmissionTexture:{extensions:{KHR_texture_transform:s("subSurface.translucencyIntensityTexture")}},diffuseTransmissionColorFactor:[new a(h.Animation.ANIMATIONTYPE_COLOR3,"subSurface.translucencyColor",A,function(){return 3})],diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:s("subSurface.translucencyColorTexture")}}}}}},v={KHR_lights_punctual:{lights:{__array__:{__target__:!0,color:[new c(h.Animation.ANIMATIONTYPE_COLOR3,"diffuse",A,function(){return 3})],intensity:[new c(h.Animation.ANIMATIONTYPE_FLOAT,"intensity",o,function(){return 1})],range:[new c(h.Animation.ANIMATIONTYPE_FLOAT,"range",o,function(){return 1})],spot:{innerConeAngle:[new c(h.Animation.ANIMATIONTYPE_FLOAT,"innerAngle",e,function(){return 1})],outerConeAngle:[new c(h.Animation.ANIMATIONTYPE_FLOAT,"angle",e,function(){return 1})]}}}}},F={nodes:d,materials:C,cameras:u,extensions:v}},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_animation_pointer:()=>t});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_=E("babylonjs/Misc/observable"),A=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.data.ts"),l=E("../../../dev/loaders/src/glTF/2.0/Extensions/gltfPathToObjectConverter.ts"),o="KHR_animation_pointer",n=function(e){(0,i.__extends)(s,e);function s(r){return e.call(this,r,A.animationPointerTree)||this}return s}(l.GLTFPathToObjectConverter),t=function(){function e(s){this.name=o,this._loader=s,this._pathToObjectConverter=new n(this._loader.gltf)}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._loader.isExtensionUsed(o)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._loader=null,delete this._pathToObjectConverter},e.prototype._loadAnimationChannelAsync=function(s,r,a,c,d){var u,C=(u=c.target.extensions)===null||u===void 0?void 0:u.KHR_animation_pointer;if(!C||!this._pathToObjectConverter)return null;c.target.path!=="pointer"&&_.Logger.Warn("".concat(s,"/target/path: Value (").concat(c.target.path,") must be (").concat("pointer",") when using the ").concat(this.name," extension")),c.target.node!=null&&_.Logger.Warn("".concat(s,"/target/node: Value (").concat(c.target.node,") must not be present when using the ").concat(this.name," extension"));var v="".concat(s,"/extensions/").concat(this.name),F=C.pointer;if(!F)throw new Error("".concat(v,": Pointer is missing"));try{var B=this._pathToObjectConverter.convert(F);return this._loader._loadAnimationChannelFromTargetInfoAsync(s,r,a,c,B,d)}catch{return _.Logger.Warn("".concat(v,"/pointer: Invalid pointer (").concat(F,") skipped")),null}},e}();h.GLTFLoader.RegisterExtension(o,function(e){return new t(e)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_draco_mesh_compression.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_draco_mesh_compression:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_draco_mesh_compression",A=function(){function l(o){this.name=_,this.useNormalizedFlagFromAccessor=!0,this._loader=o,this.enabled=i.DracoCompression.DecoderAvailable&&this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){delete this.dracoCompression,this._loader=null},l.prototype._loadVertexDataAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){if(n.mode!=null&&n.mode!==4&&n.mode!==5)throw new Error("".concat(o,": Unsupported mode ").concat(n.mode));var a={},c={},d=function(C,v){var F=r.attributes[C];if(F!=null&&(t._delayInfo=t._delayInfo||[],t._delayInfo.indexOf(v)===-1&&t._delayInfo.push(v),a[v]=F,e.useNormalizedFlagFromAccessor)){var B=h.ArrayItem.TryGet(e._loader.gltf.accessors,n.attributes[C]);B&&(c[v]=B.normalized||!1)}};d("POSITION",i.VertexBuffer.PositionKind),d("NORMAL",i.VertexBuffer.NormalKind),d("TANGENT",i.VertexBuffer.TangentKind),d("TEXCOORD_0",i.VertexBuffer.UVKind),d("TEXCOORD_1",i.VertexBuffer.UV2Kind),d("TEXCOORD_2",i.VertexBuffer.UV3Kind),d("TEXCOORD_3",i.VertexBuffer.UV4Kind),d("TEXCOORD_4",i.VertexBuffer.UV5Kind),d("TEXCOORD_5",i.VertexBuffer.UV6Kind),d("JOINTS_0",i.VertexBuffer.MatricesIndicesKind),d("WEIGHTS_0",i.VertexBuffer.MatricesWeightsKind),d("COLOR_0",i.VertexBuffer.ColorKind);var u=h.ArrayItem.Get(s,e._loader.gltf.bufferViews,r.bufferView);return u._dracoBabylonGeometry||(u._dracoBabylonGeometry=e._loader.loadBufferViewAsync("/bufferViews/".concat(u.index),u).then(function(C){var v=e.dracoCompression||i.DracoCompression.Default;return v._decodeMeshToGeometryForGltfAsync(t.name,e._loader.babylonScene,C,a,c).catch(function(F){throw new Error("".concat(o,": ").concat(F.message))})})),u._dracoBabylonGeometry})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_interactivity.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_interactivity:()=>o});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h=E("babylonjs/Misc/observable"),_=E("../../../dev/loaders/src/glTF/2.0/Extensions/interactivityFunctions.ts"),A=E("../../../dev/loaders/src/glTF/2.0/Extensions/interactivityPathToObjectConverter.ts"),l="KHR_interactivity",o=function(){function n(t){this._loader=t,this.name=l,this.enabled=this._loader.isExtensionUsed(l),this._pathConverter=new A.InteractivityPathToObjectConverter(this._loader.gltf)}return n.prototype.dispose=function(){this._loader=null,delete this._pathConverter},n.prototype.onReady=function(){var t;if(!(!this._loader.babylonScene||!this._pathConverter)){var e=this._loader.babylonScene,s=(t=this._loader.gltf.extensions)===null||t===void 0?void 0:t.KHR_interactivity,r=(0,_.convertGLTFToSerializedFlowGraph)(s),a=new h.FlowGraphCoordinator({scene:e});h.FlowGraph.Parse(r,{coordinator:a,pathConverter:this._pathConverter}),a.start()}},n}();i.GLTFLoader.RegisterExtension(l,function(n){return new o(n)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_lights_punctual.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_lights:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_lights_punctual",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null,delete this._lights},l.prototype.onLoading=function(){var o=this._loader.gltf.extensions;if(o&&o[this.name]){var n=o[this.name];this._lights=n.lights,h.ArrayItem.Assign(this._lights)}},l.prototype.loadNodeAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){return e._loader._allMaterialsDirtyRequired=!0,e._loader.loadNodeAsync(o,n,function(a){var c,d=h.ArrayItem.Get(s,e._lights,r.light),u=d.name||a.name;switch(e._loader.babylonScene._blockEntityCollection=!!e._loader._assetContainer,d.type){case"directional":{var C=new i.DirectionalLight(u,i.Vector3.Backward(),e._loader.babylonScene);C.position.setAll(0),c=C;break}case"point":{c=new i.PointLight(u,i.Vector3.Zero(),e._loader.babylonScene);break}case"spot":{var v=new i.SpotLight(u,i.Vector3.Zero(),i.Vector3.Backward(),0,1,e._loader.babylonScene);v.angle=(d.spot&&d.spot.outerConeAngle||Math.PI/4)*2,v.innerAngle=(d.spot&&d.spot.innerConeAngle||0)*2,c=v;break}default:throw e._loader.babylonScene._blockEntityCollection=!1,new Error("".concat(s,": Invalid light type (").concat(d.type,")"))}c._parentContainer=e._loader._assetContainer,e._loader.babylonScene._blockEntityCollection=!1,d._babylonLight=c,c.falloffType=i.Light.FALLOFF_GLTF,c.diffuse=d.color?i.Color3.FromArray(d.color):i.Color3.White(),c.intensity=d.intensity==null?1:d.intensity,c.range=d.range==null?Number.MAX_VALUE:d.range,c.parent=a,e._loader._babylonLights.push(c),h.GLTFLoader.AddPointerMetadata(c,s),t(a)})})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_anisotropy.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_anisotropy:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_anisotropy",A=function(){function l(o){this.name=_,this.order=195,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadIridescencePropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadIridescencePropertiesAsync=function(o,n,t){var e,s;if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var r=new Array;return t.anisotropy.isEnabled=!0,t.anisotropy.intensity=(e=n.anisotropyStrength)!==null&&e!==void 0?e:0,t.anisotropy.angle=(s=n.anisotropyRotation)!==null&&s!==void 0?s:0,n.anisotropyTexture&&r.push(this._loader.loadTextureInfoAsync("".concat(o,"/anisotropyTexture"),n.anisotropyTexture,function(a){a.name="".concat(t.name," (Anisotropy Intensity)"),t.anisotropy.texture=a})),Promise.all(r).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_clearcoat.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_clearcoat:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_clearcoat",A=function(){function l(o){this.name=_,this.order=190,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadClearCoatPropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadClearCoatPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var e=new Array;return t.clearCoat.isEnabled=!0,t.clearCoat.useRoughnessFromMainTexture=!1,t.clearCoat.remapF0OnInterfaceChange=!1,n.clearcoatFactor!=null?t.clearCoat.intensity=n.clearcoatFactor:t.clearCoat.intensity=0,n.clearcoatTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(o,"/clearcoatTexture"),n.clearcoatTexture,function(s){s.name="".concat(t.name," (ClearCoat Intensity)"),t.clearCoat.texture=s})),n.clearcoatRoughnessFactor!=null?t.clearCoat.roughness=n.clearcoatRoughnessFactor:t.clearCoat.roughness=0,n.clearcoatRoughnessTexture&&(n.clearcoatRoughnessTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(o,"/clearcoatRoughnessTexture"),n.clearcoatRoughnessTexture,function(s){s.name="".concat(t.name," (ClearCoat Roughness)"),t.clearCoat.textureRoughness=s}))),n.clearcoatNormalTexture&&(n.clearcoatNormalTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(o,"/clearcoatNormalTexture"),n.clearcoatNormalTexture,function(s){s.name="".concat(t.name," (ClearCoat Normal)"),t.clearCoat.bumpTexture=s})),t.invertNormalMapX=!t.getScene().useRightHandedSystem,t.invertNormalMapY=t.getScene().useRightHandedSystem,n.clearcoatNormalTexture.scale!=null&&(t.clearCoat.bumpTexture.level=n.clearcoatNormalTexture.scale)),Promise.all(e).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_diffuse_transmission.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_diffuse_transmission:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_diffuse_transmission",A=function(){function l(o){this.name=_,this.order=174,this._loader=o,this.enabled=this._loader.isExtensionUsed(_),this.enabled&&(o.parent.transparencyAsCoverage=!0)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialBasePropertiesAsync(o,n,t)),a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadTranslucentPropertiesAsync(s,n,t,r)),Promise.all(a).then(function(){})})},l.prototype._loadTranslucentPropertiesAsync=function(o,n,t,e){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var s=t;if(s.subSurface.isTranslucencyEnabled=!0,s.subSurface.volumeIndexOfRefraction=1,s.subSurface.minimumThickness=0,s.subSurface.maximumThickness=0,s.subSurface.useAlbedoToTintTranslucency=!1,e.diffuseTransmissionFactor!==void 0)s.subSurface.translucencyIntensity=e.diffuseTransmissionFactor;else return s.subSurface.translucencyIntensity=0,s.subSurface.isTranslucencyEnabled=!1,Promise.resolve();var r=new Array;return s.subSurface.useGltfStyleTextures=!0,e.diffuseTransmissionTexture&&(e.diffuseTransmissionTexture.nonColorData=!0,r.push(this._loader.loadTextureInfoAsync("".concat(o,"/diffuseTransmissionTexture"),e.diffuseTransmissionTexture).then(function(a){s.subSurface.translucencyIntensityTexture=a}))),e.diffuseTransmissionColorFactor!==void 0?s.subSurface.translucencyColor=i.Color3.FromArray(e.diffuseTransmissionColorFactor):s.subSurface.translucencyColor=i.Color3.White(),e.diffuseTransmissionColorTexture&&r.push(this._loader.loadTextureInfoAsync("".concat(o,"/diffuseTransmissionColorTexture"),e.diffuseTransmissionColorTexture).then(function(a){s.subSurface.translucencyColorTexture=a})),Promise.all(r).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_dispersion.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_dispersion:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_dispersion",A=function(){function l(o){this.name=_,this.order=174,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialBasePropertiesAsync(o,n,t)),a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadDispersionPropertiesAsync(s,n,t,r)),Promise.all(a).then(function(){})})},l.prototype._loadDispersionPropertiesAsync=function(o,n,t,e){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));return!t.subSurface.isRefractionEnabled||!e.dispersion||(t.subSurface.isDispersionEnabled=!0,t.subSurface.dispersion=e.dispersion),Promise.resolve()},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_emissive_strength.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_emissive_strength:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_emissive_strength",A=function(){function l(o){this.name=_,this.order=170,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){return e._loader.loadMaterialPropertiesAsync(o,n,t).then(function(){e._loadEmissiveProperties(s,r,t)})})},l.prototype._loadEmissiveProperties=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));n.emissiveStrength!==void 0&&(t.emissiveIntensity=n.emissiveStrength)},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_ior.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_ior:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_ior",A=function(){function l(o){this.name=_,this.order=180,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadIorPropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadIorPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));return n.ior!==void 0?t.indexOfRefraction=n.ior:t.indexOfRefraction=l._DEFAULT_IOR,Promise.resolve()},l._DEFAULT_IOR=1.5,l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_iridescence.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_iridescence:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_iridescence",A=function(){function l(o){this.name=_,this.order=195,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadIridescencePropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadIridescencePropertiesAsync=function(o,n,t){var e,s,r,a,c;if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var d=new Array;return t.iridescence.isEnabled=!0,t.iridescence.intensity=(e=n.iridescenceFactor)!==null&&e!==void 0?e:0,t.iridescence.indexOfRefraction=(r=(s=n.iridescenceIor)!==null&&s!==void 0?s:n.iridescenceIOR)!==null&&r!==void 0?r:1.3,t.iridescence.minimumThickness=(a=n.iridescenceThicknessMinimum)!==null&&a!==void 0?a:100,t.iridescence.maximumThickness=(c=n.iridescenceThicknessMaximum)!==null&&c!==void 0?c:400,n.iridescenceTexture&&d.push(this._loader.loadTextureInfoAsync("".concat(o,"/iridescenceTexture"),n.iridescenceTexture,function(u){u.name="".concat(t.name," (Iridescence Intensity)"),t.iridescence.texture=u})),n.iridescenceThicknessTexture&&d.push(this._loader.loadTextureInfoAsync("".concat(o,"/iridescenceThicknessTexture"),n.iridescenceThicknessTexture,function(u){u.name="".concat(t.name," (Iridescence Thickness)"),t.iridescence.thicknessTexture=u})),Promise.all(d).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_pbrSpecularGlossiness:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_pbrSpecularGlossiness",A=function(){function l(o){this.name=_,this.order=200,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialBasePropertiesAsync(o,n,t)),a.push(e._loadSpecularGlossinessPropertiesAsync(s,r,t)),e._loader.loadMaterialAlphaProperties(o,n,t),Promise.all(a).then(function(){})})},l.prototype._loadSpecularGlossinessPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var e=new Array;return t.metallic=null,t.roughness=null,n.diffuseFactor?(t.albedoColor=i.Color3.FromArray(n.diffuseFactor),t.alpha=n.diffuseFactor[3]):t.albedoColor=i.Color3.White(),t.reflectivityColor=n.specularFactor?i.Color3.FromArray(n.specularFactor):i.Color3.White(),t.microSurface=n.glossinessFactor==null?1:n.glossinessFactor,n.diffuseTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(o,"/diffuseTexture"),n.diffuseTexture,function(s){s.name="".concat(t.name," (Diffuse)"),t.albedoTexture=s})),n.specularGlossinessTexture&&(e.push(this._loader.loadTextureInfoAsync("".concat(o,"/specularGlossinessTexture"),n.specularGlossinessTexture,function(s){s.name="".concat(t.name," (Specular Glossiness)"),t.reflectivityTexture=s,t.reflectivityTexture.hasAlpha=!0})),t.useMicroSurfaceFromReflectivityMapAlpha=!0),Promise.all(e).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_sheen.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_sheen:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_sheen",A=function(){function l(o){this.name=_,this.order=190,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadSheenPropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadSheenPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var e=new Array;return t.sheen.isEnabled=!0,t.sheen.intensity=1,n.sheenColorFactor!=null?t.sheen.color=i.Color3.FromArray(n.sheenColorFactor):t.sheen.color=i.Color3.Black(),n.sheenColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(o,"/sheenColorTexture"),n.sheenColorTexture,function(s){s.name="".concat(t.name," (Sheen Color)"),t.sheen.texture=s})),n.sheenRoughnessFactor!==void 0?t.sheen.roughness=n.sheenRoughnessFactor:t.sheen.roughness=0,n.sheenRoughnessTexture&&(n.sheenRoughnessTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(o,"/sheenRoughnessTexture"),n.sheenRoughnessTexture,function(s){s.name="".concat(t.name," (Sheen Roughness)"),t.sheen.textureRoughness=s}))),t.sheen.albedoScaling=!0,t.sheen.useRoughnessFromMainTexture=!1,Promise.all(e).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_specular.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_specular:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_specular",A=function(){function l(o){this.name=_,this.order=190,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadSpecularPropertiesAsync(s,r,t)),Promise.all(a).then(function(){})})},l.prototype._loadSpecularPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var e=new Array;return n.specularFactor!==void 0&&(t.metallicF0Factor=n.specularFactor),n.specularColorFactor!==void 0&&(t.metallicReflectanceColor=i.Color3.FromArray(n.specularColorFactor)),n.specularTexture&&(n.specularTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(o,"/specularTexture"),n.specularTexture,function(s){s.name="".concat(t.name," (Specular F0 Strength)"),t.metallicReflectanceTexture=s,t.useOnlyMetallicFromMetallicReflectanceTexture=!0}))),n.specularColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(o,"/specularColorTexture"),n.specularColorTexture,function(s){s.name="".concat(t.name," (Specular F0 Color)"),t.reflectanceTexture=s})),Promise.all(e).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_transmission.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_transmission:()=>o});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("babylonjs/Misc/observable"),_=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),A=function(){function n(t,e){var s=this;this._opaqueRenderTarget=null,this._opaqueMeshesCache=[],this._transparentMeshesCache=[],this._materialObservers={},this._options=(0,i.__assign)((0,i.__assign)({},n._GetDefaultOptions()),t),this._scene=e,this._scene._transmissionHelper=this,this.onErrorObservable=new h.Observable,this._scene.onDisposeObservable.addOnce(function(){s.dispose()}),this._parseScene(),this._setupRenderTargets()}return n._GetDefaultOptions=function(){return{renderSize:1024,samples:4,lodGenerationScale:1,lodGenerationOffset:-4,renderTargetTextureType:h.Constants.TEXTURETYPE_HALF_FLOAT,generateMipmaps:!0}},n.prototype.updateOptions=function(t){var e=this,s=Object.keys(t).filter(function(c){return e._options[c]!==t[c]});if(s.length){var r=(0,i.__assign)((0,i.__assign)({},this._options),t),a=this._options;this._options=r,r.renderSize!==a.renderSize||r.renderTargetTextureType!==a.renderTargetTextureType||r.generateMipmaps!==a.generateMipmaps||!this._opaqueRenderTarget?this._setupRenderTargets():(this._opaqueRenderTarget.samples=r.samples,this._opaqueRenderTarget.lodGenerationScale=r.lodGenerationScale,this._opaqueRenderTarget.lodGenerationOffset=r.lodGenerationOffset)}},n.prototype.getOpaqueTarget=function(){return this._opaqueRenderTarget},n.prototype._shouldRenderAsTransmission=function(t){return t?!!(t instanceof h.PBRMaterial&&t.subSurface.isRefractionEnabled):!1},n.prototype._addMesh=function(t){var e=this;this._materialObservers[t.uniqueId]=t.onMaterialChangedObservable.add(this._onMeshMaterialChanged.bind(this)),h.Tools.SetImmediate(function(){e._shouldRenderAsTransmission(t.material)?(t.material.refractionTexture=e._opaqueRenderTarget,e._transparentMeshesCache.indexOf(t)===-1&&e._transparentMeshesCache.push(t)):e._opaqueMeshesCache.indexOf(t)===-1&&e._opaqueMeshesCache.push(t)})},n.prototype._removeMesh=function(t){t.onMaterialChangedObservable.remove(this._materialObservers[t.uniqueId]),delete this._materialObservers[t.uniqueId];var e=this._transparentMeshesCache.indexOf(t);e!==-1&&this._transparentMeshesCache.splice(e,1),e=this._opaqueMeshesCache.indexOf(t),e!==-1&&this._opaqueMeshesCache.splice(e,1)},n.prototype._parseScene=function(){this._scene.meshes.forEach(this._addMesh.bind(this)),this._scene.onNewMeshAddedObservable.add(this._addMesh.bind(this)),this._scene.onMeshRemovedObservable.add(this._removeMesh.bind(this))},n.prototype._onMeshMaterialChanged=function(t){var e=this._transparentMeshesCache.indexOf(t),s=this._opaqueMeshesCache.indexOf(t),r=this._shouldRenderAsTransmission(t.material);r?(t.material instanceof h.PBRMaterial&&(t.material.subSurface.refractionTexture=this._opaqueRenderTarget),s!==-1?(this._opaqueMeshesCache.splice(s,1),this._transparentMeshesCache.push(t)):e===-1&&this._transparentMeshesCache.push(t)):e!==-1?(this._transparentMeshesCache.splice(e,1),this._opaqueMeshesCache.push(t)):s===-1&&this._opaqueMeshesCache.push(t)},n.prototype._isRenderTargetValid=function(){var t;return((t=this._opaqueRenderTarget)===null||t===void 0?void 0:t.getInternalTexture())!==null},n.prototype._setupRenderTargets=function(){var t=this,e,s;this._opaqueRenderTarget&&this._opaqueRenderTarget.dispose(),this._opaqueRenderTarget=new h.RenderTargetTexture("opaqueSceneTexture",this._options.renderSize,this._scene,this._options.generateMipmaps,void 0,this._options.renderTargetTextureType),this._opaqueRenderTarget.ignoreCameraViewport=!0,this._opaqueRenderTarget.renderList=this._opaqueMeshesCache,this._opaqueRenderTarget.clearColor=(s=(e=this._options.clearColor)===null||e===void 0?void 0:e.clone())!==null&&s!==void 0?s:this._scene.clearColor.clone(),this._opaqueRenderTarget.gammaSpace=!1,this._opaqueRenderTarget.lodGenerationScale=this._options.lodGenerationScale,this._opaqueRenderTarget.lodGenerationOffset=this._options.lodGenerationOffset,this._opaqueRenderTarget.samples=this._options.samples,this._opaqueRenderTarget.renderSprites=!0,this._opaqueRenderTarget.renderParticles=!0;var r,a;this._opaqueRenderTarget.onBeforeBindObservable.add(function(c){a=t._scene.environmentIntensity,t._scene.environmentIntensity=1,r=t._scene.imageProcessingConfiguration.applyByPostProcess,t._options.clearColor?c.clearColor.copyFrom(t._options.clearColor):t._scene.clearColor.toLinearSpaceToRef(c.clearColor,t._scene.getEngine().useExactSrgbConversions),t._scene.imageProcessingConfiguration._applyByPostProcess=!0}),this._opaqueRenderTarget.onAfterUnbindObservable.add(function(){t._scene.environmentIntensity=a,t._scene.imageProcessingConfiguration._applyByPostProcess=r}),this._transparentMeshesCache.forEach(function(c){t._shouldRenderAsTransmission(c.material)&&(c.material.refractionTexture=t._opaqueRenderTarget)})},n.prototype.dispose=function(){this._scene._transmissionHelper=void 0,this._opaqueRenderTarget&&(this._opaqueRenderTarget.dispose(),this._opaqueRenderTarget=null),this._transparentMeshesCache=[],this._opaqueMeshesCache=[]},n}(),l="KHR_materials_transmission",o=function(){function n(t){this.name=l,this.order=175,this._loader=t,this.enabled=this._loader.isExtensionUsed(l),this.enabled&&(t.parent.transparencyAsCoverage=!0)}return n.prototype.dispose=function(){this._loader=null},n.prototype.loadMaterialPropertiesAsync=function(t,e,s){var r=this;return _.GLTFLoader.LoadExtensionAsync(t,e,this.name,function(a,c){var d=new Array;return d.push(r._loader.loadMaterialBasePropertiesAsync(t,e,s)),d.push(r._loader.loadMaterialPropertiesAsync(t,e,s)),d.push(r._loadTransparentPropertiesAsync(a,e,s,c)),Promise.all(d).then(function(){})})},n.prototype._loadTransparentPropertiesAsync=function(t,e,s,r){var a,c;if(!(s instanceof h.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var d=s;if(d.subSurface.isRefractionEnabled=!0,d.subSurface.volumeIndexOfRefraction=1,d.subSurface.useAlbedoToTintRefraction=!0,r.transmissionFactor!==void 0){d.subSurface.refractionIntensity=r.transmissionFactor;var u=d.getScene();d.subSurface.refractionIntensity&&!u._transmissionHelper?new A({},d.getScene()):d.subSurface.refractionIntensity&&!(!((a=u._transmissionHelper)===null||a===void 0)&&a._isRenderTargetValid())&&((c=u._transmissionHelper)===null||c===void 0||c._setupRenderTargets())}else return d.subSurface.refractionIntensity=0,d.subSurface.isRefractionEnabled=!1,Promise.resolve();return d.subSurface.minimumThickness=0,d.subSurface.maximumThickness=0,r.transmissionTexture?(r.transmissionTexture.nonColorData=!0,this._loader.loadTextureInfoAsync("".concat(t,"/transmissionTexture"),r.transmissionTexture,void 0).then(function(C){d.subSurface.refractionIntensityTexture=C,d.subSurface.useGltfStyleTextures=!0})):Promise.resolve()},n}();_.GLTFLoader.RegisterExtension(l,function(n){return new o(n)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_unlit.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_unlit:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_unlit",A=function(){function l(o){this.name=_,this.order=210,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(){return e._loadUnlitPropertiesAsync(o,n,t)})},l.prototype._loadUnlitPropertiesAsync=function(o,n,t){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));var e=new Array;t.unlit=!0;var s=n.pbrMetallicRoughness;return s&&(s.baseColorFactor?(t.albedoColor=i.Color3.FromArray(s.baseColorFactor),t.alpha=s.baseColorFactor[3]):t.albedoColor=i.Color3.White(),s.baseColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(o,"/baseColorTexture"),s.baseColorTexture,function(r){r.name="".concat(t.name," (Base Color)"),t.albedoTexture=r}))),n.doubleSided&&(t.backFaceCulling=!1,t.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(o,n,t),Promise.all(e).then(function(){})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_variants.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_variants:()=>A});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h=E("babylonjs/Misc/observable"),_="KHR_materials_variants",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.GetAvailableVariants=function(o){var n=this._GetExtensionMetadata(o);return n?Object.keys(n.variants):[]},l.prototype.getAvailableVariants=function(o){return l.GetAvailableVariants(o)},l.SelectVariant=function(o,n){var t=this._GetExtensionMetadata(o);if(!t)throw new Error("Cannot select variant on a glTF mesh that does not have the ".concat(_," extension"));var e=function(c){var d=t.variants[c];if(d)for(var u=0,C=d;u<C.length;u++){var v=C[u];v.mesh.material=v.material}};if(n instanceof Array)for(var s=0,r=n;s<r.length;s++){var a=r[s];e(a)}else e(n);t.lastSelected=n},l.prototype.selectVariant=function(o,n){l.SelectVariant(o,n)},l.Reset=function(o){var n=this._GetExtensionMetadata(o);if(!n)throw new Error("Cannot reset on a glTF mesh that does not have the ".concat(_," extension"));for(var t=0,e=n.original;t<e.length;t++){var s=e[t];s.mesh.material=s.material}n.lastSelected=null},l.prototype.reset=function(o){l.Reset(o)},l.GetLastSelectedVariant=function(o){var n=this._GetExtensionMetadata(o);if(!n)throw new Error("Cannot get the last selected variant on a glTF mesh that does not have the ".concat(_," extension"));return n.lastSelected},l.prototype.getLastSelectedVariant=function(o){return l.GetLastSelectedVariant(o)},l._GetExtensionMetadata=function(o){var n,t;return((t=(n=o==null?void 0:o._internalMetadata)===null||n===void 0?void 0:n.gltf)===null||t===void 0?void 0:t[_])||null},l.prototype.onLoading=function(){var o=this._loader.gltf.extensions;if(o&&o[this.name]){var n=o[this.name];this._variants=n.variants}},l.prototype._loadMeshPrimitiveAsync=function(o,n,t,e,s,r){var a=this;return i.GLTFLoader.LoadExtensionAsync(o,s,this.name,function(c,d){var u=new Array;return u.push(a._loader._loadMeshPrimitiveAsync(o,n,t,e,s,function(C){if(r(C),C instanceof h.Mesh){var v=i.GLTFLoader._GetDrawMode(o,s.mode),F=a._loader.rootBabylonMesh,B=F?F._internalMetadata=F._internalMetadata||{}:{},k=B.gltf=B.gltf||{},O=k[_]=k[_]||{lastSelected:null,original:[],variants:{}};O.original.push({mesh:C,material:C.material});for(var S=function(U){var W=d.mappings[U],X=i.ArrayItem.Get("".concat(c,"/mappings/").concat(U,"/material"),a._loader.gltf.materials,W.material);u.push(a._loader._loadMaterialAsync("#/materials/".concat(W.material),X,C,v,function(J){for(var Q=function(ae){var he=W.variants[ae],oe=i.ArrayItem.Get("/extensions/".concat(_,"/variants/").concat(he),a._variants,he);O.variants[oe.name]=O.variants[oe.name]||[],O.variants[oe.name].push({mesh:C,material:J}),C.onClonedObservable.add(function(q){var ee=q,$=null,D=ee;do{if(D=D.parent,!D)return;$=l._GetExtensionMetadata(D)}while($===null);if(F&&$===l._GetExtensionMetadata(F)){D._internalMetadata={};for(var M in F._internalMetadata)D._internalMetadata[M]=F._internalMetadata[M];D._internalMetadata.gltf=[];for(var M in F._internalMetadata.gltf)D._internalMetadata.gltf[M]=F._internalMetadata.gltf[M];D._internalMetadata.gltf[_]={lastSelected:null,original:[],variants:{}};for(var P=0,f=$.original;P<f.length;P++){var p=f[P];D._internalMetadata.gltf[_].original.push({mesh:p.mesh,material:p.material})}for(var M in $.variants)if(Object.prototype.hasOwnProperty.call($.variants,M)){D._internalMetadata.gltf[_].variants[M]=[];for(var m=0,y=$.variants[M];m<y.length;m++){var T=y[m];D._internalMetadata.gltf[_].variants[M].push({mesh:T.mesh,material:T.material})}}$=D._internalMetadata.gltf[_]}for(var b=0,L=$.original;b<L.length;b++){var x=L[b];x.mesh===C&&(x.mesh=ee)}for(var w=0,N=$.variants[oe.name];w<N.length;w++){var x=N[w];x.mesh===C&&(x.mesh=ee)}})},Z=0;Z<W.variants.length;++Z)Q(Z)}))},G=0;G<d.mappings.length;++G)S(G)}})),Promise.all(u).then(function(C){var v=C[0];return v})})},l}();i.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_volume.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_materials_volume:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_materials_volume",A=function(){function l(o){this.name=_,this.order=173,this._loader=o,this.enabled=this._loader.isExtensionUsed(_),this.enabled&&this._loader._disableInstancedMesh++}return l.prototype.dispose=function(){this.enabled&&this._loader._disableInstancedMesh--,this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return a.push(e._loader.loadMaterialBasePropertiesAsync(o,n,t)),a.push(e._loader.loadMaterialPropertiesAsync(o,n,t)),a.push(e._loadVolumePropertiesAsync(s,n,t,r)),Promise.all(a).then(function(){})})},l.prototype._loadVolumePropertiesAsync=function(o,n,t,e){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(o,": Material type not supported"));if(!t.subSurface.isRefractionEnabled&&!t.subSurface.isTranslucencyEnabled||!e.thicknessFactor)return Promise.resolve();t.subSurface.volumeIndexOfRefraction=t.indexOfRefraction;var s=e.attenuationDistance!==void 0?e.attenuationDistance:Number.MAX_VALUE;return t.subSurface.tintColorAtDistance=s,e.attenuationColor!==void 0&&e.attenuationColor.length==3&&t.subSurface.tintColor.copyFromFloats(e.attenuationColor[0],e.attenuationColor[1],e.attenuationColor[2]),t.subSurface.minimumThickness=0,t.subSurface.maximumThickness=e.thicknessFactor,t.subSurface.useThicknessAsDepth=!0,e.thicknessTexture?(e.thicknessTexture.nonColorData=!0,this._loader.loadTextureInfoAsync("".concat(o,"/thicknessTexture"),e.thicknessTexture).then(function(r){t.subSurface.thicknessTexture=r,t.subSurface.useGltfStyleTextures=!0})):Promise.resolve()},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_mesh_quantization.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_mesh_quantization:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="KHR_mesh_quantization",_=function(){function A(l){this.name=h,this.enabled=l.isExtensionUsed(h)}return A.prototype.dispose=function(){},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_basisu.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_texture_basisu:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="KHR_texture_basisu",_=function(){function A(l){this.name=h,this._loader=l,this.enabled=l.isExtensionUsed(h)}return A.prototype.dispose=function(){this._loader=null},A.prototype._loadTextureAsync=function(l,o,n){var t=this;return i.GLTFLoader.LoadExtensionAsync(l,o,this.name,function(e,s){var r=o.sampler==null?i.GLTFLoader.DefaultSampler:i.ArrayItem.Get("".concat(l,"/sampler"),t._loader.gltf.samplers,o.sampler),a=i.ArrayItem.Get("".concat(e,"/source"),t._loader.gltf.images,s.source);return t._loader._createTextureAsync(l,r,a,function(c){n(c)},o._textureInfo.nonColorData?{useRGBAIfASTCBC7NotAvailableWhenUASTC:!0}:void 0,!o._textureInfo.nonColorData)})},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_transform.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_texture_transform:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="KHR_texture_transform",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadTextureInfoAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){return e._loader.loadTextureInfoAsync(o,n,function(a){if(!(a instanceof i.Texture))throw new Error("".concat(s,": Texture type not supported"));r.offset&&(a.uOffset=r.offset[0],a.vOffset=r.offset[1]),a.uRotationCenter=0,a.vRotationCenter=0,r.rotation&&(a.wAng=-r.rotation),r.scale&&(a.uScale=r.scale[0],a.vScale=r.scale[1]),r.texCoord!=null&&(a.coordinatesIndex=r.texCoord),t(a)})})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_xmp_json_ld.ts":(R,g,E)=>{E.r(g),E.d(g,{KHR_xmp_json_ld:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),h="KHR_xmp_json_ld",_=function(){function A(l){this.name=h,this.order=100,this._loader=l,this.enabled=this._loader.isExtensionUsed(h)}return A.prototype.dispose=function(){this._loader=null},A.prototype.onLoading=function(){var l,o,n;if(this._loader.rootBabylonMesh!==null){var t=(l=this._loader.gltf.extensions)===null||l===void 0?void 0:l.KHR_xmp_json_ld,e=(n=(o=this._loader.gltf.asset)===null||o===void 0?void 0:o.extensions)===null||n===void 0?void 0:n.KHR_xmp_json_ld;if(t&&e){var s=+e.packet;t.packets&&s<t.packets.length&&(this._loader.rootBabylonMesh.metadata=this._loader.rootBabylonMesh.metadata||{},this._loader.rootBabylonMesh.metadata.xmp=t.packets[s])}}},A}();i.GLTFLoader.RegisterExtension(h,function(A){return new _(A)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_audio_emitter.ts":(R,g,E)=>{E.r(g),E.d(g,{MSFT_audio_emitter:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="MSFT_audio_emitter",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null,this._clips=null,this._emitters=null},l.prototype.onLoading=function(){var o=this._loader.gltf.extensions;if(o&&o[this.name]){var n=o[this.name];this._clips=n.clips,this._emitters=n.emitters,h.ArrayItem.Assign(this._clips),h.ArrayItem.Assign(this._emitters)}},l.prototype.loadSceneAsync=function(o,n){var t=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(e,s){var r=new Array;r.push(t._loader.loadSceneAsync(o,n));for(var a=0,c=s.emitters;a<c.length;a++){var d=c[a],u=h.ArrayItem.Get("".concat(e,"/emitters"),t._emitters,d);if(u.refDistance!=null||u.maxDistance!=null||u.rolloffFactor!=null||u.distanceModel!=null||u.innerAngle!=null||u.outerAngle!=null)throw new Error("".concat(e,": Direction or Distance properties are not allowed on emitters attached to a scene"));r.push(t._loadEmitterAsync("".concat(e,"/emitters/").concat(u.index),u))}return Promise.all(r).then(function(){})})},l.prototype.loadNodeAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a=new Array;return e._loader.loadNodeAsync(s,n,function(c){for(var d=function(F){var B=h.ArrayItem.Get("".concat(s,"/emitters"),e._emitters,F);a.push(e._loadEmitterAsync("".concat(s,"/emitters/").concat(B.index),B).then(function(){for(var k=0,O=B._babylonSounds;k<O.length;k++){var S=O[k];S.attachToMesh(c),(B.innerAngle!=null||B.outerAngle!=null)&&(S.setLocalDirectionToMesh(i.Vector3.Forward()),S.setDirectionalCone(2*i.Tools.ToDegrees(B.innerAngle==null?Math.PI:B.innerAngle),2*i.Tools.ToDegrees(B.outerAngle==null?Math.PI:B.outerAngle),0))}}))},u=0,C=r.emitters;u<C.length;u++){var v=C[u];d(v)}t(c)}).then(function(c){return Promise.all(a).then(function(){return c})})})},l.prototype.loadAnimationAsync=function(o,n){var t=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(e,s){return t._loader.loadAnimationAsync(o,n).then(function(r){var a=new Array;h.ArrayItem.Assign(s.events);for(var c=0,d=s.events;c<d.length;c++){var u=d[c];a.push(t._loadAnimationEventAsync("".concat(e,"/events/").concat(u.index),o,n,u,r))}return Promise.all(a).then(function(){return r})})})},l.prototype._loadClipAsync=function(o,n){if(n._objectURL)return n._objectURL;var t;if(n.uri)t=this._loader.loadUriAsync(o,n,n.uri);else{var e=h.ArrayItem.Get("".concat(o,"/bufferView"),this._loader.gltf.bufferViews,n.bufferView);t=this._loader.loadBufferViewAsync("/bufferViews/".concat(e.index),e)}return n._objectURL=t.then(function(s){return URL.createObjectURL(new Blob([s],{type:n.mimeType}))}),n._objectURL},l.prototype._loadEmitterAsync=function(o,n){var t=this;if(n._babylonSounds=n._babylonSounds||[],!n._babylonData){for(var e=new Array,s=n.name||"emitter".concat(n.index),r={loop:!1,autoplay:!1,volume:n.volume==null?1:n.volume},a=function(C){var v="/extensions/".concat(c.name,"/clips"),F=h.ArrayItem.Get(v,c._clips,n.clips[C].clip);e.push(c._loadClipAsync("".concat(v,"/").concat(n.clips[C].clip),F).then(function(B){var k=n._babylonSounds[C]=new i.Sound(s,B,t._loader.babylonScene,null,r);k.refDistance=n.refDistance||1,k.maxDistance=n.maxDistance||256,k.rolloffFactor=n.rolloffFactor||1,k.distanceModel=n.distanceModel||"exponential"}))},c=this,d=0;d<n.clips.length;d++)a(d);var u=Promise.all(e).then(function(){var C=n.clips.map(function(F){return F.weight||1}),v=new i.WeightedSound(n.loop||!1,n._babylonSounds,C);n.innerAngle&&(v.directionalConeInnerAngle=2*i.Tools.ToDegrees(n.innerAngle)),n.outerAngle&&(v.directionalConeOuterAngle=2*i.Tools.ToDegrees(n.outerAngle)),n.volume&&(v.volume=n.volume),n._babylonData.sound=v});n._babylonData={loaded:u}}return n._babylonData.loaded},l.prototype._getEventAction=function(o,n,t,e,s){switch(t){case"play":return function(r){var a=(s||0)+(r-e);n.play(a)};case"stop":return function(){n.stop()};case"pause":return function(){n.pause()};default:throw new Error("".concat(o,": Unsupported action ").concat(t))}},l.prototype._loadAnimationEventAsync=function(o,n,t,e,s){var r=this;if(s.targetedAnimations.length==0)return Promise.resolve();var a=s.targetedAnimations[0],c=e.emitter,d=h.ArrayItem.Get("/extensions/".concat(this.name,"/emitters"),this._emitters,c);return this._loadEmitterAsync(o,d).then(function(){var u=d._babylonData.sound;if(u){var C=new i.AnimationEvent(e.time,r._getEventAction(o,u,e.action,e.time,e.startOffset));a.animation.addEvent(C),s.onAnimationGroupEndObservable.add(function(){u.stop()}),s.onAnimationGroupPauseObservable.add(function(){u.pause()})}})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_lod.ts":(R,g,E)=>{E.r(g),E.d(g,{MSFT_lod:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="MSFT_lod",A=function(){function l(o){this.name=_,this.order=100,this.maxLODsToLoad=10,this.onNodeLODsLoadedObservable=new i.Observable,this.onMaterialLODsLoadedObservable=new i.Observable,this._bufferLODs=new Array,this._nodeIndexLOD=null,this._nodeSignalLODs=new Array,this._nodePromiseLODs=new Array,this._nodeBufferLODs=new Array,this._materialIndexLOD=null,this._materialSignalLODs=new Array,this._materialPromiseLODs=new Array,this._materialBufferLODs=new Array,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null,this._nodeIndexLOD=null,this._nodeSignalLODs.length=0,this._nodePromiseLODs.length=0,this._nodeBufferLODs.length=0,this._materialIndexLOD=null,this._materialSignalLODs.length=0,this._materialPromiseLODs.length=0,this._materialBufferLODs.length=0,this.onMaterialLODsLoadedObservable.clear(),this.onNodeLODsLoadedObservable.clear()},l.prototype.onReady=function(){for(var o=this,n=function(a){var c=Promise.all(t._nodePromiseLODs[a]).then(function(){a!==0&&(o._loader.endPerformanceCounter("Node LOD ".concat(a)),o._loader.log("Loaded node LOD ".concat(a))),o.onNodeLODsLoadedObservable.notifyObservers(a),a!==o._nodePromiseLODs.length-1&&(o._loader.startPerformanceCounter("Node LOD ".concat(a+1)),o._loadBufferLOD(o._nodeBufferLODs,a+1),o._nodeSignalLODs[a]&&o._nodeSignalLODs[a].resolve())});t._loader._completePromises.push(c)},t=this,e=0;e<this._nodePromiseLODs.length;e++)n(e);for(var s=function(a){var c=Promise.all(r._materialPromiseLODs[a]).then(function(){a!==0&&(o._loader.endPerformanceCounter("Material LOD ".concat(a)),o._loader.log("Loaded material LOD ".concat(a))),o.onMaterialLODsLoadedObservable.notifyObservers(a),a!==o._materialPromiseLODs.length-1&&(o._loader.startPerformanceCounter("Material LOD ".concat(a+1)),o._loadBufferLOD(o._materialBufferLODs,a+1),o._materialSignalLODs[a]&&o._materialSignalLODs[a].resolve())});r._loader._completePromises.push(c)},r=this,e=0;e<this._materialPromiseLODs.length;e++)s(e)},l.prototype.loadSceneAsync=function(o,n){var t=this._loader.loadSceneAsync(o,n);return this._loadBufferLOD(this._bufferLODs,0),t},l.prototype.loadNodeAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(s,r){var a,c=e._getLODs(s,n,e._loader.gltf.nodes,r.ids);e._loader.logOpen("".concat(s));for(var d=function(C){var v=c[C];C!==0&&(e._nodeIndexLOD=C,e._nodeSignalLODs[C]=e._nodeSignalLODs[C]||new i.Deferred);var F=function(k){t(k),k.setEnabled(!1)},B=e._loader.loadNodeAsync("/nodes/".concat(v.index),v,F).then(function(k){if(C!==0){var O=c[C-1];O._babylonTransformNode&&(e._disposeTransformNode(O._babylonTransformNode),delete O._babylonTransformNode)}return k.setEnabled(!0),k});e._nodePromiseLODs[C]=e._nodePromiseLODs[C]||[],C===0?a=B:(e._nodeIndexLOD=null,e._nodePromiseLODs[C].push(B))},u=0;u<c.length;u++)d(u);return e._loader.logClose(),a})},l.prototype._loadMaterialAsync=function(o,n,t,e,s){var r=this;return this._nodeIndexLOD?null:h.GLTFLoader.LoadExtensionAsync(o,n,this.name,function(a,c){var d,u=r._getLODs(a,n,r._loader.gltf.materials,c.ids);r._loader.logOpen("".concat(a));for(var C=function(F){var B=u[F];F!==0&&(r._materialIndexLOD=F);var k=r._loader._loadMaterialAsync("/materials/".concat(B.index),B,t,e,function(O){F===0&&s(O)}).then(function(O){if(F!==0){s(O);var S=u[F-1]._data;S[e]&&(r._disposeMaterials([S[e].babylonMaterial]),delete S[e])}return O});r._materialPromiseLODs[F]=r._materialPromiseLODs[F]||[],F===0?d=k:(r._materialIndexLOD=null,r._materialPromiseLODs[F].push(k))},v=0;v<u.length;v++)C(v);return r._loader.logClose(),d})},l.prototype._loadUriAsync=function(o,n,t){var e=this;if(this._nodeIndexLOD!==null){this._loader.log("deferred");var s=this._nodeIndexLOD-1;return this._nodeSignalLODs[s]=this._nodeSignalLODs[s]||new i.Deferred,this._nodeSignalLODs[this._nodeIndexLOD-1].promise.then(function(){return e._loader.loadUriAsync(o,n,t)})}else if(this._materialIndexLOD!==null){this._loader.log("deferred");var s=this._materialIndexLOD-1;return this._materialSignalLODs[s]=this._materialSignalLODs[s]||new i.Deferred,this._materialSignalLODs[s].promise.then(function(){return e._loader.loadUriAsync(o,n,t)})}return null},l.prototype.loadBufferAsync=function(o,n,t,e){if(this._loader.parent.useRangeRequests&&!n.uri){if(!this._loader.bin)throw new Error("".concat(o,": Uri is missing or the binary glTF is missing its binary chunk"));var s=function(r,a){var c=t,d=c+e-1,u=r[a];return u?(u.start=Math.min(u.start,c),u.end=Math.max(u.end,d)):(u={start:c,end:d,loaded:new i.Deferred},r[a]=u),u.loaded.promise.then(function(C){return new Uint8Array(C.buffer,C.byteOffset+t-u.start,e)})};return this._loader.log("deferred"),this._nodeIndexLOD!==null?s(this._nodeBufferLODs,this._nodeIndexLOD):this._materialIndexLOD!==null?s(this._materialBufferLODs,this._materialIndexLOD):s(this._bufferLODs,0)}return null},l.prototype._loadBufferLOD=function(o,n){var t=o[n];t&&(this._loader.log("Loading buffer range [".concat(t.start,"-").concat(t.end,"]")),this._loader.bin.readAsync(t.start,t.end-t.start+1).then(function(e){t.loaded.resolve(e)},function(e){t.loaded.reject(e)}))},l.prototype._getLODs=function(o,n,t,e){if(this.maxLODsToLoad<=0)throw new Error("maxLODsToLoad must be greater than zero");for(var s=[],r=e.length-1;r>=0;r--)if(s.push(h.ArrayItem.Get("".concat(o,"/ids/").concat(e[r]),t,e[r])),s.length===this.maxLODsToLoad)return s;return s.push(n),s},l.prototype._disposeTransformNode=function(o){var n=this,t=[],e=o.material;e&&t.push(e);for(var s=0,r=o.getChildMeshes();s<r.length;s++){var a=r[s];a.material&&t.push(a.material)}o.dispose();var c=t.filter(function(d){return n._loader.babylonScene.meshes.every(function(u){return u.material!=d})});this._disposeMaterials(c)},l.prototype._disposeMaterials=function(o){for(var n={},t=0,e=o;t<e.length;t++){for(var s=e[t],r=0,a=s.getActiveTextures();r<a.length;r++){var c=a[r];n[c.uniqueId]=c}s.dispose()}for(var d in n)for(var u=0,C=this._loader.babylonScene.materials;u<C.length;u++){var s=C[u];s.hasTexture(n[d])&&delete n[d]}for(var d in n)n[d].dispose()},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_minecraftMesh.ts":(R,g,E)=>{E.r(g),E.d(g,{MSFT_minecraftMesh:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="MSFT_minecraftMesh",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtraAsync(o,n,this.name,function(s,r){if(r){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(s,": Material type not supported"));var a=e._loader.loadMaterialPropertiesAsync(o,n,t);return t.needAlphaBlending()&&(t.forceDepthWrite=!0,t.separateCullingPass=!0),t.backFaceCulling=t.forceDepthWrite,t.twoSidedLighting=!0,a}return null})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_sRGBFactors.ts":(R,g,E)=>{E.r(g),E.d(g,{MSFT_sRGBFactors:()=>A});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),_="MSFT_sRGBFactors",A=function(){function l(o){this.name=_,this._loader=o,this.enabled=this._loader.isExtensionUsed(_)}return l.prototype.dispose=function(){this._loader=null},l.prototype.loadMaterialPropertiesAsync=function(o,n,t){var e=this;return h.GLTFLoader.LoadExtraAsync(o,n,this.name,function(s,r){if(r){if(!(t instanceof i.PBRMaterial))throw new Error("".concat(s,": Material type not supported"));var a=e._loader.loadMaterialPropertiesAsync(o,n,t),c=t.getScene().getEngine().useExactSrgbConversions;return t.albedoTexture||t.albedoColor.toLinearSpaceToRef(t.albedoColor,c),t.reflectivityTexture||t.reflectivityColor.toLinearSpaceToRef(t.reflectivityColor,c),a}return null})},l}();h.GLTFLoader.RegisterExtension(_,function(l){return new A(l)})},"../../../dev/loaders/src/glTF/2.0/Extensions/gltfPathToObjectConverter.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFPathToObjectConverter:()=>i});var i=function(){function h(_,A){this._gltf=_,this._infoTree=A}return h.prototype.convert=function(_){var A=this._gltf,l=this._infoTree,o=void 0;if(!_.startsWith("/"))throw new Error("Path must start with a /");var n=_.split("/");n.shift();for(var t=0,e=n;t<e.length;t++){var s=e[t];if(l.__array__)l=l.__array__;else if(l=l[s],!l)throw new Error("Path ".concat(_," is invalid"));if(A===void 0)throw new Error("Path ".concat(_," is invalid"));A=A[s],l.__target__&&(o=A)}return{object:o,info:l}},h}()},"../../../dev/loaders/src/glTF/2.0/Extensions/index.ts":(R,g,E)=>{E.r(g),E.d(g,{EXT_lights_image_based:()=>i.EXT_lights_image_based,EXT_mesh_gpu_instancing:()=>h.EXT_mesh_gpu_instancing,EXT_meshopt_compression:()=>_.EXT_meshopt_compression,EXT_texture_avif:()=>l.EXT_texture_avif,EXT_texture_webp:()=>A.EXT_texture_webp,ExtrasAsMetadata:()=>oe.ExtrasAsMetadata,KHR_animation_pointer:()=>X.KHR_animation_pointer,KHR_draco_mesh_compression:()=>o.KHR_draco_mesh_compression,KHR_interactivity:()=>he.KHR_interactivity,KHR_lights:()=>n.KHR_lights,KHR_materials_anisotropy:()=>a.KHR_materials_anisotropy,KHR_materials_clearcoat:()=>s.KHR_materials_clearcoat,KHR_materials_diffuse_transmission:()=>B.KHR_materials_diffuse_transmission,KHR_materials_dispersion:()=>O.KHR_materials_dispersion,KHR_materials_emissive_strength:()=>c.KHR_materials_emissive_strength,KHR_materials_ior:()=>C.KHR_materials_ior,KHR_materials_iridescence:()=>r.KHR_materials_iridescence,KHR_materials_pbrSpecularGlossiness:()=>t.KHR_materials_pbrSpecularGlossiness,KHR_materials_sheen:()=>d.KHR_materials_sheen,KHR_materials_specular:()=>u.KHR_materials_specular,KHR_materials_transmission:()=>F.KHR_materials_transmission,KHR_materials_unlit:()=>e.KHR_materials_unlit,KHR_materials_variants:()=>v.KHR_materials_variants,KHR_materials_volume:()=>k.KHR_materials_volume,KHR_mesh_quantization:()=>S.KHR_mesh_quantization,KHR_texture_basisu:()=>G.KHR_texture_basisu,KHR_texture_transform:()=>U.KHR_texture_transform,KHR_xmp_json_ld:()=>W.KHR_xmp_json_ld,MSFT_audio_emitter:()=>J.MSFT_audio_emitter,MSFT_lod:()=>Q.MSFT_lod,MSFT_minecraftMesh:()=>Z.MSFT_minecraftMesh,MSFT_sRGBFactors:()=>ae.MSFT_sRGBFactors});var i=E("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_lights_image_based.ts"),h=E("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.ts"),_=E("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_meshopt_compression.ts"),A=E("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_webp.ts"),l=E("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_avif.ts"),o=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_draco_mesh_compression.ts"),n=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_lights_punctual.ts"),t=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.ts"),e=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_unlit.ts"),s=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_clearcoat.ts"),r=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_iridescence.ts"),a=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_anisotropy.ts"),c=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_emissive_strength.ts"),d=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_sheen.ts"),u=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_specular.ts"),C=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_ior.ts"),v=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_variants.ts"),F=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_transmission.ts"),B=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_diffuse_transmission.ts"),k=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_volume.ts"),O=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_dispersion.ts"),S=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_mesh_quantization.ts"),G=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_basisu.ts"),U=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_transform.ts"),W=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_xmp_json_ld.ts"),X=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.ts"),J=E("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_audio_emitter.ts"),Q=E("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_lod.ts"),Z=E("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_minecraftMesh.ts"),ae=E("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_sRGBFactors.ts"),he=E("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_interactivity.ts"),oe=E("../../../dev/loaders/src/glTF/2.0/Extensions/ExtrasAsMetadata.ts")},"../../../dev/loaders/src/glTF/2.0/Extensions/interactivityFunctions.ts":(R,g,E)=>{E.r(g),E.d(g,{convertGLTFToSerializedFlowGraph:()=>o});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/2.0/Extensions/interactivityUtils.ts");function _(n,t,e){if(n.type!==void 0){var s=t.types&&t.types[n.type];if(!s)throw new Error("".concat(e,": Unknown type: ").concat(n.type));var r=s.signature;if(!r)throw new Error("".concat(e,": Type ").concat(n.type," has no signature"));var a=h.gltfTypeToBabylonType[r];return{value:n.value,className:a}}else return n.value}function A(n,t,e){for(var s,r={},a=(s=n.configuration)!==null&&s!==void 0?s:[],c=0,d=a;c<d.length;c++){var u=d[c];if(u.id==="customEvent"){var C=t.customEvents&&t.customEvents[u.value];if(!C)throw new Error("/extensions/KHR_interactivity/nodes/".concat(e,": Unknown custom event: ").concat(u.value));r.eventId=C.id,r.eventData=C.values.map(function(B){return B.id})}else if(u.id==="variable"){var v=t.variables&&t.variables[u.value];if(!v)throw new Error("/extensions/KHR_interactivity/nodes/".concat(e,": Unknown variable: ").concat(u.value));r.variableName=v.id}else if(u.id==="path"){var F=u.value;r.path=F}else r[u.id]=_(u,t,"/extensions/KHR_interactivity/nodes/".concat(e))}return r}function l(n,t,e){var s=h.gltfToFlowGraphTypeMap[t.type];if(!s)throw new Error("/extensions/KHR_interactivity/nodes/".concat(n,": Unknown block type: ").concat(t.type));var r=n.toString(),a=A(t,e,r),c=t.metadata,d=[],u=[],C=[],v=[];return{className:s,config:a,uniqueId:r,metadata:c,dataInputs:d,dataOutputs:u,signalInputs:C,signalOutputs:v}}function o(n){for(var t,e,s,r={uniqueId:(0,i.RandomGUID)(),_userVariables:{},_connectionValues:{}},a=[r],c=[],d=0;d<n.nodes.length;d++){var u=n.nodes[d],C=l(d,u,n);c.push(C)}for(var d=0;d<n.nodes.length;d++){for(var u=n.nodes[d],v=c[d],F=(t=u.flows)!==null&&t!==void 0?t:[],B=function(q){var ee=q.id,$={uniqueId:(0,i.RandomGUID)(),name:ee,_connectionType:1,connectedPointIds:[]};v.signalOutputs.push($);var D=q.node,M=q.socket,P=c[D];if(!P)throw new Error("/extensions/KHR_interactivity/nodes/".concat(d,": Could not find node with id ").concat(D," that connects its input with with node ").concat(d,"'s output ").concat(ee));var f=P.signalInputs.find(function(p){return p.name===M});f||(f={uniqueId:(0,i.RandomGUID)(),name:M,_connectionType:0,connectedPointIds:[]},P.signalInputs.push(f)),f.connectedPointIds.push($.uniqueId),$.connectedPointIds.push(f.uniqueId)},k=0,O=F;k<O.length;k++){var S=O[k];B(S)}for(var G=(e=u.values)!==null&&e!==void 0?e:[],U=function(q){var ee=q.id,$={uniqueId:(0,i.RandomGUID)(),name:ee,_connectionType:0,connectedPointIds:[]};if(v.dataInputs.push($),q.value!==void 0){var D=_(q,n,"/extensions/KHR_interactivity/nodes/".concat(d));r._connectionValues[$.uniqueId]=D}else if(q.node!==void 0&&q.socket!==void 0){var M=q.node,P=q.socket,f=c[M];if(!f)throw new Error("/extensions/KHR_interactivity/nodes/".concat(d,": Could not find node with id ").concat(M," that connects its output with node").concat(d,"'s input ").concat(ee));var p=f.dataOutputs.find(function(m){return m.name===P});p||(p={uniqueId:(0,i.RandomGUID)(),name:P,_connectionType:1,connectedPointIds:[]},f.dataOutputs.push(p)),$.connectedPointIds.push(p.uniqueId),p.connectedPointIds.push($.uniqueId)}else throw new Error("/extensions/KHR_interactivity/nodes/".concat(d,": Invalid socket ").concat(ee," in node ").concat(d))},W=0,X=G;W<X.length;W++){var J=X[W];U(J)}}for(var Q=(s=n.variables)!==null&&s!==void 0?s:[],d=0;d<Q.length;d++){var Z=Q[d],ae=Z.id;r._userVariables[ae]=_(Z,n,"/extensions/KHR_interactivity/variables/".concat(d))}return{allBlocks:c,executionContexts:a}}},"../../../dev/loaders/src/glTF/2.0/Extensions/interactivityPathToObjectConverter.ts":(R,g,E)=>{E.r(g),E.d(g,{InteractivityPathToObjectConverter:()=>_});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("../../../dev/loaders/src/glTF/2.0/Extensions/gltfPathToObjectConverter.ts"),_=function(o){(0,i.__extends)(n,o);function n(t){return o.call(this,t,l)||this}return n}(h.GLTFPathToObjectConverter),A={__array__:{__target__:!0,translation:{type:"Vector3",get:function(o){var n=o._babylonTransformNode;return n.position},set:function(o,n){var t=n._babylonTransformNode;t.position=o},getObject:function(o){return o._babylonTransformNode}}}},l={nodes:A}},"../../../dev/loaders/src/glTF/2.0/Extensions/interactivityUtils.ts":(R,g,E)=>{E.r(g),E.d(g,{gltfToFlowGraphTypeMap:()=>h,gltfTypeToBabylonType:()=>_});var i=E("babylonjs/Misc/observable"),h={"lifecycle/onStart":i.FlowGraphSceneReadyEventBlock.ClassName,"lifecycle/onTick":i.FlowGraphSceneTickEventBlock.ClassName,log:i.FlowGraphConsoleLogBlock.ClassName,"flow/delay":i.FlowGraphTimerBlock.ClassName,"customEvent/send":i.FlowGraphSendCustomEventBlock.ClassName,"customEvent/receive":i.FlowGraphReceiveCustomEventBlock.ClassName,"flow/sequence":i.FlowGraphSequenceBlock.ClassName,"world/get":i.FlowGraphGetPropertyBlock.ClassName,"world/set":i.FlowGraphSetPropertyBlock.ClassName,"flow/doN":i.FlowGraphDoNBlock.ClassName,"variable/get":i.FlowGraphGetVariableBlock.ClassName,"variable/set":i.FlowGraphSetVariableBlock.ClassName,"flow/whileLoop":i.FlowGraphWhileLoopBlock.ClassName,"math/random":i.FlowGraphRandomBlock.ClassName,"math/e":i.FlowGraphEBlock.ClassName,"math/pi":i.FlowGraphPiBlock.ClassName,"math/inf":i.FlowGraphInfBlock.ClassName,"math/nan":i.FlowGraphNaNBlock.ClassName,"math/abs":i.FlowGraphAbsBlock.ClassName,"math/sign":i.FlowGraphSignBlock.ClassName,"math/trunc":i.FlowGraphTruncBlock.ClassName,"math/floor":i.FlowGraphFloorBlock.ClassName,"math/ceil":i.FlowGraphCeilBlock.ClassName,"math/fract":i.FlowGraphFractBlock.ClassName,"math/neg":i.FlowGraphNegBlock.ClassName,"math/add":i.FlowGraphAddBlock.ClassName,"math/sub":i.FlowGraphSubtractBlock.ClassName,"math/mul":i.FlowGraphMultiplyBlock.ClassName,"math/div":i.FlowGraphDivideBlock.ClassName,"math/rem":i.FlowGraphRemainderBlock.ClassName,"math/min":i.FlowGraphMinBlock.ClassName,"math/max":i.FlowGraphMaxBlock.ClassName,"math/clamp":i.FlowGraphClampBlock.ClassName,"math/saturate":i.FlowGraphSaturateBlock.ClassName,"math/mix":i.FlowGraphInterpolateBlock.ClassName,"math/eq":i.FlowGraphEqBlock.ClassName,"math/lt":i.FlowGraphLessThanBlock.ClassName,"math/le":i.FlowGraphLessThanOrEqualBlock.ClassName,"math/gt":i.FlowGraphGreaterThanBlock.ClassName,"math/ge":i.FlowGraphGreaterThanOrEqualBlock.ClassName,"math/isnan":i.FlowGraphIsNanBlock.ClassName,"math/isinf":i.FlowGraphIsInfBlock.ClassName,"math/rad":i.FlowGraphDegToRadBlock.ClassName,"math/deg":i.FlowGraphRadToDegBlock.ClassName,"math/sin":i.FlowGraphSinBlock.ClassName,"math/cos":i.FlowGraphCosBlock.ClassName,"math/tan":i.FlowGraphTanBlock.ClassName,"math/asin":i.FlowGraphAsinBlock.ClassName,"math/acos":i.FlowGraphAcosBlock.ClassName,"math/atan":i.FlowGraphAtanBlock.ClassName,"math/atan2":i.FlowGraphAtan2Block.ClassName,"math/sinh":i.FlowGraphSinhBlock.ClassName,"math/cosh":i.FlowGraphCoshBlock.ClassName,"math/tanh":i.FlowGraphTanhBlock.ClassName,"math/asinh":i.FlowGraphAsinhBlock.ClassName,"math/acosh":i.FlowGraphAcoshBlock.ClassName,"math/atanh":i.FlowGraphAtanhBlock.ClassName,"math/exp":i.FlowGraphExpBlock.ClassName,"math/log":i.FlowGraphLogBlock.ClassName,"math/log2":i.FlowGraphLog2Block.ClassName,"math/log10":i.FlowGraphLog10Block.ClassName,"math/sqrt":i.FlowGraphSqrtBlock.ClassName,"math/cbrt":i.FlowGraphCubeRootBlock.ClassName,"math/pow":i.FlowGraphPowBlock.ClassName,"math/length":i.FlowGraphLengthBlock.ClassName,"math/normalize":i.FlowGraphNormalizeBlock.ClassName,"math/dot":i.FlowGraphDotBlock.ClassName,"math/cross":i.FlowGraphCrossBlock.ClassName,"math/rotate2d":i.FlowGraphRotate2DBlock.ClassName,"math/rotate3d":i.FlowGraphRotate3DBlock.ClassName,"math/transpose":i.FlowGraphTransposeBlock.ClassName,"math/determinant":i.FlowGraphDeterminantBlock.ClassName,"math/inverse":i.FlowGraphInvertMatrixBlock.ClassName,"math/matmul":i.FlowGraphMatMulBlock.ClassName,"math/not":i.FlowGraphBitwiseNotBlock.ClassName,"math/and":i.FlowGraphBitwiseAndBlock.ClassName,"math/or":i.FlowGraphBitwiseOrBlock.ClassName,"math/xor":i.FlowGraphBitwiseXorBlock.ClassName,"math/asr":i.FlowGraphBitwiseRightShiftBlock.ClassName,"math/lsl":i.FlowGraphBitwiseLeftShiftBlock.ClassName,"math/clz":i.FlowGraphCountLeadingZerosBlock.ClassName,"math/ctz":i.FlowGraphCountTrailingZerosBlock.ClassName,"math/popcnt":i.FlowGraphCountOneBitsBlock.ClassName},_={float2:"Vector2",float3:"Vector3",float4:"Vector4",float4x4:"Matrix",int:"FlowGraphInteger"}},"../../../dev/loaders/src/glTF/2.0/glTFLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{ArrayItem:()=>l,GLTFLoader:()=>o});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),_=E("../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts");function A(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=function(s){return s&&typeof s=="object"};return n.reduce(function(s,r){return Object.keys(r).forEach(function(a){var c=s[a],d=r[a];Array.isArray(c)&&Array.isArray(d)?s[a]=c.concat.apply(c,d):e(c)&&e(d)?s[a]=A(c,d):s[a]=d}),s},{})}var l=function(){function n(){}return n.Get=function(t,e,s){if(!e||s==null||!e[s])throw new Error("".concat(t,": Failed to find index (").concat(s,")"));return e[s]},n.TryGet=function(t,e){return!t||e==null||!t[e]?null:t[e]},n.Assign=function(t){if(t)for(var e=0;e<t.length;e++)t[e].index=e},n}(),o=function(){function n(t){this._completePromises=new Array,this._assetContainer=null,this._babylonLights=[],this._disableInstancedMesh=0,this._allMaterialsDirtyRequired=!1,this._extensions=new Array,this._disposed=!1,this._rootUrl=null,this._fileName=null,this._uniqueRootUrl=null,this._bin=null,this._rootBabylonMesh=null,this._defaultBabylonMaterialData={},this._postSceneLoadActions=new Array,this._parent=t}return n.RegisterExtension=function(t,e){n.UnregisterExtension(t)&&i.Logger.Warn("Extension with the name '".concat(t,"' already exists")),n._RegisteredExtensions[t]={factory:e}},n.UnregisterExtension=function(t){return n._RegisteredExtensions[t]?(delete n._RegisteredExtensions[t],!0):!1},Object.defineProperty(n.prototype,"gltf",{get:function(){if(!this._gltf)throw new Error("glTF JSON is not available");return this._gltf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bin",{get:function(){return this._bin},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"babylonScene",{get:function(){if(!this._babylonScene)throw new Error("Scene is not available");return this._babylonScene},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rootBabylonMesh",{get:function(){return this._rootBabylonMesh},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rootUrl",{get:function(){return this._rootUrl},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._completePromises.length=0,this._extensions.forEach(function(t){return t.dispose&&t.dispose()}),this._extensions.length=0,this._gltf=null,this._bin=null,this._babylonScene=null,this._rootBabylonMesh=null,this._defaultBabylonMaterialData={},this._postSceneLoadActions.length=0,this._parent.dispose())},n.prototype.importMeshAsync=function(t,e,s,r,a,c,d){var u=this;return d===void 0&&(d=""),Promise.resolve().then(function(){u._babylonScene=e,u._assetContainer=s,u._loadData(r);var C=null;if(t){var v={};if(u._gltf.nodes)for(var F=0,B=u._gltf.nodes;F<B.length;F++){var k=B[F];k.name&&(v[k.name]=k.index)}var O=t instanceof Array?t:[t];C=O.map(function(S){var G=v[S];if(G===void 0)throw new Error("Failed to find node '".concat(S,"'"));return G})}return u._loadAsync(a,d,C,function(){return{meshes:u._getMeshes(),particleSystems:[],skeletons:u._getSkeletons(),animationGroups:u._getAnimationGroups(),lights:u._babylonLights,transformNodes:u._getTransformNodes(),geometries:u._getGeometries(),spriteManagers:[]}})})},n.prototype.loadAsync=function(t,e,s,r,a){var c=this;return a===void 0&&(a=""),Promise.resolve().then(function(){return c._babylonScene=t,c._loadData(e),c._loadAsync(s,a,null,function(){})})},n.prototype._loadAsync=function(t,e,s,r){var a=this;return Promise.resolve().then(function(){a._rootUrl=t,a._uniqueRootUrl=!t.startsWith("file:")&&e?t:"".concat(t).concat(Date.now(),"/"),a._fileName=e,a._allMaterialsDirtyRequired=!1,a._loadExtensions(),a._checkExtensions();var c="".concat(h.GLTFLoaderState[h.GLTFLoaderState.LOADING]," => ").concat(h.GLTFLoaderState[h.GLTFLoaderState.READY]),d="".concat(h.GLTFLoaderState[h.GLTFLoaderState.LOADING]," => ").concat(h.GLTFLoaderState[h.GLTFLoaderState.COMPLETE]);a._parent._startPerformanceCounter(c),a._parent._startPerformanceCounter(d),a._parent._setState(h.GLTFLoaderState.LOADING),a._extensionsOnLoading();var u=new Array,C=a._babylonScene.blockMaterialDirtyMechanism;if(a._babylonScene.blockMaterialDirtyMechanism=!0,!a.parent.loadOnlyMaterials){if(s)u.push(a.loadSceneAsync("/nodes",{nodes:s,index:-1}));else if(a._gltf.scene!=null||a._gltf.scenes&&a._gltf.scenes[0]){var v=l.Get("/scene",a._gltf.scenes,a._gltf.scene||0);u.push(a.loadSceneAsync("/scenes/".concat(v.index),v))}}if(!a.parent.skipMaterials&&a.parent.loadAllMaterials&&a._gltf.materials)for(var F=0;F<a._gltf.materials.length;++F){var B=a._gltf.materials[F],k="/materials/"+F,O=i.Material.TriangleFillMode;u.push(a._loadMaterialAsync(k,B,null,O,function(){}))}a._allMaterialsDirtyRequired?a._babylonScene.blockMaterialDirtyMechanism=C:a._babylonScene._forceBlockMaterialDirtyMechanism(C),a._parent.compileMaterials&&u.push(a._compileMaterialsAsync()),a._parent.compileShadowGenerators&&u.push(a._compileShadowGeneratorsAsync());var S=Promise.all(u).then(function(){return a._rootBabylonMesh&&a._rootBabylonMesh!==a._parent.customRootNode&&a._rootBabylonMesh.setEnabled(!0),a._extensionsOnReady(),a._parent._setState(h.GLTFLoaderState.READY),a._startAnimations(),r()});return S.then(function(G){return a._parent._endPerformanceCounter(c),i.Tools.SetImmediate(function(){a._disposed||Promise.all(a._completePromises).then(function(){a._parent._endPerformanceCounter(d),a._parent._setState(h.GLTFLoaderState.COMPLETE),a._parent.onCompleteObservable.notifyObservers(void 0),a._parent.onCompleteObservable.clear(),a.dispose()},function(U){a._parent.onErrorObservable.notifyObservers(U),a._parent.onErrorObservable.clear(),a.dispose()})}),G})}).catch(function(c){throw a._disposed||(a._parent.onErrorObservable.notifyObservers(c),a._parent.onErrorObservable.clear(),a.dispose()),c})},n.prototype._loadData=function(t){if(this._gltf=t.json,this._setupData(),t.bin){var e=this._gltf.buffers;if(e&&e[0]&&!e[0].uri){var s=e[0];(s.byteLength<t.bin.byteLength-3||s.byteLength>t.bin.byteLength)&&i.Logger.Warn("Binary buffer length (".concat(s.byteLength,") from JSON does not match chunk length (").concat(t.bin.byteLength,")")),this._bin=t.bin}else i.Logger.Warn("Unexpected BIN chunk")}},n.prototype._setupData=function(){if(l.Assign(this._gltf.accessors),l.Assign(this._gltf.animations),l.Assign(this._gltf.buffers),l.Assign(this._gltf.bufferViews),l.Assign(this._gltf.cameras),l.Assign(this._gltf.images),l.Assign(this._gltf.materials),l.Assign(this._gltf.meshes),l.Assign(this._gltf.nodes),l.Assign(this._gltf.samplers),l.Assign(this._gltf.scenes),l.Assign(this._gltf.skins),l.Assign(this._gltf.textures),this._gltf.nodes){for(var t={},e=0,s=this._gltf.nodes;e<s.length;e++){var r=s[e];if(r.children)for(var a=0,c=r.children;a<c.length;a++){var d=c[a];t[d]=r.index}}for(var u=this._createRootNode(),C=0,v=this._gltf.nodes;C<v.length;C++){var r=v[C],F=t[r.index];r.parent=F===void 0?u:this._gltf.nodes[F]}}},n.prototype._loadExtensions=function(){for(var t in n._RegisteredExtensions){var e=n._RegisteredExtensions[t].factory(this);e.name!==t&&i.Logger.Warn("The name of the glTF loader extension instance does not match the registered name: ".concat(e.name," !== ").concat(t)),this._extensions.push(e),this._parent.onExtensionLoadedObservable.notifyObservers(e)}this._extensions.sort(function(s,r){return(s.order||Number.MAX_VALUE)-(r.order||Number.MAX_VALUE)}),this._parent.onExtensionLoadedObservable.clear()},n.prototype._checkExtensions=function(){if(this._gltf.extensionsRequired)for(var t=function(c){var d=e._extensions.some(function(u){return u.name===c&&u.enabled});if(!d)throw new Error("Required extension ".concat(c," is not available"))},e=this,s=0,r=this._gltf.extensionsRequired;s<r.length;s++){var a=r[s];t(a)}},n.prototype._createRootNode=function(){if(this._parent.customRootNode!==void 0)return this._rootBabylonMesh=this._parent.customRootNode,{_babylonTransformNode:this._rootBabylonMesh===null?void 0:this._rootBabylonMesh,index:-1};this._babylonScene._blockEntityCollection=!!this._assetContainer;var t=new i.Mesh("__root__",this._babylonScene);this._rootBabylonMesh=t,this._rootBabylonMesh._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,this._rootBabylonMesh.setEnabled(!1);var e={_babylonTransformNode:this._rootBabylonMesh,index:-1};switch(this._parent.coordinateSystemMode){case h.GLTFLoaderCoordinateSystemMode.AUTO:{this._babylonScene.useRightHandedSystem||(e.rotation=[0,1,0,0],e.scale=[1,1,-1],n._LoadTransform(e,this._rootBabylonMesh));break}case h.GLTFLoaderCoordinateSystemMode.FORCE_RIGHT_HANDED:{this._babylonScene.useRightHandedSystem=!0;break}default:throw new Error("Invalid coordinate system mode (".concat(this._parent.coordinateSystemMode,")"))}return this._parent.onMeshLoadedObservable.notifyObservers(t),e},n.prototype.loadSceneAsync=function(t,e){var s=this,r=this._extensionsLoadSceneAsync(t,e);if(r)return r;var a=new Array;if(this.logOpen("".concat(t," ").concat(e.name||"")),e.nodes)for(var c=0,d=e.nodes;c<d.length;c++){var u=d[c],C=l.Get("".concat(t,"/nodes/").concat(u),this._gltf.nodes,u);a.push(this.loadNodeAsync("/nodes/".concat(C.index),C,function(k){k.parent=s._rootBabylonMesh}))}for(var v=0,F=this._postSceneLoadActions;v<F.length;v++){var B=F[v];B()}return a.push(this._loadAnimationsAsync()),this.logClose(),Promise.all(a).then(function(){})},n.prototype._forEachPrimitive=function(t,e){if(t._primitiveBabylonMeshes)for(var s=0,r=t._primitiveBabylonMeshes;s<r.length;s++){var a=r[s];e(a)}},n.prototype._getGeometries=function(){var t=[],e=this._gltf.nodes;if(e)for(var s=0,r=e;s<r.length;s++){var a=r[s];this._forEachPrimitive(a,function(c){var d=c.geometry;d&&t.indexOf(d)===-1&&t.push(d)})}return t},n.prototype._getMeshes=function(){var t=[];this._rootBabylonMesh instanceof i.AbstractMesh&&t.push(this._rootBabylonMesh);var e=this._gltf.nodes;if(e)for(var s=0,r=e;s<r.length;s++){var a=r[s];this._forEachPrimitive(a,function(c){t.push(c)})}return t},n.prototype._getTransformNodes=function(){var t=[],e=this._gltf.nodes;if(e)for(var s=0,r=e;s<r.length;s++){var a=r[s];a._babylonTransformNode&&a._babylonTransformNode.getClassName()==="TransformNode"&&t.push(a._babylonTransformNode),a._babylonTransformNodeForSkin&&t.push(a._babylonTransformNodeForSkin)}return t},n.prototype._getSkeletons=function(){var t=[],e=this._gltf.skins;if(e)for(var s=0,r=e;s<r.length;s++){var a=r[s];a._data&&t.push(a._data.babylonSkeleton)}return t},n.prototype._getAnimationGroups=function(){var t=[],e=this._gltf.animations;if(e)for(var s=0,r=e;s<r.length;s++){var a=r[s];a._babylonAnimationGroup&&t.push(a._babylonAnimationGroup)}return t},n.prototype._startAnimations=function(){switch(this._parent.animationStartMode){case h.GLTFLoaderAnimationStartMode.NONE:break;case h.GLTFLoaderAnimationStartMode.FIRST:{var t=this._getAnimationGroups();t.length!==0&&t[0].start(!0);break}case h.GLTFLoaderAnimationStartMode.ALL:{for(var t=this._getAnimationGroups(),e=0,s=t;e<s.length;e++){var r=s[e];r.start(!0)}break}default:{i.Logger.Error("Invalid animation start mode (".concat(this._parent.animationStartMode,")"));return}}},n.prototype.loadNodeAsync=function(t,e,s){var r=this;s===void 0&&(s=function(){});var a=this._extensionsLoadNodeAsync(t,e,s);if(a)return a;if(e._babylonTransformNode)throw new Error("".concat(t,": Invalid recursive node hierarchy"));var c=new Array;this.logOpen("".concat(t," ").concat(e.name||""));var d=function(F){if(n.AddPointerMetadata(F,t),n._LoadTransform(e,F),e.camera!=null){var B=l.Get("".concat(t,"/camera"),r._gltf.cameras,e.camera);c.push(r.loadCameraAsync("/cameras/".concat(B.index),B,function(U){U.parent=F}))}if(e.children)for(var k=0,O=e.children;k<O.length;k++){var S=O[k],G=l.Get("".concat(t,"/children/").concat(S),r._gltf.nodes,S);c.push(r.loadNodeAsync("/nodes/".concat(G.index),G,function(U){U.parent=F}))}s(F)};if(e.mesh==null||e.skin!=null){var u=e.name||"node".concat(e.index);this._babylonScene._blockEntityCollection=!!this._assetContainer;var C=new i.TransformNode(u,this._babylonScene);C._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e.mesh==null?e._babylonTransformNode=C:e._babylonTransformNodeForSkin=C,d(C)}if(e.mesh!=null)if(e.skin==null){var v=l.Get("".concat(t,"/mesh"),this._gltf.meshes,e.mesh);c.push(this._loadMeshAsync("/meshes/".concat(v.index),e,v,d))}else{var v=l.Get("".concat(t,"/mesh"),this._gltf.meshes,e.mesh);c.push(this._loadMeshAsync("/meshes/".concat(v.index),e,v,function(B){var k=e._babylonTransformNodeForSkin;B.metadata=A(k.metadata,B.metadata||{});var O=l.Get("".concat(t,"/skin"),r._gltf.skins,e.skin);c.push(r._loadSkinAsync("/skins/".concat(O.index),e,O,function(S){r._forEachPrimitive(e,function(G){G.skeleton=S}),r._postSceneLoadActions.push(function(){if(O.skeleton!=null){var G=l.Get("/skins/".concat(O.index,"/skeleton"),r._gltf.nodes,O.skeleton).parent;e.index===G.index?B.parent=k.parent:B.parent=G._babylonTransformNode}else B.parent=r._rootBabylonMesh;r._parent.onSkinLoadedObservable.notifyObservers({node:k,skinnedNode:B})})}))}))}return this.logClose(),Promise.all(c).then(function(){return r._forEachPrimitive(e,function(F){F.geometry&&F.geometry.useBoundingInfoFromGeometry?F._updateBoundingInfo():F.refreshBoundingInfo(!0,!0)}),e._babylonTransformNode})},n.prototype._loadMeshAsync=function(t,e,s,r){var a=s.primitives;if(!a||!a.length)throw new Error("".concat(t,": Primitives are missing"));a[0].index==null&&l.Assign(a);var c=new Array;this.logOpen("".concat(t," ").concat(s.name||""));var d=e.name||"node".concat(e.index);if(a.length===1){var u=s.primitives[0];c.push(this._loadMeshPrimitiveAsync("".concat(t,"/primitives/").concat(u.index),d,e,s,u,function(F){e._babylonTransformNode=F,e._primitiveBabylonMeshes=[F]}))}else{this._babylonScene._blockEntityCollection=!!this._assetContainer,e._babylonTransformNode=new i.TransformNode(d,this._babylonScene),e._babylonTransformNode._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e._primitiveBabylonMeshes=[];for(var C=0,v=a;C<v.length;C++){var u=v[C];c.push(this._loadMeshPrimitiveAsync("".concat(t,"/primitives/").concat(u.index),"".concat(d,"_primitive").concat(u.index),e,s,u,function(B){B.parent=e._babylonTransformNode,e._primitiveBabylonMeshes.push(B)}))}}return r(e._babylonTransformNode),this.logClose(),Promise.all(c).then(function(){return e._babylonTransformNode})},n.prototype._loadMeshPrimitiveAsync=function(t,e,s,r,a,c){var d=this,u=this._extensionsLoadMeshPrimitiveAsync(t,e,s,r,a,c);if(u)return u;this.logOpen("".concat(t));var C=this._disableInstancedMesh===0&&this._parent.createInstances&&s.skin==null&&!r.primitives[0].targets,v,F;if(C&&a._instanceData)this._babylonScene._blockEntityCollection=!!this._assetContainer,v=a._instanceData.babylonSourceMesh.createInstance(e),v._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,F=a._instanceData.promise;else{var B=new Array;this._babylonScene._blockEntityCollection=!!this._assetContainer;var k=new i.Mesh(e,this._babylonScene);k._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,k.sideOrientation=this._babylonScene.useRightHandedSystem?i.Material.CounterClockWiseSideOrientation:i.Material.ClockWiseSideOrientation,this._createMorphTargets(t,s,r,a,k),B.push(this._loadVertexDataAsync(t,a,k).then(function(U){return d._loadMorphTargetsAsync(t,a,k,U).then(function(){d._disposed||(d._babylonScene._blockEntityCollection=!!d._assetContainer,U.applyToMesh(k),U._parentContainer=d._assetContainer,d._babylonScene._blockEntityCollection=!1)})}));var O=n._GetDrawMode(t,a.mode);if(a.material==null){var S=this._defaultBabylonMaterialData[O];S||(S=this._createDefaultMaterial("__GLTFLoader._default",O),this._parent.onMaterialLoadedObservable.notifyObservers(S),this._defaultBabylonMaterialData[O]=S),k.material=S}else if(!this.parent.skipMaterials){var G=l.Get("".concat(t,"/material"),this._gltf.materials,a.material);B.push(this._loadMaterialAsync("/materials/".concat(G.index),G,k,O,function(U){k.material=U}))}F=Promise.all(B),C&&(a._instanceData={babylonSourceMesh:k,promise:F}),v=k}return n.AddPointerMetadata(v,t),this._parent.onMeshLoadedObservable.notifyObservers(v),c(v),this.logClose(),F.then(function(){return v})},n.prototype._loadVertexDataAsync=function(t,e,s){var r=this,a=this._extensionsLoadVertexDataAsync(t,e,s);if(a)return a;var c=e.attributes;if(!c)throw new Error("".concat(t,": Attributes are missing"));var d=new Array,u=new i.Geometry(s.name,this._babylonScene);if(e.indices==null)s.isUnIndexed=!0;else{var C=l.Get("".concat(t,"/indices"),this._gltf.accessors,e.indices);d.push(this._loadIndicesAccessorAsync("/accessors/".concat(C.index),C).then(function(F){u.setIndices(F)}))}var v=function(F,B,k){if(c[F]!=null){s._delayInfo=s._delayInfo||[],s._delayInfo.indexOf(B)===-1&&s._delayInfo.push(B);var O=l.Get("".concat(t,"/attributes/").concat(F),r._gltf.accessors,c[F]);d.push(r._loadVertexAccessorAsync("/accessors/".concat(O.index),O,B).then(function(S){var G,U;if(S.getKind()===i.VertexBuffer.PositionKind&&!r.parent.alwaysComputeBoundingBox&&!s.skeleton&&O.min&&O.max){var W=(G=i.TmpVectors.Vector3[0]).copyFromFloats.apply(G,O.min),X=(U=i.TmpVectors.Vector3[1]).copyFromFloats.apply(U,O.max);if(O.normalized&&O.componentType!==5126){var J=1;switch(O.componentType){case 5120:J=127;break;case 5121:J=255;break;case 5122:J=32767;break;case 5123:J=65535;break}var Q=1/J;W.scaleInPlace(Q),X.scaleInPlace(Q)}u._boundingInfo=new i.BoundingInfo(W,X),u.useBoundingInfoFromGeometry=!0}u.setVerticesBuffer(S,O.count)})),B==i.VertexBuffer.MatricesIndicesExtraKind&&(s.numBoneInfluencers=8),k&&k(O)}};return v("POSITION",i.VertexBuffer.PositionKind),v("NORMAL",i.VertexBuffer.NormalKind),v("TANGENT",i.VertexBuffer.TangentKind),v("TEXCOORD_0",i.VertexBuffer.UVKind),v("TEXCOORD_1",i.VertexBuffer.UV2Kind),v("TEXCOORD_2",i.VertexBuffer.UV3Kind),v("TEXCOORD_3",i.VertexBuffer.UV4Kind),v("TEXCOORD_4",i.VertexBuffer.UV5Kind),v("TEXCOORD_5",i.VertexBuffer.UV6Kind),v("JOINTS_0",i.VertexBuffer.MatricesIndicesKind),v("WEIGHTS_0",i.VertexBuffer.MatricesWeightsKind),v("JOINTS_1",i.VertexBuffer.MatricesIndicesExtraKind),v("WEIGHTS_1",i.VertexBuffer.MatricesWeightsExtraKind),v("COLOR_0",i.VertexBuffer.ColorKind,function(F){F.type==="VEC4"&&(s.hasVertexAlpha=!0)}),Promise.all(d).then(function(){return u})},n.prototype._createMorphTargets=function(t,e,s,r,a){if(r.targets){if(e._numMorphTargets==null)e._numMorphTargets=r.targets.length;else if(r.targets.length!==e._numMorphTargets)throw new Error("".concat(t,": Primitives do not have the same number of targets"));var c=s.extras?s.extras.targetNames:null;this._babylonScene._blockEntityCollection=!!this._assetContainer,a.morphTargetManager=new i.MorphTargetManager(this._babylonScene),a.morphTargetManager._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,a.morphTargetManager.areUpdatesFrozen=!0;for(var d=0;d<r.targets.length;d++){var u=e.weights?e.weights[d]:s.weights?s.weights[d]:0,C=c?c[d]:"morphTarget".concat(d);a.morphTargetManager.addTarget(new i.MorphTarget(C,u,a.getScene()))}}},n.prototype._loadMorphTargetsAsync=function(t,e,s,r){if(!e.targets)return Promise.resolve();for(var a=new Array,c=s.morphTargetManager,d=0;d<c.numTargets;d++){var u=c.getTarget(d);a.push(this._loadMorphTargetVertexDataAsync("".concat(t,"/targets/").concat(d),r,e.targets[d],u))}return Promise.all(a).then(function(){c.areUpdatesFrozen=!1})},n.prototype._loadMorphTargetVertexDataAsync=function(t,e,s,r){var a=this,c=new Array,d=function(u,C,v){if(s[u]!=null){var F=e.getVertexBuffer(C);if(F){var B=l.Get("".concat(t,"/").concat(u),a._gltf.accessors,s[u]);c.push(a._loadFloatAccessorAsync("/accessors/".concat(B.index),B).then(function(k){v(F,k)}))}}};return d("POSITION",i.VertexBuffer.PositionKind,function(u,C){var v=new Float32Array(C.length);u.forEach(C.length,function(F,B){v[B]=C[B]+F}),r.setPositions(v)}),d("NORMAL",i.VertexBuffer.NormalKind,function(u,C){var v=new Float32Array(C.length);u.forEach(v.length,function(F,B){v[B]=C[B]+F}),r.setNormals(v)}),d("TANGENT",i.VertexBuffer.TangentKind,function(u,C){var v=new Float32Array(C.length/3*4),F=0;u.forEach(C.length/3*4,function(B,k){(k+1)%4!==0&&(v[F]=C[F]+B,F++)}),r.setTangents(v)}),Promise.all(c).then(function(){})},n._LoadTransform=function(t,e){if(t.skin==null){var s=i.Vector3.Zero(),r=i.Quaternion.Identity(),a=i.Vector3.One();if(t.matrix){var c=i.Matrix.FromArray(t.matrix);c.decompose(a,r,s)}else t.translation&&(s=i.Vector3.FromArray(t.translation)),t.rotation&&(r=i.Quaternion.FromArray(t.rotation)),t.scale&&(a=i.Vector3.FromArray(t.scale));e.position=s,e.rotationQuaternion=r,e.scaling=a}},n.prototype._loadSkinAsync=function(t,e,s,r){var a=this,c=this._extensionsLoadSkinAsync(t,e,s);if(c)return c;if(s._data)return r(s._data.babylonSkeleton),s._data.promise;var d="skeleton".concat(s.index);this._babylonScene._blockEntityCollection=!!this._assetContainer;var u=new i.Skeleton(s.name||d,d,this._babylonScene);u._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,this._loadBones(t,s,u);var C=this._loadSkinInverseBindMatricesDataAsync(t,s).then(function(v){a._updateBoneMatrices(u,v)});return s._data={babylonSkeleton:u,promise:C},r(u),C},n.prototype._loadBones=function(t,e,s){if(e.skeleton==null||this._parent.alwaysComputeSkeletonRootNode){var r=this._findSkeletonRootNode("".concat(t,"/joints"),e.joints);if(r)if(e.skeleton===void 0)e.skeleton=r.index;else{var a=function(B,k){for(;k.parent;k=k.parent)if(k.parent===B)return!0;return!1},c=l.Get("".concat(t,"/skeleton"),this._gltf.nodes,e.skeleton);c!==r&&!a(c,r)&&(i.Logger.Warn("".concat(t,"/skeleton: Overriding with nearest common ancestor as skeleton node is not a common root")),e.skeleton=r.index)}else i.Logger.Warn("".concat(t,": Failed to find common root"))}for(var d={},u=0,C=e.joints;u<C.length;u++){var v=C[u],F=l.Get("".concat(t,"/joints/").concat(v),this._gltf.nodes,v);this._loadBone(F,e,s,d)}},n.prototype._findSkeletonRootNode=function(t,e){if(e.length===0)return null;for(var s={},r=0,a=e;r<a.length;r++){for(var c=a[r],d=[],u=l.Get("".concat(t,"/").concat(c),this._gltf.nodes,c);u.index!==-1;)d.unshift(u),u=u.parent;s[c]=d}for(var C=null,v=0;;++v){var d=s[e[0]];if(v>=d.length)return C;for(var u=d[v],F=1;F<e.length;++F)if(d=s[e[F]],v>=d.length||u!==d[v])return C;C=u}},n.prototype._loadBone=function(t,e,s,r){var a=r[t.index];if(a)return a;var c=null;t.index!==e.skeleton&&(t.parent&&t.parent.index!==-1?c=this._loadBone(t.parent,e,s,r):e.skeleton!==void 0&&i.Logger.Warn("/skins/".concat(e.index,"/skeleton: Skeleton node is not a common root")));var d=e.joints.indexOf(t.index);return a=new i.Bone(t.name||"joint".concat(t.index),s,c,this._getNodeMatrix(t),null,null,d),r[t.index]=a,this._postSceneLoadActions.push(function(){a.linkTransformNode(t._babylonTransformNode)}),a},n.prototype._loadSkinInverseBindMatricesDataAsync=function(t,e){if(e.inverseBindMatrices==null)return Promise.resolve(null);var s=l.Get("".concat(t,"/inverseBindMatrices"),this._gltf.accessors,e.inverseBindMatrices);return this._loadFloatAccessorAsync("/accessors/".concat(s.index),s)},n.prototype._updateBoneMatrices=function(t,e){for(var s=0,r=t.bones;s<r.length;s++){var a=r[s],c=i.Matrix.Identity(),d=a._index;e&&d!==-1&&(i.Matrix.FromArrayToRef(e,d*16,c),c.invertToRef(c));var u=a.getParent();u&&c.multiplyToRef(u.getAbsoluteInverseBindMatrix(),c),a.updateMatrix(c,!1,!1),a._updateAbsoluteBindMatrices(void 0,!1)}},n.prototype._getNodeMatrix=function(t){return t.matrix?i.Matrix.FromArray(t.matrix):i.Matrix.Compose(t.scale?i.Vector3.FromArray(t.scale):i.Vector3.One(),t.rotation?i.Quaternion.FromArray(t.rotation):i.Quaternion.Identity(),t.translation?i.Vector3.FromArray(t.translation):i.Vector3.Zero())},n.prototype.loadCameraAsync=function(t,e,s){s===void 0&&(s=function(){});var r=this._extensionsLoadCameraAsync(t,e,s);if(r)return r;var a=new Array;this.logOpen("".concat(t," ").concat(e.name||"")),this._babylonScene._blockEntityCollection=!!this._assetContainer;var c=new i.FreeCamera(e.name||"camera".concat(e.index),i.Vector3.Zero(),this._babylonScene,!1);switch(c._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,c.ignoreParentScaling=!0,e._babylonCamera=c,c.rotation.set(0,Math.PI,0),e.type){case"perspective":{var d=e.perspective;if(!d)throw new Error("".concat(t,": Camera perspective properties are missing"));c.fov=d.yfov,c.minZ=d.znear,c.maxZ=d.zfar||0;break}case"orthographic":{if(!e.orthographic)throw new Error("".concat(t,": Camera orthographic properties are missing"));c.mode=i.Camera.ORTHOGRAPHIC_CAMERA,c.orthoLeft=-e.orthographic.xmag,c.orthoRight=e.orthographic.xmag,c.orthoBottom=-e.orthographic.ymag,c.orthoTop=e.orthographic.ymag,c.minZ=e.orthographic.znear,c.maxZ=e.orthographic.zfar;break}default:throw new Error("".concat(t,": Invalid camera type (").concat(e.type,")"))}return n.AddPointerMetadata(c,t),this._parent.onCameraLoadedObservable.notifyObservers(c),s(c),this.logClose(),Promise.all(a).then(function(){return c})},n.prototype._loadAnimationsAsync=function(){var t=this._gltf.animations;if(!t)return Promise.resolve();for(var e=new Array,s=0;s<t.length;s++){var r=t[s];e.push(this.loadAnimationAsync("/animations/".concat(r.index),r).then(function(a){a.targetedAnimations.length===0&&a.dispose()}))}return Promise.all(e).then(function(){})},n.prototype.loadAnimationAsync=function(t,e){var s=this._extensionsLoadAnimationAsync(t,e);if(s)return s;this._babylonScene._blockEntityCollection=!!this._assetContainer;var r=new i.AnimationGroup(e.name||"animation".concat(e.index),this._babylonScene);r._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e._babylonAnimationGroup=r;var a=new Array;l.Assign(e.channels),l.Assign(e.samplers);for(var c=0,d=e.channels;c<d.length;c++){var u=d[c];a.push(this._loadAnimationChannelAsync("".concat(t,"/channels/").concat(u.index),t,e,u,function(C,v){C.animations=C.animations||[],C.animations.push(v),r.addTargetedAnimation(v,C)}))}return Promise.all(a).then(function(){return r.normalize(0),r})},n.prototype._loadAnimationChannelAsync=function(t,e,s,r,a){var c=this._extensionsLoadAnimationChannelAsync(t,e,s,r,a);if(c)return c;if(r.target.node==null)return Promise.resolve();var d=l.Get("".concat(t,"/target/node"),this._gltf.nodes,r.target.node);if(r.target.path==="weights"&&!d._numMorphTargets||r.target.path!=="weights"&&!d._babylonTransformNode)return Promise.resolve();var u;switch(r.target.path){case"translation":{u=_.nodeAnimationData.translation;break}case"rotation":{u=_.nodeAnimationData.rotation;break}case"scale":{u=_.nodeAnimationData.scale;break}case"weights":{u=_.nodeAnimationData.weights;break}default:throw new Error("".concat(t,"/target/path: Invalid value (").concat(r.target.path,")"))}var C={object:d,info:u};return this._loadAnimationChannelFromTargetInfoAsync(t,e,s,r,C,a)},n.prototype._loadAnimationChannelFromTargetInfoAsync=function(t,e,s,r,a,c){var d=this.parent.targetFps,u=1/d,C=l.Get("".concat(t,"/sampler"),s.samplers,r.sampler);return this._loadAnimationSamplerAsync("".concat(e,"/samplers/").concat(r.sampler),C).then(function(v){for(var F=0,B=a.object,k=a.info,O=0,S=k;O<S.length;O++){var G=S[O],U=G.getStride(B),W=v.input,X=v.output,J=new Array(W.length),Q=0;switch(v.interpolation){case"STEP":{for(var Z=0;Z<W.length;Z++){var ae=G.getValue(B,X,Q,1);Q+=U,J[Z]={frame:W[Z]*d,value:ae,interpolation:1}}break}case"CUBICSPLINE":{for(var Z=0;Z<W.length;Z++){var he=G.getValue(B,X,Q,u);Q+=U;var ae=G.getValue(B,X,Q,1);Q+=U;var oe=G.getValue(B,X,Q,u);Q+=U,J[Z]={frame:W[Z]*d,inTangent:he,value:ae,outTangent:oe}}break}case"LINEAR":{for(var Z=0;Z<W.length;Z++){var ae=G.getValue(B,X,Q,1);Q+=U,J[Z]={frame:W[Z]*d,value:ae}}break}}if(Q>0){var q="".concat(s.name||"animation".concat(s.index),"_channel").concat(r.index,"_").concat(F);G.buildAnimations(B,q,d,J,function(ee,$){++F,c(ee,$)})}}})},n.prototype._loadAnimationSamplerAsync=function(t,e){if(e._data)return e._data;var s=e.interpolation||"LINEAR";switch(s){case"STEP":case"LINEAR":case"CUBICSPLINE":break;default:throw new Error("".concat(t,"/interpolation: Invalid value (").concat(e.interpolation,")"))}var r=l.Get("".concat(t,"/input"),this._gltf.accessors,e.input),a=l.Get("".concat(t,"/output"),this._gltf.accessors,e.output);return e._data=Promise.all([this._loadFloatAccessorAsync("/accessors/".concat(r.index),r),this._loadFloatAccessorAsync("/accessors/".concat(a.index),a)]).then(function(c){var d=c[0],u=c[1];return{input:d,interpolation:s,output:u}}),e._data},n.prototype.loadBufferAsync=function(t,e,s,r){var a=this._extensionsLoadBufferAsync(t,e,s,r);if(a)return a;if(!e._data)if(e.uri)e._data=this.loadUriAsync("".concat(t,"/uri"),e,e.uri);else{if(!this._bin)throw new Error("".concat(t,": Uri is missing or the binary glTF is missing its binary chunk"));e._data=this._bin.readAsync(0,e.byteLength)}return e._data.then(function(c){try{return new Uint8Array(c.buffer,c.byteOffset+s,r)}catch(d){throw new Error("".concat(t,": ").concat(d.message))}})},n.prototype.loadBufferViewAsync=function(t,e){var s=this._extensionsLoadBufferViewAsync(t,e);if(s)return s;if(e._data)return e._data;var r=l.Get("".concat(t,"/buffer"),this._gltf.buffers,e.buffer);return e._data=this.loadBufferAsync("/buffers/".concat(r.index),r,e.byteOffset||0,e.byteLength),e._data},n.prototype._loadAccessorAsync=function(t,e,s){var r=this;if(e._data)return e._data;var a=n._GetNumComponents(t,e.type),c=a*i.VertexBuffer.GetTypeByteLength(e.componentType),d=a*e.count;if(e.bufferView==null)e._data=Promise.resolve(new s(d));else{var u=l.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(u.index),u).then(function(v){if(e.componentType===5126&&!e.normalized&&(!u.byteStride||u.byteStride===c))return n._GetTypedArray(t,e.componentType,v,e.byteOffset,d);var F=new s(d);return i.VertexBuffer.ForEach(v,e.byteOffset||0,u.byteStride||c,a,e.componentType,F.length,e.normalized||!1,function(B,k){F[k]=B}),F})}if(e.sparse){var C=e.sparse;e._data=e._data.then(function(v){var F=v,B=l.Get("".concat(t,"/sparse/indices/bufferView"),r._gltf.bufferViews,C.indices.bufferView),k=l.Get("".concat(t,"/sparse/values/bufferView"),r._gltf.bufferViews,C.values.bufferView);return Promise.all([r.loadBufferViewAsync("/bufferViews/".concat(B.index),B),r.loadBufferViewAsync("/bufferViews/".concat(k.index),k)]).then(function(O){var S=O[0],G=O[1],U=n._GetTypedArray("".concat(t,"/sparse/indices"),C.indices.componentType,S,C.indices.byteOffset,C.count),W=a*C.count,X;if(e.componentType===5126&&!e.normalized)X=n._GetTypedArray("".concat(t,"/sparse/values"),e.componentType,G,C.values.byteOffset,W);else{var J=n._GetTypedArray("".concat(t,"/sparse/values"),e.componentType,G,C.values.byteOffset,W);X=new s(W),i.VertexBuffer.ForEach(J,0,c,a,e.componentType,X.length,e.normalized||!1,function(oe,q){X[q]=oe})}for(var Q=0,Z=0;Z<U.length;Z++)for(var ae=U[Z]*a,he=0;he<a;he++)F[ae++]=X[Q++];return F})})}return e._data},n.prototype._loadFloatAccessorAsync=function(t,e){return this._loadAccessorAsync(t,e,Float32Array)},n.prototype._loadIndicesAccessorAsync=function(t,e){if(e.type!=="SCALAR")throw new Error("".concat(t,"/type: Invalid value ").concat(e.type));if(e.componentType!==5121&&e.componentType!==5123&&e.componentType!==5125)throw new Error("".concat(t,"/componentType: Invalid value ").concat(e.componentType));if(e._data)return e._data;if(e.sparse){var s=n._GetTypedArrayConstructor("".concat(t,"/componentType"),e.componentType);e._data=this._loadAccessorAsync(t,e,s)}else{var r=l.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(r.index),r).then(function(a){return n._GetTypedArray(t,e.componentType,a,e.byteOffset,e.count)})}return e._data},n.prototype._loadVertexBufferViewAsync=function(t){if(t._babylonBuffer)return t._babylonBuffer;var e=this._babylonScene.getEngine();return t._babylonBuffer=this.loadBufferViewAsync("/bufferViews/".concat(t.index),t).then(function(s){return new i.Buffer(e,s,!1)}),t._babylonBuffer},n.prototype._loadVertexAccessorAsync=function(t,e,s){var r;if(!((r=e._babylonVertexBuffer)===null||r===void 0)&&r[s])return e._babylonVertexBuffer[s];e._babylonVertexBuffer||(e._babylonVertexBuffer={});var a=this._babylonScene.getEngine();if(e.sparse||e.bufferView==null)e._babylonVertexBuffer[s]=this._loadFloatAccessorAsync(t,e).then(function(d){return new i.VertexBuffer(a,d,s,!1)});else{var c=l.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._babylonVertexBuffer[s]=this._loadVertexBufferViewAsync(c).then(function(d){var u=n._GetNumComponents(t,e.type);return new i.VertexBuffer(a,d,s,!1,void 0,c.byteStride,void 0,e.byteOffset,u,e.componentType,e.normalized,!0,void 0,!0)})}return e._babylonVertexBuffer[s]},n.prototype._loadMaterialMetallicRoughnessPropertiesAsync=function(t,e,s){if(!(s instanceof i.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var r=new Array;return e&&(e.baseColorFactor?(s.albedoColor=i.Color3.FromArray(e.baseColorFactor),s.alpha=e.baseColorFactor[3]):s.albedoColor=i.Color3.White(),s.metallic=e.metallicFactor==null?1:e.metallicFactor,s.roughness=e.roughnessFactor==null?1:e.roughnessFactor,e.baseColorTexture&&r.push(this.loadTextureInfoAsync("".concat(t,"/baseColorTexture"),e.baseColorTexture,function(a){a.name="".concat(s.name," (Base Color)"),s.albedoTexture=a})),e.metallicRoughnessTexture&&(e.metallicRoughnessTexture.nonColorData=!0,r.push(this.loadTextureInfoAsync("".concat(t,"/metallicRoughnessTexture"),e.metallicRoughnessTexture,function(a){a.name="".concat(s.name," (Metallic Roughness)"),s.metallicTexture=a})),s.useMetallnessFromMetallicTextureBlue=!0,s.useRoughnessFromMetallicTextureGreen=!0,s.useRoughnessFromMetallicTextureAlpha=!1)),Promise.all(r).then(function(){})},n.prototype._loadMaterialAsync=function(t,e,s,r,a){a===void 0&&(a=function(){});var c=this._extensionsLoadMaterialAsync(t,e,s,r,a);if(c)return c;e._data=e._data||{};var d=e._data[r];if(!d){this.logOpen("".concat(t," ").concat(e.name||""));var u=this.createMaterial(t,e,r);d={babylonMaterial:u,babylonMeshes:[],promise:this.loadMaterialPropertiesAsync(t,e,u)},e._data[r]=d,n.AddPointerMetadata(u,t),this._parent.onMaterialLoadedObservable.notifyObservers(u),this.logClose()}return s&&(d.babylonMeshes.push(s),s.onDisposeObservable.addOnce(function(){var C=d.babylonMeshes.indexOf(s);C!==-1&&d.babylonMeshes.splice(C,1)})),a(d.babylonMaterial),d.promise.then(function(){return d.babylonMaterial})},n.prototype._createDefaultMaterial=function(t,e){this._babylonScene._blockEntityCollection=!!this._assetContainer;var s=new i.PBRMaterial(t,this._babylonScene);return s._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,s.fillMode=e,s.enableSpecularAntiAliasing=!0,s.useRadianceOverAlpha=!this._parent.transparencyAsCoverage,s.useSpecularOverAlpha=!this._parent.transparencyAsCoverage,s.transparencyMode=i.PBRMaterial.PBRMATERIAL_OPAQUE,s.metallic=1,s.roughness=1,s},n.prototype.createMaterial=function(t,e,s){var r=this._extensionsCreateMaterial(t,e,s);if(r)return r;var a=e.name||"material".concat(e.index),c=this._createDefaultMaterial(a,s);return c},n.prototype.loadMaterialPropertiesAsync=function(t,e,s){var r=this._extensionsLoadMaterialPropertiesAsync(t,e,s);if(r)return r;var a=new Array;return a.push(this.loadMaterialBasePropertiesAsync(t,e,s)),e.pbrMetallicRoughness&&a.push(this._loadMaterialMetallicRoughnessPropertiesAsync("".concat(t,"/pbrMetallicRoughness"),e.pbrMetallicRoughness,s)),this.loadMaterialAlphaProperties(t,e,s),Promise.all(a).then(function(){})},n.prototype.loadMaterialBasePropertiesAsync=function(t,e,s){if(!(s instanceof i.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var r=new Array;return s.emissiveColor=e.emissiveFactor?i.Color3.FromArray(e.emissiveFactor):new i.Color3(0,0,0),e.doubleSided&&(s.backFaceCulling=!1,s.twoSidedLighting=!0),e.normalTexture&&(e.normalTexture.nonColorData=!0,r.push(this.loadTextureInfoAsync("".concat(t,"/normalTexture"),e.normalTexture,function(a){a.name="".concat(s.name," (Normal)"),s.bumpTexture=a})),s.invertNormalMapX=!this._babylonScene.useRightHandedSystem,s.invertNormalMapY=this._babylonScene.useRightHandedSystem,e.normalTexture.scale!=null&&s.bumpTexture&&(s.bumpTexture.level=e.normalTexture.scale),s.forceIrradianceInFragment=!0),e.occlusionTexture&&(e.occlusionTexture.nonColorData=!0,r.push(this.loadTextureInfoAsync("".concat(t,"/occlusionTexture"),e.occlusionTexture,function(a){a.name="".concat(s.name," (Occlusion)"),s.ambientTexture=a})),s.useAmbientInGrayScale=!0,e.occlusionTexture.strength!=null&&(s.ambientTextureStrength=e.occlusionTexture.strength)),e.emissiveTexture&&r.push(this.loadTextureInfoAsync("".concat(t,"/emissiveTexture"),e.emissiveTexture,function(a){a.name="".concat(s.name," (Emissive)"),s.emissiveTexture=a})),Promise.all(r).then(function(){})},n.prototype.loadMaterialAlphaProperties=function(t,e,s){if(!(s instanceof i.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var r=e.alphaMode||"OPAQUE";switch(r){case"OPAQUE":{s.transparencyMode=i.PBRMaterial.PBRMATERIAL_OPAQUE,s.alpha=1;break}case"MASK":{s.transparencyMode=i.PBRMaterial.PBRMATERIAL_ALPHATEST,s.alphaCutOff=e.alphaCutoff==null?.5:e.alphaCutoff,s.albedoTexture&&(s.albedoTexture.hasAlpha=!0);break}case"BLEND":{s.transparencyMode=i.PBRMaterial.PBRMATERIAL_ALPHABLEND,s.albedoTexture&&(s.albedoTexture.hasAlpha=!0,s.useAlphaFromAlbedoTexture=!0);break}default:throw new Error("".concat(t,"/alphaMode: Invalid value (").concat(e.alphaMode,")"))}},n.prototype.loadTextureInfoAsync=function(t,e,s){var r=this;s===void 0&&(s=function(){});var a=this._extensionsLoadTextureInfoAsync(t,e,s);if(a)return a;if(this.logOpen("".concat(t)),e.texCoord>=6)throw new Error("".concat(t,"/texCoord: Invalid value (").concat(e.texCoord,")"));var c=l.Get("".concat(t,"/index"),this._gltf.textures,e.index);c._textureInfo=e;var d=this._loadTextureAsync("/textures/".concat(e.index),c,function(u){u.coordinatesIndex=e.texCoord||0,n.AddPointerMetadata(u,t),r._parent.onTextureLoadedObservable.notifyObservers(u),s(u)});return this.logClose(),d},n.prototype._loadTextureAsync=function(t,e,s){s===void 0&&(s=function(){});var r=this._extensionsLoadTextureAsync(t,e,s);if(r)return r;this.logOpen("".concat(t," ").concat(e.name||""));var a=e.sampler==null?n.DefaultSampler:l.Get("".concat(t,"/sampler"),this._gltf.samplers,e.sampler),c=l.Get("".concat(t,"/source"),this._gltf.images,e.source),d=this._createTextureAsync(t,a,c,s,void 0,!e._textureInfo.nonColorData);return this.logClose(),d},n.prototype._createTextureAsync=function(t,e,s,r,a,c){var d=this;r===void 0&&(r=function(){});var u=this._loadSampler("/samplers/".concat(e.index),e),C=new Array,v=new i.Deferred;this._babylonScene._blockEntityCollection=!!this._assetContainer;var F={noMipmap:u.noMipMaps,invertY:!1,samplingMode:u.samplingMode,onLoad:function(){d._disposed||v.resolve()},onError:function(k,O){d._disposed||v.reject(new Error("".concat(t,": ").concat(O&&O.message?O.message:k||"Failed to load texture")))},mimeType:s.mimeType,loaderOptions:a,useSRGBBuffer:!!c&&this._parent.useSRGBBuffers},B=new i.Texture(null,this._babylonScene,F);return B._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,C.push(v.promise),C.push(this.loadImageAsync("/images/".concat(s.index),s).then(function(k){var O=s.uri||"".concat(d._fileName,"#image").concat(s.index),S="data:".concat(d._uniqueRootUrl).concat(O);B.updateURL(S,k)})),B.wrapU=u.wrapU,B.wrapV=u.wrapV,r(B),Promise.all(C).then(function(){return B})},n.prototype._loadSampler=function(t,e){return e._data||(e._data={noMipMaps:e.minFilter===9728||e.minFilter===9729,samplingMode:n._GetTextureSamplingMode(t,e),wrapU:n._GetTextureWrapMode("".concat(t,"/wrapS"),e.wrapS),wrapV:n._GetTextureWrapMode("".concat(t,"/wrapT"),e.wrapT)}),e._data},n.prototype.loadImageAsync=function(t,e){if(!e._data){if(this.logOpen("".concat(t," ").concat(e.name||"")),e.uri)e._data=this.loadUriAsync("".concat(t,"/uri"),e,e.uri);else{var s=l.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(s.index),s)}this.logClose()}return e._data},n.prototype.loadUriAsync=function(t,e,s){var r=this,a=this._extensionsLoadUriAsync(t,e,s);if(a)return a;if(!n._ValidateUri(s))throw new Error("".concat(t,": '").concat(s,"' is invalid"));if((0,i.IsBase64DataUrl)(s)){var c=new Uint8Array((0,i.DecodeBase64UrlToBinary)(s));return this.log("".concat(t,": Decoded ").concat(s.substr(0,64),"... (").concat(c.length," bytes)")),Promise.resolve(c)}return this.log("".concat(t,": Loading ").concat(s)),this._parent.preprocessUrlAsync(this._rootUrl+s).then(function(d){return new Promise(function(u,C){r._parent._loadFile(r._babylonScene,d,function(v){r._disposed||(r.log("".concat(t,": Loaded ").concat(s," (").concat(v.byteLength," bytes)")),u(new Uint8Array(v)))},!0,function(v){C(new i.LoadFileError("".concat(t,": Failed to load '").concat(s,"'").concat(v?": "+v.status+" "+v.statusText:""),v))})})})},n.AddPointerMetadata=function(t,e){t.metadata=t.metadata||{};var s=t._internalMetadata=t._internalMetadata||{},r=s.gltf=s.gltf||{},a=r.pointers=r.pointers||[];a.push(e)},n._GetTextureWrapMode=function(t,e){switch(e=e??10497,e){case 33071:return i.Texture.CLAMP_ADDRESSMODE;case 33648:return i.Texture.MIRROR_ADDRESSMODE;case 10497:return i.Texture.WRAP_ADDRESSMODE;default:return i.Logger.Warn("".concat(t,": Invalid value (").concat(e,")")),i.Texture.WRAP_ADDRESSMODE}},n._GetTextureSamplingMode=function(t,e){var s=e.magFilter==null?9729:e.magFilter,r=e.minFilter==null?9987:e.minFilter;if(s===9729)switch(r){case 9728:return i.Texture.LINEAR_NEAREST;case 9729:return i.Texture.LINEAR_LINEAR;case 9984:return i.Texture.LINEAR_NEAREST_MIPNEAREST;case 9985:return i.Texture.LINEAR_LINEAR_MIPNEAREST;case 9986:return i.Texture.LINEAR_NEAREST_MIPLINEAR;case 9987:return i.Texture.LINEAR_LINEAR_MIPLINEAR;default:return i.Logger.Warn("".concat(t,"/minFilter: Invalid value (").concat(r,")")),i.Texture.LINEAR_LINEAR_MIPLINEAR}else switch(s!==9728&&i.Logger.Warn("".concat(t,"/magFilter: Invalid value (").concat(s,")")),r){case 9728:return i.Texture.NEAREST_NEAREST;case 9729:return i.Texture.NEAREST_LINEAR;case 9984:return i.Texture.NEAREST_NEAREST_MIPNEAREST;case 9985:return i.Texture.NEAREST_LINEAR_MIPNEAREST;case 9986:return i.Texture.NEAREST_NEAREST_MIPLINEAR;case 9987:return i.Texture.NEAREST_LINEAR_MIPLINEAR;default:return i.Logger.Warn("".concat(t,"/minFilter: Invalid value (").concat(r,")")),i.Texture.NEAREST_NEAREST_MIPNEAREST}},n._GetTypedArrayConstructor=function(t,e){switch(e){case 5120:return Int8Array;case 5121:return Uint8Array;case 5122:return Int16Array;case 5123:return Uint16Array;case 5125:return Uint32Array;case 5126:return Float32Array;default:throw new Error("".concat(t,": Invalid component type ").concat(e))}},n._GetTypedArray=function(t,e,s,r,a){var c=s.buffer;r=s.byteOffset+(r||0);var d=n._GetTypedArrayConstructor("".concat(t,"/componentType"),e),u=i.VertexBuffer.GetTypeByteLength(e);return r%u!==0?(i.Logger.Warn("".concat(t,": Copying buffer as byte offset (").concat(r,") is not a multiple of component type byte length (").concat(u,")")),new d(c.slice(r,r+a*u),0)):new d(c,r,a)},n._GetNumComponents=function(t,e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}throw new Error("".concat(t,": Invalid type (").concat(e,")"))},n._ValidateUri=function(t){return i.Tools.IsBase64(t)||t.indexOf("..")===-1},n._GetDrawMode=function(t,e){switch(e==null&&(e=4),e){case 0:return i.Material.PointListDrawMode;case 1:return i.Material.LineListDrawMode;case 2:return i.Material.LineLoopDrawMode;case 3:return i.Material.LineStripDrawMode;case 4:return i.Material.TriangleFillMode;case 5:return i.Material.TriangleStripDrawMode;case 6:return i.Material.TriangleFanDrawMode}throw new Error("".concat(t,": Invalid mesh primitive mode (").concat(e,")"))},n.prototype._compileMaterialsAsync=function(){var t=this;this._parent._startPerformanceCounter("Compile materials");var e=new Array;if(this._gltf.materials)for(var s=0,r=this._gltf.materials;s<r.length;s++){var a=r[s];if(a._data)for(var c in a._data)for(var d=a._data[c],u=0,C=d.babylonMeshes;u<C.length;u++){var v=C[u];v.computeWorldMatrix(!0);var F=d.babylonMaterial;e.push(F.forceCompilationAsync(v)),e.push(F.forceCompilationAsync(v,{useInstances:!0})),this._parent.useClipPlane&&(e.push(F.forceCompilationAsync(v,{clipPlane:!0})),e.push(F.forceCompilationAsync(v,{clipPlane:!0,useInstances:!0})))}}return Promise.all(e).then(function(){t._parent._endPerformanceCounter("Compile materials")})},n.prototype._compileShadowGeneratorsAsync=function(){var t=this;this._parent._startPerformanceCounter("Compile shadow generators");for(var e=new Array,s=this._babylonScene.lights,r=0,a=s;r<a.length;r++){var c=a[r],d=c.getShadowGenerator();d&&e.push(d.forceCompilationAsync())}return Promise.all(e).then(function(){t._parent._endPerformanceCounter("Compile shadow generators")})},n.prototype._forEachExtensions=function(t){for(var e=0,s=this._extensions;e<s.length;e++){var r=s[e];r.enabled&&t(r)}},n.prototype._applyExtensions=function(t,e,s){for(var r=0,a=this._extensions;r<a.length;r++){var c=a[r];if(c.enabled){var d="".concat(c.name,".").concat(e),u=t;u._activeLoaderExtensionFunctions=u._activeLoaderExtensionFunctions||{};var C=u._activeLoaderExtensionFunctions;if(!C[d]){C[d]=!0;try{var v=s(c);if(v)return v}finally{delete C[d]}}}}return null},n.prototype._extensionsOnLoading=function(){this._forEachExtensions(function(t){return t.onLoading&&t.onLoading()})},n.prototype._extensionsOnReady=function(){this._forEachExtensions(function(t){return t.onReady&&t.onReady()})},n.prototype._extensionsLoadSceneAsync=function(t,e){return this._applyExtensions(e,"loadScene",function(s){return s.loadSceneAsync&&s.loadSceneAsync(t,e)})},n.prototype._extensionsLoadNodeAsync=function(t,e,s){return this._applyExtensions(e,"loadNode",function(r){return r.loadNodeAsync&&r.loadNodeAsync(t,e,s)})},n.prototype._extensionsLoadCameraAsync=function(t,e,s){return this._applyExtensions(e,"loadCamera",function(r){return r.loadCameraAsync&&r.loadCameraAsync(t,e,s)})},n.prototype._extensionsLoadVertexDataAsync=function(t,e,s){return this._applyExtensions(e,"loadVertexData",function(r){return r._loadVertexDataAsync&&r._loadVertexDataAsync(t,e,s)})},n.prototype._extensionsLoadMeshPrimitiveAsync=function(t,e,s,r,a,c){return this._applyExtensions(a,"loadMeshPrimitive",function(d){return d._loadMeshPrimitiveAsync&&d._loadMeshPrimitiveAsync(t,e,s,r,a,c)})},n.prototype._extensionsLoadMaterialAsync=function(t,e,s,r,a){return this._applyExtensions(e,"loadMaterial",function(c){return c._loadMaterialAsync&&c._loadMaterialAsync(t,e,s,r,a)})},n.prototype._extensionsCreateMaterial=function(t,e,s){return this._applyExtensions(e,"createMaterial",function(r){return r.createMaterial&&r.createMaterial(t,e,s)})},n.prototype._extensionsLoadMaterialPropertiesAsync=function(t,e,s){return this._applyExtensions(e,"loadMaterialProperties",function(r){return r.loadMaterialPropertiesAsync&&r.loadMaterialPropertiesAsync(t,e,s)})},n.prototype._extensionsLoadTextureInfoAsync=function(t,e,s){return this._applyExtensions(e,"loadTextureInfo",function(r){return r.loadTextureInfoAsync&&r.loadTextureInfoAsync(t,e,s)})},n.prototype._extensionsLoadTextureAsync=function(t,e,s){return this._applyExtensions(e,"loadTexture",function(r){return r._loadTextureAsync&&r._loadTextureAsync(t,e,s)})},n.prototype._extensionsLoadAnimationAsync=function(t,e){return this._applyExtensions(e,"loadAnimation",function(s){return s.loadAnimationAsync&&s.loadAnimationAsync(t,e)})},n.prototype._extensionsLoadAnimationChannelAsync=function(t,e,s,r,a){return this._applyExtensions(s,"loadAnimationChannel",function(c){return c._loadAnimationChannelAsync&&c._loadAnimationChannelAsync(t,e,s,r,a)})},n.prototype._extensionsLoadSkinAsync=function(t,e,s){return this._applyExtensions(s,"loadSkin",function(r){return r._loadSkinAsync&&r._loadSkinAsync(t,e,s)})},n.prototype._extensionsLoadUriAsync=function(t,e,s){return this._applyExtensions(e,"loadUri",function(r){return r._loadUriAsync&&r._loadUriAsync(t,e,s)})},n.prototype._extensionsLoadBufferViewAsync=function(t,e){return this._applyExtensions(e,"loadBufferView",function(s){return s.loadBufferViewAsync&&s.loadBufferViewAsync(t,e)})},n.prototype._extensionsLoadBufferAsync=function(t,e,s,r){return this._applyExtensions(e,"loadBuffer",function(a){return a.loadBufferAsync&&a.loadBufferAsync(t,e,s,r)})},n.LoadExtensionAsync=function(t,e,s,r){if(!e.extensions)return null;var a=e.extensions,c=a[s];return c?r("".concat(t,"/extensions/").concat(s),c):null},n.LoadExtraAsync=function(t,e,s,r){if(!e.extras)return null;var a=e.extras,c=a[s];return c?r("".concat(t,"/extras/").concat(s),c):null},n.prototype.isExtensionUsed=function(t){return!!this._gltf.extensionsUsed&&this._gltf.extensionsUsed.indexOf(t)!==-1},n.prototype.logOpen=function(t){this._parent._logOpen(t)},n.prototype.logClose=function(){this._parent._logClose()},n.prototype.log=function(t){this._parent._log(t)},n.prototype.startPerformanceCounter=function(t){this._parent._startPerformanceCounter(t)},n.prototype.endPerformanceCounter=function(t){this._parent._endPerformanceCounter(t)},n._RegisteredExtensions={},n.DefaultSampler={index:-1},n}();h.GLTFFileLoader._CreateGLTF2Loader=function(n){return new o(n)}},"../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts":(R,g,E)=>{E.r(g),E.d(g,{AnimationPropertyInfo:()=>o,TransformNodeAnimationPropertyInfo:()=>n,WeightAnimationPropertyInfo:()=>t,getQuaternion:()=>A,getVector3:()=>_,getWeights:()=>l,nodeAnimationData:()=>e});var i=E("../../../../node_modules/tslib/tslib.es6.mjs"),h=E("babylonjs/Misc/observable");function _(s,r,a,c){return h.Vector3.FromArray(r,a).scaleInPlace(c)}function A(s,r,a,c){return h.Quaternion.FromArray(r,a).scaleInPlace(c)}function l(s,r,a,c){for(var d=new Array(s._numMorphTargets),u=0;u<d.length;u++)d[u]=r[a++]*c;return d}var o=function(){function s(r,a,c,d){this.type=r,this.name=a,this.getValue=c,this.getStride=d}return s.prototype._buildAnimation=function(r,a,c){var d=new h.Animation(r,this.name,a,this.type);return d.setKeys(c),d},s}(),n=function(s){(0,i.__extends)(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.buildAnimations=function(a,c,d,u,C){C(a._babylonTransformNode,this._buildAnimation(c,d,u))},r}(o),t=function(s){(0,i.__extends)(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.buildAnimations=function(a,c,d,u,C){if(a._numMorphTargets)for(var v=function(k){var O=new h.Animation("".concat(c,"_").concat(k),F.name,d,F.type);if(O.setKeys(u.map(function(J){return{frame:J.frame,inTangent:J.inTangent?J.inTangent[k]:void 0,value:J.value[k],outTangent:J.outTangent?J.outTangent[k]:void 0,interpolation:J.interpolation}})),a._primitiveBabylonMeshes)for(var S=0,G=a._primitiveBabylonMeshes;S<G.length;S++){var U=G[S];if(U.morphTargetManager){var W=U.morphTargetManager.getTarget(k),X=O.clone();W.animations.push(X),C(W,X)}}},F=this,B=0;B<a._numMorphTargets;B++)v(B)},r}(o),e={translation:[new n(h.Animation.ANIMATIONTYPE_VECTOR3,"position",_,function(){return 3})],rotation:[new n(h.Animation.ANIMATIONTYPE_QUATERNION,"rotationQuaternion",A,function(){return 4})],scale:[new n(h.Animation.ANIMATIONTYPE_VECTOR3,"scaling",_,function(){return 3})],weights:[new t(h.Animation.ANIMATIONTYPE_FLOAT,"influence",l,function(s){return s._numMorphTargets})]}},"../../../dev/loaders/src/glTF/2.0/glTFLoaderExtension.ts":(R,g,E)=>{E.r(g)},"../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts":(R,g,E)=>{E.r(g)},"../../../dev/loaders/src/glTF/2.0/index.ts":(R,g,E)=>{E.r(g),E.d(g,{ArrayItem:()=>i.ArrayItem,EXT_lights_image_based:()=>h.EXT_lights_image_based,EXT_mesh_gpu_instancing:()=>h.EXT_mesh_gpu_instancing,EXT_meshopt_compression:()=>h.EXT_meshopt_compression,EXT_texture_avif:()=>h.EXT_texture_avif,EXT_texture_webp:()=>h.EXT_texture_webp,ExtrasAsMetadata:()=>h.ExtrasAsMetadata,GLTFLoader:()=>i.GLTFLoader,KHR_animation_pointer:()=>h.KHR_animation_pointer,KHR_draco_mesh_compression:()=>h.KHR_draco_mesh_compression,KHR_interactivity:()=>h.KHR_interactivity,KHR_lights:()=>h.KHR_lights,KHR_materials_anisotropy:()=>h.KHR_materials_anisotropy,KHR_materials_clearcoat:()=>h.KHR_materials_clearcoat,KHR_materials_diffuse_transmission:()=>h.KHR_materials_diffuse_transmission,KHR_materials_dispersion:()=>h.KHR_materials_dispersion,KHR_materials_emissive_strength:()=>h.KHR_materials_emissive_strength,KHR_materials_ior:()=>h.KHR_materials_ior,KHR_materials_iridescence:()=>h.KHR_materials_iridescence,KHR_materials_pbrSpecularGlossiness:()=>h.KHR_materials_pbrSpecularGlossiness,KHR_materials_sheen:()=>h.KHR_materials_sheen,KHR_materials_specular:()=>h.KHR_materials_specular,KHR_materials_transmission:()=>h.KHR_materials_transmission,KHR_materials_unlit:()=>h.KHR_materials_unlit,KHR_materials_variants:()=>h.KHR_materials_variants,KHR_materials_volume:()=>h.KHR_materials_volume,KHR_mesh_quantization:()=>h.KHR_mesh_quantization,KHR_texture_basisu:()=>h.KHR_texture_basisu,KHR_texture_transform:()=>h.KHR_texture_transform,KHR_xmp_json_ld:()=>h.KHR_xmp_json_ld,MSFT_audio_emitter:()=>h.MSFT_audio_emitter,MSFT_lod:()=>h.MSFT_lod,MSFT_minecraftMesh:()=>h.MSFT_minecraftMesh,MSFT_sRGBFactors:()=>h.MSFT_sRGBFactors});var i=E("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts");E("../../../dev/loaders/src/glTF/2.0/glTFLoaderExtension.ts"),E("../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts");var h=E("../../../dev/loaders/src/glTF/2.0/Extensions/index.ts")},"../../../dev/loaders/src/glTF/glTFFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFFileLoader:()=>t,GLTFLoaderAnimationStartMode:()=>o,GLTFLoaderCoordinateSystemMode:()=>l,GLTFLoaderState:()=>n});var i=E("babylonjs/Misc/observable"),h=E("../../../dev/loaders/src/glTF/glTFValidation.ts");function _(e,s,r){try{return Promise.resolve(new Uint8Array(e,s,r))}catch(a){return Promise.reject(a)}}function A(e,s,r){try{if(s<0||s>=e.byteLength)throw new RangeError("Offset is out of range.");if(s+r>e.byteLength)throw new RangeError("Length is out of range.");return Promise.resolve(new Uint8Array(e.buffer,e.byteOffset+s,r))}catch(a){return Promise.reject(a)}}var l;(function(e){e[e.AUTO=0]="AUTO",e[e.FORCE_RIGHT_HANDED=1]="FORCE_RIGHT_HANDED"})(l||(l={}));var o;(function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.ALL=2]="ALL"})(o||(o={}));var n;(function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.COMPLETE=2]="COMPLETE"})(n||(n={}));var t=function(){function e(){this.onParsedObservable=new i.Observable,this.coordinateSystemMode=l.AUTO,this.animationStartMode=o.FIRST,this.compileMaterials=!1,this.useClipPlane=!1,this.compileShadowGenerators=!1,this.transparencyAsCoverage=!1,this.useRangeRequests=!1,this.createInstances=!0,this.alwaysComputeBoundingBox=!1,this.loadAllMaterials=!1,this.loadOnlyMaterials=!1,this.skipMaterials=!1,this.useSRGBBuffers=!0,this.targetFps=60,this.alwaysComputeSkeletonRootNode=!1,this.preprocessUrlAsync=function(s){return Promise.resolve(s)},this.onMeshLoadedObservable=new i.Observable,this.onSkinLoadedObservable=new i.Observable,this.onTextureLoadedObservable=new i.Observable,this.onMaterialLoadedObservable=new i.Observable,this.onCameraLoadedObservable=new i.Observable,this.onCompleteObservable=new i.Observable,this.onErrorObservable=new i.Observable,this.onDisposeObservable=new i.Observable,this.onExtensionLoadedObservable=new i.Observable,this.validate=!1,this.onValidatedObservable=new i.Observable,this._loader=null,this._state=null,this._requests=new Array,this.name="gltf",this.extensions={".gltf":{isBinary:!1},".glb":{isBinary:!0}},this.onLoaderStateChangedObservable=new i.Observable,this._logIndentLevel=0,this._loggingEnabled=!1,this._log=this._logDisabled,this._capturePerformanceCounters=!1,this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled}return Object.defineProperty(e.prototype,"onParsed",{set:function(s){this._onParsedObserver&&this.onParsedObservable.remove(this._onParsedObserver),this._onParsedObserver=this.onParsedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMeshLoaded",{set:function(s){this._onMeshLoadedObserver&&this.onMeshLoadedObservable.remove(this._onMeshLoadedObserver),this._onMeshLoadedObserver=this.onMeshLoadedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTextureLoaded",{set:function(s){this._onTextureLoadedObserver&&this.onTextureLoadedObservable.remove(this._onTextureLoadedObserver),this._onTextureLoadedObserver=this.onTextureLoadedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMaterialLoaded",{set:function(s){this._onMaterialLoadedObserver&&this.onMaterialLoadedObservable.remove(this._onMaterialLoadedObserver),this._onMaterialLoadedObserver=this.onMaterialLoadedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCameraLoaded",{set:function(s){this._onCameraLoadedObserver&&this.onCameraLoadedObservable.remove(this._onCameraLoadedObserver),this._onCameraLoadedObserver=this.onCameraLoadedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{set:function(s){this._onCompleteObserver&&this.onCompleteObservable.remove(this._onCompleteObserver),this._onCompleteObserver=this.onCompleteObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{set:function(s){this._onErrorObserver&&this.onErrorObservable.remove(this._onErrorObserver),this._onErrorObserver=this.onErrorObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{set:function(s){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onExtensionLoaded",{set:function(s){this._onExtensionLoadedObserver&&this.onExtensionLoadedObservable.remove(this._onExtensionLoadedObserver),this._onExtensionLoadedObserver=this.onExtensionLoadedObservable.add(s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loggingEnabled",{get:function(){return this._loggingEnabled},set:function(s){this._loggingEnabled!==s&&(this._loggingEnabled=s,this._loggingEnabled?this._log=this._logEnabled:this._log=this._logDisabled)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"capturePerformanceCounters",{get:function(){return this._capturePerformanceCounters},set:function(s){this._capturePerformanceCounters!==s&&(this._capturePerformanceCounters=s,this._capturePerformanceCounters?(this._startPerformanceCounter=this._startPerformanceCounterEnabled,this._endPerformanceCounter=this._endPerformanceCounterEnabled):(this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onValidated",{set:function(s){this._onValidatedObserver&&this.onValidatedObservable.remove(this._onValidatedObserver),this._onValidatedObserver=this.onValidatedObservable.add(s)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._loader&&(this._loader.dispose(),this._loader=null);for(var s=0,r=this._requests;s<r.length;s++){var a=r[s];a.abort()}this._requests.length=0,delete this._progressCallback,this.preprocessUrlAsync=function(c){return Promise.resolve(c)},this.onMeshLoadedObservable.clear(),this.onSkinLoadedObservable.clear(),this.onTextureLoadedObservable.clear(),this.onMaterialLoadedObservable.clear(),this.onCameraLoadedObservable.clear(),this.onCompleteObservable.clear(),this.onExtensionLoadedObservable.clear(),this.onDisposeObservable.notifyObservers(void 0),this.onDisposeObservable.clear()},e.prototype.loadFile=function(s,r,a,c,d,u,C,v){var F=this;if(ArrayBuffer.isView(r))return this._loadBinary(s,r,a,c,C,v),null;this._progressCallback=d;var B=r.name||i.Tools.GetFilename(r);if(u){if(this.useRangeRequests){this.validate&&i.Logger.Warn("glTF validation is not supported when range requests are enabled");var k={abort:function(){},onCompleteObservable:new i.Observable},O={readAsync:function(S,G){return new Promise(function(U,W){F._loadFile(s,r,function(X){U(new Uint8Array(X))},!0,function(X){W(X)},function(X){X.setRequestHeader("Range","bytes=".concat(S,"-").concat(S+G-1))})})},byteLength:0};return this._unpackBinaryAsync(new i.DataReader(O)).then(function(S){k.onCompleteObservable.notifyObservers(k),c(S)},C?function(S){return C(void 0,S)}:void 0),k}return this._loadFile(s,r,function(S){F._validate(s,new Uint8Array(S,0,S.byteLength),a,B),F._unpackBinaryAsync(new i.DataReader({readAsync:function(G,U){return _(S,G,U)},byteLength:S.byteLength})).then(function(G){c(G)},C?function(G){return C(void 0,G)}:void 0)},!0,C)}else return this._loadFile(s,r,function(S){try{F._validate(s,S,a,B),c({json:F._parseJson(S)})}catch{C&&C()}},!1,C)},e.prototype._loadBinary=function(s,r,a,c,d,u){this._validate(s,new Uint8Array(r.buffer,r.byteOffset,r.byteLength),a,u),this._unpackBinaryAsync(new i.DataReader({readAsync:function(C,v){return A(r,C,v)},byteLength:r.byteLength})).then(function(C){c(C)},d?function(C){return d(void 0,C)}:void 0)},e.prototype.importMeshAsync=function(s,r,a,c,d,u){var C=this;return Promise.resolve().then(function(){return C.onParsedObservable.notifyObservers(a),C.onParsedObservable.clear(),C._log("Loading ".concat(u||"")),C._loader=C._getLoader(a),C._loader.importMeshAsync(s,r,null,a,c,d,u)})},e.prototype.loadAsync=function(s,r,a,c,d){var u=this;return Promise.resolve().then(function(){return u.onParsedObservable.notifyObservers(r),u.onParsedObservable.clear(),u._log("Loading ".concat(d||"")),u._loader=u._getLoader(r),u._loader.loadAsync(s,r,a,c,d)})},e.prototype.loadAssetContainerAsync=function(s,r,a,c,d){var u=this;return Promise.resolve().then(function(){u.onParsedObservable.notifyObservers(r),u.onParsedObservable.clear(),u._log("Loading ".concat(d||"")),u._loader=u._getLoader(r);var C=new i.AssetContainer(s),v=[];u.onMaterialLoadedObservable.add(function(O){v.push(O)});var F=[];u.onTextureLoadedObservable.add(function(O){F.push(O)});var B=[];u.onCameraLoadedObservable.add(function(O){B.push(O)});var k=[];return u.onMeshLoadedObservable.add(function(O){O.morphTargetManager&&k.push(O.morphTargetManager)}),u._loader.importMeshAsync(null,s,C,r,a,c,d).then(function(O){return Array.prototype.push.apply(C.geometries,O.geometries),Array.prototype.push.apply(C.meshes,O.meshes),Array.prototype.push.apply(C.particleSystems,O.particleSystems),Array.prototype.push.apply(C.skeletons,O.skeletons),Array.prototype.push.apply(C.animationGroups,O.animationGroups),Array.prototype.push.apply(C.materials,v),Array.prototype.push.apply(C.textures,F),Array.prototype.push.apply(C.lights,O.lights),Array.prototype.push.apply(C.transformNodes,O.transformNodes),Array.prototype.push.apply(C.cameras,B),Array.prototype.push.apply(C.morphTargetManagers,k),C})})},e.prototype.canDirectLoad=function(s){return s.indexOf("asset")!==-1&&s.indexOf("version")!==-1||s.startsWith("data:base64,"+e._MagicBase64Encoded)||s.startsWith("data:;base64,"+e._MagicBase64Encoded)||s.startsWith("data:application/octet-stream;base64,"+e._MagicBase64Encoded)||s.startsWith("data:model/gltf-binary;base64,"+e._MagicBase64Encoded)},e.prototype.directLoad=function(s,r){if(r.startsWith("base64,"+e._MagicBase64Encoded)||r.startsWith(";base64,"+e._MagicBase64Encoded)||r.startsWith("application/octet-stream;base64,"+e._MagicBase64Encoded)||r.startsWith("model/gltf-binary;base64,"+e._MagicBase64Encoded)){var a=(0,i.DecodeBase64UrlToBinary)(r);return this._validate(s,new Uint8Array(a,0,a.byteLength)),this._unpackBinaryAsync(new i.DataReader({readAsync:function(c,d){return _(a,c,d)},byteLength:a.byteLength}))}return this._validate(s,r),Promise.resolve({json:this._parseJson(r)})},e.prototype.createPlugin=function(){return new e},Object.defineProperty(e.prototype,"loaderState",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.whenCompleteAsync=function(){var s=this;return new Promise(function(r,a){s.onCompleteObservable.addOnce(function(){r()}),s.onErrorObservable.addOnce(function(c){a(c)})})},e.prototype._setState=function(s){this._state!==s&&(this._state=s,this.onLoaderStateChangedObservable.notifyObservers(this._state),this._log(n[this._state]))},e.prototype._loadFile=function(s,r,a,c,d,u){var C=this,v=s._loadFile(r,a,function(F){C._onProgress(F,v)},!0,c,d,u);return v.onCompleteObservable.add(function(){v._lengthComputable=!0,v._total=v._loaded}),this._requests.push(v),v},e.prototype._onProgress=function(s,r){if(this._progressCallback){r._lengthComputable=s.lengthComputable,r._loaded=s.loaded,r._total=s.total;for(var a=!0,c=0,d=0,u=0,C=this._requests;u<C.length;u++){var v=C[u];if(v._lengthComputable===void 0||v._loaded===void 0||v._total===void 0)return;a=a&&v._lengthComputable,c+=v._loaded,d+=v._total}this._progressCallback({lengthComputable:a,loaded:c,total:a?d:0})}},e.prototype._validate=function(s,r,a,c){var d=this;a===void 0&&(a=""),c===void 0&&(c=""),this.validate&&(this._startPerformanceCounter("Validate JSON"),h.GLTFValidation.ValidateAsync(r,a,c,function(u){return d.preprocessUrlAsync(a+u).then(function(C){return s._loadFileAsync(C,void 0,!0,!0).then(function(v){return new Uint8Array(v,0,v.byteLength)})})}).then(function(u){d._endPerformanceCounter("Validate JSON"),d.onValidatedObservable.notifyObservers(u),d.onValidatedObservable.clear()},function(u){d._endPerformanceCounter("Validate JSON"),i.Tools.Warn("Failed to validate: ".concat(u.message)),d.onValidatedObservable.clear()}))},e.prototype._getLoader=function(s){var r=s.json.asset||{};this._log("Asset version: ".concat(r.version)),r.minVersion&&this._log("Asset minimum version: ".concat(r.minVersion)),r.generator&&this._log("Asset generator: ".concat(r.generator));var a=e._parseVersion(r.version);if(!a)throw new Error("Invalid version: "+r.version);if(r.minVersion!==void 0){var c=e._parseVersion(r.minVersion);if(!c)throw new Error("Invalid minimum version: "+r.minVersion);if(e._compareVersion(c,{major:2,minor:0})>0)throw new Error("Incompatible minimum version: "+r.minVersion)}var d={1:e._CreateGLTF1Loader,2:e._CreateGLTF2Loader},u=d[a.major];if(!u)throw new Error("Unsupported version: "+r.version);return u(this)},e.prototype._parseJson=function(s){this._startPerformanceCounter("Parse JSON"),this._log("JSON length: ".concat(s.length));var r=JSON.parse(s);return this._endPerformanceCounter("Parse JSON"),r},e.prototype._unpackBinaryAsync=function(s){var r=this;return this._startPerformanceCounter("Unpack Binary"),s.loadAsync(20).then(function(){var a={Magic:1179937895},c=s.readUint32();if(c!==a.Magic)throw new i.RuntimeError("Unexpected magic: "+c,i.ErrorCodes.GLTFLoaderUnexpectedMagicError);var d=s.readUint32();r.loggingEnabled&&r._log("Binary version: ".concat(d));var u=s.readUint32();!r.useRangeRequests&&u!==s.buffer.byteLength&&i.Logger.Warn("Length in header does not match actual data length: ".concat(u," != ").concat(s.buffer.byteLength));var C;switch(d){case 1:{C=r._unpackBinaryV1Async(s,u);break}case 2:{C=r._unpackBinaryV2Async(s,u);break}default:throw new Error("Unsupported version: "+d)}return r._endPerformanceCounter("Unpack Binary"),C})},e.prototype._unpackBinaryV1Async=function(s,r){var a={JSON:0},c=s.readUint32(),d=s.readUint32();if(d!==a.JSON)throw new Error("Unexpected content format: ".concat(d));var u=r-s.byteOffset,C={json:this._parseJson(s.readString(c)),bin:null};if(u!==0){var v=s.byteOffset;C.bin={readAsync:function(F,B){return s.buffer.readAsync(v+F,B)},byteLength:u}}return Promise.resolve(C)},e.prototype._unpackBinaryV2Async=function(s,r){var a=this,c={JSON:1313821514,BIN:5130562},d=s.readUint32(),u=s.readUint32();if(u!==c.JSON)throw new Error("First chunk format is not JSON");return s.byteOffset+d===r?s.loadAsync(d).then(function(){return{json:a._parseJson(s.readString(d)),bin:null}}):s.loadAsync(d+8).then(function(){var C={json:a._parseJson(s.readString(d)),bin:null},v=function(){var F=s.readUint32(),B=s.readUint32();switch(B){case c.JSON:throw new Error("Unexpected JSON chunk");case c.BIN:{var k=s.byteOffset;C.bin={readAsync:function(O,S){return s.buffer.readAsync(k+O,S)},byteLength:F},s.skipBytes(F);break}default:{s.skipBytes(F);break}}return s.byteOffset!==r?s.loadAsync(8).then(v):Promise.resolve(C)};return v()})},e._parseVersion=function(s){if(s==="1.0"||s==="1.0.1")return{major:1,minor:0};var r=(s+"").match(/^(\d+)\.(\d+)/);return r?{major:parseInt(r[1]),minor:parseInt(r[2])}:null},e._compareVersion=function(s,r){return s.major>r.major?1:s.major<r.major?-1:s.minor>r.minor?1:s.minor<r.minor?-1:0},e.prototype._logOpen=function(s){this._log(s),this._logIndentLevel++},e.prototype._logClose=function(){--this._logIndentLevel},e.prototype._logEnabled=function(s){var r=e._logSpaces.substr(0,this._logIndentLevel*2);i.Logger.Log("".concat(r).concat(s))},e.prototype._logDisabled=function(s){},e.prototype._startPerformanceCounterEnabled=function(s){i.Tools.StartPerformanceCounter(s)},e.prototype._startPerformanceCounterDisabled=function(s){},e.prototype._endPerformanceCounterEnabled=function(s){i.Tools.EndPerformanceCounter(s)},e.prototype._endPerformanceCounterDisabled=function(s){},e.IncrementalLoading=!0,e.HomogeneousCoordinates=!1,e._MagicBase64Encoded="Z2xURg",e._logSpaces="                                ",e}();i.SceneLoader&&i.SceneLoader.RegisterPlugin(new t)},"../../../dev/loaders/src/glTF/glTFValidation.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFValidation:()=>A});var i=E("babylonjs/Misc/observable");function h(l,o,n,t){var e={externalResourceFunction:t};return n&&(e.uri=o==="file:"?n:o+n),ArrayBuffer.isView(l)?GLTFValidator.validateBytes(l,e):GLTFValidator.validateString(l,e)}function _(){var l=[];onmessage=function(o){var n=o.data;switch(n.id){case"init":{importScripts(n.url);break}case"validate":{h(n.data,n.rootUrl,n.fileName,function(t){return new Promise(function(e,s){var r=l.length;l.push({resolve:e,reject:s}),postMessage({id:"getExternalResource",index:r,uri:t})})}).then(function(t){postMessage({id:"validate.resolve",value:t})},function(t){postMessage({id:"validate.reject",reason:t})});break}case"getExternalResource.resolve":{l[n.index].resolve(n.value);break}case"getExternalResource.reject":{l[n.index].reject(n.reason);break}}}}var A=function(){function l(){}return l.ValidateAsync=function(o,n,t,e){var s=this;return typeof Worker=="function"?new Promise(function(r,a){var c="".concat(h,"(").concat(_,")()"),d=URL.createObjectURL(new Blob([c],{type:"application/javascript"})),u=new Worker(d),C=function(B){u.removeEventListener("error",C),u.removeEventListener("message",v),a(B)},v=function(B){var k=B.data;switch(k.id){case"getExternalResource":{e(k.uri).then(function(O){u.postMessage({id:"getExternalResource.resolve",index:k.index,value:O},[O.buffer])},function(O){u.postMessage({id:"getExternalResource.reject",index:k.index,reason:O})});break}case"validate.resolve":{u.removeEventListener("error",C),u.removeEventListener("message",v),r(k.value),u.terminate();break}case"validate.reject":u.removeEventListener("error",C),u.removeEventListener("message",v),a(k.reason),u.terminate()}};if(u.addEventListener("error",C),u.addEventListener("message",v),u.postMessage({id:"init",url:i.Tools.GetBabylonScriptURL(s.Configuration.url)}),ArrayBuffer.isView(o)){var F=o.slice();u.postMessage({id:"validate",data:F,rootUrl:n,fileName:t},[F.buffer])}else u.postMessage({id:"validate",data:o,rootUrl:n,fileName:t})}):(this._LoadScriptPromise||(this._LoadScriptPromise=i.Tools.LoadBabylonScriptAsync(this.Configuration.url)),this._LoadScriptPromise.then(function(){return h(o,n,t,e)}))},l.Configuration={url:"".concat(i.Tools._DefaultCdnUrl,"/gltf_validator.js")},l}()},"../../../dev/loaders/src/glTF/index.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTF1:()=>_,GLTF2:()=>A,GLTFFileLoader:()=>i.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>i.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>i.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>i.GLTFLoaderState,GLTFValidation:()=>h.GLTFValidation});var i=E("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),h=E("../../../dev/loaders/src/glTF/glTFValidation.ts"),_=E("../../../dev/loaders/src/glTF/1.0/index.ts"),A=E("../../../dev/loaders/src/glTF/2.0/index.ts")},"../../../dev/loaders/src/index.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTF1:()=>i.GLTF1,GLTF2:()=>i.GLTF2,GLTFFileLoader:()=>i.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>i.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>i.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>i.GLTFLoaderState,GLTFValidation:()=>i.GLTFValidation,MTLFileLoader:()=>h.MTLFileLoader,OBJFileLoader:()=>h.OBJFileLoader,SPLATFileLoader:()=>A.SPLATFileLoader,STLFileLoader:()=>_.STLFileLoader,SolidParser:()=>h.SolidParser});var i=E("../../../dev/loaders/src/glTF/index.ts"),h=E("../../../dev/loaders/src/OBJ/index.ts"),_=E("../../../dev/loaders/src/STL/index.ts"),A=E("../../../dev/loaders/src/SPLAT/index.ts")},"../../../lts/loaders/src/legacy/legacy-glTF.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTFFileLoader:()=>i.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>i.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>i.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>i.GLTFLoaderState,GLTFValidation:()=>h.GLTFValidation});var i=E("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),h=E("../../../dev/loaders/src/glTF/glTFValidation.ts"),_=typeof E.g<"u"?E.g:typeof window<"u"?window:void 0;if(typeof _<"u"){_.BABYLON=_.BABYLON||{};for(var A in i)_.BABYLON[A]=i[A];for(var A in h)_.BABYLON[A]=h[A]}},"../../../lts/loaders/src/legacy/legacy-glTF1.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTF1:()=>i});var i=E("../../../dev/loaders/src/glTF/1.0/index.ts"),h=typeof E.g<"u"?E.g:typeof window<"u"?window:void 0;if(typeof h<"u"){h.BABYLON=h.BABYLON||{},h.BABYLON.GLTF1=h.BABYLON.GLTF1||{};for(var _ in i)h.BABYLON.GLTF1[_]=i[_]}},"../../../lts/loaders/src/legacy/legacy-glTF2.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTF2:()=>_});var i=E("../../../dev/loaders/src/glTF/2.0/Extensions/index.ts"),h=E("../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts"),_=E("../../../dev/loaders/src/glTF/2.0/index.ts"),A=typeof E.g<"u"?E.g:typeof window<"u"?window:void 0;if(typeof A<"u"){A.BABYLON=A.BABYLON||{};var l=A.BABYLON;l.GLTF2=l.GLTF2||{},l.GLTF2.Loader=l.GLTF2.Loader||{},l.GLTF2.Loader.Extensions=l.GLTF2.Loader.Extensions||{};var o=[];for(var n in i)l.GLTF2.Loader.Extensions[n]=i[n],o.push(n);for(var n in h)l.GLTF2.Loader[n]=h[n],o.push(n);for(var n in _)o.indexOf(n)>-1||(l.GLTF2[n]=_[n])}},"../../../lts/loaders/src/legacy/legacy-objFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{MTLFileLoader:()=>i.MTLFileLoader,OBJFileLoader:()=>i.OBJFileLoader,SolidParser:()=>i.SolidParser});var i=E("../../../dev/loaders/src/OBJ/index.ts"),h=typeof E.g<"u"?E.g:typeof window<"u"?window:void 0;if(typeof h<"u")for(var _ in i)h.BABYLON[_]||(h.BABYLON[_]=i[_])},"../../../lts/loaders/src/legacy/legacy-stlFileLoader.ts":(R,g,E)=>{E.r(g),E.d(g,{STLFileLoader:()=>i.STLFileLoader});var i=E("../../../dev/loaders/src/STL/index.ts"),h=typeof E.g<"u"?E.g:typeof window<"u"?window:void 0;if(typeof h<"u")for(var _ in i)h.BABYLON[_]||(h.BABYLON[_]=i[_])},"../../../lts/loaders/src/legacy/legacy.ts":(R,g,E)=>{E.r(g),E.d(g,{GLTF1:()=>i.GLTF1,GLTF2:()=>i.GLTF2,GLTFFileLoader:()=>i.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>i.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>i.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>i.GLTFLoaderState,GLTFValidation:()=>i.GLTFValidation,MTLFileLoader:()=>i.MTLFileLoader,OBJFileLoader:()=>i.OBJFileLoader,SPLATFileLoader:()=>i.SPLATFileLoader,STLFileLoader:()=>i.STLFileLoader,SolidParser:()=>i.SolidParser});var i=E("../../../dev/loaders/src/index.ts");E("../../../lts/loaders/src/legacy/legacy-glTF.ts"),E("../../../lts/loaders/src/legacy/legacy-glTF1.ts"),E("../../../lts/loaders/src/legacy/legacy-glTF2.ts"),E("../../../lts/loaders/src/legacy/legacy-objFileLoader.ts"),E("../../../lts/loaders/src/legacy/legacy-stlFileLoader.ts")},"babylonjs/Misc/observable":R=>{R.exports=ge},"../../../../node_modules/tslib/tslib.es6.mjs":(R,g,E)=>{E.r(g),E.d(g,{__addDisposableResource:()=>oe,__assign:()=>_,__asyncDelegator:()=>G,__asyncGenerator:()=>S,__asyncValues:()=>U,__await:()=>O,__awaiter:()=>a,__classPrivateFieldGet:()=>Z,__classPrivateFieldIn:()=>he,__classPrivateFieldSet:()=>ae,__createBinding:()=>d,__decorate:()=>l,__disposeResources:()=>ee,__esDecorate:()=>n,__exportStar:()=>u,__extends:()=>h,__generator:()=>c,__importDefault:()=>Q,__importStar:()=>J,__makeTemplateObject:()=>W,__metadata:()=>r,__param:()=>o,__propKey:()=>e,__read:()=>v,__rest:()=>A,__runInitializers:()=>t,__setFunctionName:()=>s,__spread:()=>F,__spreadArray:()=>k,__spreadArrays:()=>B,__values:()=>C,default:()=>$});var i=function(D,M){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,f){P.__proto__=f}||function(P,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(P[p]=f[p])},i(D,M)};function h(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");i(D,M);function P(){this.constructor=D}D.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)}var _=function(){return _=Object.assign||function(M){for(var P,f=1,p=arguments.length;f<p;f++){P=arguments[f];for(var m in P)Object.prototype.hasOwnProperty.call(P,m)&&(M[m]=P[m])}return M},_.apply(this,arguments)};function A(D,M){var P={};for(var f in D)Object.prototype.hasOwnProperty.call(D,f)&&M.indexOf(f)<0&&(P[f]=D[f]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,f=Object.getOwnPropertySymbols(D);p<f.length;p++)M.indexOf(f[p])<0&&Object.prototype.propertyIsEnumerable.call(D,f[p])&&(P[f[p]]=D[f[p]]);return P}function l(D,M,P,f){var p=arguments.length,m=p<3?M:f===null?f=Object.getOwnPropertyDescriptor(M,P):f,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(D,M,P,f);else for(var T=D.length-1;T>=0;T--)(y=D[T])&&(m=(p<3?y(m):p>3?y(M,P,m):y(M,P))||m);return p>3&&m&&Object.defineProperty(M,P,m),m}function o(D,M){return function(P,f){M(P,f,D)}}function n(D,M,P,f,p,m){function y(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var T=f.kind,b=T==="getter"?"get":T==="setter"?"set":"value",L=!M&&D?f.static?D:D.prototype:null,x=M||(L?Object.getOwnPropertyDescriptor(L,f.name):{}),w,N=!1,I=P.length-1;I>=0;I--){var H={};for(var K in f)H[K]=K==="access"?{}:f[K];for(var K in f.access)H.access[K]=f.access[K];H.addInitializer=function(j){if(N)throw new TypeError("Cannot add initializers after decoration has completed");m.push(y(j||null))};var V=(0,P[I])(T==="accessor"?{get:x.get,set:x.set}:x[b],H);if(T==="accessor"){if(V===void 0)continue;if(V===null||typeof V!="object")throw new TypeError("Object expected");(w=y(V.get))&&(x.get=w),(w=y(V.set))&&(x.set=w),(w=y(V.init))&&p.unshift(w)}else(w=y(V))&&(T==="field"?p.unshift(w):x[b]=w)}L&&Object.defineProperty(L,f.name,x),N=!0}function t(D,M,P){for(var f=arguments.length>2,p=0;p<M.length;p++)P=f?M[p].call(D,P):M[p].call(D);return f?P:void 0}function e(D){return typeof D=="symbol"?D:"".concat(D)}function s(D,M,P){return typeof M=="symbol"&&(M=M.description?"[".concat(M.description,"]"):""),Object.defineProperty(D,"name",{configurable:!0,value:P?"".concat(P," ",M):M})}function r(D,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(D,M)}function a(D,M,P,f){function p(m){return m instanceof P?m:new P(function(y){y(m)})}return new(P||(P=Promise))(function(m,y){function T(x){try{L(f.next(x))}catch(w){y(w)}}function b(x){try{L(f.throw(x))}catch(w){y(w)}}function L(x){x.done?m(x.value):p(x.value).then(T,b)}L((f=f.apply(D,M||[])).next())})}function c(D,M){var P={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,p,m,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(L){return function(x){return b([L,x])}}function b(L){if(f)throw new TypeError("Generator is already executing.");for(;y&&(y=0,L[0]&&(P=0)),P;)try{if(f=1,p&&(m=L[0]&2?p.return:L[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,L[1])).done)return m;switch(p=0,m&&(L=[L[0]&2,m.value]),L[0]){case 0:case 1:m=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,p=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(m=P.trys,!(m=m.length>0&&m[m.length-1])&&(L[0]===6||L[0]===2)){P=0;continue}if(L[0]===3&&(!m||L[1]>m[0]&&L[1]<m[3])){P.label=L[1];break}if(L[0]===6&&P.label<m[1]){P.label=m[1],m=L;break}if(m&&P.label<m[2]){P.label=m[2],P.ops.push(L);break}m[2]&&P.ops.pop(),P.trys.pop();continue}L=M.call(D,P)}catch(x){L=[6,x],p=0}finally{f=m=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}}var d=Object.create?function(D,M,P,f){f===void 0&&(f=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(D,f,p)}:function(D,M,P,f){f===void 0&&(f=P),D[f]=M[P]};function u(D,M){for(var P in D)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&d(M,D,P)}function C(D){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&D[M],f=0;if(P)return P.call(D);if(D&&typeof D.length=="number")return{next:function(){return D&&f>=D.length&&(D=void 0),{value:D&&D[f++],done:!D}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(D,M){var P=typeof Symbol=="function"&&D[Symbol.iterator];if(!P)return D;var f=P.call(D),p,m=[],y;try{for(;(M===void 0||M-- >0)&&!(p=f.next()).done;)m.push(p.value)}catch(T){y={error:T}}finally{try{p&&!p.done&&(P=f.return)&&P.call(f)}finally{if(y)throw y.error}}return m}function F(){for(var D=[],M=0;M<arguments.length;M++)D=D.concat(v(arguments[M]));return D}function B(){for(var D=0,M=0,P=arguments.length;M<P;M++)D+=arguments[M].length;for(var f=Array(D),p=0,M=0;M<P;M++)for(var m=arguments[M],y=0,T=m.length;y<T;y++,p++)f[p]=m[y];return f}function k(D,M,P){if(P||arguments.length===2)for(var f=0,p=M.length,m;f<p;f++)(m||!(f in M))&&(m||(m=Array.prototype.slice.call(M,0,f)),m[f]=M[f]);return D.concat(m||Array.prototype.slice.call(M))}function O(D){return this instanceof O?(this.v=D,this):new O(D)}function S(D,M,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f=P.apply(D,M||[]),p,m=[];return p={},T("next"),T("throw"),T("return",y),p[Symbol.asyncIterator]=function(){return this},p;function y(I){return function(H){return Promise.resolve(H).then(I,w)}}function T(I,H){f[I]&&(p[I]=function(K){return new Promise(function(V,j){m.push([I,K,V,j])>1||b(I,K)})},H&&(p[I]=H(p[I])))}function b(I,H){try{L(f[I](H))}catch(K){N(m[0][3],K)}}function L(I){I.value instanceof O?Promise.resolve(I.value.v).then(x,w):N(m[0][2],I)}function x(I){b("next",I)}function w(I){b("throw",I)}function N(I,H){I(H),m.shift(),m.length&&b(m[0][0],m[0][1])}}function G(D){var M,P;return M={},f("next"),f("throw",function(p){throw p}),f("return"),M[Symbol.iterator]=function(){return this},M;function f(p,m){M[p]=D[p]?function(y){return(P=!P)?{value:O(D[p](y)),done:!1}:m?m(y):y}:m}}function U(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=D[Symbol.asyncIterator],P;return M?M.call(D):(D=typeof C=="function"?C(D):D[Symbol.iterator](),P={},f("next"),f("throw"),f("return"),P[Symbol.asyncIterator]=function(){return this},P);function f(m){P[m]=D[m]&&function(y){return new Promise(function(T,b){y=D[m](y),p(T,b,y.done,y.value)})}}function p(m,y,T,b){Promise.resolve(b).then(function(L){m({value:L,done:T})},y)}}function W(D,M){return Object.defineProperty?Object.defineProperty(D,"raw",{value:M}):D.raw=M,D}var X=Object.create?function(D,M){Object.defineProperty(D,"default",{enumerable:!0,value:M})}:function(D,M){D.default=M};function J(D){if(D&&D.__esModule)return D;var M={};if(D!=null)for(var P in D)P!=="default"&&Object.prototype.hasOwnProperty.call(D,P)&&d(M,D,P);return X(M,D),M}function Q(D){return D&&D.__esModule?D:{default:D}}function Z(D,M,P,f){if(P==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof M=="function"?D!==M||!f:!M.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return P==="m"?f:P==="a"?f.call(D):f?f.value:M.get(D)}function ae(D,M,P,f,p){if(f==="m")throw new TypeError("Private method is not writable");if(f==="a"&&!p)throw new TypeError("Private accessor was defined without a setter");if(typeof M=="function"?D!==M||!p:!M.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return f==="a"?p.call(D,P):p?p.value=P:M.set(D,P),P}function he(D,M){if(M===null||typeof M!="object"&&typeof M!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof D=="function"?M===D:D.has(M)}function oe(D,M,P){if(M!=null){if(typeof M!="object"&&typeof M!="function")throw new TypeError("Object expected.");var f,p;if(P){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");f=M[Symbol.asyncDispose]}if(f===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");f=M[Symbol.dispose],P&&(p=f)}if(typeof f!="function")throw new TypeError("Object not disposable.");p&&(f=function(){try{p.call(this)}catch(m){return Promise.reject(m)}}),D.stack.push({value:M,dispose:f,async:P})}else P&&D.stack.push({async:!0});return M}var q=typeof SuppressedError=="function"?SuppressedError:function(D,M,P){var f=new Error(P);return f.name="SuppressedError",f.error=D,f.suppressed=M,f};function ee(D){function M(f){D.error=D.hasError?new q(f,D.error,"An error was suppressed during disposal."):f,D.hasError=!0}function P(){for(;D.stack.length;){var f=D.stack.pop();try{var p=f.dispose&&f.dispose.call(f.value);if(f.async)return Promise.resolve(p).then(P,function(m){return M(m),P()})}catch(m){M(m)}}if(D.hasError)throw D.error}return P()}const $={__extends:h,__assign:_,__rest:A,__decorate:l,__param:o,__metadata:r,__awaiter:a,__generator:c,__createBinding:d,__exportStar:u,__values:C,__read:v,__spread:F,__spreadArrays:B,__spreadArray:k,__await:O,__asyncGenerator:S,__asyncDelegator:G,__asyncValues:U,__makeTemplateObject:W,__importStar:J,__importDefault:Q,__classPrivateFieldGet:Z,__classPrivateFieldSet:ae,__classPrivateFieldIn:he,__addDisposableResource:oe,__disposeResources:ee}}},Ce={};function de(R){var g=Ce[R];if(g!==void 0)return g.exports;var E=Ce[R]={exports:{}};return me[R](E,E.exports,de),E.exports}de.n=R=>{var g=R&&R.__esModule?()=>R.default:()=>R;return de.d(g,{a:g}),g},de.d=(R,g)=>{for(var E in g)de.o(g,E)&&!de.o(R,E)&&Object.defineProperty(R,E,{enumerable:!0,get:g[E]})},de.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),de.o=(R,g)=>Object.prototype.hasOwnProperty.call(R,g),de.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var ve={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/de.r(ve),de.d(ve,{default:()=>g,loaders:()=>R});var R=de("../../../lts/loaders/src/legacy/legacy.ts");const g=R})(),ve=ve.default,ve})())})(We);const je=Fe("canvas",{id:"spriteTree",class:"stage"},null,-1),Ye=Oe({__name:"spriteTree",setup(Te){const{Engine:De,Scene:ge,ArcRotateCamera:me,Vector3:Ce,SpriteManager:de,Color3:ve,HemisphericLight:R,MeshBuilder:g,Sprite:E,StandardMaterial:i,CubeTexture:h,Texture:_,SceneLoader:A}=Ie,l=we(0),o=async()=>{const n=document.getElementById("spriteTree");n.addEventListener("wheel",function(C){C.preventDefault()});const t=new De(n,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1}),e=new ge(t);e.useRightHandedSystem=!0;const s=new me("camera",-Math.PI/1.5,Math.PI/2.2,15,new Ce(0,0,0),e);s.upperBetaLimit=Math.PI/2.2,s.attachControl(n,!0),s.setPosition(new Ce(20,20,20));const r=()=>new R("light",new Ce(1,1,0),e),a=()=>{const C=new de("trees","./assets/images/palm.png",2e3,{width:512,height:1024},e);for(let v=0;v<500;v++){const F=new E("tree"+v,C);F.position.x=Math.random()*-30,F.position.z=Math.random()*20+8,F.position.y=.5}for(let v=500;v<1e3;v++){const F=new E("tree"+v,C);F.position.x=Math.random()*25+7,F.position.z=Math.random()*-35+8,F.position.y=.5}},c=()=>{const C=g.CreateBox("skyBox",{size:150},e),v=new i("skyBox",e);v.backFaceCulling=!1,v.reflectionTexture=new h("./assets/images/skybox",e),v.reflectionTexture.coordinatesMode=_.SKYBOX_MODE,v.diffuseColor=new ve(0,0,0),v.specularColor=new ve(0,0,0),C.material=v},d=()=>{A.ImportMeshAsync("","./assets/scenes/","valleyvillage.glb")},u=()=>{t.runRenderLoop(function(){e&&e.activeCamera&&(e.render(),l.value=t.getFps().toFixed(2))})};r(),a(),c(),d(),u()};return Ne(async()=>{await Ge(),o()}),(n,t)=>(Pe(),be("div",null,[Fe("div",null,"fps: "+Ke(l.value),1),je]))}}),Xe=Fe("h2",{id:"精灵-树",tabindex:"-1"},[He("精灵-树 "),Fe("a",{class:"header-anchor",href:"#精灵-树","aria-label":'Permalink to "精灵-树"'},"​")],-1),Qe=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"components/babylonSprite.md","filePath":"components/babylonSprite.md"}'),ze={name:"components/babylonSprite.md"},$e=Oe({...ze,setup(Te){return(De,ge)=>{const me=Ue("demo-preview");return Pe(),be("div",null,[Xe,Me(me,{title:"",description:"",code:"%3Ctemplate%3E%0D%0A%20%20%3Cdiv%3E%0D%0A%20%20%20%20%3Cdiv%3Efps:%20%7B%7B%20fps%20%7D%7D%3C/div%3E%0D%0A%20%20%20%20%3Ccanvas%20id=%22spriteTree%22%20class=%22stage%22%3E%3C/canvas%3E%0D%0A%20%20%3C/div%3E%0D%0A%3C/template%3E%0D%0A%0D%0A%3Cscript%20lang=%22ts%22%20setup%3E%0D%0Aimport%20'babylonjs-loaders'%0D%0Aimport%20%7B%20onMounted,%20ref,%20nextTick%20%7D%20from%20'vue'%0D%0A//%20import%20%7B%0D%0A//%20%20%20Engine,%0D%0A//%20%20%20Scene,%0D%0A//%20%20%20ArcRotateCamera,%0D%0A//%20%20%20Vector3,%0D%0A//%20%20%20SpriteManager,%0D%0A//%20%20%20Color3,%0D%0A//%20%20%20HemisphericLight,%0D%0A//%20%20%20MeshBuilder,%0D%0A//%20%20%20Sprite,%0D%0A//%20%20%20StandardMaterial,%0D%0A//%20%20%20CubeTexture,%0D%0A//%20%20%20Texture,%0D%0A//%20%20%20SceneLoader%0D%0A//%20%7D%20from%20'babylonjs'%0D%0A%0D%0Aimport%20pkg%20from%20'babylonjs'%0D%0A%0D%0Aconst%20%7B%0D%0A%20%20Engine,%0D%0A%20%20Scene,%0D%0A%20%20ArcRotateCamera,%0D%0A%20%20Vector3,%0D%0A%20%20SpriteManager,%0D%0A%20%20Color3,%0D%0A%20%20HemisphericLight,%0D%0A%20%20MeshBuilder,%0D%0A%20%20Sprite,%0D%0A%20%20StandardMaterial,%0D%0A%20%20CubeTexture,%0D%0A%20%20Texture,%0D%0A%20%20SceneLoader%0D%0A%7D%20=%20pkg%0D%0A%0D%0Aconst%20fps%20=%20ref(0)%0D%0A%0D%0Aconst%20initScene%20=%20async()%20=%3E%20%7B%0D%0A%20%20const%20ele%20=%20document.getElementById(%22spriteTree%22)%20as%20HTMLCanvasElement%0D%0A%0D%0A%20%20ele.addEventListener('wheel',%20function(event)%20%7B%0D%0A%20%20%20%20//%20%E6%A0%B9%E6%8D%AE%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%BB%9A%E5%8A%A8%0D%0A%20%20%20%20//%20%E4%BE%8B%E5%A6%82%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E7%9B%B8%E6%9C%BA%E7%9A%84%E5%8D%8A%E5%BE%84%E6%88%96%E8%A7%92%E5%BA%A6%0D%0A%20%20%20%20event.preventDefault();%20//%20%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA%0D%0A%20%20%7D);%0D%0A%0D%0A%20%20const%20engine:%20any%20=%20new%20Engine(ele,%20true,%20%7B%0D%0A%20%20%20%20preserveDrawingBuffer:%20true,%0D%0A%20%20%20%20stencil:%20true,%0D%0A%20%20%20%20disableWebGL2Support:%20false%0D%0A%20%20%7D)%0D%0A%0D%0A%20%20const%20scene%20=%20new%20Scene(engine)%0D%0A%20%20scene.useRightHandedSystem%20=%20true%0D%0A%0D%0A%20%20const%20camera%20=%20new%20ArcRotateCamera('camera',%20-Math.PI%20/%201.5,%20Math.PI%20/%202.2,%2015,%20new%20Vector3(0,%200,%200),%20scene)%0D%0A%20%20camera.upperBetaLimit%20=%20Math.PI%20/%202.2%0D%0A%20%20camera.attachControl(ele,%20true)%0D%0A%20%20camera.setPosition(new%20Vector3(20,%2020,%2020))%0D%0A%0D%0A%20%20const%20createLight%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20light%20=%20new%20HemisphericLight('light',new%20Vector3(1,%201,%200),%20scene)%0D%0A%20%20%20%20return%20light%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20createTree%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20spriteManagerTree%20=%20new%20SpriteManager(%0D%0A%20%20%20%20%20%20'trees',%0D%0A%20%20%20%20%20%20'./assets/images/palm.png',%0D%0A%20%20%20%20%20%202000,%0D%0A%20%20%20%20%20%20%7B%20width:%20512,%20height:%201024%20%7D,%0D%0A%20%20%20%20%20%20scene%0D%0A%20%20%20%20)%0D%0A%0D%0A%20%20%20%20for(let%20i%20=%200;%20i%20%3C%20500;%20i++)%20%7B%0D%0A%20%20%20%20%20%20const%20tree%20=%20new%20Sprite('tree'%20+%20i,%20spriteManagerTree)%0D%0A%20%20%20%20%20%20tree.position.x%20=%20Math.random()%20*%20-30%0D%0A%20%20%20%20%20%20tree.position.z%20=%20Math.random()%20*%2020%20+%208%0D%0A%20%20%20%20%20%20tree.position.y%20=%200.5%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20for(let%20i%20=%20500;%20i%20%3C%201000;%20i++)%20%7B%0D%0A%20%20%20%20%20%20const%20tree%20=%20new%20Sprite('tree'%20+%20i,%20spriteManagerTree)%0D%0A%20%20%20%20%20%20tree.position.x%20=%20Math.random()%20*%2025%20+%207%0D%0A%20%20%20%20%20%20tree.position.z%20=%20Math.random()%20*%20-35%20+%208%0D%0A%20%20%20%20%20%20tree.position.y%20=%200.5%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20createSkyBox%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20const%20skyBox%20=%20MeshBuilder.CreateBox(%0D%0A%20%20%20%20%20%20'skyBox',%0D%0A%20%20%20%20%20%20%7B%20size:%20150%20%7D,%0D%0A%20%20%20%20%20%20scene%0D%0A%20%20%20%20)%0D%0A%20%20%20%20const%20skyBoxMaterial%20=%20new%20StandardMaterial(%0D%0A%20%20%20%20%20%20'skyBox',%0D%0A%20%20%20%20%20%20scene%0D%0A%20%20%20%20)%0D%0A%20%20%20%20skyBoxMaterial.backFaceCulling%20=%20false%0D%0A%20%20%20%20skyBoxMaterial.reflectionTexture%20=%20new%20CubeTexture(%0D%0A%20%20%20%20%20%20'./assets/images/skybox',%0D%0A%20%20%20%20%20%20scene%0D%0A%20%20%20%20)%0D%0A%20%20%20%20skyBoxMaterial.reflectionTexture.coordinatesMode%20=%20Texture.SKYBOX_MODE%0D%0A%20%20%20%20skyBoxMaterial.diffuseColor%20=%20new%20Color3(0,%200,%200)%0D%0A%20%20%20%20skyBoxMaterial.specularColor%20=%20new%20Color3(0,%200,%200)%0D%0A%20%20%20%20skyBox.material%20=%20skyBoxMaterial%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20createVillage%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20SceneLoader.ImportMeshAsync(%0D%0A%20%20%20%20%20%20'',%0D%0A%20%20%20%20%20%20'./assets/scenes/',%0D%0A%20%20%20%20%20%20'valleyvillage.glb'%0D%0A%20%20%20%20)%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20runAnimate%20=%20()%20=%3E%20%7B%0D%0A%20%20%20%20engine.runRenderLoop(function()%20%7B%0D%0A%20%20%20%20%20%20if%20(scene%20&&%20scene.activeCamera)%20%7B%0D%0A%20%20%20%20%20%20%20%20scene.render()%0D%0A%0D%0A%20%20%20%20%20%20%20%20fps.value%20=%20engine.getFps().toFixed(2)%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D)%0D%0A%20%20%7D%0D%0A%0D%0A%20%20createLight()%0D%0A%20%20createTree()%0D%0A%20%20createSkyBox()%0D%0A%20%20createVillage()%0D%0A%20%20runAnimate()%0D%0A%7D%0D%0A%0D%0AonMounted(async()%20=%3E%20%7B%0D%0A%20%20await%20nextTick()%0D%0A%20%20initScene()%0D%0A%7D)%0D%0A%3C/script%3E%0D%0A",showCode:"%3Cpre%20class%3D%22shiki%20shiki-themes%20github-light%20github-dark%20vp-code%22%20tabindex%3D%220%22%20v-pre%3D%22%22%3E%3Ccode%3E%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3Efps%3A%20%7B%7B%20fps%20%7D%7D%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20id%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22spriteTree%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20class%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22stage%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20lang%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22ts%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20setup%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'babylonjs-loaders'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%20onMounted%2C%20ref%2C%20nextTick%20%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efrom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'vue'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20import%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Engine%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Scene%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20ArcRotateCamera%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Vector3%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20SpriteManager%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Color3%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20HemisphericLight%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20MeshBuilder%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Sprite%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20StandardMaterial%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20CubeTexture%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20Texture%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%20%20SceneLoader%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%7D%20from%20'babylonjs'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20pkg%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efrom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'babylonjs'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20ArcRotateCamera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20SpriteManager%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20HemisphericLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20MeshBuilder%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Sprite%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20StandardMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20CubeTexture%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20Texture%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20SceneLoader%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20pkg%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20fps%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20ref%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20initScene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20async%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20ele%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20document.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EgetElementById%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22spriteTree%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20HTMLCanvasElement%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20ele.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EaddEventListener%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'wheel'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Eevent%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%2F%2F%20%E6%A0%B9%E6%8D%AE%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%BB%9A%E5%8A%A8%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%20%20%20%20%2F%2F%20%E4%BE%8B%E5%A6%82%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E7%9B%B8%E6%9C%BA%E7%9A%84%E5%8D%8A%E5%BE%84%E6%88%96%E8%A7%92%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20event.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EpreventDefault%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3B%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236A737D%3B--shiki-dark%3A%236A737D%22%3E%2F%2F%20%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3A%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20any%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Engine%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(ele%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20preserveDrawingBuffer%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20stencil%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20disableWebGL2Support%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Efalse%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Scene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(engine)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20scene.useRightHandedSystem%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20true%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20camera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20ArcRotateCamera%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'camera'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EMath.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%201.5%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%202.2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E15%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.upperBetaLimit%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3EPI%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%202.2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EattachControl%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(ele%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Etrue%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20camera.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EsetPosition%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E))%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20light%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20HemisphericLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'light'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Enew%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Vector3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%2C%20scene)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20return%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20light%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createTree%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20spriteManagerTree%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20SpriteManager%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'trees'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'.%2Fassets%2Fimages%2Fpalm.png'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20%20%20%20%20%202000%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7B%20width%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E512%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20height%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E1024%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7D%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20for%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Elet%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20i%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3B%20i%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20500%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3B%20i%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%2B%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20tree%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Sprite%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'tree'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20i%2C%20spriteManagerTree)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.x%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erandom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E*%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E30%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.z%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erandom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E*%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2020%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%208%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200.5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20for%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Elet%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20i%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20500%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3B%20i%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%201000%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3B%20i%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%2B%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20tree%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Sprite%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'tree'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20i%2C%20spriteManagerTree)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.x%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erandom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E*%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%2025%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%207%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.z%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Math.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erandom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E*%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20-%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E35%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%2B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%208%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20tree.position.y%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%200.5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createSkyBox%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20skyBox%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20MeshBuilder.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ECreateBox%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'skyBox'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7B%20size%3A%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E150%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7D%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20skyBoxMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20StandardMaterial%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'skyBox'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBoxMaterial.backFaceCulling%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20false%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBoxMaterial.reflectionTexture%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20CubeTexture%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'.%2Fassets%2Fimages%2Fskybox'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20scene%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBoxMaterial.reflectionTexture.coordinatesMode%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20Texture.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3ESKYBOX_MODE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBoxMaterial.diffuseColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBoxMaterial.specularColor%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20Color3%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E0%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20skyBox.material%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20skyBoxMaterial%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20createVillage%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20SceneLoader.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EImportMeshAsync%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20''%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'.%2Fassets%2Fscenes%2F'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20'valleyvillage.glb'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20runAnimate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20engine.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3ErunRenderLoop%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efunction%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20%20%20if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(scene%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%26%23x26%3B%26%23x26%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20scene.activeCamera)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20scene.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Erender%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%20%20fps.value%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20engine.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EgetFps%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E().%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EtoFixed%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E2%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createLight%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createTree%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createSkyBox%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20createVillage%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20runAnimate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EonMounted%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Easync%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20await%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20nextTick%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20initScene%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fcode%3E%3C%2Fpre%3E",suffixName:"vue",absolutePath:"D:\\test\\docs\\demo\\babylon\\spriteTree.vue",relativePath:"../demo/babylon/spriteTree.vue"},{default:Ve(()=>[Me(Ye)]),_:1})])}}});export{Qe as __pageData,$e as default};
