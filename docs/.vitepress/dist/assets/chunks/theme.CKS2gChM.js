import{d as Ht,o as C,c as J,r as Z,n as wi,a as Is,t as Hi,b as Gt,w as rt,e as Ct,T as Fn,_ as Yt,u as ja,i as Ga,f as Ua,g as ea,h as ti,j as X,k as A,p as Fe,l as De,m as en,q as Qn,s as _i,v as ps,x as Dn,y as Os,z as sa,A as na,B as Wa,C as qa,D as sn,F as Ki,E as Xe,G as za,H as On,I as jt,J as zs,K as wa,L as Rn,M as Ds,N as jn,O as Ja,P as aa,Q as Za,R as Ka,S as Sa,U as Gn,V as Ya,W as Na,X as Ma,Y as La,Z as Qa,$ as Xa,a0 as to,a1 as io,a2 as eo,a3 as so}from"./framework.De32BR7G.js";const no=Ht({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(c){return(h,s)=>(C(),J("span",{class:wi(["VPBadge",h.type])},[Z(h.$slots,"default",{},()=>[Is(Hi(h.text),1)])],2))}}),ao={key:0,class:"VPBackdrop"},oo=Ht({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(c){return(h,s)=>(C(),Gt(Fn,{name:"fade"},{default:rt(()=>[h.show?(C(),J("div",ao)):Ct("",!0)]),_:1}))}}),ro=Yt(oo,[["__scopeId","data-v-cb80dfb9"]]),fi=ja;function ho(c,h){let s,b=!1;return()=>{s&&clearTimeout(s),b?s=setTimeout(c,h):(c(),(b=!0)&&setTimeout(()=>b=!1,h))}}function Xn(c){return/^\//.test(c)?c:`/${c}`}function oa(c){const{pathname:h,search:s,hash:b,protocol:v}=new URL(c,"http://a.com");if(Ga(c)||c.startsWith("#")||!v.startsWith("http")||!Ua(h))return c;const{site:$}=fi(),j=h.endsWith("/")||h.endsWith(".html")?c:c.replace(/(?:(^\.+)\/)?.*$/,`$1${h.replace(/(\.md)?$/,$.value.cleanUrls?"":".html")}${s}${b}`);return ea(j)}function Ln({correspondingLink:c=!1}={}){const{site:h,localeIndex:s,page:b,theme:v,hash:$}=fi(),j=ti(()=>{var U,Vt;return{label:(U=h.value.locales[s.value])==null?void 0:U.label,link:((Vt=h.value.locales[s.value])==null?void 0:Vt.link)||(s.value==="root"?"/":`/${s.value}/`)}});return{localeLinks:ti(()=>Object.entries(h.value.locales).flatMap(([U,Vt])=>j.value.label===Vt.label?[]:{text:Vt.label,link:lo(Vt.link||(U==="root"?"/":`/${U}/`),v.value.i18nRouting!==!1&&c,b.value.relativePath.slice(j.value.link.length-1),!h.value.cleanUrls)+$.value})),currentLang:j}}function lo(c,h,s,b){return h?c.replace(/\/$/,"")+Xn(s.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,b?".html":"")):c}const co=c=>(Fe("data-v-e909b15e"),c=c(),De(),c),uo={class:"NotFound"},po={class:"code"},mo={class:"title"},fo=co(()=>X("div",{class:"divider"},null,-1)),yo={class:"quote"},vo={class:"action"},_o=["href","aria-label"],bo=Ht({__name:"NotFound",setup(c){const{theme:h}=fi(),{currentLang:s}=Ln();return(b,v)=>{var $,j,st,U,Vt;return C(),J("div",uo,[X("p",po,Hi((($=A(h).notFound)==null?void 0:$.code)??"404"),1),X("h1",mo,Hi(((j=A(h).notFound)==null?void 0:j.title)??"PAGE NOT FOUND"),1),fo,X("blockquote",yo,Hi(((st=A(h).notFound)==null?void 0:st.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),X("div",vo,[X("a",{class:"link",href:A(ea)(A(s).link),"aria-label":((U=A(h).notFound)==null?void 0:U.linkLabel)??"go to home"},Hi(((Vt=A(h).notFound)==null?void 0:Vt.linkText)??"Take me home"),9,_o)])])}}}),xo=Yt(bo,[["__scopeId","data-v-e909b15e"]]);function Ca(c,h){if(Array.isArray(c))return Bn(c);if(c==null)return[];h=Xn(h);const s=Object.keys(c).sort((v,$)=>$.split("/").length-v.split("/").length).find(v=>h.startsWith(Xn(v))),b=s?c[s]:[];return Array.isArray(b)?Bn(b):Bn(b.items,b.base)}function go(c){const h=[];let s=0;for(const b in c){const v=c[b];if(v.items){s=h.push(v);continue}h[s]||h.push({items:[]}),h[s].items.push(v)}return h}function ko(c){const h=[];function s(b){for(const v of b)v.text&&v.link&&h.push({text:v.text,link:v.link,docFooterText:v.docFooterText}),v.items&&s(v.items)}return s(c),h}function ta(c,h){return Array.isArray(h)?h.some(s=>ta(c,s)):en(c,h.link)?!0:h.items?ta(c,h.items):!1}function Bn(c,h){return[...c].map(s=>{const b={...s},v=b.base||h;return v&&b.link&&(b.link=v+b.link),b.items&&(b.items=Bn(b.items,v)),b})}function Hs(){const{frontmatter:c,page:h,theme:s}=fi(),b=Qn("(min-width: 960px)"),v=_i(!1),$=ti(()=>{const Ei=s.value.sidebar,ui=h.value.relativePath;return Ei?Ca(Ei,ui):[]}),j=_i($.value);ps($,(Ei,ui)=>{JSON.stringify(Ei)!==JSON.stringify(ui)&&(j.value=$.value)});const st=ti(()=>c.value.sidebar!==!1&&j.value.length>0&&c.value.layout!=="home"),U=ti(()=>Vt?c.value.aside==null?s.value.aside==="left":c.value.aside==="left":!1),Vt=ti(()=>c.value.layout==="home"?!1:c.value.aside!=null?!!c.value.aside:s.value.aside!==!1),ni=ti(()=>st.value&&b.value),Jt=ti(()=>st.value?go(j.value):[]);function Tt(){v.value=!0}function ei(){v.value=!1}function yi(){v.value?ei():Tt()}return{isOpen:v,sidebar:j,sidebarGroups:Jt,hasSidebar:st,hasAside:Vt,leftAside:U,isSidebarEnabled:ni,open:Tt,close:ei,toggle:yi}}function Po(c,h){let s;Dn(()=>{s=c.value?document.activeElement:void 0}),Os(()=>{window.addEventListener("keyup",b)}),sa(()=>{window.removeEventListener("keyup",b)});function b(v){v.key==="Escape"&&c.value&&(h(),s==null||s.focus())}}function zo(c){const{page:h,hash:s}=fi(),b=_i(!1),v=ti(()=>c.value.collapsed!=null),$=ti(()=>!!c.value.link),j=_i(!1),st=()=>{j.value=en(h.value.relativePath,c.value.link)};ps([h,c,s],st),Os(st);const U=ti(()=>j.value?!0:c.value.items?ta(h.value.relativePath,c.value.items):!1),Vt=ti(()=>!!(c.value.items&&c.value.items.length));Dn(()=>{b.value=!!(v.value&&c.value.collapsed)}),na(()=>{(j.value||U.value)&&(b.value=!1)});function ni(){v.value&&(b.value=!b.value)}return{collapsed:b,collapsible:v,isLink:$,isActiveLink:j,hasActiveLink:U,hasChildren:Vt,toggle:ni}}function wo(){const{hasSidebar:c}=Hs(),h=Qn("(min-width: 960px)"),s=Qn("(min-width: 1280px)");return{isAsideEnabled:ti(()=>!s.value&&!h.value?!1:c.value?s.value:h.value)}}const ia=[];function Va(c){return typeof c.outline=="object"&&!Array.isArray(c.outline)&&c.outline.label||c.outlineTitle||"On this page"}function ra(c){const h=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(s=>s.id&&s.hasChildNodes()).map(s=>{const b=Number(s.tagName[1]);return{element:s,title:So(s),link:"#"+s.id,level:b}});return No(h,c)}function So(c){let h="";for(const s of c.childNodes)if(s.nodeType===1){if(s.classList.contains("VPBadge")||s.classList.contains("header-anchor")||s.classList.contains("ignore-header"))continue;h+=s.textContent}else s.nodeType===3&&(h+=s.textContent);return h.trim()}function No(c,h){if(h===!1)return[];const s=(typeof h=="object"&&!Array.isArray(h)?h.level:h)||2,[b,v]=typeof s=="number"?[s,s]:s==="deep"?[2,6]:s;c=c.filter(j=>j.level>=b&&j.level<=v),ia.length=0;for(const{element:j,link:st}of c)ia.push({element:j,link:st});const $=[];t:for(let j=0;j<c.length;j++){const st=c[j];if(j===0)$.push(st);else{for(let U=j-1;U>=0;U--){const Vt=c[U];if(Vt.level<st.level){(Vt.children||(Vt.children=[])).push(st);continue t}}$.push(st)}}return $}function Mo(c,h){const{isAsideEnabled:s}=wo(),b=ho($,100);let v=null;Os(()=>{requestAnimationFrame($),window.addEventListener("scroll",b)}),Wa(()=>{j(location.hash)}),sa(()=>{window.removeEventListener("scroll",b)});function $(){if(!s.value)return;const st=window.scrollY,U=window.innerHeight,Vt=document.body.offsetHeight,ni=Math.abs(st+U-Vt)<1,Jt=ia.map(({element:ei,link:yi})=>({link:yi,top:Lo(ei)})).filter(({top:ei})=>!Number.isNaN(ei)).sort((ei,yi)=>ei.top-yi.top);if(!Jt.length){j(null);return}if(st<1){j(null);return}if(ni){j(Jt[Jt.length-1].link);return}let Tt=null;for(const{link:ei,top:yi}of Jt){if(yi>st+qa()+4)break;Tt=ei}j(Tt)}function j(st){v&&v.classList.remove("active"),st==null?v=null:v=c.value.querySelector(`a[href="${decodeURIComponent(st)}"]`);const U=v;U?(U.classList.add("active"),h.value.style.top=U.offsetTop+39+"px",h.value.style.opacity="1"):(h.value.style.top="33px",h.value.style.opacity="0")}}function Lo(c){let h=0;for(;c!==document.body;){if(c===null)return NaN;h+=c.offsetTop,c=c.offsetParent}return h}const Co=["href","title"],Vo=Ht({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(c){function h({target:s}){const b=s.href.split("#")[1],v=document.getElementById(decodeURIComponent(b));v==null||v.focus({preventScroll:!0})}return(s,b)=>{const v=sn("VPDocOutlineItem",!0);return C(),J("ul",{class:wi(["VPDocOutlineItem",s.root?"root":"nested"])},[(C(!0),J(Ki,null,Xe(s.headers,({children:$,link:j,title:st})=>(C(),J("li",null,[X("a",{class:"outline-link",href:j,onClick:h,title:st},Hi(st),9,Co),$!=null&&$.length?(C(),Gt(v,{key:0,headers:$},null,8,["headers"])):Ct("",!0)]))),256))],2)}}}),Ia=Yt(Vo,[["__scopeId","data-v-35a71cb0"]]),Io={class:"content"},Ho={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},To=Ht({__name:"VPDocAsideOutline",setup(c){const{frontmatter:h,theme:s}=fi(),b=za([]);On(()=>{b.value=ra(h.value.outline??s.value.outline)});const v=_i(),$=_i();return Mo(v,$),(j,st)=>(C(),J("nav",{"aria-labelledby":"doc-outline-aria-label",class:wi(["VPDocAsideOutline",{"has-outline":b.value.length>0}]),ref_key:"container",ref:v},[X("div",Io,[X("div",{class:"outline-marker",ref_key:"marker",ref:$},null,512),X("div",Ho,Hi(A(Va)(A(s))),1),jt(Ia,{headers:b.value,root:!0},null,8,["headers"])])],2))}}),Ao=Yt(To,[["__scopeId","data-v-93551120"]]),$o={class:"VPDocAsideCarbonAds"},Bo=Ht({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(c){const h=()=>null;return(s,b)=>(C(),J("div",$o,[jt(A(h),{"carbon-ads":s.carbonAds},null,8,["carbon-ads"])]))}}),Eo=c=>(Fe("data-v-1cd7a49d"),c=c(),De(),c),Fo={class:"VPDocAside"},Do=Eo(()=>X("div",{class:"spacer"},null,-1)),Oo=Ht({__name:"VPDocAside",setup(c){const{theme:h}=fi();return(s,b)=>(C(),J("div",Fo,[Z(s.$slots,"aside-top",{},void 0,!0),Z(s.$slots,"aside-outline-before",{},void 0,!0),jt(Ao),Z(s.$slots,"aside-outline-after",{},void 0,!0),Do,Z(s.$slots,"aside-ads-before",{},void 0,!0),A(h).carbonAds?(C(),Gt(Bo,{key:0,"carbon-ads":A(h).carbonAds},null,8,["carbon-ads"])):Ct("",!0),Z(s.$slots,"aside-ads-after",{},void 0,!0),Z(s.$slots,"aside-bottom",{},void 0,!0)]))}}),Ro=Yt(Oo,[["__scopeId","data-v-1cd7a49d"]]);function jo(){const{theme:c,page:h}=fi();return ti(()=>{const{text:s="Edit this page",pattern:b=""}=c.value.editLink||{};let v;return typeof b=="function"?v=b(h.value):v=b.replace(/:path/g,h.value.filePath),{url:v,text:s}})}function Go(){const{page:c,theme:h,frontmatter:s}=fi();return ti(()=>{var Vt,ni,Jt,Tt,ei,yi,Ei,ui;const b=Ca(h.value.sidebar,c.value.relativePath),v=ko(b),$=Uo(v,Ue=>Ue.link.replace(/[?#].*$/,"")),j=$.findIndex(Ue=>en(c.value.relativePath,Ue.link)),st=((Vt=h.value.docFooter)==null?void 0:Vt.prev)===!1&&!s.value.prev||s.value.prev===!1,U=((ni=h.value.docFooter)==null?void 0:ni.next)===!1&&!s.value.next||s.value.next===!1;return{prev:st?void 0:{text:(typeof s.value.prev=="string"?s.value.prev:typeof s.value.prev=="object"?s.value.prev.text:void 0)??((Jt=$[j-1])==null?void 0:Jt.docFooterText)??((Tt=$[j-1])==null?void 0:Tt.text),link:(typeof s.value.prev=="object"?s.value.prev.link:void 0)??((ei=$[j-1])==null?void 0:ei.link)},next:U?void 0:{text:(typeof s.value.next=="string"?s.value.next:typeof s.value.next=="object"?s.value.next.text:void 0)??((yi=$[j+1])==null?void 0:yi.docFooterText)??((Ei=$[j+1])==null?void 0:Ei.text),link:(typeof s.value.next=="object"?s.value.next.link:void 0)??((ui=$[j+1])==null?void 0:ui.link)}}})}function Uo(c,h){const s=new Set;return c.filter(b=>{const v=h(b);return s.has(v)?!1:s.add(v)})}const ws=Ht({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(c){const h=c,s=ti(()=>h.tag??(h.href?"a":"span")),b=ti(()=>h.href&&wa.test(h.href)||h.target==="_blank");return(v,$)=>(C(),Gt(zs(s.value),{class:wi(["VPLink",{link:v.href,"vp-external-link-icon":b.value,"no-icon":v.noIcon}]),href:v.href?A(oa)(v.href):void 0,target:v.target??(b.value?"_blank":void 0),rel:v.rel??(b.value?"noreferrer":void 0)},{default:rt(()=>[Z(v.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),Wo={class:"VPLastUpdated"},qo=["datetime"],Jo=Ht({__name:"VPDocFooterLastUpdated",setup(c){const{theme:h,page:s,lang:b}=fi(),v=ti(()=>new Date(s.value.lastUpdated)),$=ti(()=>v.value.toISOString()),j=_i("");return Os(()=>{Dn(()=>{var st,U,Vt;j.value=new Intl.DateTimeFormat((U=(st=h.value.lastUpdated)==null?void 0:st.formatOptions)!=null&&U.forceLocale?b.value:void 0,((Vt=h.value.lastUpdated)==null?void 0:Vt.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(v.value)})}),(st,U)=>{var Vt;return C(),J("p",Wo,[Is(Hi(((Vt=A(h).lastUpdated)==null?void 0:Vt.text)||A(h).lastUpdatedText||"Last updated")+": ",1),X("time",{datetime:$.value},Hi(j.value),9,qo)])}}}),Zo=Yt(Jo,[["__scopeId","data-v-7a4a291e"]]),Ha=c=>(Fe("data-v-748ddfb1"),c=c(),De(),c),Ko={key:0,class:"VPDocFooter"},Yo={key:0,class:"edit-info"},Qo={key:0,class:"edit-link"},Xo=Ha(()=>X("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),tr={key:1,class:"last-updated"},ir={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},er=Ha(()=>X("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),sr={class:"pager"},nr=["innerHTML"],ar=["innerHTML"],or={class:"pager"},rr=["innerHTML"],hr=["innerHTML"],lr=Ht({__name:"VPDocFooter",setup(c){const{theme:h,page:s,frontmatter:b}=fi(),v=jo(),$=Go(),j=ti(()=>h.value.editLink&&b.value.editLink!==!1),st=ti(()=>s.value.lastUpdated),U=ti(()=>j.value||st.value||$.value.prev||$.value.next);return(Vt,ni)=>{var Jt,Tt,ei,yi;return U.value?(C(),J("footer",Ko,[Z(Vt.$slots,"doc-footer-before",{},void 0,!0),j.value||st.value?(C(),J("div",Yo,[j.value?(C(),J("div",Qo,[jt(ws,{class:"edit-link-button",href:A(v).url,"no-icon":!0},{default:rt(()=>[Xo,Is(" "+Hi(A(v).text),1)]),_:1},8,["href"])])):Ct("",!0),st.value?(C(),J("div",tr,[jt(Zo)])):Ct("",!0)])):Ct("",!0),(Jt=A($).prev)!=null&&Jt.link||(Tt=A($).next)!=null&&Tt.link?(C(),J("nav",ir,[er,X("div",sr,[(ei=A($).prev)!=null&&ei.link?(C(),Gt(ws,{key:0,class:"pager-link prev",href:A($).prev.link},{default:rt(()=>{var Ei;return[X("span",{class:"desc",innerHTML:((Ei=A(h).docFooter)==null?void 0:Ei.prev)||"Previous page"},null,8,nr),X("span",{class:"title",innerHTML:A($).prev.text},null,8,ar)]}),_:1},8,["href"])):Ct("",!0)]),X("div",or,[(yi=A($).next)!=null&&yi.link?(C(),Gt(ws,{key:0,class:"pager-link next",href:A($).next.link},{default:rt(()=>{var Ei;return[X("span",{class:"desc",innerHTML:((Ei=A(h).docFooter)==null?void 0:Ei.next)||"Next page"},null,8,rr),X("span",{class:"title",innerHTML:A($).next.text},null,8,hr)]}),_:1},8,["href"])):Ct("",!0)])])):Ct("",!0)])):Ct("",!0)}}}),cr=Yt(lr,[["__scopeId","data-v-748ddfb1"]]),ur=c=>(Fe("data-v-3d4a6652"),c=c(),De(),c),pr={class:"container"},mr=ur(()=>X("div",{class:"aside-curtain"},null,-1)),dr={class:"aside-container"},fr={class:"aside-content"},yr={class:"content"},vr={class:"content-container"},_r={class:"main"},br=Ht({__name:"VPDoc",setup(c){const{theme:h}=fi(),s=Rn(),{hasSidebar:b,hasAside:v,leftAside:$}=Hs(),j=ti(()=>s.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(st,U)=>{const Vt=sn("Content");return C(),J("div",{class:wi(["VPDoc",{"has-sidebar":A(b),"has-aside":A(v)}])},[Z(st.$slots,"doc-top",{},void 0,!0),X("div",pr,[A(v)?(C(),J("div",{key:0,class:wi(["aside",{"left-aside":A($)}])},[mr,X("div",dr,[X("div",fr,[jt(Ro,null,{"aside-top":rt(()=>[Z(st.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":rt(()=>[Z(st.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":rt(()=>[Z(st.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":rt(()=>[Z(st.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":rt(()=>[Z(st.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":rt(()=>[Z(st.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):Ct("",!0),X("div",yr,[X("div",vr,[Z(st.$slots,"doc-before",{},void 0,!0),X("main",_r,[jt(Vt,{class:wi(["vp-doc",[j.value,A(h).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),jt(cr,null,{"doc-footer-before":rt(()=>[Z(st.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),Z(st.$slots,"doc-after",{},void 0,!0)])])]),Z(st.$slots,"doc-bottom",{},void 0,!0)],2)}}}),xr=Yt(br,[["__scopeId","data-v-3d4a6652"]]),gr=Ht({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(c){const h=c,s=ti(()=>h.href&&wa.test(h.href)),b=ti(()=>h.tag||h.href?"a":"button");return(v,$)=>(C(),Gt(zs(b.value),{class:wi(["VPButton",[v.size,v.theme]]),href:v.href?A(oa)(v.href):void 0,target:h.target??(s.value?"_blank":void 0),rel:h.rel??(s.value?"noreferrer":void 0)},{default:rt(()=>[Is(Hi(v.text),1)]),_:1},8,["class","href","target","rel"]))}}),kr=Yt(gr,[["__scopeId","data-v-b3974d2b"]]),Pr=["src","alt"],zr=Ht({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(c){return(h,s)=>{const b=sn("VPImage",!0);return h.image?(C(),J(Ki,{key:0},[typeof h.image=="string"||"src"in h.image?(C(),J("img",Ds({key:0,class:"VPImage"},typeof h.image=="string"?h.$attrs:{...h.image,...h.$attrs},{src:A(ea)(typeof h.image=="string"?h.image:h.image.src),alt:h.alt??(typeof h.image=="string"?"":h.image.alt||"")}),null,16,Pr)):(C(),J(Ki,{key:1},[jt(b,Ds({class:"dark",image:h.image.dark,alt:h.image.alt},h.$attrs),null,16,["image","alt"]),jt(b,Ds({class:"light",image:h.image.light,alt:h.image.alt},h.$attrs),null,16,["image","alt"])],64))],64)):Ct("",!0)}}}),En=Yt(zr,[["__scopeId","data-v-623fa81d"]]),wr=c=>(Fe("data-v-07872c7c"),c=c(),De(),c),Sr={class:"container"},Nr={class:"main"},Mr={key:0,class:"name"},Lr=["innerHTML"],Cr=["innerHTML"],Vr=["innerHTML"],Ir={key:0,class:"actions"},Hr={key:0,class:"image"},Tr={class:"image-container"},Ar=wr(()=>X("div",{class:"image-bg"},null,-1)),$r=Ht({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(c){const h=jn("hero-image-slot-exists");return(s,b)=>(C(),J("div",{class:wi(["VPHero",{"has-image":s.image||A(h)}])},[X("div",Sr,[X("div",Nr,[Z(s.$slots,"home-hero-info-before",{},void 0,!0),Z(s.$slots,"home-hero-info",{},()=>[s.name?(C(),J("h1",Mr,[X("span",{innerHTML:s.name,class:"clip"},null,8,Lr)])):Ct("",!0),s.text?(C(),J("p",{key:1,innerHTML:s.text,class:"text"},null,8,Cr)):Ct("",!0),s.tagline?(C(),J("p",{key:2,innerHTML:s.tagline,class:"tagline"},null,8,Vr)):Ct("",!0)],!0),Z(s.$slots,"home-hero-info-after",{},void 0,!0),s.actions?(C(),J("div",Ir,[(C(!0),J(Ki,null,Xe(s.actions,v=>(C(),J("div",{key:v.link,class:"action"},[jt(kr,{tag:"a",size:"medium",theme:v.theme,text:v.text,href:v.link,target:v.target,rel:v.rel},null,8,["theme","text","href","target","rel"])]))),128))])):Ct("",!0),Z(s.$slots,"home-hero-actions-after",{},void 0,!0)]),s.image||A(h)?(C(),J("div",Hr,[X("div",Tr,[Ar,Z(s.$slots,"home-hero-image",{},()=>[s.image?(C(),Gt(En,{key:0,class:"image-src",image:s.image},null,8,["image"])):Ct("",!0)],!0)])])):Ct("",!0)])],2))}}),Br=Yt($r,[["__scopeId","data-v-07872c7c"]]),Er=Ht({__name:"VPHomeHero",setup(c){const{frontmatter:h}=fi();return(s,b)=>A(h).hero?(C(),Gt(Br,{key:0,class:"VPHomeHero",name:A(h).hero.name,text:A(h).hero.text,tagline:A(h).hero.tagline,image:A(h).hero.image,actions:A(h).hero.actions},{"home-hero-info-before":rt(()=>[Z(s.$slots,"home-hero-info-before")]),"home-hero-info":rt(()=>[Z(s.$slots,"home-hero-info")]),"home-hero-info-after":rt(()=>[Z(s.$slots,"home-hero-info-after")]),"home-hero-actions-after":rt(()=>[Z(s.$slots,"home-hero-actions-after")]),"home-hero-image":rt(()=>[Z(s.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):Ct("",!0)}}),Fr=c=>(Fe("data-v-40f684b7"),c=c(),De(),c),Dr={class:"box"},Or={key:0,class:"icon"},Rr=["innerHTML"],jr=["innerHTML"],Gr=["innerHTML"],Ur={key:4,class:"link-text"},Wr={class:"link-text-value"},qr=Fr(()=>X("span",{class:"vpi-arrow-right link-text-icon"},null,-1)),Jr=Ht({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(c){return(h,s)=>(C(),Gt(ws,{class:"VPFeature",href:h.link,rel:h.rel,target:h.target,"no-icon":!0,tag:h.link?"a":"div"},{default:rt(()=>[X("article",Dr,[typeof h.icon=="object"&&h.icon.wrap?(C(),J("div",Or,[jt(En,{image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])])):typeof h.icon=="object"?(C(),Gt(En,{key:1,image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])):h.icon?(C(),J("div",{key:2,class:"icon",innerHTML:h.icon},null,8,Rr)):Ct("",!0),X("h2",{class:"title",innerHTML:h.title},null,8,jr),h.details?(C(),J("p",{key:3,class:"details",innerHTML:h.details},null,8,Gr)):Ct("",!0),h.linkText?(C(),J("div",Ur,[X("p",Wr,[Is(Hi(h.linkText)+" ",1),qr])])):Ct("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),Zr=Yt(Jr,[["__scopeId","data-v-40f684b7"]]),Kr={key:0,class:"VPFeatures"},Yr={class:"container"},Qr={class:"items"},Xr=Ht({__name:"VPFeatures",props:{features:{}},setup(c){const h=c,s=ti(()=>{const b=h.features.length;if(b){if(b===2)return"grid-2";if(b===3)return"grid-3";if(b%3===0)return"grid-6";if(b>3)return"grid-4"}else return});return(b,v)=>b.features?(C(),J("div",Kr,[X("div",Yr,[X("div",Qr,[(C(!0),J(Ki,null,Xe(b.features,$=>(C(),J("div",{key:$.title,class:wi(["item",[s.value]])},[jt(Zr,{icon:$.icon,title:$.title,details:$.details,link:$.link,"link-text":$.linkText,rel:$.rel,target:$.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):Ct("",!0)}}),th=Yt(Xr,[["__scopeId","data-v-ec684931"]]),ih=Ht({__name:"VPHomeFeatures",setup(c){const{frontmatter:h}=fi();return(s,b)=>A(h).features?(C(),Gt(th,{key:0,class:"VPHomeFeatures",features:A(h).features},null,8,["features"])):Ct("",!0)}}),eh=Ht({__name:"VPHomeContent",setup(c){const{width:h}=Ja({initialWidth:0,includeScrollbar:!1});return(s,b)=>(C(),J("div",{class:"vp-doc container",style:aa(A(h)?{"--vp-offset":`calc(50% - ${A(h)/2}px)`}:{})},[Z(s.$slots,"default",{},void 0,!0)],4))}}),sh=Yt(eh,[["__scopeId","data-v-e87be01f"]]),nh={class:"VPHome"},ah=Ht({__name:"VPHome",setup(c){const{frontmatter:h}=fi();return(s,b)=>{const v=sn("Content");return C(),J("div",nh,[Z(s.$slots,"home-hero-before",{},void 0,!0),jt(Er,null,{"home-hero-info-before":rt(()=>[Z(s.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":rt(()=>[Z(s.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":rt(()=>[Z(s.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":rt(()=>[Z(s.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":rt(()=>[Z(s.$slots,"home-hero-image",{},void 0,!0)]),_:3}),Z(s.$slots,"home-hero-after",{},void 0,!0),Z(s.$slots,"home-features-before",{},void 0,!0),jt(ih),Z(s.$slots,"home-features-after",{},void 0,!0),A(h).markdownStyles!==!1?(C(),Gt(sh,{key:0},{default:rt(()=>[jt(v)]),_:1})):(C(),Gt(v,{key:1}))])}}}),oh=Yt(ah,[["__scopeId","data-v-07d1c0b4"]]),rh={},hh={class:"VPPage"};function lh(c,h){const s=sn("Content");return C(),J("div",hh,[Z(c.$slots,"page-top"),jt(s),Z(c.$slots,"page-bottom")])}const ch=Yt(rh,[["render",lh]]),uh=Ht({__name:"VPContent",setup(c){const{page:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs();return(v,$)=>(C(),J("div",{class:wi(["VPContent",{"has-sidebar":A(b),"is-home":A(s).layout==="home"}]),id:"VPContent"},[A(h).isNotFound?Z(v.$slots,"not-found",{key:0},()=>[jt(xo)],!0):A(s).layout==="page"?(C(),Gt(ch,{key:1},{"page-top":rt(()=>[Z(v.$slots,"page-top",{},void 0,!0)]),"page-bottom":rt(()=>[Z(v.$slots,"page-bottom",{},void 0,!0)]),_:3})):A(s).layout==="home"?(C(),Gt(oh,{key:2},{"home-hero-before":rt(()=>[Z(v.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":rt(()=>[Z(v.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":rt(()=>[Z(v.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":rt(()=>[Z(v.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":rt(()=>[Z(v.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":rt(()=>[Z(v.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":rt(()=>[Z(v.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":rt(()=>[Z(v.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":rt(()=>[Z(v.$slots,"home-features-after",{},void 0,!0)]),_:3})):A(s).layout&&A(s).layout!=="doc"?(C(),Gt(zs(A(s).layout),{key:3})):(C(),Gt(xr,{key:4},{"doc-top":rt(()=>[Z(v.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":rt(()=>[Z(v.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":rt(()=>[Z(v.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":rt(()=>[Z(v.$slots,"doc-before",{},void 0,!0)]),"doc-after":rt(()=>[Z(v.$slots,"doc-after",{},void 0,!0)]),"aside-top":rt(()=>[Z(v.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":rt(()=>[Z(v.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":rt(()=>[Z(v.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":rt(()=>[Z(v.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":rt(()=>[Z(v.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":rt(()=>[Z(v.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),ph=Yt(uh,[["__scopeId","data-v-18f63bde"]]),mh={class:"container"},dh=["innerHTML"],fh=["innerHTML"],yh=Ht({__name:"VPFooter",setup(c){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs();return(v,$)=>A(h).footer&&A(s).footer!==!1?(C(),J("footer",{key:0,class:wi(["VPFooter",{"has-sidebar":A(b)}])},[X("div",mh,[A(h).footer.message?(C(),J("p",{key:0,class:"message",innerHTML:A(h).footer.message},null,8,dh)):Ct("",!0),A(h).footer.copyright?(C(),J("p",{key:1,class:"copyright",innerHTML:A(h).footer.copyright},null,8,fh)):Ct("",!0)])],2)):Ct("",!0)}}),vh=Yt(yh,[["__scopeId","data-v-7528d401"]]);function _h(){const{theme:c,frontmatter:h}=fi(),s=za([]),b=ti(()=>s.value.length>0);return On(()=>{s.value=ra(h.value.outline??c.value.outline)}),{headers:s,hasLocalNav:b}}const bh=c=>(Fe("data-v-c7be9e76"),c=c(),De(),c),xh={class:"menu-text"},gh=bh(()=>X("span",{class:"vpi-chevron-right icon"},null,-1)),kh={class:"header"},Ph={class:"outline"},zh=Ht({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(c){const h=c,{theme:s}=fi(),b=_i(!1),v=_i(0),$=_i(),j=_i();function st(Jt){var Tt;(Tt=$.value)!=null&&Tt.contains(Jt.target)||(b.value=!1)}ps(b,Jt=>{if(Jt){document.addEventListener("click",st);return}document.removeEventListener("click",st)}),Za("Escape",()=>{b.value=!1}),On(()=>{b.value=!1});function U(){b.value=!b.value,v.value=window.innerHeight+Math.min(window.scrollY-h.navHeight,0)}function Vt(Jt){Jt.target.classList.contains("outline-link")&&(j.value&&(j.value.style.transition="none"),Ka(()=>{b.value=!1}))}function ni(){b.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(Jt,Tt)=>(C(),J("div",{class:"VPLocalNavOutlineDropdown",style:aa({"--vp-vh":v.value+"px"}),ref_key:"main",ref:$},[Jt.headers.length>0?(C(),J("button",{key:0,onClick:U,class:wi({open:b.value})},[X("span",xh,Hi(A(Va)(A(s))),1),gh],2)):(C(),J("button",{key:1,onClick:ni},Hi(A(s).returnToTopLabel||"Return to top"),1)),jt(Fn,{name:"flyout"},{default:rt(()=>[b.value?(C(),J("div",{key:0,ref_key:"items",ref:j,class:"items",onClick:Vt},[X("div",kh,[X("a",{class:"top-link",href:"#",onClick:ni},Hi(A(s).returnToTopLabel||"Return to top"),1)]),X("div",Ph,[jt(Ia,{headers:Jt.headers},null,8,["headers"])])],512)):Ct("",!0)]),_:1})],4))}}),wh=Yt(zh,[["__scopeId","data-v-c7be9e76"]]),Sh=c=>(Fe("data-v-7d8f5dd9"),c=c(),De(),c),Nh={class:"container"},Mh=["aria-expanded"],Lh=Sh(()=>X("span",{class:"vpi-align-left menu-icon"},null,-1)),Ch={class:"menu-text"},Vh=Ht({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(c){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs(),{headers:v}=_h(),{y:$}=Sa(),j=_i(0);Os(()=>{j.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),On(()=>{v.value=ra(s.value.outline??h.value.outline)});const st=ti(()=>v.value.length===0),U=ti(()=>st.value&&!b.value),Vt=ti(()=>({VPLocalNav:!0,"has-sidebar":b.value,empty:st.value,fixed:U.value}));return(ni,Jt)=>A(s).layout!=="home"&&(!U.value||A($)>=j.value)?(C(),J("div",{key:0,class:wi(Vt.value)},[X("div",Nh,[A(b)?(C(),J("button",{key:0,class:"menu","aria-expanded":ni.open,"aria-controls":"VPSidebarNav",onClick:Jt[0]||(Jt[0]=Tt=>ni.$emit("open-menu"))},[Lh,X("span",Ch,Hi(A(h).sidebarMenuLabel||"Menu"),1)],8,Mh)):Ct("",!0),jt(wh,{headers:A(v),navHeight:j.value},null,8,["headers","navHeight"])])],2)):Ct("",!0)}}),Ih=Yt(Vh,[["__scopeId","data-v-7d8f5dd9"]]);function Hh(){const c=_i(!1);function h(){c.value=!0,window.addEventListener("resize",v)}function s(){c.value=!1,window.removeEventListener("resize",v)}function b(){c.value?s():h()}function v(){window.outerWidth>=768&&s()}const $=Rn();return ps(()=>$.path,s),{isScreenOpen:c,openScreen:h,closeScreen:s,toggleScreen:b}}const Th={},Ah={class:"VPSwitch",type:"button",role:"switch"},$h={class:"check"},Bh={key:0,class:"icon"};function Eh(c,h){return C(),J("button",Ah,[X("span",$h,[c.$slots.default?(C(),J("span",Bh,[Z(c.$slots,"default",{},void 0,!0)])):Ct("",!0)])])}const Fh=Yt(Th,[["render",Eh],["__scopeId","data-v-bd1ccbf1"]]),Ta=c=>(Fe("data-v-0a9ef097"),c=c(),De(),c),Dh=Ta(()=>X("span",{class:"vpi-sun sun"},null,-1)),Oh=Ta(()=>X("span",{class:"vpi-moon moon"},null,-1)),Rh=Ht({__name:"VPSwitchAppearance",setup(c){const{isDark:h,theme:s}=fi(),b=jn("toggle-appearance",()=>{h.value=!h.value}),v=_i("");return na(()=>{v.value=h.value?s.value.lightModeSwitchTitle||"Switch to light theme":s.value.darkModeSwitchTitle||"Switch to dark theme"}),($,j)=>(C(),Gt(Fh,{title:v.value,class:"VPSwitchAppearance","aria-checked":A(h),onClick:A(b)},{default:rt(()=>[Dh,Oh]),_:1},8,["title","aria-checked","onClick"]))}}),ha=Yt(Rh,[["__scopeId","data-v-0a9ef097"]]),jh={key:0,class:"VPNavBarAppearance"},Gh=Ht({__name:"VPNavBarAppearance",setup(c){const{site:h}=fi();return(s,b)=>A(h).appearance&&A(h).appearance!=="force-dark"&&A(h).appearance!=="force-auto"?(C(),J("div",jh,[jt(ha)])):Ct("",!0)}}),Uh=Yt(Gh,[["__scopeId","data-v-fae4f2f4"]]),la=_i();let Aa=!1,Kn=0;function Wh(c){const h=_i(!1);if(Gn){!Aa&&qh(),Kn++;const s=ps(la,b=>{var v,$,j;b===c.el.value||(v=c.el.value)!=null&&v.contains(b)?(h.value=!0,($=c.onFocus)==null||$.call(c)):(h.value=!1,(j=c.onBlur)==null||j.call(c))});sa(()=>{s(),Kn--,Kn||Jh()})}return Ya(h)}function qh(){document.addEventListener("focusin",$a),Aa=!0,la.value=document.activeElement}function Jh(){document.removeEventListener("focusin",$a)}function $a(){la.value=document.activeElement}const Zh={class:"VPMenuLink"},Kh=Ht({__name:"VPMenuLink",props:{item:{}},setup(c){const{page:h}=fi();return(s,b)=>(C(),J("div",Zh,[jt(ws,{class:wi({active:A(en)(A(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,target:s.item.target,rel:s.item.rel},{default:rt(()=>[Is(Hi(s.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),Un=Yt(Kh,[["__scopeId","data-v-cdceaf56"]]),Yh={class:"VPMenuGroup"},Qh={key:0,class:"title"},Xh=Ht({__name:"VPMenuGroup",props:{text:{},items:{}},setup(c){return(h,s)=>(C(),J("div",Yh,[h.text?(C(),J("p",Qh,Hi(h.text),1)):Ct("",!0),(C(!0),J(Ki,null,Xe(h.items,b=>(C(),J(Ki,null,["link"in b?(C(),Gt(Un,{key:0,item:b},null,8,["item"])):Ct("",!0)],64))),256))]))}}),tl=Yt(Xh,[["__scopeId","data-v-2551a641"]]),il={class:"VPMenu"},el={key:0,class:"items"},sl=Ht({__name:"VPMenu",props:{items:{}},setup(c){return(h,s)=>(C(),J("div",il,[h.items?(C(),J("div",el,[(C(!0),J(Ki,null,Xe(h.items,b=>(C(),J(Ki,{key:JSON.stringify(b)},["link"in b?(C(),Gt(Un,{key:0,item:b},null,8,["item"])):"component"in b?(C(),Gt(zs(b.component),Na(Ds({key:1},b.props)),null,16)):(C(),Gt(tl,{key:2,text:b.text,items:b.items},null,8,["text","items"]))],64))),128))])):Ct("",!0),Z(h.$slots,"default",{},void 0,!0)]))}}),nl=Yt(sl,[["__scopeId","data-v-8da9259e"]]),al=c=>(Fe("data-v-c55c6200"),c=c(),De(),c),ol=["aria-expanded","aria-label"],rl={key:0,class:"text"},hl=["innerHTML"],ll=al(()=>X("span",{class:"vpi-chevron-down text-icon"},null,-1)),cl={key:1,class:"vpi-more-horizontal icon"},ul={class:"menu"},pl=Ht({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(c){const h=_i(!1),s=_i();Wh({el:s,onBlur:b});function b(){h.value=!1}return(v,$)=>(C(),J("div",{class:"VPFlyout",ref_key:"el",ref:s,onMouseenter:$[1]||($[1]=j=>h.value=!0),onMouseleave:$[2]||($[2]=j=>h.value=!1)},[X("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":h.value,"aria-label":v.label,onClick:$[0]||($[0]=j=>h.value=!h.value)},[v.button||v.icon?(C(),J("span",rl,[v.icon?(C(),J("span",{key:0,class:wi([v.icon,"option-icon"])},null,2)):Ct("",!0),v.button?(C(),J("span",{key:1,innerHTML:v.button},null,8,hl)):Ct("",!0),ll])):(C(),J("span",cl))],8,ol),X("div",ul,[jt(nl,{items:v.items},{default:rt(()=>[Z(v.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),ca=Yt(pl,[["__scopeId","data-v-c55c6200"]]),ml=["href","aria-label","innerHTML"],dl=Ht({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(c){const h=c,s=ti(()=>typeof h.icon=="object"?h.icon.svg:`<span class="vpi-social-${h.icon}" />`);return(b,v)=>(C(),J("a",{class:"VPSocialLink no-icon",href:b.link,"aria-label":b.ariaLabel??(typeof b.icon=="string"?b.icon:""),target:"_blank",rel:"noopener",innerHTML:s.value},null,8,ml))}}),fl=Yt(dl,[["__scopeId","data-v-899e80f8"]]),yl={class:"VPSocialLinks"},vl=Ht({__name:"VPSocialLinks",props:{links:{}},setup(c){return(h,s)=>(C(),J("div",yl,[(C(!0),J(Ki,null,Xe(h.links,({link:b,icon:v,ariaLabel:$})=>(C(),Gt(fl,{key:b,icon:v,link:b,ariaLabel:$},null,8,["icon","link","ariaLabel"]))),128))]))}}),ua=Yt(vl,[["__scopeId","data-v-aec6899b"]]),_l={key:0,class:"group translations"},bl={class:"trans-title"},xl={key:1,class:"group"},gl={class:"item appearance"},kl={class:"label"},Pl={class:"appearance-action"},zl={key:2,class:"group"},wl={class:"item social-links"},Sl=Ht({__name:"VPNavBarExtra",setup(c){const{site:h,theme:s}=fi(),{localeLinks:b,currentLang:v}=Ln({correspondingLink:!0}),$=ti(()=>b.value.length&&v.value.label||h.value.appearance||s.value.socialLinks);return(j,st)=>$.value?(C(),Gt(ca,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:rt(()=>[A(b).length&&A(v).label?(C(),J("div",_l,[X("p",bl,Hi(A(v).label),1),(C(!0),J(Ki,null,Xe(A(b),U=>(C(),Gt(Un,{key:U.link,item:U},null,8,["item"]))),128))])):Ct("",!0),A(h).appearance&&A(h).appearance!=="force-dark"&&A(h).appearance!=="force-auto"?(C(),J("div",xl,[X("div",gl,[X("p",kl,Hi(A(s).darkModeSwitchLabel||"Appearance"),1),X("div",Pl,[jt(ha)])])])):Ct("",!0),A(s).socialLinks?(C(),J("div",zl,[X("div",wl,[jt(ua,{class:"social-links-list",links:A(s).socialLinks},null,8,["links"])])])):Ct("",!0)]),_:1})):Ct("",!0)}}),Nl=Yt(Sl,[["__scopeId","data-v-f6eb0a87"]]),Ml=c=>(Fe("data-v-8d5b6282"),c=c(),De(),c),Ll=["aria-expanded"],Cl=Ml(()=>X("span",{class:"container"},[X("span",{class:"top"}),X("span",{class:"middle"}),X("span",{class:"bottom"})],-1)),Vl=[Cl],Il=Ht({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(c){return(h,s)=>(C(),J("button",{type:"button",class:wi(["VPNavBarHamburger",{active:h.active}]),"aria-label":"mobile navigation","aria-expanded":h.active,"aria-controls":"VPNavScreen",onClick:s[0]||(s[0]=b=>h.$emit("click"))},Vl,10,Ll))}}),Hl=Yt(Il,[["__scopeId","data-v-8d5b6282"]]),Tl=["innerHTML"],Al=Ht({__name:"VPNavBarMenuLink",props:{item:{}},setup(c){const{page:h}=fi();return(s,b)=>(C(),Gt(ws,{class:wi({VPNavBarMenuLink:!0,active:A(en)(A(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,noIcon:s.item.noIcon,target:s.item.target,rel:s.item.rel,tabindex:"0"},{default:rt(()=>[X("span",{innerHTML:s.item.text},null,8,Tl)]),_:1},8,["class","href","noIcon","target","rel"]))}}),$l=Yt(Al,[["__scopeId","data-v-c4466b3d"]]),Bl=Ht({__name:"VPNavBarMenuGroup",props:{item:{}},setup(c){const h=c,{page:s}=fi(),b=$=>"component"in $?!1:"link"in $?en(s.value.relativePath,$.link,!!h.item.activeMatch):$.items.some(b),v=ti(()=>b(h.item));return($,j)=>(C(),Gt(ca,{class:wi({VPNavBarMenuGroup:!0,active:A(en)(A(s).relativePath,$.item.activeMatch,!!$.item.activeMatch)||v.value}),button:$.item.text,items:$.item.items},null,8,["class","button","items"]))}}),El=c=>(Fe("data-v-7c84bb69"),c=c(),De(),c),Fl={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Dl=El(()=>X("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),Ol=Ht({__name:"VPNavBarMenu",setup(c){const{theme:h}=fi();return(s,b)=>A(h).nav?(C(),J("nav",Fl,[Dl,(C(!0),J(Ki,null,Xe(A(h).nav,v=>(C(),J(Ki,{key:JSON.stringify(v)},["link"in v?(C(),Gt($l,{key:0,item:v},null,8,["item"])):"component"in v?(C(),Gt(zs(v.component),Na(Ds({key:1},v.props)),null,16)):(C(),Gt(Bl,{key:2,item:v},null,8,["item"]))],64))),128))])):Ct("",!0)}}),Rl=Yt(Ol,[["__scopeId","data-v-7c84bb69"]]);function jl(c){const{localeIndex:h,theme:s}=fi();function b(v){var yi,Ei,ui;const $=v.split("."),j=(yi=s.value.search)==null?void 0:yi.options,st=j&&typeof j=="object",U=st&&((ui=(Ei=j.locales)==null?void 0:Ei[h.value])==null?void 0:ui.translations)||null,Vt=st&&j.translations||null;let ni=U,Jt=Vt,Tt=c;const ei=$.pop();for(const Ue of $){let Oe=null;const ls=Tt==null?void 0:Tt[Ue];ls&&(Oe=Tt=ls);const Ss=Jt==null?void 0:Jt[Ue];Ss&&(Oe=Jt=Ss);const Ts=ni==null?void 0:ni[Ue];Ts&&(Oe=ni=Ts),ls||(Tt=Oe),Ss||(Jt=Oe),Ts||(ni=Oe)}return(ni==null?void 0:ni[ei])??(Jt==null?void 0:Jt[ei])??(Tt==null?void 0:Tt[ei])??""}return b}const Gl=["aria-label"],Ul={class:"DocSearch-Button-Container"},Wl=X("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1),ql={class:"DocSearch-Button-Placeholder"},Jl=X("span",{class:"DocSearch-Button-Keys"},[X("kbd",{class:"DocSearch-Button-Key"}),X("kbd",{class:"DocSearch-Button-Key"},"K")],-1),Pa=Ht({__name:"VPNavBarSearchButton",setup(c){const s=jl({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(b,v)=>(C(),J("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":A(s)("button.buttonAriaLabel")},[X("span",Ul,[Wl,X("span",ql,Hi(A(s)("button.buttonText")),1)]),Jl],8,Gl))}}),Zl={class:"VPNavBarSearch"},Kl={id:"local-search"},Yl={key:1,id:"docsearch"},Ql=Ht({__name:"VPNavBarSearch",setup(c){const h=()=>null,s=()=>null,{theme:b}=fi(),v=_i(!1),$=_i(!1);Os(()=>{});function j(){v.value||(v.value=!0,setTimeout(st,16))}function st(){const ni=new Event("keydown");ni.key="k",ni.metaKey=!0,window.dispatchEvent(ni),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||st()},16)}const U=_i(!1),Vt="";return(ni,Jt)=>{var Tt;return C(),J("div",Zl,[A(Vt)==="local"?(C(),J(Ki,{key:0},[U.value?(C(),Gt(A(h),{key:0,onClose:Jt[0]||(Jt[0]=ei=>U.value=!1)})):Ct("",!0),X("div",Kl,[jt(Pa,{onClick:Jt[1]||(Jt[1]=ei=>U.value=!0)})])],64)):A(Vt)==="algolia"?(C(),J(Ki,{key:1},[v.value?(C(),Gt(A(s),{key:0,algolia:((Tt=A(b).search)==null?void 0:Tt.options)??A(b).algolia,onVnodeBeforeMount:Jt[2]||(Jt[2]=ei=>$.value=!0)},null,8,["algolia"])):Ct("",!0),$.value?Ct("",!0):(C(),J("div",Yl,[jt(Pa,{onClick:j})]))],64)):Ct("",!0)])}}}),Xl=Ht({__name:"VPNavBarSocialLinks",setup(c){const{theme:h}=fi();return(s,b)=>A(h).socialLinks?(C(),Gt(ua,{key:0,class:"VPNavBarSocialLinks",links:A(h).socialLinks},null,8,["links"])):Ct("",!0)}}),tc=Yt(Xl,[["__scopeId","data-v-f191b639"]]),ic=["href","rel","target"],ec={key:1},sc={key:2},nc=Ht({__name:"VPNavBarTitle",setup(c){const{site:h,theme:s}=fi(),{hasSidebar:b}=Hs(),{currentLang:v}=Ln(),$=ti(()=>{var U;return typeof s.value.logoLink=="string"?s.value.logoLink:(U=s.value.logoLink)==null?void 0:U.link}),j=ti(()=>{var U;return typeof s.value.logoLink=="string"||(U=s.value.logoLink)==null?void 0:U.rel}),st=ti(()=>{var U;return typeof s.value.logoLink=="string"||(U=s.value.logoLink)==null?void 0:U.target});return(U,Vt)=>(C(),J("div",{class:wi(["VPNavBarTitle",{"has-sidebar":A(b)}])},[X("a",{class:"title",href:$.value??A(oa)(A(v).link),rel:j.value,target:st.value},[Z(U.$slots,"nav-bar-title-before",{},void 0,!0),A(s).logo?(C(),Gt(En,{key:0,class:"logo",image:A(s).logo},null,8,["image"])):Ct("",!0),A(s).siteTitle?(C(),J("span",ec,Hi(A(s).siteTitle),1)):A(s).siteTitle===void 0?(C(),J("span",sc,Hi(A(h).title),1)):Ct("",!0),Z(U.$slots,"nav-bar-title-after",{},void 0,!0)],8,ic)],2))}}),ac=Yt(nc,[["__scopeId","data-v-2c2ef767"]]),oc={class:"items"},rc={class:"title"},hc=Ht({__name:"VPNavBarTranslations",setup(c){const{theme:h}=fi(),{localeLinks:s,currentLang:b}=Ln({correspondingLink:!0});return(v,$)=>A(s).length&&A(b).label?(C(),Gt(ca,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:A(h).langMenuLabel||"Change language"},{default:rt(()=>[X("div",oc,[X("p",rc,Hi(A(b).label),1),(C(!0),J(Ki,null,Xe(A(s),j=>(C(),Gt(Un,{key:j.link,item:j},null,8,["item"]))),128))])]),_:1},8,["label"])):Ct("",!0)}}),lc=Yt(hc,[["__scopeId","data-v-992f960f"]]),cc=c=>(Fe("data-v-ce9a44a1"),c=c(),De(),c),uc={class:"wrapper"},pc={class:"container"},mc={class:"title"},dc={class:"content"},fc={class:"content-body"},yc=cc(()=>X("div",{class:"divider"},[X("div",{class:"divider-line"})],-1)),vc=Ht({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(c){const h=c,{y:s}=Sa(),{hasSidebar:b}=Hs(),{frontmatter:v}=fi(),$=_i({});return na(()=>{$.value={"has-sidebar":b.value,home:v.value.layout==="home",top:s.value===0,"screen-open":h.isScreenOpen}}),(j,st)=>(C(),J("div",{class:wi(["VPNavBar",$.value])},[X("div",uc,[X("div",pc,[X("div",mc,[jt(ac,null,{"nav-bar-title-before":rt(()=>[Z(j.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":rt(()=>[Z(j.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),X("div",dc,[X("div",fc,[Z(j.$slots,"nav-bar-content-before",{},void 0,!0),jt(Ql,{class:"search"}),jt(Rl,{class:"menu"}),jt(lc,{class:"translations"}),jt(Uh,{class:"appearance"}),jt(tc,{class:"social-links"}),jt(Nl,{class:"extra"}),Z(j.$slots,"nav-bar-content-after",{},void 0,!0),jt(Hl,{class:"hamburger",active:j.isScreenOpen,onClick:st[0]||(st[0]=U=>j.$emit("toggle-screen"))},null,8,["active"])])])])]),yc],2))}}),_c=Yt(vc,[["__scopeId","data-v-ce9a44a1"]]),bc={key:0,class:"VPNavScreenAppearance"},xc={class:"text"},gc=Ht({__name:"VPNavScreenAppearance",setup(c){const{site:h,theme:s}=fi();return(b,v)=>A(h).appearance&&A(h).appearance!=="force-dark"&&A(h).appearance!=="force-auto"?(C(),J("div",bc,[X("p",xc,Hi(A(s).darkModeSwitchLabel||"Appearance"),1),jt(ha)])):Ct("",!0)}}),kc=Yt(gc,[["__scopeId","data-v-8ffa58d0"]]),Pc=Ht({__name:"VPNavScreenMenuLink",props:{item:{}},setup(c){const h=jn("close-screen");return(s,b)=>(C(),Gt(ws,{class:"VPNavScreenMenuLink",href:s.item.link,target:s.item.target,rel:s.item.rel,onClick:A(h),innerHTML:s.item.text},null,8,["href","target","rel","onClick","innerHTML"]))}}),zc=Yt(Pc,[["__scopeId","data-v-feb69975"]]),wc=Ht({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(c){const h=jn("close-screen");return(s,b)=>(C(),Gt(ws,{class:"VPNavScreenMenuGroupLink",href:s.item.link,target:s.item.target,rel:s.item.rel,onClick:A(h)},{default:rt(()=>[Is(Hi(s.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),Ba=Yt(wc,[["__scopeId","data-v-a7c463d0"]]),Sc={class:"VPNavScreenMenuGroupSection"},Nc={key:0,class:"title"},Mc=Ht({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(c){return(h,s)=>(C(),J("div",Sc,[h.text?(C(),J("p",Nc,Hi(h.text),1)):Ct("",!0),(C(!0),J(Ki,null,Xe(h.items,b=>(C(),Gt(Ba,{key:b.text,item:b},null,8,["item"]))),128))]))}}),Lc=Yt(Mc,[["__scopeId","data-v-89af11f0"]]),Cc=c=>(Fe("data-v-da30f6d4"),c=c(),De(),c),Vc=["aria-controls","aria-expanded"],Ic=["innerHTML"],Hc=Cc(()=>X("span",{class:"vpi-plus button-icon"},null,-1)),Tc=["id"],Ac={key:0,class:"item"},$c={key:1,class:"item"},Bc={key:2,class:"group"},Ec=Ht({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(c){const h=c,s=_i(!1),b=ti(()=>`NavScreenGroup-${h.text.replace(" ","-").toLowerCase()}`);function v(){s.value=!s.value}return($,j)=>(C(),J("div",{class:wi(["VPNavScreenMenuGroup",{open:s.value}])},[X("button",{class:"button","aria-controls":b.value,"aria-expanded":s.value,onClick:v},[X("span",{class:"button-text",innerHTML:$.text},null,8,Ic),Hc],8,Vc),X("div",{id:b.value,class:"items"},[(C(!0),J(Ki,null,Xe($.items,st=>(C(),J(Ki,{key:JSON.stringify(st)},["link"in st?(C(),J("div",Ac,[jt(Ba,{item:st},null,8,["item"])])):"component"in st?(C(),J("div",$c,[(C(),Gt(zs(st.component),Ds(st.props,{"screen-menu":""}),null,16))])):(C(),J("div",Bc,[jt(Lc,{items:st.items},null,8,["items"])]))],64))),128))],8,Tc)],2))}}),Fc=Yt(Ec,[["__scopeId","data-v-da30f6d4"]]),Dc={key:0,class:"VPNavScreenMenu"},Oc=Ht({__name:"VPNavScreenMenu",setup(c){const{theme:h}=fi();return(s,b)=>A(h).nav?(C(),J("nav",Dc,[(C(!0),J(Ki,null,Xe(A(h).nav,v=>(C(),J(Ki,{key:JSON.stringify(v)},["link"in v?(C(),Gt(zc,{key:0,item:v},null,8,["item"])):"component"in v?(C(),Gt(zs(v.component),Ds({key:1},v.props,{"screen-menu":""}),null,16)):(C(),Gt(Fc,{key:2,text:v.text||"",items:v.items},null,8,["text","items"]))],64))),128))])):Ct("",!0)}}),Rc=Ht({__name:"VPNavScreenSocialLinks",setup(c){const{theme:h}=fi();return(s,b)=>A(h).socialLinks?(C(),Gt(ua,{key:0,class:"VPNavScreenSocialLinks",links:A(h).socialLinks},null,8,["links"])):Ct("",!0)}}),Ea=c=>(Fe("data-v-57dba0d7"),c=c(),De(),c),jc=Ea(()=>X("span",{class:"vpi-languages icon lang"},null,-1)),Gc=Ea(()=>X("span",{class:"vpi-chevron-down icon chevron"},null,-1)),Uc={class:"list"},Wc=Ht({__name:"VPNavScreenTranslations",setup(c){const{localeLinks:h,currentLang:s}=Ln({correspondingLink:!0}),b=_i(!1);function v(){b.value=!b.value}return($,j)=>A(h).length&&A(s).label?(C(),J("div",{key:0,class:wi(["VPNavScreenTranslations",{open:b.value}])},[X("button",{class:"title",onClick:v},[jc,Is(" "+Hi(A(s).label)+" ",1),Gc]),X("ul",Uc,[(C(!0),J(Ki,null,Xe(A(h),st=>(C(),J("li",{key:st.link,class:"item"},[jt(ws,{class:"link",href:st.link},{default:rt(()=>[Is(Hi(st.text),1)]),_:2},1032,["href"])]))),128))])],2)):Ct("",!0)}}),qc=Yt(Wc,[["__scopeId","data-v-57dba0d7"]]),Jc={class:"container"},Zc=Ht({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(c){const h=_i(null),s=Ma(Gn?document.body:null);return(b,v)=>(C(),Gt(Fn,{name:"fade",onEnter:v[0]||(v[0]=$=>s.value=!0),onAfterLeave:v[1]||(v[1]=$=>s.value=!1)},{default:rt(()=>[b.open?(C(),J("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:h,id:"VPNavScreen"},[X("div",Jc,[Z(b.$slots,"nav-screen-content-before",{},void 0,!0),jt(Oc,{class:"menu"}),jt(qc,{class:"translations"}),jt(kc,{class:"appearance"}),jt(Rc,{class:"social-links"}),Z(b.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):Ct("",!0)]),_:3}))}}),Kc=Yt(Zc,[["__scopeId","data-v-72e6f365"]]),Yc={key:0,class:"VPNav"},Qc=Ht({__name:"VPNav",setup(c){const{isScreenOpen:h,closeScreen:s,toggleScreen:b}=Hh(),{frontmatter:v}=fi(),$=ti(()=>v.value.navbar!==!1);return La("close-screen",s),Dn(()=>{Gn&&document.documentElement.classList.toggle("hide-nav",!$.value)}),(j,st)=>$.value?(C(),J("header",Yc,[jt(_c,{"is-screen-open":A(h),onToggleScreen:A(b)},{"nav-bar-title-before":rt(()=>[Z(j.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":rt(()=>[Z(j.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":rt(()=>[Z(j.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":rt(()=>[Z(j.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),jt(Kc,{open:A(h)},{"nav-screen-content-before":rt(()=>[Z(j.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":rt(()=>[Z(j.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):Ct("",!0)}}),Xc=Yt(Qc,[["__scopeId","data-v-7e1e9564"]]),Fa=c=>(Fe("data-v-5f73c6e2"),c=c(),De(),c),tu=["role","tabindex"],iu=Fa(()=>X("div",{class:"indicator"},null,-1)),eu=["onKeydown"],su=Fa(()=>X("span",{class:"vpi-chevron-right caret-icon"},null,-1)),nu=[su],au={key:1,class:"items"},ou=Ht({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(c){const h=c,{collapsed:s,collapsible:b,isLink:v,isActiveLink:$,hasActiveLink:j,hasChildren:st,toggle:U}=zo(ti(()=>h.item)),Vt=ti(()=>st.value?"section":"div"),ni=ti(()=>v.value?"a":"div"),Jt=ti(()=>st.value?h.depth+2===7?"p":`h${h.depth+2}`:"p"),Tt=ti(()=>v.value?void 0:"button"),ei=ti(()=>[[`level-${h.depth}`],{collapsible:b.value},{collapsed:s.value},{"is-link":v.value},{"is-active":$.value},{"has-active":j.value}]);function yi(ui){"key"in ui&&ui.key!=="Enter"||!h.item.link&&U()}function Ei(){h.item.link&&U()}return(ui,Ue)=>{const Oe=sn("VPSidebarItem",!0);return C(),Gt(zs(Vt.value),{class:wi(["VPSidebarItem",ei.value])},{default:rt(()=>[ui.item.text?(C(),J("div",Ds({key:0,class:"item",role:Tt.value},Qa(ui.item.items?{click:yi,keydown:yi}:{},!0),{tabindex:ui.item.items&&0}),[iu,ui.item.link?(C(),Gt(ws,{key:0,tag:ni.value,class:"link",href:ui.item.link,rel:ui.item.rel,target:ui.item.target},{default:rt(()=>[(C(),Gt(zs(Jt.value),{class:"text",innerHTML:ui.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(C(),Gt(zs(Jt.value),{key:1,class:"text",innerHTML:ui.item.text},null,8,["innerHTML"])),ui.item.collapsed!=null&&ui.item.items&&ui.item.items.length?(C(),J("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:Ei,onKeydown:Xa(Ei,["enter"]),tabindex:"0"},nu,40,eu)):Ct("",!0)],16,tu)):Ct("",!0),ui.item.items&&ui.item.items.length?(C(),J("div",au,[ui.depth<5?(C(!0),J(Ki,{key:0},Xe(ui.item.items,ls=>(C(),Gt(Oe,{key:ls.text,item:ls,depth:ui.depth+1},null,8,["item","depth"]))),128)):Ct("",!0)])):Ct("",!0)]),_:1},8,["class"])}}}),ru=Yt(ou,[["__scopeId","data-v-5f73c6e2"]]),hu=Ht({__name:"VPSidebarGroup",props:{items:{}},setup(c){const h=_i(!0);let s=null;return Os(()=>{s=setTimeout(()=>{s=null,h.value=!1},300)}),to(()=>{s!=null&&(clearTimeout(s),s=null)}),(b,v)=>(C(!0),J(Ki,null,Xe(b.items,$=>(C(),J("div",{key:$.text,class:wi(["group",{"no-transition":h.value}])},[jt(ru,{item:$,depth:0},null,8,["item"])],2))),128))}}),lu=Yt(hu,[["__scopeId","data-v-769547d6"]]),Da=c=>(Fe("data-v-0d526d28"),c=c(),De(),c),cu=Da(()=>X("div",{class:"curtain"},null,-1)),uu={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},pu=Da(()=>X("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),mu=Ht({__name:"VPSidebar",props:{open:{type:Boolean}},setup(c){const h=c,{sidebarGroups:s,hasSidebar:b}=Hs(),v=_i(null),$=Ma(Gn?document.body:null);ps([h,v],()=>{var st;h.open?($.value=!0,(st=v.value)==null||st.focus()):$.value=!1},{immediate:!0,flush:"post"});const j=_i(0);return ps(s,()=>{j.value+=1},{deep:!0}),(st,U)=>A(b)?(C(),J("aside",{key:0,class:wi(["VPSidebar",{open:st.open}]),ref_key:"navEl",ref:v,onClick:U[0]||(U[0]=io(()=>{},["stop"]))},[cu,X("nav",uu,[pu,Z(st.$slots,"sidebar-nav-before",{},void 0,!0),(C(),Gt(lu,{items:A(s),key:j.value},null,8,["items"])),Z(st.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):Ct("",!0)}}),du=Yt(mu,[["__scopeId","data-v-0d526d28"]]),fu=Ht({__name:"VPSkipLink",setup(c){const h=Rn(),s=_i();ps(()=>h.path,()=>s.value.focus());function b({target:v}){const $=document.getElementById(decodeURIComponent(v.hash).slice(1));if($){const j=()=>{$.removeAttribute("tabindex"),$.removeEventListener("blur",j)};$.setAttribute("tabindex","-1"),$.addEventListener("blur",j),$.focus(),window.scrollTo(0,0)}}return(v,$)=>(C(),J(Ki,null,[X("span",{ref_key:"backToTop",ref:s,tabindex:"-1"},null,512),X("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:b}," Skip to content ")],64))}}),yu=Yt(fu,[["__scopeId","data-v-e1874081"]]),vu=Ht({__name:"Layout",setup(c){const{isOpen:h,open:s,close:b}=Hs(),v=Rn();ps(()=>v.path,b),Po(h,b);const{frontmatter:$}=fi(),j=eo(),st=ti(()=>!!j["home-hero-image"]);return La("hero-image-slot-exists",st),(U,Vt)=>{const ni=sn("Content");return A($).layout!==!1?(C(),J("div",{key:0,class:wi(["Layout",A($).pageClass])},[Z(U.$slots,"layout-top",{},void 0,!0),jt(yu),jt(ro,{class:"backdrop",show:A(h),onClick:A(b)},null,8,["show","onClick"]),jt(Xc,null,{"nav-bar-title-before":rt(()=>[Z(U.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":rt(()=>[Z(U.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":rt(()=>[Z(U.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":rt(()=>[Z(U.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":rt(()=>[Z(U.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":rt(()=>[Z(U.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),jt(Ih,{open:A(h),onOpenMenu:A(s)},null,8,["open","onOpenMenu"]),jt(du,{open:A(h)},{"sidebar-nav-before":rt(()=>[Z(U.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":rt(()=>[Z(U.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),jt(ph,null,{"page-top":rt(()=>[Z(U.$slots,"page-top",{},void 0,!0)]),"page-bottom":rt(()=>[Z(U.$slots,"page-bottom",{},void 0,!0)]),"not-found":rt(()=>[Z(U.$slots,"not-found",{},void 0,!0)]),"home-hero-before":rt(()=>[Z(U.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":rt(()=>[Z(U.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":rt(()=>[Z(U.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":rt(()=>[Z(U.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":rt(()=>[Z(U.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":rt(()=>[Z(U.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":rt(()=>[Z(U.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":rt(()=>[Z(U.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":rt(()=>[Z(U.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":rt(()=>[Z(U.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":rt(()=>[Z(U.$slots,"doc-before",{},void 0,!0)]),"doc-after":rt(()=>[Z(U.$slots,"doc-after",{},void 0,!0)]),"doc-top":rt(()=>[Z(U.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":rt(()=>[Z(U.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":rt(()=>[Z(U.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":rt(()=>[Z(U.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":rt(()=>[Z(U.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":rt(()=>[Z(U.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":rt(()=>[Z(U.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":rt(()=>[Z(U.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),jt(vh),Z(U.$slots,"layout-bottom",{},void 0,!0)],2)):(C(),Gt(ni,{key:1}))}}}),_u=Yt(vu,[["__scopeId","data-v-f7190ae6"]]),bu={Layout:_u,enhanceApp:({app:c})=>{c.component("Badge",no)}},Wn=(c,h)=>{const s=c.__vccOpts||c;for(const[b,v]of h)s[b]=v;return s},xu={},gu={t:"1661231422733",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3259",width:"20",height:"20"},ku=X("path",{d:"M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"3260"},null,-1),Pu=[ku];function zu(c,h){return C(),J("svg",gu,Pu)}const wu=Wn(xu,[["render",zu]]),Su={},Nu={t:"1661231449868",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3541",width:"20",height:"20"},Mu=X("path",{d:"M305.6 225.6c-17.6-17.6-43.2-17.6-59.2 0L19.2 460.8c-25.6 30.4-25.6 72 0 97.6l225.6 235.2c8 8 20.8 12.8 30.4 12.8s20.8-4.8 30.4-12.8c17.6-17.6 17.6-43.2 0-59.2L88 512l217.6-225.6c17.6-17.6 17.6-43.2 0-60.8zM1001.6 460.8L774.4 225.6c-17.6-17.6-43.2-17.6-59.2 0s-17.6 43.2 0 59.2L932.8 512 715.2 737.6c-17.6 17.6-17.6 43.2 0 59.2 8 8 17.6 12.8 30.4 12.8 12.8 0 20.8-4.8 30.4-12.8l225.6-235.2c28.8-28.8 28.8-70.4 0-100.8zM612.8 230.4c-20.8-8-46.4 4.8-56 25.6L382.4 742.4c-8 20.8 4.8 46.4 25.6 56 4.8 0 8 4.8 12.8 4.8 17.6 0 33.6-12.8 38.4-30.4l179.2-491.2c8-20.8-4.8-46.4-25.6-51.2z","p-id":"3542"},null,-1),Lu=[Mu];function Cu(c,h){return C(),J("svg",Nu,Lu)}const Vu=Wn(Su,[["render",Cu]]),Iu={},Hu={viewBox:"0 0 544 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tu=X("path",{d:"M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z",fill:"currentColor"},null,-1),Au=[Tu];function $u(c,h){return C(),J("svg",Hu,Au)}const Bu=Wn(Iu,[["render",$u]]),An="vitepress-demo-preview",$n=(c,h,s,b)=>{let v=h===""?`${c}`:`${c}-${h}`;return s&&(v+=`__${s}`),b&&(v+=`--${b}`),v},Oa=(c="")=>({b:()=>$n(An,c),e:(h="")=>$n(An,c,h),m:(h="")=>$n(An,c,"",h),bem:(h,s,b)=>$n(An,h,s,b)}),Eu=()=>{const c=_i(!0);return{isCodeFold:c,setCodeFold:h=>{c.value=h}}},Fu=()=>({copyContent:_i(""),clickCopy:async c=>{await navigator.clipboard.writeText(c)}}),Du={},Ou={width:"20",height:"20",viewBox:"0 0 48 48",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Ru=X("path",{d:"M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),ju=X("path",{d:"M17 24L22 29L32 19",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Gu=[Ru,ju];function Uu(c,h){return C(),J("svg",Ou,Gu)}const Wu=Wn(Du,[["render",Uu]]),qu=Ht({__name:"message-notice",props:{content:{default:""},close:null},setup(c,{expose:h}){const s=c,b=Oa(),v=_i(!1),$=Vt=>{v.value=Vt},j=_i(-999),st=Vt=>{j.value=Vt};ps(v,Vt=>{Vt===!0&&setTimeout(()=>{v.value=!1},3e3)});const U=()=>{s.close()};return h({setVisible:$,setTopHeight:st}),(Vt,ni)=>(C(),Gt(Fn,{name:"slide-fade",onAfterLeave:U},{default:rt(()=>[v.value?(C(),J("div",{key:0,class:wi([A(b).bem("message-notice","container")]),style:aa({top:j.value+"px"})},[jt(Wu),X("span",null,Hi(c.content),1)],6)):Ct("",!0)]),_:1}))}}),Yn=[],Ju={open:()=>{const c=document.createElement("div"),h=so(qu,{content:"",close:()=>{document.body.removeChild(c),Yn.pop(),h.unmount()}}),s=h.mount(c);document.body.appendChild(c);const b=Yn.length,v=b===0?10:(b+1)*10+b*42;s.setTopHeight(v),s.setVisible(!0),Yn.push(s)}},Zu=["innerHTML"],Ku=Ht({__name:"ElementPlus",props:{code:null,showCode:null,title:{default:""},description:{default:""}},setup(c){const h=c,s=Oa(),{isCodeFold:b,setCodeFold:v}=Eu(),{clickCopy:$}=Fu(),j=_i(decodeURIComponent(h.code)),st=_i(decodeURIComponent(h.showCode)),U=_i(null),Vt=()=>{$(j.value),Ju.open()},ni=ti(()=>{var Tt;return U.value?(Tt=U.value)==null?void 0:Tt.clientHeight:0}),Jt=Tt=>{b.value?U.value.style.height="0px":U.value.style.height=`${Tt}px`};return Os(()=>{const Tt=ni.value;Jt(Tt)}),ps(b,()=>{const Tt=ni.value;Jt(Tt)}),(Tt,ei)=>(C(),J("div",{class:wi([A(s).e("element-plus__container")])},[X("section",{class:wi([A(s).bem("preview")])},[Z(Tt.$slots,"default")],2),X("section",{class:wi([A(s).bem("description")])},[X("div",{class:wi([A(s).bem("description","split-line")])},null,2),X("div",{class:wi([A(s).bem("description","handle-btn")])},[A(b)?(C(),Gt(wu,{key:1,onClick:ei[1]||(ei[1]=yi=>A(v)(!1))})):(C(),Gt(Vu,{key:0,onClick:ei[0]||(ei[0]=yi=>A(v)(!0))})),jt(Bu,{onClick:Vt})],2)],2),X("section",{class:wi([A(s).bem("source")]),ref_key:"sourceCodeArea",ref:U},[X("div",{innerHTML:st.value,class:"language-vue"},null,8,Zu)],2)],2))}});(function(c,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):h((typeof window<"u"?window:global).OIMO={})})(void 0,function(c){Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(a!=null)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e});var h,s,b,v,$="1.0.9",j=0,st=1,U=2,Vt=3,ni=0,Jt=0,Tt=1,ei=2,yi=3,Ei=4,ui=5,Ue=0,Oe=1,ls=2,Ss=3,Ts=4,Cn=5,Vn=6,R={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(t,e,n){return(1-n)*t+n*e},randInt:function(t,e){return t+R.floor(R.random()*(e-t+1))},rand:function(t,e){return t+R.random()*(e-t)},generateUUID:(s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=new Array(36),v=0,function(){for(var t=0;t<36;t++)t===8||t===13||t===18||t===23?b[t]="-":t===14?b[t]="4":(v<=2&&(v=33554432+16777216*Math.random()|0),h=15&v,v>>=4,b[t]=s[t===19?3&h|8:h]);return b.join("")}),int:function(t){return R.floor(t)},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,n){return R.max(e,R.min(n,t))},distance:function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2];return R.sqrt(n*n+a*a+o*o)},acosClamp:function(t){return t>1?0:t<-1?R.PI:R.acos(t)},distanceVector:function(t,e){var n=t.x-e.x,a=t.y-e.y,o=t.z-e.z;return n*n+a*a+o*o},dotVectors:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}};function ue(t,e){console.error("[OIMO] "+t+": "+e)}function As(t){this.parent=t,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=$,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}function B(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function Ui(t,e,n,a){this.x=t||0,this.y=e||0,this.z=n||0,this.w=a!==void 0?a:1}function Wi(t,e,n,a,o,r,u,y,p){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.")}function hs(t,e,n,a,o,r){this.elements=new Float32Array(6);var u=this.elements;u[0]=t||0,u[1]=n||0,u[2]=o||0,u[3]=e||0,u[4]=a||0,u[5]=r||0}Object.assign(As.prototype,{setTime:function(t){this.times[t||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),this.tt===100&&this.resetMax(),this.tt>100&&(this.broadPhaseTime>this.MaxBroadPhaseTime&&(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime>this.MaxNarrowPhaseTime&&(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime>this.MaxSolvingTime&&(this.MaxSolvingTime=this.solvingTime),this.totalTime>this.MaxTotalTime&&(this.MaxTotalTime=this.totalTime),this.updateTime>this.MaxUpdateTime&&(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt>500&&(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){return["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconds<br><br>","broadphase &nbsp;"+R.fix(this.broadPhaseTime)+" | "+R.fix(this.MaxBroadPhaseTime)+"<br>","narrowphase "+R.fix(this.narrowPhaseTime)+" | "+R.fix(this.MaxNarrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;"+R.fix(this.solvingTime)+" | "+R.fix(this.MaxSolvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+R.fix(this.totalTime)+" | "+R.fix(this.MaxTotalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;"+R.fix(this.updateTime)+" | "+R.fix(this.MaxUpdateTime)+"<br>"].join(`
`)},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}}),Object.assign(B.prototype,{Vec3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},add:function(t,e){return e!==void 0?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t,e){return e!==void 0?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},subScaledVector:function(t,e){return this.x-=t.x*e,this.y-=t.y*e,this.z-=t.z*e,this},cross:function(t,e){if(e!==void 0)return this.crossVectors(t,e);var n=this.x,a=this.y,o=this.z;return this.x=a*t.z-o*t.y,this.y=o*t.x-n*t.z,this.z=n*t.y-a*t.x,this},crossVectors:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,u=e.y,y=e.z;return this.x=a*y-o*u,this.y=o*r-n*y,this.z=n*u-a*r,this},tangent:function(t){var e=t.x,n=t.y,a=t.z;return this.x=n*e-a*a,this.y=-a*n-e*e,this.z=e*a+n*n,this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return R.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyMatrix3:function(t,e){var n=this.x,a=this.y,o=this.z,r=t.elements;return e?(this.x=r[0]*n+r[1]*a+r[2]*o,this.y=r[3]*n+r[4]*a+r[5]*o,this.z=r[6]*n+r[7]*a+r[8]*o):(this.x=r[0]*n+r[3]*a+r[6]*o,this.y=r[1]*n+r[4]*a+r[7]*o,this.z=r[2]*n+r[5]*a+r[8]*o),this},applyQuaternion:function(t){var e=this.x,n=this.y,a=this.z,o=t.x,r=t.y,u=t.z,y=t.w,p=y*e+r*a-u*n,d=y*n+u*e-o*a,m=y*a+o*n-r*e,S=-o*e-r*n-u*a;return this.x=p*y+S*-o+d*-u-m*-r,this.y=d*y+S*-r+m*-o-p*-u,this.z=m*y+S*-u+p*-r-d*-o,this},testZero:function(){return this.x!==0||this.y!==0||this.z!==0},testDiff:function(t){return!this.equals(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},normalize:function(){return this.divideScalar(this.length())},toArray:function(t,e){e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}}),Object.assign(Ui.prototype,{Quat:!0,set:function(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this},addTime:function(t,e){var n=t.x,a=t.y,o=t.z,r=this.w,u=this.x,y=this.y,p=this.z;return e*=.5,this.x+=e*(n*r+a*p-o*y),this.y+=e*(a*r+o*u-n*p),this.z+=e*(o*r+n*y-a*u),this.w+=e*(-n*u-a*y-o*p),this.normalize(),this},multiply:function(t,e){return e!==void 0?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,a=t.y,o=t.z,r=t.w,u=e.x,y=e.y,p=e.z,d=e.w;return this.x=n*d+r*u+a*p-o*y,this.y=a*d+r*y+o*u-n*p,this.z=o*d+r*p+n*y-a*u,this.w=r*d-n*u-a*y-o*p,this},setFromUnitVectors:function(t,e){var n=new B,a=t.dot(e)+1;return a<R.EPS2?(a=0,R.abs(t.x)>R.abs(t.z)?n.set(-t.y,t.x,0):n.set(0,-t.z,t.y)):n.crossVectors(t,e),this._x=n.x,this._y=n.y,this._z=n.z,this._w=a,this.normalize()},arc:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,u=e.y,y=e.z,p=n*r+a*u+o*y;if(p==-1)return r=a*n-o*o,u=-o*a-n*n,y=n*o+a*a,p=1/R.sqrt(r*r+u*u+y*y),this.w=0,this.x=r*p,this.y=u*p,this.z=y*p,this;var d=a*y-o*u,m=o*r-n*y,S=n*u-a*r;return this.w=R.sqrt(.5*(1+p)),p=.5/this.w,this.x=d*p,this.y=m*p,this.z=S*p,this},normalize:function(){var t=this.length();return t===0?this.set(0,0,0,1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},inverse:function(){return this.conjugate().normalize()},invert:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return R.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(t){return new Ui(this.x,this.y,this.z,this.w)},testDiff:function(t){return!this.equals(t)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},toString:function(){return"Quat["+this.x.toFixed(4)+", ("+this.y.toFixed(4)+", "+this.z.toFixed(4)+", "+this.w.toFixed(4)+")]"},setFromEuler:function(t,e,n){var a=Math.cos(.5*t),o=Math.cos(.5*e),r=Math.cos(.5*n),u=Math.sin(.5*t),y=Math.sin(.5*e),p=Math.sin(.5*n);return this.x=u*o*r+a*y*p,this.y=a*y*r-u*o*p,this.z=a*o*p+u*y*r,this.w=a*o*r-u*y*p,this},setFromAxis:function(t,e){t.normalize(),e*=.5;var n=R.sin(e);return this.x=n*t.x,this.y=n*t.y,this.z=n*t.z,this.w=R.cos(e),this},setFromMat33:function(t){var e,n=t[0]+t[4]+t[8];if(n>0)e=R.sqrt(n+1),this.w=.5/e,e=.5/e,this.x=(t[5]-t[7])*e,this.y=(t[6]-t[2])*e,this.z=(t[1]-t[3])*e;else{var a=[],o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var r=(o+1)%3,u=(o+2)%3;e=R.sqrt(t[3*o+o]-t[3*r+r]-t[3*u+u]+1),a[o]=.5*fRoot,e=.5/fRoot,this.w=(t[3*r+u]-t[3*u+r])*e,a[r]=(t[3*r+o]+t[3*o+r])*e,a[u]=(t[3*u+o]+t[3*o+u])*e,this.x=a[1],this.y=a[2],this.z=a[3]}return this},toArray:function(t,e){t[e=e||0]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w},fromArray:function(t,e){return e=e||0,this.set(t[e],t[e+1],t[e+2],t[e+3]),this}}),Object.assign(Wi.prototype,{Mat33:!0,set:function(t,e,n,a,o,r,u,y,p){var d=this.elements;return d[0]=t,d[1]=e,d[2]=n,d[3]=a,d[4]=o,d[5]=r,d[6]=u,d[7]=y,d[8]=p,this},add:function(t,e){if(e!==void 0)return this.addMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]+=a[0],n[1]+=a[1],n[2]+=a[2],n[3]+=a[3],n[4]+=a[4],n[5]+=a[5],n[6]+=a[6],n[7]+=a[7],n[8]+=a[8],this},addMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]+o[0],n[1]=a[1]+o[1],n[2]=a[2]+o[2],n[3]=a[3]+o[3],n[4]=a[4]+o[4],n[5]=a[5]+o[5],n[6]=a[6]+o[6],n[7]=a[7]+o[7],n[8]=a[8]+o[8],this},addEqual:function(t){var e=this.elements,n=t.elements;return e[0]+=n[0],e[1]+=n[1],e[2]+=n[2],e[3]+=n[3],e[4]+=n[4],e[5]+=n[5],e[6]+=n[6],e[7]+=n[7],e[8]+=n[8],this},sub:function(t,e){if(e!==void 0)return this.subMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]-=a[0],n[1]-=a[1],n[2]-=a[2],n[3]-=a[3],n[4]-=a[4],n[5]-=a[5],n[6]-=a[6],n[7]-=a[7],n[8]-=a[8],this},subMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]-o[0],n[1]=a[1]-o[1],n[2]=a[2]-o[2],n[3]=a[3]-o[3],n[4]=a[4]-o[4],n[5]=a[5]-o[5],n[6]=a[6]-o[6],n[7]=a[7]-o[7],n[8]=a[8]-o[8],this},subEqual:function(t){var e=this.elements,n=t.elements;return e[0]-=n[0],e[1]-=n[1],e[2]-=n[2],e[3]-=n[3],e[4]-=n[4],e[5]-=n[5],e[6]-=n[6],e[7]-=n[7],e[8]-=n[8],this},scale:function(t,e){var n=this.elements,a=t.elements;return n[0]=a[0]*e,n[1]=a[1]*e,n[2]=a[2]*e,n[3]=a[3]*e,n[4]=a[4]*e,n[5]=a[5]*e,n[6]=a[6]*e,n[7]=a[7]*e,n[8]=a[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},multiplyMatrices:function(t,e,n){n&&(e=e.clone().transpose());var a=this.elements,o=t.elements,r=e.elements,u=o[0],y=o[3],p=o[6],d=o[1],m=o[4],S=o[7],x=o[2],g=o[5],P=o[8],V=r[0],O=r[3],nt=r[6],M=r[1],tt=r[4],it=r[7],ct=r[2],ut=r[5],et=r[8];return a[0]=u*V+d*O+x*nt,a[1]=u*M+d*tt+x*it,a[2]=u*ct+d*ut+x*et,a[3]=y*V+m*O+g*nt,a[4]=y*M+m*tt+g*it,a[5]=y*ct+m*ut+g*et,a[6]=p*V+S*O+P*nt,a[7]=p*M+S*tt+P*it,a[8]=p*ct+S*ut+P*et,this},transpose:function(t){if(t!==void 0){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this}var n=this.elements,a=n[1],o=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=a,n[5]=n[7],n[6]=o,n[7]=r,this},setQuat:function(t){var e=this.elements,n=t.x,a=t.y,o=t.z,r=t.w,u=n+n,y=a+a,p=o+o,d=n*u,m=n*y,S=n*p,x=a*y,g=a*p,P=o*p,V=r*u,O=r*y,nt=r*p;return e[0]=1-(x+P),e[1]=m-nt,e[2]=S+O,e[3]=m+nt,e[4]=1-(d+P),e[5]=g-V,e[6]=S-O,e[7]=g+V,e[8]=1-(d+x),this},invert:function(t){var e=this.elements,n=t.elements,a=n[0],o=n[3],r=n[6],u=n[1],y=n[4],p=n[7],d=n[2],m=n[5],S=n[8],x=S*y-m*p,g=-S*o+m*r,P=p*o-y*r,V=a*x+u*g+d*P;return V===0?(console.log("can't invert matrix, determinant is 0"),this.identity()):(V=1/V,e[0]=x*V,e[1]=(-S*u+d*p)*V,e[2]=(m*u-d*y)*V,e[3]=g*V,e[4]=(S*a-d*r)*V,e[5]=(-m*a+d*o)*V,e[6]=P*V,e[7]=(-p*a+u*r)*V,e[8]=(y*a-u*o)*V,this)},addOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]+=t*(a*a+o*o),r[4]+=t*(n*n+o*o),r[8]+=t*(n*n+a*a);var u=t*n*a,y=t*a*o,p=t*o*n;return r[1]-=u,r[3]-=u,r[2]-=y,r[6]-=y,r[5]-=p,r[7]-=p,this},subOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]-=t*(a*a+o*o),r[4]-=t*(n*n+o*o),r[8]-=t*(n*n+a*a);var u=t*n*a,y=t*a*o,p=t*o*n;return r[1]+=u,r[3]+=u,r[2]+=y,r[6]+=y,r[5]+=p,r[7]+=p,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new Wi().fromArray(this.elements)},copy:function(t){for(var e=0;e<9;e++)this.elements[e]=t.elements[e];return this},determinant:function(){var t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],r=t[4],u=t[5],y=t[6],p=t[7],d=t[8];return e*r*d-e*u*p-n*o*d+n*u*y+a*o*p-a*r*y},fromArray:function(t,e){e===void 0&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}),Object.assign(hs.prototype,{AABB:!0,set:function(t,e,n,a,o,r){var u=this.elements;return u[0]=t,u[3]=e,u[1]=n,u[4]=a,u[2]=o,u[5]=r,this},intersectTest:function(t){var e=this.elements,n=t.elements;return e[0]>n[3]||e[1]>n[4]||e[2]>n[5]||e[3]<n[0]||e[4]<n[1]||e[5]<n[2]},intersectTestTwo:function(t){var e=this.elements,n=t.elements;return e[0]<n[0]||e[1]<n[1]||e[2]<n[2]||e[3]>n[3]||e[4]>n[4]||e[5]>n[5]},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t,e){var n=e||0,a=t.elements;return this.set(a[0]-n,a[3]+n,a[1]-n,a[4]+n,a[2]-n,a[5]+n),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var n=t.elements,a=e.elements,o=this.elements;return o[0]=n[0]<a[0]?n[0]:a[0],o[1]=n[1]<a[1]?n[1]:a[1],o[2]=n[2]<a[2]?n[2]:a[2],o[3]=n[3]>a[3]?n[3]:a[3],o[4]=n[4]>a[4]?n[4]:a[4],o[5]=n[5]>a[5]?n[5]:a[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],n=t[4]-t[1],a=t[5]-t[2];return 2*(e*(n+a)+n*a)},intersectsWithPoint:function(t,e,n){var a=this.elements;return t>=a[0]&&t<=a[3]&&e>=a[1]&&e<=a[4]&&n>=a[2]&&n<=a[5]},setFromPoints:function(t){this.makeEmpty();for(var e=0;e<t.length;e++)this.expandByPoint(t[e])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var e=this.elements;this.set(R.min(e[0],t.x),R.min(e[1],t.y),R.min(e[2],t.z),R.max(e[3],t.x),R.max(e[4],t.y),R.max(e[5],t.z))},expandByScalar:function(t){var e=this.elements;e[0]+=-t,e[1]+=-t,e[2]+=-t,e[3]+=t,e[4]+=t,e[5]+=t}});var Re=0;function We(t){this.type=Jt,this.id=Re++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new B,this.rotation=new Wi,this.relativePosition=new B().copy(t.relativePosition),this.relativeRotation=new Wi().copy(t.relativeRotation),this.aabb=new hs,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith}function Rs(t,e,n,a){We.call(this,t),this.type=ei,this.width=e,this.height=n,this.depth=a,this.halfWidth=.5*e,this.halfHeight=.5*n,this.halfDepth=.5*a,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}function js(t,e){We.call(this,t),this.type=Tt,this.radius=e}function Gs(t,e,n){We.call(this,t),this.type=yi,this.radius=e,this.height=n,this.halfHeight=.5*n,this.normalDirection=new B,this.halfDirection=new B}function Us(t,e){We.call(this,t),this.type=Ei,this.normal=new B(0,1,0)}function nn(t,e){We.call(this,t),this.type=ui}function gn(){this.relativePosition=new B,this.relativeRotation=new Wi,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function Yi(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}function Ws(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}function kn(t){this.prev=null,this.next=null,this.body=null,this.joint=t}function je(t){Ws.call(this),this.scale=1,this.invScale=1,this.name="",this.id=NaN,this.type=Ue,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=new B().copy(t.localAnchorPoint1),this.localAnchorPoint2=new B().copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new B,this.relativeAnchorPoint2=new B,this.anchorPoint1=new B,this.anchorPoint2=new B,this.allowCollision=t.allowCollision,this.b1Link=new kn(this),this.b2Link=new kn(this)}function Pn(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}function an(t,e,n,a){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}function on(t,e,n){je.call(this,t),this.type=Ss,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Wi().setQuat(new Ui().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new B().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.limitMotor=new Yi(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.lc=new Pn(this),this.r3=new an(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function rn(t){je.call(this,t),this.type=ls,this.lc=new Pn(this)}function In(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}function hn(t,e,n){je.call(this,t),this.type=Oe,this.nor=new B,this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t=new In(this,this.limitMotor)}function Hn(t,e){this.joint=t,this.targetOrientation=new Ui().invert(e),this.relativeOrientation=new Ui,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new B,this.imp=new B,this.rn0=new B,this.rn1=new B,this.rn2=new B,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}function cs(t,e,n,a){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}function ms(t,e,n){je.call(this,t),this.type=Vn,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.ax1=new B,this.ax2=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.ac=new Hn(this,new Ui().setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t3=new cs(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function ln(t,e,n){je.call(this,t),this.type=Cn,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Wi().setQuat(new Ui().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new B().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.rotationalLimitMotor=new Yi(this.nor,!1),this.r3=new an(this,this.rotationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0)),this.translationalLimitMotor=new Yi(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=n,this.t3=new cs(this,this.translationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function cn(t){je.call(this,t),this.type=Ts,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.localAngle1=new B,this.localAngle2=new B;var e=R.dotVectors(this.localAxis1,this.localAxis2);if(e>-1&&e<1)this.localAngle1.set(this.localAxis2.x-e*this.localAxis1.x,this.localAxis2.y-e*this.localAxis1.y,this.localAxis2.z-e*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-e*this.localAxis2.x,this.localAxis1.y-e*this.localAxis2.y,this.localAxis1.z-e*this.localAxis2.z).normalize();else{var n=new Wi().setQuat(new Ui().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(n,!0)}this.ax1=new B,this.ax2=new B,this.an1=new B,this.an2=new B,this.tmp=new B,this.nor=new B,this.tan=new B,this.bin=new B,this.translationalLimitMotor=new Yi(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new Yi(this.tan,!1),this.rotationalLimitMotor2=new Yi(this.bin,!1),this.t3=new cs(this,new Yi(this.nor,!0),this.translationalLimitMotor,new Yi(this.bin,!0)),this.t3.weight=1,this.r3=new an(this,new Yi(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}function qs(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new B,this.localAnchorPoint2=new B,this.localAxis1=new B,this.localAxis2=new B,this.allowCollision=!1}function qn(){this.mass=0,this.inertia=new Wi}function Js(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t}function we(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function Zs(){this.warmStarted=!1,this.position=new B,this.localPoint1=new B,this.localPoint2=new B,this.normal=new B,this.tangent=new B,this.binormal=new B,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function zn(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new Zs,new Zs,new Zs,new Zs]}function un(){this.nor=new B,this.tan=new B,this.bin=new B,this.norU1=new B,this.tanU1=new B,this.binU1=new B,this.norU2=new B,this.tanU2=new B,this.binU2=new B,this.norT1=new B,this.tanT1=new B,this.binT1=new B,this.norT2=new B,this.tanT2=new B,this.binT2=new B,this.norTU1=new B,this.tanTU1=new B,this.binTU1=new B,this.norTU2=new B,this.tanTU2=new B,this.binTU2=new B,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function pn(t){Ws.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new B,this.tmpC1=new B,this.tmpC2=new B,this.tmpP1=new B,this.tmpP2=new B,this.tmplv1=new B,this.tmplv2=new B,this.tmpav1=new B,this.tmpav2=new B,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new un,this.cs.next=new un,this.cs.next.next=new un,this.cs.next.next.next=new un}function Ks(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=R.INF,this.b1Link=new Js(this),this.b2Link=new Js(this),this.s1Link=new Js(this),this.s2Link=new Js(this),this.manifold=new zn,this.buffer=[new we,new we,new we,new we],this.points=this.manifold.points,this.constraint=new pn(this.manifold)}function Ns(t,e){this.position=t||new B,this.orientation=e||new Ui,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name="",this.prev=null,this.next=null,this.type=ni,this.massInfo=new qn,this.newPosition=new B,this.controlPos=!1,this.newOrientation=new Ui,this.newRotation=new B,this.currentRotation=new B,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new Ui,this.pos=new B,this.linearVelocity=new B,this.angularVelocity=new B,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new B,this.sleepOrientation=new Ui,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new Wi,this.mass=0,this.inverseMass=0,this.inverseInertia=new Wi,this.localInertia=new Wi,this.inverseLocalInertia=new Wi,this.tmpInertia=new Wi,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}function mn(t,e){this.shape1=t||null,this.shape2=e||null}function ds(){this.types=j,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(We.prototype,{Shape:!0,calculateMassInfo:function(t){ue("Shape","Inheritance error.")},updateProxy:function(){ue("Shape","Inheritance error.")}}),Rs.prototype=Object.assign(Object.create(We.prototype),{constructor:Rs,calculateMassInfo:function(t){var e=this.width*this.height*this.depth*this.density;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.height*this.height)*(1/12))},updateProxy:function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var n=e[9],a=e[10],o=e[11],r=e[12],u=e[13],y=e[14],p=e[15],d=e[16],m=e[17],S=this.position.x,x=this.position.y,g=this.position.z,P=this.elements;P[0]=S+n+r+p,P[1]=x+a+u+d,P[2]=g+o+y+m,P[3]=S+n+r-p,P[4]=x+a+u-d,P[5]=g+o+y-m,P[6]=S+n-r+p,P[7]=x+a-u+d,P[8]=g+o-y+m,P[9]=S+n-r-p,P[10]=x+a-u-d,P[11]=g+o-y-m,P[12]=S-n+r+p,P[13]=x-a+u+d,P[14]=g-o+y+m,P[15]=S-n+r-p,P[16]=x-a+u-d,P[17]=g-o+y-m,P[18]=S-n-r+p,P[19]=x-a-u+d,P[20]=g-o-y+m,P[21]=S-n-r-p,P[22]=x-a-u-d,P[23]=g-o-y-m;var V=e[9]<0?-e[9]:e[9],O=e[10]<0?-e[10]:e[10],nt=e[11]<0?-e[11]:e[11];V=e[12]<0?V-e[12]:V+e[12],O=e[13]<0?O-e[13]:O+e[13],nt=e[14]<0?nt-e[14]:nt+e[14],V=e[15]<0?V-e[15]:V+e[15],O=e[16]<0?O-e[16]:O+e[16],nt=e[17]<0?nt-e[17]:nt+e[17];var M=.005;this.aabb.set(this.position.x-V-M,this.position.x+V+M,this.position.y-O-M,this.position.y+O+M,this.position.z-nt-M,this.position.z+nt+M),this.proxy!=null&&this.proxy.update()}}),js.prototype=Object.assign(Object.create(We.prototype),{constructor:js,volume:function(){return R.PI*this.radius*1.333333},calculateMassInfo:function(t){var e=this.volume()*this.radius*this.radius*this.density;t.mass=e;var n=e*this.radius*this.radius*.4;t.inertia.set(n,0,0,0,n,0,0,0,n)},updateProxy:function(){var t=.005;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),this.proxy!=null&&this.proxy.update()}}),Gs.prototype=Object.assign(Object.create(We.prototype),{constructor:Gs,calculateMassInfo:function(t){var e=this.radius*this.radius,n=R.PI*e*this.height*this.density,a=(.25*e+.0833*this.height*this.height)*n,o=.5*e;t.mass=n,t.inertia.set(a,0,0,0,o,0,0,0,a)},updateProxy:function(){var t,e,n,a,o,r,u,y,p,d,m,S=this.rotation.elements;o=S[1]*S[1],r=S[4]*S[4],u=S[7]*S[7],this.normalDirection.set(S[1],S[4],S[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),e=1-o,(t=R.sqrt(e*e+o*r+o*u))>0&&(t=this.radius/t),e*=t,n=1-r,(t=R.sqrt(r*o+n*n+r*u))>0&&(t=this.radius/t),n*=t,a=1-u,(t=R.sqrt(u*o+u*r+a*a))>0&&(t=this.radius/t),a*=t,y=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,p=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,d=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,y=e<0?y-e:y+e,p=n<0?p-n:p+n,d=a<0?d-a:d+a,m=.005,this.aabb.set(this.position.x-y-m,this.position.x+y+m,this.position.y-p-m,this.position.y+p+m,this.position.z-d-m,this.position.z+d+m),this.proxy!=null&&this.proxy.update()}}),Us.prototype=Object.assign(Object.create(We.prototype),{constructor:Us,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.mass=this.density,t.inertia.set(1,0,0,0,1,0,0,0,1)},updateProxy:function(){var t=.005,e=-R.INF,n=R.INF,a=this.normal;this.aabb.set(a.x===-1?this.position.x-t:e,a.x===1?this.position.x+t:n,a.y===-1?this.position.y-t:e,a.y===1?this.position.y+t:n,a.z===-1?this.position.z-t:e,a.z===1?this.position.z+t:n),this.proxy!=null&&this.proxy.update()}}),nn.prototype=Object.assign(Object.create(We.prototype),{constructor:nn,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.inertia.set(0,0,0,0,0,0,0,0,0)},updateProxy:function(){this.aabb.set(this.position.x-0,this.position.x+0,this.position.y-0,this.position.y+0,this.position.z-0,this.position.z+0),this.proxy!=null&&this.proxy.update()}}),Object.assign(Yi.prototype,{LimitMotor:!0,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}}),Object.assign(Ws.prototype,{Constraint:!0,preSolve:function(t,e){ue("Constraint","Inheritance error.")},solve:function(){ue("Constraint","Inheritance error.")},postSolve:function(){ue("Constraint","Inheritance error.")}}),je.prototype=Object.assign(Object.create(Ws.prototype),{constructor:je,setId:function(t){this.id=i},setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name="J"+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(t){this.b1Link.body=this.body2,this.b2Link.body=this.body1,t?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(this.body1.jointLink!=null?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,this.body2.jointLink!=null?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(t){if(t)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var e=this.b1Link.prev,n=this.b1Link.next;e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=n),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,e=this.b2Link.prev,n=this.b2Link.next,e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=n),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(t,e){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){return[new B().scale(this.anchorPoint1,this.scale),new B().scale(this.anchorPoint2,this.scale)]}}),Object.assign(Pn.prototype,{LinearConstraint:!0,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var n=this.ii1.elements,a=this.ii2.elements;this.ax1x=this.r1z*n[1]+-this.r1y*n[2],this.ax1y=this.r1z*n[4]+-this.r1y*n[5],this.ax1z=this.r1z*n[7]+-this.r1y*n[8],this.ay1x=-this.r1z*n[0]+this.r1x*n[2],this.ay1y=-this.r1z*n[3]+this.r1x*n[5],this.ay1z=-this.r1z*n[6]+this.r1x*n[8],this.az1x=this.r1y*n[0]+-this.r1x*n[1],this.az1y=this.r1y*n[3]+-this.r1x*n[4],this.az1z=this.r1y*n[6]+-this.r1x*n[7],this.ax2x=this.r2z*a[1]+-this.r2y*a[2],this.ax2y=this.r2z*a[4]+-this.r2y*a[5],this.ax2z=this.r2z*a[7]+-this.r2y*a[8],this.ay2x=-this.r2z*a[0]+this.r2x*a[2],this.ay2y=-this.r2z*a[3]+this.r2x*a[5],this.ay2z=-this.r2z*a[6]+this.r2x*a[8],this.az2x=this.r2y*a[0]+-this.r2x*a[1],this.az2y=this.r2y*a[3]+-this.r2x*a[4],this.az2z=this.r2y*a[6]+-this.r2x*a[7];var o=this.m1+this.m2,r=new Wi().set(o,0,0,0,o,0,0,0,o).elements;r[0]+=n[4]*this.r1z*this.r1z-(n[7]+n[5])*this.r1y*this.r1z+n[8]*this.r1y*this.r1y,r[1]+=(n[6]*this.r1y+n[5]*this.r1x)*this.r1z-n[3]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[2]+=(n[3]*this.r1y-n[4]*this.r1x)*this.r1z-n[6]*this.r1y*this.r1y+n[7]*this.r1x*this.r1y,r[3]+=(n[2]*this.r1y+n[7]*this.r1x)*this.r1z-n[1]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[4]+=n[0]*this.r1z*this.r1z-(n[6]+n[2])*this.r1x*this.r1z+n[8]*this.r1x*this.r1x,r[5]+=(n[1]*this.r1x-n[0]*this.r1y)*this.r1z-n[7]*this.r1x*this.r1x+n[6]*this.r1x*this.r1y,r[6]+=(n[1]*this.r1y-n[4]*this.r1x)*this.r1z-n[2]*this.r1y*this.r1y+n[5]*this.r1x*this.r1y,r[7]+=(n[3]*this.r1x-n[0]*this.r1y)*this.r1z-n[5]*this.r1x*this.r1x+n[2]*this.r1x*this.r1y,r[8]+=n[0]*this.r1y*this.r1y-(n[3]+n[1])*this.r1x*this.r1y+n[4]*this.r1x*this.r1x,r[0]+=a[4]*this.r2z*this.r2z-(a[7]+a[5])*this.r2y*this.r2z+a[8]*this.r2y*this.r2y,r[1]+=(a[6]*this.r2y+a[5]*this.r2x)*this.r2z-a[3]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[2]+=(a[3]*this.r2y-a[4]*this.r2x)*this.r2z-a[6]*this.r2y*this.r2y+a[7]*this.r2x*this.r2y,r[3]+=(a[2]*this.r2y+a[7]*this.r2x)*this.r2z-a[1]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[4]+=a[0]*this.r2z*this.r2z-(a[6]+a[2])*this.r2x*this.r2z+a[8]*this.r2x*this.r2x,r[5]+=(a[1]*this.r2x-a[0]*this.r2y)*this.r2z-a[7]*this.r2x*this.r2x+a[6]*this.r2x*this.r2y,r[6]+=(a[1]*this.r2y-a[4]*this.r2x)*this.r2z-a[2]*this.r2y*this.r2y+a[5]*this.r2x*this.r2y,r[7]+=(a[3]*this.r2x-a[0]*this.r2y)*this.r2z-a[5]*this.r2x*this.r2x+a[2]*this.r2x*this.r2y,r[8]+=a[0]*this.r2y*this.r2y-(a[3]+a[1])*this.r2x*this.r2y+a[4]*this.r2x*this.r2x;var u=1/(r[0]*(r[4]*r[8]-r[7]*r[5])+r[3]*(r[7]*r[2]-r[1]*r[8])+r[6]*(r[1]*r[5]-r[4]*r[2]));this.dd=new Wi().set(r[4]*r[8]-r[5]*r[7],r[2]*r[7]-r[1]*r[8],r[1]*r[5]-r[2]*r[4],r[5]*r[6]-r[3]*r[8],r[0]*r[8]-r[2]*r[6],r[2]*r[3]-r[0]*r[5],r[3]*r[7]-r[4]*r[6],r[1]*r[6]-r[0]*r[7],r[0]*r[4]-r[1]*r[3]).scaleEqual(u),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var y=R.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);y>.005?(y=(.005-y)/y*e*.05,this.velx*=y,this.vely*=y,this.velz*=y):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,n=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,a=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,o=e*t[0]+n*t[1]+a*t[2],r=e*t[3]+n*t[4]+a*t[5],u=e*t[6]+n*t[7]+a*t[8];this.impx+=o,this.impy+=r,this.impz+=u,this.l1.x+=o*this.m1,this.l1.y+=r*this.m1,this.l1.z+=u*this.m1,this.a1.x+=o*this.ax1x+r*this.ay1x+u*this.az1x,this.a1.y+=o*this.ax1y+r*this.ay1y+u*this.az1y,this.a1.z+=o*this.ax1z+r*this.ay1z+u*this.az1z,this.l2.x-=o*this.m2,this.l2.y-=r*this.m2,this.l2.z-=u*this.m2,this.a2.x-=o*this.ax2x+r*this.ay2x+u*this.az2x,this.a2.y-=o*this.ax2y+r*this.ay2y+u*this.az2y,this.a2.z-=o*this.ax2z+r*this.ay2z+u*this.az2z}}),Object.assign(an.prototype,{Rotational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.limitMotor1.frequency,r=this.limitMotor2.frequency,u=this.limitMotor3.frequency,y=o>0,p=r>0,d=u>0,m=this.lowerLimit1<=this.upperLimit1,S=this.lowerLimit2<=this.upperLimit2,x=this.lowerLimit3<=this.upperLimit3,g=this.limitMotor1.angle;m?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-g):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),y||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var P=this.limitMotor2.angle;S?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-P):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),p||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var V=this.limitMotor3.angle;if(x?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-V):V<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-V):V>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-V):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),d||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||y)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||p)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||d)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,y&&this.limitState1!=2){var O=6.2831853*o,nt=O*O*t,M=e/(nt+2*this.limitMotor1.dampingRatio*O);this.cfm1=this.kv00*M,this.limitVelocity1*=nt*M}else this.cfm1=0,this.limitVelocity1*=.05*e;p&&this.limitState2!=2?(M=e/((nt=(O=6.2831853*r)*O*t)+2*this.limitMotor2.dampingRatio*O),this.cfm2=this.kv11*M,this.limitVelocity2*=nt*M):(this.cfm2=0,this.limitVelocity2*=.05*e),d&&this.limitState3!=2?(M=e/((nt=(O=6.2831853*u)*O*t)+2*this.limitMotor3.dampingRatio*O),this.cfm3=this.kv22*M,this.limitVelocity3*=nt*M):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var tt=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*tt,this.d01=(this.k02*this.k21-this.k01*this.k22)*tt,this.d02=(this.k01*this.k12-this.k02*this.k11)*tt,this.d10=(this.k12*this.k20-this.k10*this.k22)*tt,this.d11=(this.k00*this.k22-this.k02*this.k20)*tt,this.d12=(this.k02*this.k10-this.k00*this.k12)*tt,this.d20=(this.k10*this.k21-this.k11*this.k20)*tt,this.d21=(this.k01*this.k20-this.k00*this.k21)*tt,this.d22=(this.k00*this.k11-this.k01*this.k10)*tt,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var it=this.limitImpulse1+this.motorImpulse1,ct=this.limitImpulse2+this.motorImpulse2,ut=this.limitImpulse3+this.motorImpulse3;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z;this.limitVelocity3=30;var a=t*this.ax1+e*this.ay1+n*this.az1-this.limitVelocity1,o=t*this.ax2+e*this.ay2+n*this.az2-this.limitVelocity2,r=t*this.ax3+e*this.ay3+n*this.az3-this.limitVelocity3,u=a*this.d00+o*this.d01+r*this.d02,y=a*this.d10+o*this.d11+r*this.d12,p=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=u,this.limitImpulse2+=y,this.limitImpulse3+=p,this.a1.x+=u*this.a1x1+y*this.a1x2+p*this.a1x3,this.a1.y+=u*this.a1y1+y*this.a1y2+p*this.a1y3,this.a1.z+=u*this.a1z1+y*this.a1z2+p*this.a1z3,this.a2.x-=u*this.a2x1+y*this.a2x2+p*this.a2x3,this.a2.y-=u*this.a2y1+y*this.a2y2+p*this.a2y3,this.a2.z-=u*this.a2z1+y*this.a2z2+p*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,u=this.motorImpulse1,y=this.motorImpulse2,p=this.motorImpulse3,d=0,m=0,S=0;this.enableMotor1&&(d=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=d,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),d=this.motorImpulse1-u),this.enableMotor2&&(m=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=m,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),m=this.motorImpulse2-y),this.enableMotor3&&(S=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=S,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),S=this.motorImpulse3-p),a+=d*this.kv00+m*this.k01+S*this.k02,o+=d*this.k10+m*this.kv11+S*this.k12,r+=d*this.k20+m*this.k21+S*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,V=a*this.d00+o*this.d01+r*this.d02,O=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=V,this.limitImpulse2+=O,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(V=-x)*this.k10,r+=V*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(O=-g)*this.k01,r+=O*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),O=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),V=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),V=(this.k11*a+-this.k01*o)*M,O=(-this.k10*a+this.k00*o)*M;break;case 5:O=o/this.k11;break;case 6:V=a/this.k00}this.limitImpulse1=V+x,this.limitImpulse2=O+g,this.limitImpulse3=nt+P;var it=d+V,ct=m+O,ut=S+nt;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,o=t*this.ax2+e*this.ay2+n*this.az2}}),on.prototype=Object.assign(Object.create(je.prototype),{constructor:on,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var n=R.acosClamp(R.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),R.dotVectors(this.nor,this.tmp)<0?this.limitMotor.angle=-n:this.limitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=R.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=R.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.lc.preSolve(t,e)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}}),rn.prototype=Object.assign(Object.create(je.prototype),{constructor:rn,preSolve:function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},solve:function(){this.lc.solve()},postSolve:function(){}}),Object.assign(In.prototype,{TranslationalConstraint:!0,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,u=this.p2.z-this.p1.z,y=o*this.ax+r*this.ay+u*this.az,p=this.limitMotor.frequency,d=p>0;(d&&y>20||y<-20)&&(d=!1),this.lowerLimit<=this.upperLimit?(this.lowerLimit==this.upperLimit?(this.limitState!=0&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-y,d||(y=this.lowerLimit)):y<this.lowerLimit?(this.limitState!=-1&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-y,d||(y=this.lowerLimit)):y>this.upperLimit?(this.limitState!=1&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-y,d||(y=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),d||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(this.limitState!=0||d)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var m=y*this.ax,S=y*this.ay,x=y*this.az,g=this.m1/(this.m1+this.m2),P=1-g;if(this.r1x=this.r1.x+m*g,this.r1y=this.r1.y+S*g,this.r1z=this.r1.z+x*g,this.r2x=this.r2.x-m*P,this.r2y=this.r2.y-S*P,this.r2z=this.r2.z-x*P,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,d&&this.limitState!=2){var V=6.2831853*p,O=V*V*t,nt=e/(O+2*this.limitMotor.dampingRatio*V);this.cfm=this.motorDenom*nt,this.limitVelocity*=O*nt}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm);var M=this.limitImpulse+this.motorImpulse;this.l1.x+=M*this.l1x,this.l1.y+=M*this.l1y,this.l1.z+=M*this.l1z,this.a1.x+=M*this.a1x,this.a1.y+=M*this.a1y,this.a1.z+=M*this.a1z,this.l2.x-=M*this.l2x,this.l2.y-=M*this.l2y,this.l2.z-=M*this.l2z,this.a2.x-=M*this.a2x,this.a2.y-=M*this.a2y,this.a2.z-=M*this.a2z},solve:function(){var t,e,n=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(n-this.motorSpeed)*this.invMotorDenom;var a=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),n-=(t=this.motorImpulse-a)*this.motorDenom}else t=0;if(this.limitState!=2){e=(n-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var o=this.limitImpulse;this.limitImpulse+=e,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),e=this.limitImpulse-o}else e=0;var r=e+t;this.l1.x+=r*this.l1x,this.l1.y+=r*this.l1y,this.l1.z+=r*this.l1z,this.a1.x+=r*this.a1x,this.a1.y+=r*this.a1y,this.a1.z+=r*this.a1z,this.l2.x-=r*this.l2x,this.l2.y-=r*this.l2y,this.l2.z-=r*this.l2z,this.a2.x-=r*this.a2x,this.a2.y-=r*this.a2y,this.a2.z-=r*this.a2z}}),hn.prototype=Object.assign(Object.create(je.prototype),{constructor:hn,preSolve:function(t,e){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(t,e)},solve:function(){this.t.solve()},postSolve:function(){}}),Object.assign(Hn.prototype,{AngularConstraint:!0,preSolve:function(t,e){var n,a,o;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),n=1/((o=new Wi().add(this.ii1,this.ii2).elements)[0]*(o[4]*o[8]-o[7]*o[5])+o[3]*(o[7]*o[2]-o[1]*o[8])+o[6]*(o[1]*o[5]-o[4]*o[2])),this.dd=new Wi().set(o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]).multiplyScalar(n),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),n=2*this.relativeOrientation.w,this.vel.copy(this.relativeOrientation).multiplyScalar(n),(a=this.vel.length())>.02?(a=(.02-a)/a*e*.05,this.vel.multiplyScalar(a)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var t=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(t).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}}),Object.assign(cs.prototype,{Translational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,u=this.p2.z-this.p1.z,y=o*this.ax1+r*this.ay1+u*this.az1,p=o*this.ax2+r*this.ay2+u*this.az2,d=o*this.ax3+r*this.ay3+u*this.az3,m=this.limitMotor1.frequency,S=this.limitMotor2.frequency,x=this.limitMotor3.frequency,g=m>0,P=S>0,V=x>0,O=this.lowerLimit1<=this.upperLimit1,nt=this.lowerLimit2<=this.upperLimit2,M=this.lowerLimit3<=this.upperLimit3;(g&&y>20||y<-20)&&(g=!1),(P&&p>20||p<-20)&&(P=!1),(V&&d>20||d<-20)&&(V=!1),O?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-y,g||(y=this.lowerLimit1)):y<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-y,g||(y=this.lowerLimit1)):y>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-y,g||(y=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),g||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),nt?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-p,P||(p=this.lowerLimit2)):p<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-p,P||(p=this.lowerLimit2)):p>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-p,P||(p=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),P||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),M?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-d,V||(d=this.lowerLimit3)):d<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-d,V||(d=this.lowerLimit3)):d>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-d,V||(d=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),V||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||g)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||P)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||V)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var tt=y*this.ax1+p*this.ax2+d*this.ax2,it=y*this.ay1+p*this.ay2+d*this.ay2,ct=y*this.az1+p*this.az2+d*this.az2,ut=this.m2/(this.m1+this.m2);this.weight>=0&&(ut=this.weight);var et=1-ut;this.r1x=this.r1.x+tt*ut,this.r1y=this.r1.y+it*ut,this.r1z=this.r1.z+ct*ut,this.r2x=this.r2.x-tt*et,this.r2y=this.r2.y-it*et,this.r2z=this.r2.z-ct*et,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var kt=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*kt,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*kt,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*kt,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*kt,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*kt,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*kt,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*kt,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*kt,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*kt,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,g&&this.limitState1!=2){var G=6.2831853*m,ot=G*G*t,pt=e/(ot+2*this.limitMotor1.dampingRatio*G);this.cfm1=this.kv00*pt,this.limitVelocity1*=ot*pt}else this.cfm1=0,this.limitVelocity1*=.05*e;P&&this.limitState2!=2?(pt=e/((ot=(G=6.2831853*S)*G*t)+2*this.limitMotor2.dampingRatio*G),this.cfm2=this.kv11*pt,this.limitVelocity2*=ot*pt):(this.cfm2=0,this.limitVelocity2*=.05*e),V&&this.limitState3!=2?(pt=e/((ot=(G=6.2831853*x)*G*t)+2*this.limitMotor3.dampingRatio*G),this.cfm3=this.kv22*pt,this.limitVelocity3*=ot*pt):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var Y=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*Y,this.d01=(this.k02*this.k21-this.k01*this.k22)*Y,this.d02=(this.k01*this.k12-this.k02*this.k11)*Y,this.d10=(this.k12*this.k20-this.k10*this.k22)*Y,this.d11=(this.k00*this.k22-this.k02*this.k20)*Y,this.d12=(this.k02*this.k10-this.k00*this.k12)*Y,this.d20=(this.k10*this.k21-this.k11*this.k20)*Y,this.d21=(this.k01*this.k20-this.k00*this.k21)*Y,this.d22=(this.k00*this.k11-this.k01*this.k10)*Y;var ht=this.limitImpulse1+this.motorImpulse1,dt=this.limitImpulse2+this.motorImpulse2,At=this.limitImpulse3+this.motorImpulse3;this.l1.x+=ht*this.l1x1+dt*this.l1x2+At*this.l1x3,this.l1.y+=ht*this.l1y1+dt*this.l1y2+At*this.l1y3,this.l1.z+=ht*this.l1z1+dt*this.l1z2+At*this.l1z3,this.a1.x+=ht*this.a1x1+dt*this.a1x2+At*this.a1x3,this.a1.y+=ht*this.a1y1+dt*this.a1y2+At*this.a1y3,this.a1.z+=ht*this.a1z1+dt*this.a1z2+At*this.a1z3,this.l2.x-=ht*this.l2x1+dt*this.l2x2+At*this.l2x3,this.l2.y-=ht*this.l2y1+dt*this.l2y2+At*this.l2y3,this.l2.z-=ht*this.l2z1+dt*this.l2z2+At*this.l2z3,this.a2.x-=ht*this.a2x1+dt*this.a2x2+At*this.a2x3,this.a2.y-=ht*this.a2y1+dt*this.a2y2+At*this.a2y3,this.a2.z-=ht*this.a2z1+dt*this.a2z2+At*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,u=this.motorImpulse1,y=this.motorImpulse2,p=this.motorImpulse3,d=0,m=0,S=0;this.enableMotor1&&(d=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=d,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),d=this.motorImpulse1-u),this.enableMotor2&&(m=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=m,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),m=this.motorImpulse2-y),this.enableMotor3&&(S=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=S,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),S=this.motorImpulse3-p),a+=d*this.kv00+m*this.k01+S*this.k02,o+=d*this.k10+m*this.kv11+S*this.k12,r+=d*this.k20+m*this.k21+S*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,V=a*this.d00+o*this.d01+r*this.d02,O=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=V,this.limitImpulse2+=O,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(V=-x)*this.k10,r+=V*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(O=-g)*this.k01,r+=O*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),O=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),V=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),V=(this.k11*a+-this.k01*o)*M,O=(-this.k10*a+this.k00*o)*M;break;case 5:O=o/this.k11;break;case 6:V=a/this.k00}this.limitImpulse1=x+V,this.limitImpulse2=g+O,this.limitImpulse3=P+nt;var it=d+V,ct=m+O,ut=S+nt;this.l1.x+=it*this.l1x1+ct*this.l1x2+ut*this.l1x3,this.l1.y+=it*this.l1y1+ct*this.l1y2+ut*this.l1y3,this.l1.z+=it*this.l1z1+ct*this.l1z2+ut*this.l1z3,this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.l2.x-=it*this.l2x1+ct*this.l2x2+ut*this.l2x3,this.l2.y-=it*this.l2y1+ct*this.l2y2+ut*this.l2y3,this.l2.z-=it*this.l2z1+ct*this.l2z2+ut*this.l2z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3}}),ms.prototype=Object.assign(Object.create(je.prototype),{constructor:ms,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}}),ln.prototype=Object.assign(Object.create(je.prototype),{constructor:ln,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var n=R.acosClamp(R.dotVectors(this.an1,this.an2));R.dotVectors(this.nor,this.tmp)<0?this.rotationalLimitMotor.angle=-n:this.rotationalLimitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=R.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=R.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),cn.prototype=Object.assign(Object.create(je.prototype),{constructor:cn,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=R.dotVectors(this.ax1,this.ax2);var n=R.dotVectors(this.an1,this.ax2);R.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))<0?this.rotationalLimitMotor1.angle=-n:this.rotationalLimitMotor1.angle=n,n=R.dotVectors(this.an2,this.ax1),R.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))<0?this.rotationalLimitMotor2.angle=-n:this.rotationalLimitMotor2.angle=n,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),zn.prototype={constructor:zn,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPointVec:function(t,e,n,a){var o=this.points[this.numPoints++];o.position.copy(t),o.localPoint1.sub(t,this.body1.position).applyMatrix3(this.body1.rotation),o.localPoint2.sub(t,this.body2.position).applyMatrix3(this.body2.rotation),o.normal.copy(e),a&&o.normal.negate(),o.normalImpulse=0,o.penetration=n,o.warmStarted=!1},addPoint:function(t,e,n,a,o,r,u,y){var p=this.points[this.numPoints++];p.position.set(t,e,n),p.localPoint1.sub(p.position,this.body1.position).applyMatrix3(this.body1.rotation),p.localPoint2.sub(p.position,this.body2.position).applyMatrix3(this.body2.rotation),p.normalImpulse=0,p.normal.set(a,o,r),y&&p.normal.negate(),p.penetration=u,p.warmStarted=!1}},pn.prototype=Object.assign(Object.create(Ws.prototype),{constructor:pn,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var n=this.m1+this.m2;this.num=this.manifold.numPoints;for(var a,o,r,u,y,p,d,m=this.cs,S=0;S<this.num;S++)a=this.ps[S],this.tmpP1.sub(a.position,this.p1),this.tmpP2.sub(a.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),m.norImp=a.normalImpulse,m.tanImp=a.tangentImpulse,m.binImp=a.binormalImpulse,m.nor.copy(a.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),o=R.dotVectors(m.nor,this.tmp),m.tan.set(this.tmp.x-o*m.nor.x,this.tmp.y-o*m.nor.y,this.tmp.z-o*m.nor.z),R.dotVectors(m.tan,m.tan)<=.04&&m.tan.tangent(m.nor),m.tan.normalize(),m.bin.crossVectors(m.nor,m.tan),m.norU1.scale(m.nor,this.m1),m.norU2.scale(m.nor,this.m2),m.tanU1.scale(m.tan,this.m1),m.tanU2.scale(m.tan,this.m2),m.binU1.scale(m.bin,this.m1),m.binU2.scale(m.bin,this.m2),m.norT1.crossVectors(this.tmpP1,m.nor),m.tanT1.crossVectors(this.tmpP1,m.tan),m.binT1.crossVectors(this.tmpP1,m.bin),m.norT2.crossVectors(this.tmpP2,m.nor),m.tanT2.crossVectors(this.tmpP2,m.tan),m.binT2.crossVectors(this.tmpP2,m.bin),p=this.i1,d=this.i2,m.norTU1.copy(m.norT1).applyMatrix3(p,!0),m.tanTU1.copy(m.tanT1).applyMatrix3(p,!0),m.binTU1.copy(m.binT1).applyMatrix3(p,!0),m.norTU2.copy(m.norT2).applyMatrix3(d,!0),m.tanTU2.copy(m.tanT2).applyMatrix3(d,!0),m.binTU2.copy(m.binT2).applyMatrix3(d,!0),this.tmpC1.crossVectors(m.norTU1,this.tmpP1),this.tmpC2.crossVectors(m.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.norDen=1/(n+R.dotVectors(m.nor,this.tmp)),this.tmpC1.crossVectors(m.tanTU1,this.tmpP1),this.tmpC2.crossVectors(m.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.tanDen=1/(n+R.dotVectors(m.tan,this.tmp)),this.tmpC1.crossVectors(m.binTU1,this.tmpP1),this.tmpC2.crossVectors(m.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.binDen=1/(n+R.dotVectors(m.bin,this.tmp)),a.warmStarted?(r=a.normalImpulse,this.lv1.addScaledVector(m.norU1,r),this.av1.addScaledVector(m.norTU1,r),this.lv2.subScaledVector(m.norU2,r),this.av2.subScaledVector(m.norTU2,r),m.norImp=r,m.tanImp=0,m.binImp=0,o=0):(m.norImp=0,m.tanImp=0,m.binImp=0),o>-1&&(o=0),(u=this.restitution*-o)<(y=-(a.penetration+.005)*e*.05)&&(u=y),m.norTar=u,m.last=S==this.num-1,m=m.next},solve:function(){var t,e,n,a,o,r,u,y,p;this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var d=this.cs;o=d.norImp,r=d.tanImp,u=d.binImp,y=-o*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),t=r,n=u,(p=(r+=e=(R.dotVectors(this.tmp,d.tan)+R.dotVectors(this.tmpav2,d.tanT2)-R.dotVectors(this.tmpav1,d.tanT1))*d.tanDen)*r+(u+=a=(R.dotVectors(this.tmp,d.bin)+R.dotVectors(this.tmpav2,d.binT2)-R.dotVectors(this.tmpav1,d.binT1))*d.binDen)*u)>y*y&&(r*=p=y/R.sqrt(p),u*=p),e=r-t,a=u-n,this.tmp.set(d.tanU1.x*e+d.binU1.x*a,d.tanU1.y*e+d.binU1.y*a,d.tanU1.z*e+d.binU1.z*a),this.tmplv1.addEqual(this.tmp),this.tmp.set(d.tanTU1.x*e+d.binTU1.x*a,d.tanTU1.y*e+d.binTU1.y*a,d.tanTU1.z*e+d.binTU1.z*a),this.tmpav1.addEqual(this.tmp),this.tmp.set(d.tanU2.x*e+d.binU2.x*a,d.tanU2.y*e+d.binU2.y*a,d.tanU2.z*e+d.binU2.z*a),this.tmplv2.subEqual(this.tmp),this.tmp.set(d.tanTU2.x*e+d.binTU2.x*a,d.tanTU2.y*e+d.binTU2.y*a,d.tanTU2.z*e+d.binTU2.z*a),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),t=o,(o+=e=(R.dotVectors(this.tmp,d.nor)+R.dotVectors(this.tmpav2,d.norT2)-R.dotVectors(this.tmpav1,d.norT1)-d.norTar)*d.norDen)>0&&(o=0),e=o-t,this.tmplv1.addScaledVector(d.norU1,e),this.tmpav1.addScaledVector(d.norTU1,e),this.tmplv2.subScaledVector(d.norU2,e),this.tmpav2.subScaledVector(d.norTU2,e),d.norImp=o,d.tanImp=r,d.binImp=u,!d.last;)d=d.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var t,e=this.cs,n=this.num;n--;)(t=this.ps[n]).normal.copy(e.nor),t.tangent.copy(e.tan),t.binormal.copy(e.bin),t.normalImpulse=e.norImp,t.tangentImpulse=e.tanImp,t.binormalImpulse=e.binImp,t.normalDenominator=e.norDen,t.tangentDenominator=e.tanDen,t.binormalDenominator=e.binDen,e=e.next}}),Object.assign(Ks.prototype,{Contact:!0,mixRestitution:function(t,e){return R.sqrt(t*e)},mixFriction:function(t,e){return R.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var n=this.buffer[e],a=this.points[e];n.lp1X=a.localPoint1.x,n.lp1Y=a.localPoint1.y,n.lp1Z=a.localPoint1.z,n.lp2X=a.localPoint2.x,n.lp2Y=a.localPoint2.y,n.lp2Z=a.localPoint2.z,n.impulse=a.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var o=this.manifold.numPoints;if(o==0)return this.touching=!1,this.close=!1,void(this.dist=R.INF);for((this.touching||this.dist<.001)&&(this.close=!0),this.touching=!0,e=o;e--;){for(var r=(a=this.points[e]).localPoint1.x,u=a.localPoint1.y,y=a.localPoint1.z,p=a.localPoint2.x,d=a.localPoint2.y,m=a.localPoint2.z,S=-1,x=4e-4,g=t;g--;){var P=(n=this.buffer[g]).lp1X-r,V=n.lp1Y-u,O=n.lp1Z-y,nt=P*P+V*V+O*O,M=(P=n.lp2X-p)*P+(V=n.lp2Y-d)*V+(O=n.lp2Z-m)*O;nt<M?nt<x&&(x=nt,S=g):M<x&&(x=M,S=g),x<this.dist&&(this.dist=x)}if(S!=-1){var tt=this.buffer[S];this.buffer[S]=this.buffer[--t],this.buffer[t]=tt,a.normalImpulse=tt.impulse,a.warmStarted=!0}else a.normalImpulse=0,a.warmStarted=!1}},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,t.contactLink!=null?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,e.contactLink!=null?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,this.body1.contactLink!=null?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,this.body2.contactLink!=null?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}}),Object.assign(Ns.prototype,{setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(t){t.parent&&ue("RigidBody","It is not possible that you add a shape which already has an associated body."),this.shapes!=null&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var n=e.prev,a=e.next;n!=null&&(n.next=a),a!=null&&(a.prev=n),this.shapes==e&&(this.shapes=a),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var n=e===void 0||e;this.type=t||2,this.isDynamic=this.type===1,this.isStatic=this.type===2,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var a=new Wi,o=new B,r=this.shapes;r!==null;r=r.next){r.calculateMassInfo(this.massInfo);var u=this.massInfo.mass;o.addScaledVector(r.relativePosition,u),this.mass+=u,this.rotateInertia(r.relativeRotation,this.massInfo.inertia,a),this.localInertia.add(a),this.localInertia.addOffset(u,r.relativePosition)}if(this.inverseMass=1/this.mass,o.scaleEqual(this.inverseMass),n){for(this.position.add(o),r=this.shapes;r!==null;r=r.next)r.relativePosition.subEqual(o);this.localInertia.subOffset(this.mass,o)}this.inverseLocalInertia.invert(this.localInertia),this.type===2&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;t!=null;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;e!=null;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var n=this.shapes;n!=null;n=n.next)n.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;t!=null;t=t.next)t.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&&this.awake()},isLonely:function(){return this.numJoints==0&&this.numContacts==0},updatePosition:function(t){switch(this.type){case 2:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case 1:this.isKinematic&&(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&&(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/t),this.controlPos=!1),this.controlRot&&(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t),this.updateMesh();break;default:ue("RigidBody","Invalid type.")}this.syncShapes(),this.updateMesh()},getAxis:function(){return new B(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(t,e,n){this.tmpInertia.multiplyMatrices(t,e),n.multiplyMatrices(this.tmpInertia,t,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var t=this.shapes;t!=null;t=t.next)t.position.copy(t.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),t.rotation.multiplyMatrices(this.rotation,t.relativeRotation),t.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScaledVector(e,this.inverseMass);var n=new B().copy(t).sub(this.position).cross(e).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(n)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(t){this.newOrientation=new Ui().setFromEuler(t.x*R.degtorad,t.y*R.degtorad,t.z*R.degtorad),this.controlRot=!0},resetPosition:function(t,e,n){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,n).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new Ui(t.x,t.y,t.z,t.w),this.awake()},resetRotation:function(t,e,n){this.angularVelocity.set(0,0,0),this.orientation=new Ui().setFromEuler(t*R.degtorad,e*R.degtorad,n*R.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(t){this.mesh=t,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),this.mesh!==null&&(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}}),Object.assign(ds.prototype,{BroadPhase:!0,createProxy:function(t){ue("BroadPhase","Inheritance error.")},addProxy:function(t){ue("BroadPhase","Inheritance error.")},removeProxy:function(t){ue("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var n,a=t.parent,o=e.parent;if(a==o||!a.isDynamic&&!o.isDynamic||!(t.belongsTo&e.collidesWith)||!(e.belongsTo&t.collidesWith))return!1;for(n=a.numJoints<o.numJoints?a.jointLink:o.jointLink;n!==null;){var r=n.joint;if(!r.allowCollision&&(r.body1==a&&r.body2==o||r.body1==o&&r.body2==a))return!1;n=n.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(t,e){var n=new mn(t,e);this.pairs.push(n),this.numPairs++}});var dn=0;function ts(t){this.shape=t,this.aabb=t.aabb}function us(t){ts.call(this,t),this.id=dn++}function $s(){ds.call(this),this.types=st,this.proxies=[]}function Ms(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}function Bs(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0}function Ys(t,e){ts.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new Bs(this,!1),this.max[0]=new Bs(this,!0),this.min[1]=new Bs(this,!1),this.max[1]=new Bs(this,!0),this.min[2]=new Bs(this,!1),this.max[2]=new Bs(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}function Qs(){ds.call(this),this.types=U,this.numElementsD=0,this.numElementsS=0,this.axesD=[new Ms,new Ms,new Ms],this.axesS=[new Ms,new Ms,new Ms],this.index1=0,this.index2=1}function fn(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new hs}function wn(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new hs}function yn(t){ts.call(this,t),this.leaf=new fn,this.leaf.proxy=this}function vn(){ds.call(this),this.types=Vt,this.tree=new wn,this.stack=[],this.leaves=[],this.numLeaves=0}function Pe(){this.flip=!1}function _n(){Pe.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}function bn(t){Pe.call(this),this.flip=t}function xn(){Pe.call(this)}function _e(t){Pe.call(this),this.flip=t}function Xs(t){Pe.call(this),this.flip=t}function Se(){Pe.call(this)}function Ge(t){Pe.call(this),this.flip=t,this.n=new B,this.p=new B}function tn(t){Pe.call(this),this.flip=t,this.n=new B,this.p=new B,this.dix=new B,this.diy=new B,this.diz=new B,this.cc=new B,this.cc2=new B}function Tn(t){switch(t instanceof Object||(t={}),this.scale=t.worldscale||1,this.invScale=1/this.scale,this.timeStep=t.timestep||.01666,this.timerate=1e3*this.timeStep,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=t.iterations||8,t.broadphase||2){case 1:this.broadPhase=new $s;break;case 2:default:this.broadPhase=new Qs;break;case 3:this.broadPhase=new vn}this.Btypes=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhaseType=this.Btypes[t.broadphase||2],this.performance=null,this.isStat=t.info!==void 0&&t.info,this.isStat&&(this.performance=new As(this)),this.enableRandomizer=t.random===void 0||t.random,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new B(0,-9.8,0),t.gravity!==void 0&&this.gravity.fromArray(t.gravity),this.detectors=[],this.detectors.length=5;for(var e=5;e--;)this.detectors[e]=[],this.detectors[e].length=5;this.detectors[Tt][Tt]=new Se,this.detectors[Tt][ei]=new _e(!1),this.detectors[ei][Tt]=new _e(!0),this.detectors[ei][ei]=new _n,this.detectors[yi][yi]=new xn,this.detectors[yi][ei]=new bn(!0),this.detectors[ei][yi]=new bn(!1),this.detectors[yi][Tt]=new Xs(!0),this.detectors[Tt][yi]=new Xs(!1),this.detectors[Ei][Tt]=new Ge(!0),this.detectors[Tt][Ei]=new Ge(!1),this.detectors[Ei][ei]=new tn(!0),this.detectors[ei][Ei]=new tn(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(ts.prototype,{Proxy:!0,update:function(){ue("Proxy","Inheritance error.")}}),us.prototype=Object.assign(Object.create(ts.prototype),{constructor:us,update:function(){}}),$s.prototype=Object.assign(Object.create(ds.prototype),{constructor:$s,createProxy:function(t){return new us(t)},addProxy:function(t){this.proxies.push(t)},removeProxy:function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},collectPairs:function(){var t,e,n,a=0,o=this.proxies,r=o.length;for(this.numPairChecks=r*(r-1)>>1;a<r;)for(e=o[a++],t=a+1;t<r;)n=o[t++],!e.aabb.intersectTest(n.aabb)&&this.isAvailablePair(e.shape,n.shape)&&this.addPair(e.shape,n.shape)}}),Object.assign(Ms.prototype,{SAPAxis:!0,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var n=[],a=this.numElements;a--;)n[a]=this.elements[a]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var n=-1,a=-1,o=0,r=this.numElements;o<r;o++){var u=this.elements[o];if(u==t||u==e){if(n!=-1){a=o;break}n=o}}for(o=n+1,r=a;o<r;o++)this.elements[o-1]=this.elements[o];for(o=a+1,r=this.numElements;o<r;o++)this.elements[o-2]=this.elements[o];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e;)e++;e=e*this.numElements>>2,t=0;for(var n=!1,a=this.elements,o=1,r=this.numElements;o<r;o++){var u=a[o],y=u.value,p=a[o-1];if(p.value>y){var d=o;do{if(a[d]=p,--d==0)break;p=a[d-1]}while(p.value>y);if(a[d]=u,(t+=o-d)>e){n=!0;break}}}if(n){t=2;var m=this.stack;for(m[0]=0,m[1]=this.numElements-1;t>0;){var S=m[--t],x=m[--t],g=S-x;if(g>16){var P=x+R.floor(.5*g);for(u=a[P],a[P]=a[S],a[S]=u,y=u.value,o=x-1,d=S;;){var V,O;do V=a[++o];while(V.value<y);do O=a[--d];while(y<O.value&&d!=x);if(o>=d)break;a[o]=O,a[d]=V}a[S]=a[o],a[o]=u,o-x>S-o?(m[t++]=x,m[t++]=o-1,m[t++]=o+1,m[t++]=S):(m[t++]=o+1,m[t++]=S,m[t++]=x,m[t++]=o-1)}else for(o=x+1;o<=S;o++)if(y=(u=a[o]).value,(p=a[o-1]).value>y){d=o;do{if(a[d]=p,--d==0)break;p=a[d-1]}while(p.value>y);a[d]=u}}}},calculateTestCount:function(){for(var t=1,e=0,n=1,a=this.numElements;n<a;n++)this.elements[n].max?t--:(e+=t,t++);return e}}),Ys.prototype=Object.assign(Object.create(ts.prototype),{constructor:Ys,isDynamic:function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},update:function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(this.belongsTo==1&&!this.isDynamic()||this.belongsTo==2&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))}}),Qs.prototype=Object.assign(Object.create(ds.prototype),{constructor:Qs,createProxy:function(t){return new Ys(this,t)},addProxy:function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},removeProxy:function(t){var e=t;if(e.belongsTo!=0){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2}e.belongsTo=0}},collectPairs:function(){if(this.numElementsD!=0){var t,e,n,a,o=this.axesD[this.index1],r=this.axesD[this.index2];o.sort(),r.sort(),o.calculateTestCount()<=r.calculateTestCount()?((r=this.axesS[this.index1]).sort(),t=o.elements,e=r.elements):((o=this.axesS[this.index2]).sort(),t=r.elements,e=o.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var u=0,y=0;u<this.numElementsD;){var p,d;if(y==this.numElementsS)p=t[u],d=!0,u++;else{var m=t[u],S=e[y];m.value<S.value?(p=m,d=!0,u++):(p=S,d=!1,y++)}if(p.max){var x=p.pair;if(d){if(x==n){n=n.pair;continue}p=n}else{if(x==a){a=a.pair;continue}p=a}for(;p;){if((M=p.pair)==x){p.pair=M.pair;break}p=M}}else{for(var g=p.proxy.shape,P=p.min1.value,V=p.max1.value,O=p.min2.value,nt=p.max2.value,M=n;M!=null;M=M.pair){var tt=M.proxy.shape;this.numPairChecks++,P>M.max1.value||V<M.min1.value||O>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt)}if(d){for(M=a;M!=null;M=M.pair)tt=M.proxy.shape,this.numPairChecks++,P>M.max1.value||V<M.min1.value||O>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt);p.pair=n,n=p}else p.pair=a,a=p}}this.index2=3^(this.index1|this.index2)}}}),Object.assign(wn.prototype,{DBVT:!0,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(this.root!=null){for(var e,n,a=t.aabb,o=this.root;o.proxy==null;){var r=o.child1,u=o.child2,y=o.aabb,p=r.aabb,d=u.aabb;e=y.surfaceArea(),this.aabb.combine(a,y);var m=2*(n=this.aabb.surfaceArea()),S=2*(n-e),x=S;this.aabb.combine(a,p),r.proxy!=null?x+=this.aabb.surfaceArea():x+=this.aabb.surfaceArea()-p.surfaceArea();var g=S;if(this.aabb.combine(a,d),u.proxy!=null?g+=this.aabb.surfaceArea():g+=this.aabb.surfaceArea()-d.surfaceArea(),x<g){if(m<x)break;o=r}else{if(m<g)break;o=u}}var P,V=o.parent;(P=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new fn).parent=V,P.child1=t,P.child2=o,P.aabb.combine(t.aabb,o.aabb),P.height=o.height+1,o.parent=P,t.parent=P,o==this.root?this.root=P:V.child1==o?V.child1=P:V.child2=P;do P=this.balance(P),this.fix(P),P=P.parent;while(P!=null)}else this.root=t},getBalance:function(t){return t.proxy!=null?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t!=this.root){var e,n=t.parent;if(e=n.child1==t?n.child2:n.child1,n==this.root)return this.root=e,void(e.parent=null);var a=n.parent;e.parent=a,a.child1==n?a.child1=e:a.child2=e,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=n);do a=this.balance(a),this.fix(a),a=a.parent;while(a!=null)}else this.root=null},balance:function(t){var e=t.height;if(e<2)return t;var n,a=t.parent,o=t.child1,r=t.child2,u=o.height,y=r.height,p=u-y;if(p>1){var d=o.child1,m=o.child2,S=d.height,x=m.height;return S>x?(o.child2=t,t.parent=o,t.child1=m,m.parent=t,t.aabb.combine(m.aabb,r.aabb),n=x-y,t.height=x-(n&n>>31)+1,o.aabb.combine(d.aabb,t.aabb),n=S-e,o.height=S-(n&n>>31)+1):(o.child1=t,t.parent=o,t.child1=d,d.parent=t,t.aabb.combine(d.aabb,r.aabb),n=S-y,t.height=S-(n&n>>31)+1,o.aabb.combine(t.aabb,m.aabb),n=e-x,o.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=o:a.child2=o:this.root=o,o.parent=a,o}if(p<-1){var g=r.child1,P=r.child2,V=g.height,O=P.height;return V>O?(r.child2=t,t.parent=r,t.child2=P,P.parent=t,t.aabb.combine(o.aabb,P.aabb),n=u-O,t.height=u-(n&n>>31)+1,r.aabb.combine(g.aabb,t.aabb),n=V-e,r.height=V-(n&n>>31)+1):(r.child1=t,t.parent=r,t.child2=g,g.parent=t,t.aabb.combine(o.aabb,g.aabb),n=u-V,t.height=u-(n&n>>31)+1,r.aabb.combine(t.aabb,P.aabb),n=e-O,r.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=r:a.child2=r:this.root=r,r.parent=a,r}return t},fix:function(t){var e=t.child1,n=t.child2;t.aabb.combine(e.aabb,n.aabb),t.height=e.height<n.height?n.height+1:e.height+1}}),yn.prototype=Object.assign(Object.create(ts.prototype),{constructor:yn,update:function(){}}),vn.prototype=Object.assign(Object.create(ds.prototype),{constructor:vn,createProxy:function(t){return new yn(t)},addProxy:function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},removeProxy:function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves<2))for(var t,e=this.numLeaves;e--;)(t=this.leaves[e]).proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,.1),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},collide:function(t,e){var n,a,o,r,u,y,p=2;for(this.stack[0]=t,this.stack[1]=e;p>0;)if(o=this.stack[--p],r=this.stack[--p],u=o.proxy!=null,y=r.proxy!=null,this.numPairChecks++,u&&y){if((n=o.proxy.shape)==(a=r.proxy.shape)||n.aabb.intersectTest(a.aabb)||!this.isAvailablePair(n,a))continue;this.addPair(n,a)}else{if(o.aabb.intersectTest(r.aabb))continue;y||!u&&o.aabb.surfaceArea()>r.aabb.surfaceArea()?(this.stack[p++]=o.child1,this.stack[p++]=r,this.stack[p++]=o.child2,this.stack[p++]=r):(this.stack[p++]=o,this.stack[p++]=r.child1,this.stack[p++]=o,this.stack[p++]=r.child2)}}}),Object.assign(Pe.prototype,{CollisionDetector:!0,detectCollision:function(t,e,n){ue("CollisionDetector","Inheritance error.")}}),_n.prototype=Object.assign(Object.create(Pe.prototype),{constructor:_n,detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,u,y,p,d,m,S,x,g,P,V,O,nt,M,tt,it,ct,ut,et,kt,G,ot,pt,Y,ht,dt,At,ki,Si,vi,F,Zt,N,z,at,E=a.elements,D=o.elements,Bt=a.dimentions,Et=o.dimentions,xt=a.position,gt=o.position,W=xt.x,mt=xt.y,Pt=xt.z,oe=gt.x,Ni=gt.y,Fi=gt.z,bi=oe-W,xi=Ni-mt,Nt=Fi-Pt,_t=a.halfWidth,K=a.halfHeight,lt=a.halfDepth,wt=o.halfWidth,Pi=o.halfHeight,Qt=o.halfDepth,$t=Bt[0],Ut=Bt[1],Wt=Bt[2],vt=Bt[3],ft=Bt[4],yt=Bt[5],Kt=Bt[6],It=Bt[7],qt=Bt[8],si=Bt[9],ai=Bt[10],Ft=Bt[11],Mt=Bt[12],l=Bt[13],f=Bt[14],_=Bt[15],k=Bt[16],w=Bt[17],L=Et[0],I=Et[1],H=Et[2],T=Et[3],Q=Et[4],St=Et[5],zt=Et[6],Lt=Et[7],ii=Et[8],re=Et[9],Li=Et[10],zi=Et[11],ji=Et[12],Xt=Et[13],be=Et[14],xe=Et[15],ge=Et[16],ci=Et[17],ri=Ut*H-Wt*I,Ti=Wt*L-$t*H,hi=$t*I-Ut*L,pe=Ut*St-Wt*Q,me=Wt*T-$t*St,de=$t*Q-Ut*T,fe=Ut*ii-Wt*Lt,ye=Wt*zt-$t*ii,ve=$t*Lt-Ut*zt,Di=ft*H-yt*I,Oi=yt*L-vt*H,Qi=vt*I-ft*L,Ne=ft*St-yt*Q,Me=yt*T-vt*St,Le=vt*Q-ft*T,Ce=ft*ii-yt*Lt,Ve=yt*zt-vt*ii,Ie=vt*Lt-ft*zt,He=It*H-qt*I,Te=qt*L-Kt*H,Ae=Kt*I-It*L,$e=It*St-qt*Q,Be=qt*T-Kt*St,Ee=Kt*Q-It*T,bt=It*ii-qt*Lt,Es=qt*zt-Kt*ii,Fs=Kt*Lt-It*zt,pa=!1,ma=!1,da=!1,fa=!1,ya=!1,va=!1,_a=!1,ba=!1,xa=!1;if((r=(F=$t*bi+Ut*xi+Wt*Nt)>0)||(F=-F),(N=$t*L+Ut*I+Wt*H)<0&&(N=-N),(z=$t*T+Ut*Q+Wt*St)<0&&(z=-z),(at=$t*zt+Ut*Lt+Wt*ii)<0&&(at=-at),!((it=F-(Zt=_t)-(N*wt+z*Pi+at*Qt))>0||((u=(F=vt*bi+ft*xi+yt*Nt)>0)||(F=-F),(N=vt*L+ft*I+yt*H)<0&&(N=-N),(z=vt*T+ft*Q+yt*St)<0&&(z=-z),(at=vt*zt+ft*Lt+yt*ii)<0&&(at=-at),(ct=F-(Zt=K)-(N*wt+z*Pi+at*Qt))>0||((y=(F=Kt*bi+It*xi+qt*Nt)>0)||(F=-F),(N=Kt*L+It*I+qt*H)<0&&(N=-N),(z=Kt*T+It*Q+qt*St)<0&&(z=-z),(at=Kt*zt+It*Lt+qt*ii)<0&&(at=-at),(ut=F-(Zt=lt)-(N*wt+z*Pi+at*Qt))>0||((p=(F=L*bi+I*xi+H*Nt)>0)||(F=-F),(N=L*$t+I*Ut+H*Wt)<0&&(N=-N),(z=L*vt+I*ft+H*yt)<0&&(z=-z),(at=L*Kt+I*It+H*qt)<0&&(at=-at),(et=1*(F-(Zt=N*_t+z*K+at*lt)-wt))>0||((d=(F=T*bi+Q*xi+St*Nt)>0)||(F=-F),(N=T*$t+Q*Ut+St*Wt)<0&&(N=-N),(z=T*vt+Q*ft+St*yt)<0&&(z=-z),(at=T*Kt+Q*It+St*qt)<0&&(at=-at),(kt=1*(F-(Zt=N*_t+z*K+at*lt)-Pi))>0||((m=(F=zt*bi+Lt*xi+ii*Nt)>0)||(F=-F),(N=zt*$t+Lt*Ut+ii*Wt)<0&&(N=-N),(z=zt*vt+Lt*ft+ii*yt)<0&&(z=-z),(at=zt*Kt+Lt*It+ii*qt)<0&&(at=-at),(G=1*(F-(Zt=N*_t+z*K+at*lt)-Qt))>0))))))){if((F=ri*ri+Ti*Ti+hi*hi)>1e-5){if((S=(F=(ri*=F=1/R.sqrt(F))*bi+(Ti*=F)*xi+(hi*=F)*Nt)>0)||(F=-F),(N=ri*vt+Ti*ft+hi*yt)<0&&(N=-N),(z=ri*Kt+Ti*It+hi*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=ri*T+Ti*Q+hi*St)<0&&(N=-N),(z=ri*zt+Ti*Lt+hi*ii)<0&&(z=-z),(ot=F-Zt-(N*Pi+z*Qt))>0)return}else S=!1,ot=0,pa=!0;if((F=pe*pe+me*me+de*de)>1e-5){if((x=(F=(pe*=F=1/R.sqrt(F))*bi+(me*=F)*xi+(de*=F)*Nt)>0)||(F=-F),(N=pe*vt+me*ft+de*yt)<0&&(N=-N),(z=pe*Kt+me*It+de*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=pe*L+me*I+de*H)<0&&(N=-N),(z=pe*zt+me*Lt+de*ii)<0&&(z=-z),(pt=F-Zt-(N*wt+z*Qt))>0)return}else x=!1,pt=0,ma=!0;if((F=fe*fe+ye*ye+ve*ve)>1e-5){if((g=(F=(fe*=F=1/R.sqrt(F))*bi+(ye*=F)*xi+(ve*=F)*Nt)>0)||(F=-F),(N=fe*vt+ye*ft+ve*yt)<0&&(N=-N),(z=fe*Kt+ye*It+ve*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=fe*L+ye*I+ve*H)<0&&(N=-N),(z=fe*T+ye*Q+ve*St)<0&&(z=-z),(Y=F-Zt-(N*wt+z*Pi))>0)return}else g=!1,Y=0,da=!0;if((F=Di*Di+Oi*Oi+Qi*Qi)>1e-5){if((P=(F=(Di*=F=1/R.sqrt(F))*bi+(Oi*=F)*xi+(Qi*=F)*Nt)>0)||(F=-F),(N=Di*$t+Oi*Ut+Qi*Wt)<0&&(N=-N),(z=Di*Kt+Oi*It+Qi*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Di*T+Oi*Q+Qi*St)<0&&(N=-N),(z=Di*zt+Oi*Lt+Qi*ii)<0&&(z=-z),(ht=F-Zt-(N*Pi+z*Qt))>0)return}else P=!1,ht=0,fa=!0;if((F=Ne*Ne+Me*Me+Le*Le)>1e-5){if((V=(F=(Ne*=F=1/R.sqrt(F))*bi+(Me*=F)*xi+(Le*=F)*Nt)>0)||(F=-F),(N=Ne*$t+Me*Ut+Le*Wt)<0&&(N=-N),(z=Ne*Kt+Me*It+Le*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Ne*L+Me*I+Le*H)<0&&(N=-N),(z=Ne*zt+Me*Lt+Le*ii)<0&&(z=-z),(dt=F-Zt-(N*wt+z*Qt))>0)return}else V=!1,dt=0,ya=!0;if((F=Ce*Ce+Ve*Ve+Ie*Ie)>1e-5){if((O=(F=(Ce*=F=1/R.sqrt(F))*bi+(Ve*=F)*xi+(Ie*=F)*Nt)>0)||(F=-F),(N=Ce*$t+Ve*Ut+Ie*Wt)<0&&(N=-N),(z=Ce*Kt+Ve*It+Ie*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Ce*L+Ve*I+Ie*H)<0&&(N=-N),(z=Ce*T+Ve*Q+Ie*St)<0&&(z=-z),(At=F-Zt-(N*wt+z*Pi))>0)return}else O=!1,At=0,va=!0;if((F=He*He+Te*Te+Ae*Ae)>1e-5){if((nt=(F=(He*=F=1/R.sqrt(F))*bi+(Te*=F)*xi+(Ae*=F)*Nt)>0)||(F=-F),(N=He*$t+Te*Ut+Ae*Wt)<0&&(N=-N),(z=He*vt+Te*ft+Ae*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=He*T+Te*Q+Ae*St)<0&&(N=-N),(z=He*zt+Te*Lt+Ae*ii)<0&&(z=-z),(ki=F-Zt-(N*Pi+z*Qt))>0)return}else nt=!1,ki=0,_a=!0;if((F=$e*$e+Be*Be+Ee*Ee)>1e-5){if((M=(F=($e*=F=1/R.sqrt(F))*bi+(Be*=F)*xi+(Ee*=F)*Nt)>0)||(F=-F),(N=$e*$t+Be*Ut+Ee*Wt)<0&&(N=-N),(z=$e*vt+Be*ft+Ee*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=$e*L+Be*I+Ee*H)<0&&(N=-N),(z=$e*zt+Be*Lt+Ee*ii)<0&&(z=-z),(Si=F-Zt-(N*wt+z*Qt))>0)return}else M=!1,Si=0,ba=!0;if((F=bt*bt+Es*Es+Fs*Fs)>1e-5){if((tt=(F=(bt*=F=1/R.sqrt(F))*bi+(Es*=F)*xi+(Fs*=F)*Nt)>0)||(F=-F),(N=bt*$t+Es*Ut+Fs*Wt)<0&&(N=-N),(z=bt*vt+Es*ft+Fs*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=bt*L+Es*I+Fs*H)<0&&(N=-N),(z=bt*T+Es*Q+Fs*St)<0&&(z=-z),(vi=F-Zt-(N*wt+z*Pi))>0)return}else tt=!1,vi=0,xa=!0;var ze=it,Gi=it,Ci=0,ke=r;ct>Gi&&(ze=ct,Gi=ct,Ci=1,ke=u),ut>Gi&&(ze=ut,Gi=ut,Ci=2,ke=y),et>Gi&&(ze=et,Gi=et,Ci=3,ke=p),kt>Gi&&(ze=kt,Gi=kt,Ci=4,ke=d),G>Gi&&(ze=G,Gi=G,Ci=5,ke=m),ot-.01>Gi&&!pa&&(ze=ot,Gi=ot-.01,Ci=6,ke=S),pt-.01>Gi&&!ma&&(ze=pt,Gi=pt-.01,Ci=7,ke=x),Y-.01>Gi&&!da&&(ze=Y,Gi=Y-.01,Ci=8,ke=g),ht-.01>Gi&&!fa&&(ze=ht,Gi=ht-.01,Ci=9,ke=P),dt-.01>Gi&&!ya&&(ze=dt,Gi=dt-.01,Ci=10,ke=V),At-.01>Gi&&!va&&(ze=At,Gi=At-.01,Ci=11,ke=O),ki-.01>Gi&&!_a&&(ze=ki,Gi=ki-.01,Ci=12,ke=nt),Si-.01>Gi&&!ba&&(ze=Si,Gi=Si-.01,Ci=13,ke=M),vi-.01>Gi&&!xa&&(ze=vi,Ci=14,ke=tt);var Dt=0,Ot=0,Rt=0,Xi=0,te=0,ie=0,he=0,le=0,ce=0,qi=0,Ji=0,Zi=0,fs=0,ys=0,vs=0,_s=0,bs=0,xs=0,Sn=!1;if(Ci==0?(ke?(qi=W+si,Ji=mt+ai,Zi=Pt+Ft,Dt=$t,Ot=Ut,Rt=Wt):(qi=W-si,Ji=mt-ai,Zi=Pt-Ft,Dt=-$t,Ot=-Ut,Rt=-Wt),fs=Mt,ys=l,vs=f,Xi=-vt,te=-ft,ie=-yt,_s=_,bs=k,xs=w,he=-Kt,le=-It,ce=-qt):Ci==1?(ke?(qi=W+Mt,Ji=mt+l,Zi=Pt+f,Dt=vt,Ot=ft,Rt=yt):(qi=W-Mt,Ji=mt-l,Zi=Pt-f,Dt=-vt,Ot=-ft,Rt=-yt),fs=si,ys=ai,vs=Ft,Xi=-$t,te=-Ut,ie=-Wt,_s=_,bs=k,xs=w,he=-Kt,le=-It,ce=-qt):Ci==2?(ke?(qi=W+_,Ji=mt+k,Zi=Pt+w,Dt=Kt,Ot=It,Rt=qt):(qi=W-_,Ji=mt-k,Zi=Pt-w,Dt=-Kt,Ot=-It,Rt=-qt),fs=si,ys=ai,vs=Ft,Xi=-$t,te=-Ut,ie=-Wt,_s=Mt,bs=l,xs=f,he=-vt,le=-ft,ce=-yt):Ci==3?(Sn=!0,ke?(qi=oe-re,Ji=Ni-Li,Zi=Fi-zi,Dt=-L,Ot=-I,Rt=-H):(qi=oe+re,Ji=Ni+Li,Zi=Fi+zi,Dt=L,Ot=I,Rt=H),fs=ji,ys=Xt,vs=be,Xi=-T,te=-Q,ie=-St,_s=xe,bs=ge,xs=ci,he=-zt,le=-Lt,ce=-ii):Ci==4?(Sn=!0,ke?(qi=oe-ji,Ji=Ni-Xt,Zi=Fi-be,Dt=-T,Ot=-Q,Rt=-St):(qi=oe+ji,Ji=Ni+Xt,Zi=Fi+be,Dt=T,Ot=Q,Rt=St),fs=re,ys=Li,vs=zi,Xi=-L,te=-I,ie=-H,_s=xe,bs=ge,xs=ci,he=-zt,le=-Lt,ce=-ii):Ci==5?(Sn=!0,ke?(qi=oe-xe,Ji=Ni-ge,Zi=Fi-ci,Dt=-zt,Ot=-Lt,Rt=-ii):(qi=oe+xe,Ji=Ni+ge,Zi=Fi+ci,Dt=zt,Ot=Lt,Rt=ii),fs=re,ys=Li,vs=zi,Xi=-L,te=-I,ie=-H,_s=ji,bs=Xt,xs=be,he=-T,le=-Q,ce=-St):Ci==6?(Dt=ri,Ot=Ti,Rt=hi,Xi=$t,te=Ut,ie=Wt,he=L,le=I,ce=H):Ci==7?(Dt=pe,Ot=me,Rt=de,Xi=$t,te=Ut,ie=Wt,he=T,le=Q,ce=St):Ci==8?(Dt=fe,Ot=ye,Rt=ve,Xi=$t,te=Ut,ie=Wt,he=zt,le=Lt,ce=ii):Ci==9?(Dt=Di,Ot=Oi,Rt=Qi,Xi=vt,te=ft,ie=yt,he=L,le=I,ce=H):Ci==10?(Dt=Ne,Ot=Me,Rt=Le,Xi=vt,te=ft,ie=yt,he=T,le=Q,ce=St):Ci==11?(Dt=Ce,Ot=Ve,Rt=Ie,Xi=vt,te=ft,ie=yt,he=zt,le=Lt,ce=ii):Ci==12?(Dt=He,Ot=Te,Rt=Ae,Xi=Kt,te=It,ie=qt,he=L,le=I,ce=H):Ci==13?(Dt=$e,Ot=Be,Rt=Ee,Xi=Kt,te=It,ie=qt,he=T,le=Q,ce=St):Ci==14&&(Dt=bt,Ot=Es,Rt=Fs,Xi=Kt,te=It,ie=qt,he=zt,le=Lt,ce=ii),Ci>5){var Ri,Vi,Ai,$i,Bi,gs,ks,Ps,Ls,Cs,Vs;ke||(Dt=-Dt,Ot=-Ot,Rt=-Rt),Vi=Dt*(gs=E[0])+Ot*(ks=E[1])+Rt*(Ps=E[2]),(Ri=Dt*(Ai=E[3])+Ot*($i=E[4])+Rt*(Bi=E[5]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[6])+Ot*($i=E[7])+Rt*(Bi=E[8]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[9])+Ot*($i=E[10])+Rt*(Bi=E[11]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[12])+Ot*($i=E[13])+Rt*(Bi=E[14]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[15])+Ot*($i=E[16])+Rt*(Bi=E[17]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[18])+Ot*($i=E[19])+Rt*(Bi=E[20]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),(Ri=Dt*(Ai=E[21])+Ot*($i=E[22])+Rt*(Bi=E[23]))>Vi&&(Vi=Ri,gs=Ai,ks=$i,Ps=Bi),Vi=Dt*(Ls=D[0])+Ot*(Cs=D[1])+Rt*(Vs=D[2]),(Ri=Dt*(Ai=D[3])+Ot*($i=D[4])+Rt*(Bi=D[5]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[6])+Ot*($i=D[7])+Rt*(Bi=D[8]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[9])+Ot*($i=D[10])+Rt*(Bi=D[11]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[12])+Ot*($i=D[13])+Rt*(Bi=D[14]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[15])+Ot*($i=D[16])+Rt*(Bi=D[17]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[18])+Ot*($i=D[19])+Rt*(Bi=D[20]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi),(Ri=Dt*(Ai=D[21])+Ot*($i=D[22])+Rt*(Bi=D[23]))<Vi&&(Vi=Ri,Ls=Ai,Cs=$i,Vs=Bi);var gi=((Ai=Ls-gs)*(Xi-he*(N=Xi*he+te*le+ie*ce))+($i=Cs-ks)*(te-le*N)+(Bi=Vs-Ps)*(ie-ce*N))/(1-N*N);n.addPoint(gs+Xi*gi+Dt*ze*.5,ks+te*gi+Ot*ze*.5,Ps+ie*gi+Rt*ze*.5,Dt,Ot,Rt,ze,!1)}else{var qe,Je,Ze,Ke,Ye,Qe,is,es,ss,ns,as,os,rs,li,q,pi,mi,di,ee,se,ne,Ii=1,oi=0,ae=0;Sn?((oi=$t*Dt+Ut*Ot+Wt*Rt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=vt*Dt+ft*Ot+yt*Rt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=Kt*Dt+It*Ot+qt*Rt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(qe=E[0],Je=E[1],Ze=E[2],Ke=E[6],Ye=E[7],Qe=E[8],is=E[9],es=E[10],ss=E[11],ns=E[3],as=E[4],os=E[5]):ae==1?(qe=E[15],Je=E[16],Ze=E[17],Ke=E[21],Ye=E[22],Qe=E[23],is=E[18],es=E[19],ss=E[20],ns=E[12],as=E[13],os=E[14]):ae==2?(qe=E[12],Je=E[13],Ze=E[14],Ke=E[0],Ye=E[1],Qe=E[2],is=E[3],es=E[4],ss=E[5],ns=E[15],as=E[16],os=E[17]):ae==3?(qe=E[21],Je=E[22],Ze=E[23],Ke=E[9],Ye=E[10],Qe=E[11],is=E[6],es=E[7],ss=E[8],ns=E[18],as=E[19],os=E[20]):ae==4?(qe=E[12],Je=E[13],Ze=E[14],Ke=E[18],Ye=E[19],Qe=E[20],is=E[6],es=E[7],ss=E[8],ns=E[0],as=E[1],os=E[2]):ae==5&&(qe=E[3],Je=E[4],Ze=E[5],Ke=D[9],Ye=D[10],Qe=D[11],is=E[21],es=E[22],ss=E[23],ns=E[15],as=E[16],os=E[17])):((oi=L*Dt+I*Ot+H*Rt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=T*Dt+Q*Ot+St*Rt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=zt*Dt+Lt*Ot+ii*Rt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(qe=D[0],Je=D[1],Ze=D[2],Ke=D[6],Ye=D[7],Qe=D[8],is=D[9],es=D[10],ss=D[11],ns=D[3],as=D[4],os=D[5]):ae==1?(qe=D[15],Je=D[16],Ze=D[17],Ke=D[21],Ye=D[22],Qe=D[23],is=D[18],es=D[19],ss=D[20],ns=D[12],as=D[13],os=D[14]):ae==2?(qe=D[12],Je=D[13],Ze=D[14],Ke=D[0],Ye=D[1],Qe=D[2],is=D[3],es=D[4],ss=D[5],ns=D[15],as=D[16],os=D[17]):ae==3?(qe=D[21],Je=D[22],Ze=D[23],Ke=D[9],Ye=D[10],Qe=D[11],is=D[6],es=D[7],ss=D[8],ns=D[18],as=D[19],os=D[20]):ae==4?(qe=D[12],Je=D[13],Ze=D[14],Ke=D[18],Ye=D[19],Qe=D[20],is=D[6],es=D[7],ss=D[8],ns=D[0],as=D[1],os=D[2]):ae==5&&(qe=D[3],Je=D[4],Ze=D[5],Ke=D[9],Ye=D[10],Qe=D[11],is=D[21],es=D[22],ss=D[23],ns=D[15],as=D[16],os=D[17])),this.clipVertices1[0]=qe,this.clipVertices1[1]=Je,this.clipVertices1[2]=Ze,this.clipVertices1[3]=Ke,this.clipVertices1[4]=Ye,this.clipVertices1[5]=Qe,this.clipVertices1[6]=is,this.clipVertices1[7]=es,this.clipVertices1[8]=ss,this.clipVertices1[9]=ns,this.clipVertices1[10]=as,this.clipVertices1[11]=os,li=0,N=((pi=this.clipVertices1[9])-qi-fs)*Xi+((mi=this.clipVertices1[10])-Ji-ys)*te+((di=this.clipVertices1[11])-Zi-vs)*ie;for(var Mi=0;Mi<4;Mi++)q=3*Mi,z=((ee=this.clipVertices1[q])-qi-fs)*Xi+((se=this.clipVertices1[q+1])-Ji-ys)*te+((ne=this.clipVertices1[q+2])-Zi-vs)*ie,N>0?z>0?(q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne):(q=3*li,li++,gi=N/(N-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=N/(N-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,q=3*(rs-1),N=((pi=this.clipVertices2[q])-qi-_s)*he+((mi=this.clipVertices2[q+1])-Ji-bs)*le+((di=this.clipVertices2[q+2])-Zi-xs)*ce,Mi=0;Mi<rs;Mi++)q=3*Mi,z=((ee=this.clipVertices2[q])-qi-_s)*he+((se=this.clipVertices2[q+1])-Ji-bs)*le+((ne=this.clipVertices2[q+2])-Zi-xs)*ce,N>0?z>0?(q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne):(q=3*li,li++,gi=N/(N-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=N/(N-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,q=3*(rs-1),N=((pi=this.clipVertices1[q])-qi+fs)*-Xi+((mi=this.clipVertices1[q+1])-Ji+ys)*-te+((di=this.clipVertices1[q+2])-Zi+vs)*-ie,Mi=0;Mi<rs;Mi++)q=3*Mi,z=((ee=this.clipVertices1[q])-qi+fs)*-Xi+((se=this.clipVertices1[q+1])-Ji+ys)*-te+((ne=this.clipVertices1[q+2])-Zi+vs)*-ie,N>0?z>0?(q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne):(q=3*li,li++,gi=N/(N-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=N/(N-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,q=3*(rs-1),N=((pi=this.clipVertices2[q])-qi+_s)*-he+((mi=this.clipVertices2[q+1])-Ji+bs)*-le+((di=this.clipVertices2[q+2])-Zi+xs)*-ce,Mi=0;Mi<rs;Mi++)q=3*Mi,z=((ee=this.clipVertices2[q])-qi+_s)*-he+((se=this.clipVertices2[q+1])-Ji+bs)*-le+((ne=this.clipVertices2[q+2])-Zi+xs)*-ce,N>0?z>0?(q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne):(q=3*li,li++,gi=N/(N-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=N/(N-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne),pi=ee,mi=se,di=ne,N=z;if(Sn){var Ra=a;a=o,o=Ra}if((rs=li)!=0){var Nn=a!=t;if(rs>4){Xi=qe-(pi=.25*(qe+Ke+is+ns)),te=Je-(mi=.25*(Je+Ye+es+as)),ie=Ze-(di=.25*(Ze+Qe+ss+os)),he=Ke-pi,le=Ye-mi,ce=Qe-di;var Jn=0,ga=0,Zn=0,ka=0,Mn=-this.INF;for(Ii=this.INF,Mi=0;Mi<rs;Mi++)this.used[Mi]=!1,q=3*Mi,(oi=(pi=this.clipVertices1[q])*Xi+(mi=this.clipVertices1[q+1])*te+(di=this.clipVertices1[q+2])*ie)<Ii&&(Ii=oi,Jn=Mi),oi>Mn&&(Mn=oi,Zn=Mi);for(this.used[Jn]=!0,this.used[Zn]=!0,Mn=-this.INF,Ii=this.INF,Mi=0;Mi<rs;Mi++)this.used[Mi]||(q=3*Mi,(oi=(pi=this.clipVertices1[q])*he+(mi=this.clipVertices1[q+1])*le+(di=this.clipVertices1[q+2])*ce)<Ii&&(Ii=oi,ga=Mi),oi>Mn&&(Mn=oi,ka=Mi));q=3*Jn,(oi=((pi=this.clipVertices1[q])-qi)*Dt+((mi=this.clipVertices1[q+1])-Ji)*Ot+((di=this.clipVertices1[q+2])-Zi)*Rt)<0&&n.addPoint(pi,mi,di,Dt,Ot,Rt,oi,Nn),q=3*ga,(oi=((pi=this.clipVertices1[q])-qi)*Dt+((mi=this.clipVertices1[q+1])-Ji)*Ot+((di=this.clipVertices1[q+2])-Zi)*Rt)<0&&n.addPoint(pi,mi,di,Dt,Ot,Rt,oi,Nn),q=3*Zn,(oi=((pi=this.clipVertices1[q])-qi)*Dt+((mi=this.clipVertices1[q+1])-Ji)*Ot+((di=this.clipVertices1[q+2])-Zi)*Rt)<0&&n.addPoint(pi,mi,di,Dt,Ot,Rt,oi,Nn),q=3*ka,(oi=((pi=this.clipVertices1[q])-qi)*Dt+((mi=this.clipVertices1[q+1])-Ji)*Ot+((di=this.clipVertices1[q+2])-Zi)*Rt)<0&&n.addPoint(pi,mi,di,Dt,Ot,Rt,oi,Nn)}else for(Mi=0;Mi<rs;Mi++)q=3*Mi,(oi=((pi=this.clipVertices1[q])-qi)*Dt+((mi=this.clipVertices1[q+1])-Ji)*Ot+((di=this.clipVertices1[q+2])-Zi)*Rt)<0&&n.addPoint(pi,mi,di,Dt,Ot,Rt,oi,Nn)}}}}}}}}),bn.prototype=Object.assign(Object.create(Pe.prototype),{constructor:bn,getSep:function(t,e,n,a,o){var r,u,y,p,d,m,S,x,g,P,V,O,nt,M=new B,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,et=e.position.y,kt=e.position.z,G=ut-tt,ot=et-it,pt=kt-ct;G*G+ot*ot+pt*pt==0&&(ot=.001);var Y=-G,ht=-ot,dt=-pt;this.supportPointB(t,-Y,-ht,-dt,M);var At=M.x,ki=M.y,Si=M.z;this.supportPointC(e,Y,ht,dt,M);var vi=M.x,F=M.y,Zt=M.z,N=vi-At,z=F-ki,at=Zt-Si;if(N*Y+z*ht+at*dt<=0)return!1;if((Y=z*pt-at*ot)*Y+(ht=at*G-N*pt)*ht+(dt=N*ot-z*G)*dt==0)return n.set(N-G,z-ot,at-pt).normalize(),a.set(.5*(At+vi),.5*(ki+F),.5*(Si+Zt)),!0;this.supportPointB(t,-Y,-ht,-dt,M);var E=M.x,D=M.y,Bt=M.z;this.supportPointC(e,Y,ht,dt,M);var Et=M.x,xt=M.y,gt=M.z,W=Et-E,mt=xt-D,Pt=gt-Bt;if(W*Y+mt*ht+Pt*dt<=0)return!1;(Y=(u=z-ot)*(m=Pt-pt)-(y=at-pt)*(d=mt-ot))*G+(ht=y*(p=W-G)-(r=N-G)*m)*ot+(dt=r*d-u*p)*pt>0&&(r=N,u=z,y=at,N=W,z=mt,at=Pt,W=r,mt=u,Pt=y,r=At,u=ki,y=Si,At=E,ki=D,Si=Bt,E=r,D=u,Bt=y,r=vi,u=F,y=Zt,vi=Et,F=xt,Zt=gt,Et=r,xt=u,gt=y,Y=-Y,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPointB(t,-Y,-ht,-dt,M);var Ni=M.x,Fi=M.y,bi=M.z;this.supportPointC(e,Y,ht,dt,M);var xi=M.x,Nt=M.y,_t=M.z,K=xi-Ni,lt=Nt-Fi,wt=_t-bi;if(K*Y+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*G+(at*K-N*wt)*ot+(N*lt-z*K)*pt<0)W=K,mt=lt,Pt=wt,E=Ni,D=Fi,Bt=bi,Et=xi,xt=Nt,gt=_t,Y=(u=z-ot)*(m=wt-pt)-(y=at-pt)*(d=lt-ot),ht=y*(p=K-G)-(r=N-G)*m,dt=r*d-u*p;else if((lt*Pt-wt*mt)*G+(wt*W-K*Pt)*ot+(K*mt-lt*W)*pt<0)N=K,z=lt,at=wt,At=Ni,ki=Fi,Si=bi,vi=xi,F=Nt,Zt=_t,Y=(u=lt-ot)*(m=Pt-pt)-(y=wt-pt)*(d=mt-ot),ht=y*(p=W-G)-(r=K-G)*m,dt=r*d-u*p;else for(var Pi=!1;;){if(Y=(u=mt-z)*(m=wt-at)-(y=Pt-at)*(d=lt-z),ht=y*(p=K-N)-(r=W-N)*m,dt=r*d-u*p,(Y*=S=1/R.sqrt(Y*Y+ht*ht+dt*dt))*N+(ht*=S)*z+(dt*=S)*at>=0&&!Pi){var Qt=(z*Pt-at*mt)*K+(at*W-N*Pt)*lt+(N*mt-z*W)*wt,$t=(lt*Pt-wt*mt)*G+(wt*W-K*Pt)*ot+(K*mt-lt*W)*pt,Ut=(ot*at-pt*z)*K+(pt*N-G*at)*lt+(G*z-ot*N)*wt,Wt=(mt*at-Pt*z)*G+(Pt*N-W*at)*ot+(W*z-mt*N)*pt,vt=Qt+$t+Ut+Wt;vt<=0&&(Qt=0,vt=($t=(mt*wt-Pt*lt)*Y+(Pt*K-W*wt)*ht+(W*lt-mt*K)*dt)+(Ut=(lt*Pt-wt*mt)*Y+(wt*W-K*Pt)*ht+(K*mt-lt*W)*dt)+(Wt=(z*Pt-at*mt)*Y+(at*W-N*Pt)*ht+(N*mt-z*W)*dt));var ft=1/vt;x=(tt*Qt+At*$t+E*Ut+Ni*Wt)*ft,g=(it*Qt+ki*$t+D*Ut+Fi*Wt)*ft,P=(ct*Qt+Si*$t+Bt*Ut+bi*Wt)*ft,V=(ut*Qt+vi*$t+Et*Ut+xi*Wt)*ft,O=(et*Qt+F*$t+xt*Ut+Nt*Wt)*ft,nt=(kt*Qt+Zt*$t+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPointB(t,-Y,-ht,-dt,M);var yt=M.x,Kt=M.y,It=M.z;this.supportPointC(e,Y,ht,dt,M);var qt=M.x,si=M.y,ai=M.z,Ft=qt-yt,Mt=si-Kt,l=ai-It,f=-(Ft*Y+Mt*ht+l*dt);if((Ft-K)*Y+(Mt-lt)*ht+(l-wt)*dt<=.01||f>=0)return!!Pi&&(n.set(-Y,-ht,-dt),a.set(.5*(x+V),.5*(g+O),.5*(P+nt)),o.x=f,!0);(Mt*at-l*z)*G+(l*N-Ft*at)*ot+(Ft*z-Mt*N)*pt<0?(Mt*Pt-l*mt)*G+(l*W-Ft*Pt)*ot+(Ft*mt-Mt*W)*pt<0?(N=Ft,z=Mt,at=l,At=yt,ki=Kt,Si=It,vi=qt,F=si,Zt=ai):(K=Ft,lt=Mt,wt=l,Ni=yt,Fi=Kt,bi=It,xi=qt,Nt=si,_t=ai):(Mt*wt-l*lt)*G+(l*K-Ft*wt)*ot+(Ft*lt-Mt*K)*pt<0?(W=Ft,mt=Mt,Pt=l,E=yt,D=Kt,Bt=It,Et=qt,xt=si,gt=ai):(N=Ft,z=Mt,at=l,At=yt,ki=Kt,Si=It,vi=qt,F=si,Zt=ai)}}},supportPointB:function(t,e,n,a,o){var r,u,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=t.halfWidth,g=t.halfHeight,P=t.halfDepth;r=d<0?-x:x,u=m<0?-g:g,y=S<0?-P:P,d=p[0]*r+p[1]*u+p[2]*y+t.position.x,m=p[3]*r+p[4]*u+p[5]*y+t.position.y,S=p[6]*r+p[7]*u+p[8]*y+t.position.z,o.set(d,m,S)},supportPointC:function(t,e,n,a,o){var r,u,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=d,g=S,P=x*x+g*g,V=t.radius,O=t.halfHeight;P==0?m<0?(r=V,u=-O,y=0):(r=V,u=O,y=0):(P=t.radius/R.sqrt(P),m<0?(r=x*P,u=-O,y=g*P):(r=x*P,u=O,y=g*P)),d=p[0]*r+p[1]*u+p[2]*y+t.position.x,m=p[3]*r+p[4]*u+p[5]*y+t.position.y,S=p[6]*r+p[7]*u+p[8]*y+t.position.z,o.set(d,m,S)},detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=new B,u=new B,y=new B;if(this.getSep(a,o,r,u,y)){var p=a.position.x,d=a.position.y,m=a.position.z,S=o.position.x,x=o.position.y,g=o.position.z,P=a.halfWidth,V=a.halfHeight,O=a.halfDepth,nt=o.halfHeight,M=o.radius,tt=a.dimentions,it=tt[0],ct=tt[1],ut=tt[2],et=tt[3],kt=tt[4],G=tt[5],ot=tt[6],pt=tt[7],Y=tt[8],ht=tt[9],dt=tt[10],At=tt[11],ki=tt[12],Si=tt[13],vi=tt[14],F=tt[15],Zt=tt[16],N=tt[17],z=o.normalDirection.x,at=o.normalDirection.y,E=o.normalDirection.z,D=o.halfDirection.x,Bt=o.halfDirection.y,Et=o.halfDirection.z,xt=r.x,gt=r.y,W=r.z,mt=xt*it+gt*ct+W*ut,Pt=xt*et+gt*kt+W*G,oe=xt*ot+gt*pt+W*Y,Ni=xt*z+gt*at+W*E,Fi=mt>0,bi=Pt>0,xi=oe>0,Nt=Ni>0;Fi||(mt=-mt),bi||(Pt=-Pt),xi||(oe=-oe),Nt||(Ni=-Ni);var _t,K,lt,wt,Pi,Qt,$t,Ut,Wt,vt,ft,yt,Kt,It,qt,si,ai,Ft,Mt,l,f,_,k,w,L,I,H,T,Q,St,zt,Lt,ii,re,Li,zi,ji,Xt,be,xe,ge,ci,ri,Ti,hi,pe,me,de,fe,ye,ve,Di,Oi,Qi=0;if(Ni>.999?Qi=mt>.999?mt>Ni?1:4:Pt>.999?Pt>Ni?2:4:oe>.999&&oe>Ni?3:4:mt>.999?Qi=1:Pt>.999?Qi=2:oe>.999&&(Qi=3),Qi==0)n.addPoint(u.x,u.y,u.z,xt,gt,W,y.x,this.flip);else if(Qi==4){var Ne,Me,Le,Ce,Ve,Ie,He,Te,Ae,$e,Be,Ee;Nt?(wt=S-D,Pi=x-Bt,Qt=g-Et,xt=-z,gt=-at,W=-E):(wt=S+D,Pi=x+Bt,Qt=g+Et,xt=z,gt=at,W=E),Qi=0,(ri=it*xt+ct*gt+ut*W)<(l=1)&&(l=ri,Qi=0),-ri<l&&(l=-ri,Qi=1),(ri=et*xt+kt*gt+G*W)<l&&(l=ri,Qi=2),-ri<l&&(l=-ri,Qi=3),(ri=ot*xt+pt*gt+Y*W)<l&&(l=ri,Qi=4),-ri<l&&(l=-ri,Qi=5);var bt=a.elements;switch(Qi){case 0:Ne=bt[0],Me=bt[1],Le=bt[2],Ce=bt[6],Ve=bt[7],Ie=bt[8],He=bt[9],Te=bt[10],Ae=bt[11],$e=bt[3],Be=bt[4],Ee=bt[5];break;case 1:Ne=bt[15],Me=bt[16],Le=bt[17],Ce=bt[21],Ve=bt[22],Ie=bt[23],He=bt[18],Te=bt[19],Ae=bt[20],$e=bt[12],Be=bt[13],Ee=bt[14];break;case 2:Ne=bt[12],Me=bt[13],Le=bt[14],Ce=bt[0],Ve=bt[1],Ie=bt[2],He=bt[3],Te=bt[4],Ae=bt[5],$e=bt[15],Be=bt[16],Ee=bt[17];break;case 3:Ne=bt[21],Me=bt[22],Le=bt[23],Ce=bt[9],Ve=bt[10],Ie=bt[11],He=bt[6],Te=bt[7],Ae=bt[8],$e=bt[18],Be=bt[19],Ee=bt[20];break;case 4:Ne=bt[12],Me=bt[13],Le=bt[14],Ce=bt[18],Ve=bt[19],Ie=bt[20],He=bt[6],Te=bt[7],Ae=bt[8],$e=bt[0],Be=bt[1],Ee=bt[2];break;case 5:Ne=bt[3],Me=bt[4],Le=bt[5],Ce=bt[9],Ve=bt[10],Ie=bt[11],He=bt[21],Te=bt[22],Ae=bt[23],$e=bt[15],Be=bt[16],Ee=bt[17]}(Mt=xt*(Ne-wt)+gt*(Me-Pi)+W*(Le-Qt))<=0&&n.addPoint(Ne,Me,Le,-xt,-gt,-W,Mt,this.flip),(Mt=xt*(Ce-wt)+gt*(Ve-Pi)+W*(Ie-Qt))<=0&&n.addPoint(Ce,Ve,Ie,-xt,-gt,-W,Mt,this.flip),(Mt=xt*(He-wt)+gt*(Te-Pi)+W*(Ae-Qt))<=0&&n.addPoint(He,Te,Ae,-xt,-gt,-W,Mt,this.flip),(Mt=xt*($e-wt)+gt*(Be-Pi)+W*(Ee-Qt))<=0&&n.addPoint($e,Be,Ee,-xt,-gt,-W,Mt,this.flip)}else{switch(Qi){case 1:Fi?(_t=p+ht,K=d+dt,lt=m+At,xt=it,gt=ct,W=ut):(_t=p-ht,K=d-dt,lt=m-At,xt=-it,gt=-ct,W=-ut),pe=et,me=kt,de=G,Di=V,fe=ot,ye=pt,ve=Y,Oi=O;break;case 2:bi?(_t=p+ki,K=d+Si,lt=m+vi,xt=et,gt=kt,W=G):(_t=p-ki,K=d-Si,lt=m-vi,xt=-et,gt=-kt,W=-G),pe=it,me=ct,de=ut,Di=P,fe=ot,ye=pt,ve=Y,Oi=O;break;case 3:xi?(_t=p+F,K=d+Zt,lt=m+N,xt=ot,gt=pt,W=Y):(_t=p-F,K=d-Zt,lt=m-N,xt=-ot,gt=-pt,W=-Y),pe=it,me=ct,de=ut,Di=P,fe=et,ye=kt,ve=G,Oi=V}if(wt=S+(f=(l=xt*z+gt*at+W*E)<0?nt:-nt)*z,Pi=x+f*at,Qt=g+f*E,Ni>=.999999?(_=-gt,k=W,w=xt):(_=xt,k=gt,w=W),I=(f=_*z+k*at+w*E)*z-_,H=f*at-k,T=f*E-w,(f=R.sqrt(I*I+H*H+T*T))==0)return;if(_=wt+(I*=f=M/f),k=Pi+(H*=f),w=Qt+(T*=f),l<-.96||l>.96)$t=z*z*1.5-.5,Ut=z*at*1.5-.866025403*E,Wt=z*E*1.5+.866025403*at,vt=at*z*1.5+.866025403*E,ft=at*at*1.5-.5,yt=at*E*1.5-.866025403*z,Kt=E*z*1.5-.866025403*at,It=E*at*1.5+.866025403*z,qt=E*E*1.5-.5,(Xt=pe*(_=(si=_)-(Mt=xt*(si-_t)+gt*((ai=k)-K)+W*((Ft=w)-lt))*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Ft-Mt*W-lt))<-Di?Xt=-Di:Xt>Di&&(Xt=Di),(ci=fe*_+ye*k+ve*w)<-Oi?ci=-Oi:ci>Oi&&(ci=Oi),si=_t+(_=Xt*pe+ci*fe),ai=K+(k=Xt*me+ci*ye),Ft=lt+(w=Xt*de+ci*ve),n.addPoint(si,ai,Ft,xt,gt,W,Mt,this.flip),ai=I*vt+H*ft+T*yt,Ft=I*Kt+H*It+T*qt,(Mt=xt*((si=(I=si=I*$t+H*Ut+T*Wt)+wt)-_t)+gt*((ai=(H=ai)+Pi)-K)+W*((Ft=(T=Ft)+Qt)-lt))<=0&&((Xt=pe*(_=si-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Ft-Mt*W-lt))<-Di?Xt=-Di:Xt>Di&&(Xt=Di),(ci=fe*_+ye*k+ve*w)<-Oi?ci=-Oi:ci>Oi&&(ci=Oi),si=_t+(_=Xt*pe+ci*fe),ai=K+(k=Xt*me+ci*ye),Ft=lt+(w=Xt*de+ci*ve),n.addPoint(si,ai,Ft,xt,gt,W,Mt,this.flip)),ai=I*vt+H*ft+T*yt,Ft=I*Kt+H*It+T*qt,(Mt=xt*((si=(I=si=I*$t+H*Ut+T*Wt)+wt)-_t)+gt*((ai=(H=ai)+Pi)-K)+W*((Ft=(T=Ft)+Qt)-lt))<=0&&((Xt=pe*(_=si-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Ft-Mt*W-lt))<-Di?Xt=-Di:Xt>Di&&(Xt=Di),(ci=fe*_+ye*k+ve*w)<-Oi?ci=-Oi:ci>Oi&&(ci=Oi),si=_t+(_=Xt*pe+ci*fe),ai=K+(k=Xt*me+ci*ye),Ft=lt+(w=Xt*de+ci*ve),n.addPoint(si,ai,Ft,xt,gt,W,Mt,this.flip));else{if(Li=_,l>0?(be=_+2*D,xe=k+2*Bt,ge=w+2*Et):(be=_-2*D,xe=k-2*Bt,ge=w-2*Et),_=(be-=(ci=xt*(be-_t)+gt*(xe-K)+W*(ge-lt))*xt)-(Li-=(Xt=xt*(Li-_t)+gt*((zi=k)-K)+W*((ji=w)-lt))*xt),k=(xe-=ci*gt)-(zi-=Xt*gt),w=(ge-=ci*W)-(ji-=Xt*W),L=ci-Xt,Ti=(Pt=(Lt=be-_t)*pe+(ii=xe-K)*me+(re=ge-lt)*de)-Di,(ri=(mt=(Q=Li-_t)*pe+(St=zi-K)*me+(zt=ji-lt)*de)-Di)>0){if(Ti>0)return;mt=(Q=(Li+=_*(hi=ri/(ri-Ti)))-_t)*pe+(St=(zi+=k*hi)-K)*me+(zt=(ji+=w*hi)-lt)*de,_=be-Li,k=xe-zi,w=ge-ji,L=ci-(Xt+=L*hi)}else Ti>0&&(Pt=(Lt=(be=Li+_*(hi=ri/(ri-Ti)))-_t)*pe+(ii=(xe=zi+k*hi)-K)*me+(re=(ge=ji+w*hi)-lt)*de,_=be-Li,k=xe-zi,w=ge-ji,L=(ci=Xt+L*hi)-Xt);if(Ti=Pt+Di,(ri=mt+Di)<0){if(Ti<0)return;Q=(Li+=_*(hi=ri/(ri-Ti)))-_t,St=(zi+=k*hi)-K,zt=(ji+=w*hi)-lt,_=be-Li,k=xe-zi,w=ge-ji,L=ci-(Xt+=L*hi)}else Ti<0&&(Lt=(be=Li+_*(hi=ri/(ri-Ti)))-_t,ii=(xe=zi+k*hi)-K,re=(ge=ji+w*hi)-lt,_=be-Li,k=xe-zi,w=ge-ji,L=(ci=Xt+L*hi)-Xt);if(Ti=(Pt=Lt*fe+ii*ye+re*ve)-Oi,(ri=(mt=Q*fe+St*ye+zt*ve)-Oi)>0){if(Ti>0)return;mt=(Q=(Li+=_*(hi=ri/(ri-Ti)))-_t)*fe+(St=(zi+=k*hi)-K)*ye+(zt=(ji+=w*hi)-lt)*ve,_=be-Li,k=xe-zi,w=ge-ji,L=ci-(Xt+=L*hi)}else Ti>0&&(Pt=(Lt=(be=Li+_*(hi=ri/(ri-Ti)))-_t)*fe+(ii=(xe=zi+k*hi)-K)*ye+(re=(ge=ji+w*hi)-lt)*ve,_=be-Li,k=xe-zi,w=ge-ji,L=(ci=Xt+L*hi)-Xt);if(Ti=Pt+Oi,(ri=mt+Oi)<0){if(Ti<0)return;Li+=_*(hi=ri/(ri-Ti)),zi+=k*hi,ji+=w*hi,Xt+=L*hi}else Ti<0&&(be=Li+_*(hi=ri/(ri-Ti)),xe=zi+k*hi,ge=ji+w*hi,ci=Xt+L*hi);Xt<0&&n.addPoint(Li,zi,ji,xt,gt,W,Xt,this.flip),ci<0&&n.addPoint(be,xe,ge,xt,gt,W,ci,this.flip)}}}}}),xn.prototype=Object.assign(Object.create(Pe.prototype),{constructor:xn,getSep:function(t,e,n,a,o){var r,u,y,p,d,m,S,x,g,P,V,O,nt,M=new B,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,et=e.position.y,kt=e.position.z,G=ut-tt,ot=et-it,pt=kt-ct;G*G+ot*ot+pt*pt==0&&(ot=.001);var Y=-G,ht=-ot,dt=-pt;this.supportPoint(t,-Y,-ht,-dt,M);var At=M.x,ki=M.y,Si=M.z;this.supportPoint(e,Y,ht,dt,M);var vi=M.x,F=M.y,Zt=M.z,N=vi-At,z=F-ki,at=Zt-Si;if(N*Y+z*ht+at*dt<=0)return!1;if((Y=z*pt-at*ot)*Y+(ht=at*G-N*pt)*ht+(dt=N*ot-z*G)*dt==0)return n.set(N-G,z-ot,at-pt).normalize(),a.set(.5*(At+vi),.5*(ki+F),.5*(Si+Zt)),!0;this.supportPoint(t,-Y,-ht,-dt,M);var E=M.x,D=M.y,Bt=M.z;this.supportPoint(e,Y,ht,dt,M);var Et=M.x,xt=M.y,gt=M.z,W=Et-E,mt=xt-D,Pt=gt-Bt;if(W*Y+mt*ht+Pt*dt<=0)return!1;(Y=(u=z-ot)*(m=Pt-pt)-(y=at-pt)*(d=mt-ot))*G+(ht=y*(p=W-G)-(r=N-G)*m)*ot+(dt=r*d-u*p)*pt>0&&(r=N,u=z,y=at,N=W,z=mt,at=Pt,W=r,mt=u,Pt=y,r=At,u=ki,y=Si,At=E,ki=D,Si=Bt,E=r,D=u,Bt=y,r=vi,u=F,y=Zt,vi=Et,F=xt,Zt=gt,Et=r,xt=u,gt=y,Y=-Y,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPoint(t,-Y,-ht,-dt,M);var Ni=M.x,Fi=M.y,bi=M.z;this.supportPoint(e,Y,ht,dt,M);var xi=M.x,Nt=M.y,_t=M.z,K=xi-Ni,lt=Nt-Fi,wt=_t-bi;if(K*Y+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*G+(at*K-N*wt)*ot+(N*lt-z*K)*pt<0)W=K,mt=lt,Pt=wt,E=Ni,D=Fi,Bt=bi,Et=xi,xt=Nt,gt=_t,Y=(u=z-ot)*(m=wt-pt)-(y=at-pt)*(d=lt-ot),ht=y*(p=K-G)-(r=N-G)*m,dt=r*d-u*p;else if((lt*Pt-wt*mt)*G+(wt*W-K*Pt)*ot+(K*mt-lt*W)*pt<0)N=K,z=lt,at=wt,At=Ni,ki=Fi,Si=bi,vi=xi,F=Nt,Zt=_t,Y=(u=lt-ot)*(m=Pt-pt)-(y=wt-pt)*(d=mt-ot),ht=y*(p=W-G)-(r=K-G)*m,dt=r*d-u*p;else for(var Pi=!1;;){if(Y=(u=mt-z)*(m=wt-at)-(y=Pt-at)*(d=lt-z),ht=y*(p=K-N)-(r=W-N)*m,dt=r*d-u*p,(Y*=S=1/R.sqrt(Y*Y+ht*ht+dt*dt))*N+(ht*=S)*z+(dt*=S)*at>=0&&!Pi){var Qt=(z*Pt-at*mt)*K+(at*W-N*Pt)*lt+(N*mt-z*W)*wt,$t=(lt*Pt-wt*mt)*G+(wt*W-K*Pt)*ot+(K*mt-lt*W)*pt,Ut=(ot*at-pt*z)*K+(pt*N-G*at)*lt+(G*z-ot*N)*wt,Wt=(mt*at-Pt*z)*G+(Pt*N-W*at)*ot+(W*z-mt*N)*pt,vt=Qt+$t+Ut+Wt;vt<=0&&(Qt=0,vt=($t=(mt*wt-Pt*lt)*Y+(Pt*K-W*wt)*ht+(W*lt-mt*K)*dt)+(Ut=(lt*Pt-wt*mt)*Y+(wt*W-K*Pt)*ht+(K*mt-lt*W)*dt)+(Wt=(z*Pt-at*mt)*Y+(at*W-N*Pt)*ht+(N*mt-z*W)*dt));var ft=1/vt;x=(tt*Qt+At*$t+E*Ut+Ni*Wt)*ft,g=(it*Qt+ki*$t+D*Ut+Fi*Wt)*ft,P=(ct*Qt+Si*$t+Bt*Ut+bi*Wt)*ft,V=(ut*Qt+vi*$t+Et*Ut+xi*Wt)*ft,O=(et*Qt+F*$t+xt*Ut+Nt*Wt)*ft,nt=(kt*Qt+Zt*$t+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPoint(t,-Y,-ht,-dt,M);var yt=M.x,Kt=M.y,It=M.z;this.supportPoint(e,Y,ht,dt,M);var qt=M.x,si=M.y,ai=M.z,Ft=qt-yt,Mt=si-Kt,l=ai-It,f=-(Ft*Y+Mt*ht+l*dt);if((Ft-K)*Y+(Mt-lt)*ht+(l-wt)*dt<=.01||f>=0)return!!Pi&&(n.set(-Y,-ht,-dt),a.set(.5*(x+V),.5*(g+O),.5*(P+nt)),o.x=f,!0);(Mt*at-l*z)*G+(l*N-Ft*at)*ot+(Ft*z-Mt*N)*pt<0?(Mt*Pt-l*mt)*G+(l*W-Ft*Pt)*ot+(Ft*mt-Mt*W)*pt<0?(N=Ft,z=Mt,at=l,At=yt,ki=Kt,Si=It,vi=qt,F=si,Zt=ai):(K=Ft,lt=Mt,wt=l,Ni=yt,Fi=Kt,bi=It,xi=qt,Nt=si,_t=ai):(Mt*wt-l*lt)*G+(l*K-Ft*wt)*ot+(Ft*lt-Mt*K)*pt<0?(W=Ft,mt=Mt,Pt=l,E=yt,D=Kt,Bt=It,Et=qt,xt=si,gt=ai):(N=Ft,z=Mt,at=l,At=yt,ki=Kt,Si=It,vi=qt,F=si,Zt=ai)}}},supportPoint:function(t,e,n,a,o){var r,u,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=d,g=S,P=x*x+g*g,V=t.radius,O=t.halfHeight;P==0?m<0?(r=V,u=-O,y=0):(r=V,u=O,y=0):(P=t.radius/R.sqrt(P),m<0?(r=x*P,u=-O,y=g*P):(r=x*P,u=O,y=g*P)),d=p[0]*r+p[1]*u+p[2]*y+t.position.x,m=p[3]*r+p[4]*u+p[5]*y+t.position.y,S=p[6]*r+p[7]*u+p[8]*y+t.position.z,o.set(d,m,S)},detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,u,y,p,d,m,S,x,g,P,V,O,nt,M,tt,it,ct,ut,et,kt,G,ot=a.position,pt=o.position,Y=ot.x,ht=ot.y,dt=ot.z,At=pt.x,ki=pt.y,Si=pt.z,vi=a.halfHeight,F=o.halfHeight,Zt=a.normalDirection,N=o.normalDirection,z=a.halfDirection,at=o.halfDirection,E=a.radius,D=o.radius,Bt=Zt.x,Et=Zt.y,xt=Zt.z,gt=N.x,W=N.y,mt=N.z,Pt=z.x,oe=z.y,Ni=z.z,Fi=at.x,bi=at.y,xi=at.z,Nt=Y-At,_t=ht-ki,K=dt-Si,lt=new B,wt=new B,Pi=new B;if(this.getSep(a,o,lt,wt,Pi)){var Qt=lt.x*Bt+lt.y*Et+lt.z*xt,$t=lt.x*gt+lt.y*W+lt.z*mt,Ut=Qt>0,Wt=$t>0;Ut||(Qt=-Qt),Wt||($t=-$t);var vt,ft,yt,Kt=0;(Qt>.999||$t>.999)&&(Kt=Qt>$t?1:2);var It,qt,si,ai,Ft,Mt,l,f,_,k,w,L,I,H,T,Q,St=Pi.x;switch(vt=lt.x,ft=lt.y,yt=lt.z,Kt){case 0:n.addPoint(wt.x,wt.y,wt.z,vt,ft,yt,St,!1);break;case 1:if(Ut?(u=Y+Pt,y=ht+oe,p=dt+Ni,vt=Bt,ft=Et,yt=xt):(u=Y-Pt,y=ht-oe,p=dt-Ni,vt=-Bt,ft=-Et,yt=-xt),d=At+(r=(et=vt*gt+ft*W+yt*mt)<0?F:-F)*gt,m=ki+r*W,S=Si+r*mt,$t>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),Nt=(r=x*gt+g*W+P*mt)*gt-x,_t=r*W-g,K=r*mt-P,(r=R.sqrt(Nt*Nt+_t*_t+K*K))==0)break;if(x=d+(Nt*=r=D/r),g=m+(_t*=r),P=S+(K*=r),et<-.96||et>.96)It=gt*gt*1.5-.5,qt=gt*W*1.5-.866025403*mt,si=gt*mt*1.5+.866025403*W,ai=W*gt*1.5+.866025403*mt,Ft=W*W*1.5-.5,Mt=W*mt*1.5-.866025403*gt,l=mt*gt*1.5-.866025403*W,f=mt*W*1.5+.866025403*gt,_=mt*mt*1.5-.5,(r=(x=(k=x)-(I=vt*(k-u)+ft*((w=g)-y)+yt*((L=P)-p))*vt-u)*x+(g=w-I*ft-y)*g+(P=L-I*yt-p)*P)>E*E&&(x*=r=E/R.sqrt(r),g*=r,P*=r),k=u+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,I,!1),w=Nt*ai+_t*Ft+K*Mt,L=Nt*l+_t*f+K*_,(I=vt*((k=(Nt=k=Nt*It+_t*qt+K*si)+d)-u)+ft*((w=(_t=w)+m)-y)+yt*((L=(K=L)+S)-p))<=0&&((r=(x=k-I*vt-u)*x+(g=w-I*ft-y)*g+(P=L-I*yt-p)*P)>E*E&&(x*=r=E/R.sqrt(r),g*=r,P*=r),k=u+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,I,!1)),w=Nt*ai+_t*Ft+K*Mt,L=Nt*l+_t*f+K*_,(I=vt*((k=(Nt=k=Nt*It+_t*qt+K*si)+d)-u)+ft*((w=(_t=w)+m)-y)+yt*((L=(K=L)+S)-p))<=0&&((r=(x=k-I*vt-u)*x+(g=w-I*ft-y)*g+(P=L-I*yt-p)*P)>E*E&&(x*=r=E/R.sqrt(r),g*=r,P*=r),k=u+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,I,!1));else{if(V=x,et>0?(M=x+gt*F*2,tt=g+W*F*2,it=P+mt*F*2):(M=x-gt*F*2,tt=g-W*F*2,it=P-mt*F*2),(Q=(H=(Nt=u-(V-=(ct=vt*(V-u)+ft*((O=g)-y)+yt*((nt=P)-p))*vt))*(x=(M-=(ut=vt*(M-u)+ft*(tt-y)+yt*(it-p))*vt)-V)+(_t=y-(O-=ct*ft))*(g=(tt-=ut*ft)-O)+(K=p-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*H-(T=x*x+g*g+P*P)*(Nt*Nt+_t*_t+K*K-E*E))<0)break;(G=(H-(Q=R.sqrt(Q)))/T)<(kt=(H+Q)/T)&&(r=kt,kt=G,G=r),G>1&&(G=1),kt<0&&(kt=0),x=V+(M-V)*kt,g=O+(tt-O)*kt,P=nt+(it-nt)*kt,M=V+(M-V)*G,tt=O+(tt-O)*G,it=nt+(it-nt)*G,V=x,O=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*G,(ct=r)<0&&n.addPoint(V,O,nt,vt,ft,yt,I,!1),ut<0&&n.addPoint(M,tt,it,vt,ft,yt,I,!1)}break;case 2:if(Wt?(d=At-Fi,m=ki-bi,S=Si-xi,vt=-gt,ft=-W,yt=-mt):(d=At+Fi,m=ki+bi,S=Si+xi,vt=gt,ft=W,yt=mt),u=Y+(r=(et=vt*Bt+ft*Et+yt*xt)<0?vi:-vi)*Bt,y=ht+r*Et,p=dt+r*xt,Qt>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),Nt=(r=x*Bt+g*Et+P*xt)*Bt-x,_t=r*Et-g,K=r*xt-P,(r=R.sqrt(Nt*Nt+_t*_t+K*K))==0)break;if(x=u+(Nt*=r=E/r),g=y+(_t*=r),P=p+(K*=r),et<-.96||et>.96)It=Bt*Bt*1.5-.5,qt=Bt*Et*1.5-.866025403*xt,si=Bt*xt*1.5+.866025403*Et,ai=Et*Bt*1.5+.866025403*xt,Ft=Et*Et*1.5-.5,Mt=Et*xt*1.5-.866025403*Bt,l=xt*Bt*1.5-.866025403*Et,f=xt*Et*1.5+.866025403*Bt,_=xt*xt*1.5-.5,(r=(x=(k=x)-(I=vt*(k-d)+ft*((w=g)-m)+yt*((L=P)-S))*vt-d)*x+(g=w-I*ft-m)*g+(P=L-I*yt-S)*P)>D*D&&(x*=r=D/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,I,!1),w=Nt*ai+_t*Ft+K*Mt,L=Nt*l+_t*f+K*_,(I=vt*((k=(Nt=k=Nt*It+_t*qt+K*si)+u)-d)+ft*((w=(_t=w)+y)-m)+yt*((L=(K=L)+p)-S))<=0&&((r=(x=k-I*vt-d)*x+(g=w-I*ft-m)*g+(P=L-I*yt-S)*P)>D*D&&(x*=r=D/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,I,!1)),w=Nt*ai+_t*Ft+K*Mt,L=Nt*l+_t*f+K*_,(I=vt*((k=(Nt=k=Nt*It+_t*qt+K*si)+u)-d)+ft*((w=(_t=w)+y)-m)+yt*((L=(K=L)+p)-S))<=0&&((r=(x=k-I*vt-d)*x+(g=w-I*ft-m)*g+(P=L-I*yt-S)*P)>D*D&&(x*=r=D/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,I,!1));else{if(V=x,et>0?(M=x+Bt*vi*2,tt=g+Et*vi*2,it=P+xt*vi*2):(M=x-Bt*vi*2,tt=g-Et*vi*2,it=P-xt*vi*2),(Q=(H=(Nt=d-(V-=(ct=vt*(V-d)+ft*((O=g)-m)+yt*((nt=P)-S))*vt))*(x=(M-=(ut=vt*(M-d)+ft*(tt-m)+yt*(it-S))*vt)-V)+(_t=m-(O-=ct*ft))*(g=(tt-=ut*ft)-O)+(K=S-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*H-(T=x*x+g*g+P*P)*(Nt*Nt+_t*_t+K*K-D*D))<0)break;(G=(H-(Q=R.sqrt(Q)))/T)<(kt=(H+Q)/T)&&(r=kt,kt=G,G=r),G>1&&(G=1),kt<0&&(kt=0),x=V+(M-V)*kt,g=O+(tt-O)*kt,P=nt+(it-nt)*kt,M=V+(M-V)*G,tt=O+(tt-O)*G,it=nt+(it-nt)*G,V=x,O=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*G,(ct=r)<0&&n.addPoint(V,O,nt,-vt,-ft,-yt,ct,!1),ut<0&&n.addPoint(M,tt,it,-vt,-ft,-yt,ut,!1)}}}}}),_e.prototype=Object.assign(Object.create(Pe.prototype),{constructor:_e,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r,u,y,p,d,m=o.dimentions,S=a.position,x=S.x,g=S.y,P=S.z,V=o.position,O=V.x,nt=V.y,M=V.z,tt=a.radius,it=o.halfWidth,ct=o.halfHeight,ut=o.halfDepth,et=x-O,kt=g-nt,G=P-M,ot=m[0]*et+m[1]*kt+m[2]*G,pt=m[3]*et+m[4]*kt+m[5]*G,Y=m[6]*et+m[7]*kt+m[8]*G,ht=0;ot>it?ot=it:ot<-it?ot=-it:ht=1,pt>ct?pt=ct:pt<-ct?pt=-ct:ht|=2,Y>ut?Y=ut:Y<-ut?Y=-ut:ht|=4,ht==7?(G=Y<0?ut+Y:ut-Y,(et=ot<0?it+ot:it-ot)<(kt=pt<0?ct+pt:ct-pt)?et<G?(p=et-it,ot<0?(ot=-it,et=m[0],kt=m[1],G=m[2]):(ot=it,et=-m[0],kt=-m[1],G=-m[2])):(p=G-ut,Y<0?(Y=-ut,et=m[6],kt=m[7],G=m[8]):(Y=ut,et=-m[6],kt=-m[7],G=-m[8])):kt<G?(p=kt-ct,pt<0?(pt=-ct,et=m[3],kt=m[4],G=m[5]):(pt=ct,et=-m[3],kt=-m[4],G=-m[5])):(p=G-ut,Y<0?(Y=-ut,et=m[6],kt=m[7],G=m[8]):(Y=ut,et=-m[6],kt=-m[7],G=-m[8])),r=O+ot*m[0]+pt*m[3]+Y*m[6],u=nt+ot*m[1]+pt*m[4]+Y*m[7],y=M+ot*m[2]+pt*m[5]+Y*m[8],n.addPoint(x+tt*et,g+tt*kt,P+tt*G,et,kt,G,p-tt,this.flip)):(r=O+ot*m[0]+pt*m[3]+Y*m[6],u=nt+ot*m[1]+pt*m[4]+Y*m[7],y=M+ot*m[2]+pt*m[5]+Y*m[8],(p=(et=r-S.x)*et+(kt=u-S.y)*kt+(G=y-S.z)*G)>0&&p<tt*tt&&(et*=d=1/(p=R.sqrt(p)),kt*=d,G*=d,n.addPoint(x+tt*et,g+tt*kt,P+tt*G,et,kt,G,p-tt,this.flip)))}}),Xs.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Xs,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=a.position,u=r.x,y=r.y,p=r.z,d=o.position,m=d.x,S=d.y,x=d.z,g=o.normalDirection.x,P=o.normalDirection.y,V=o.normalDirection.z,O=a.radius,nt=o.radius,M=O+nt,tt=o.halfHeight,it=u-m,ct=y-S,ut=p-x,et=it*g+ct*P+ut*V;if(!(et<-tt-O||et>tt+O)){var kt,G=m+et*g,ot=S+et*P,pt=x+et*V,Y=u-G,ht=y-ot,dt=p-pt,At=Y*Y+ht*ht+dt*dt;At>M*M||(At>nt*nt&&(Y*=At=nt/R.sqrt(At),ht*=At,dt*=At),et<-tt?et=-tt:et>tt&&(et=tt),(At=(it=(G=m+et*g+Y)-u)*it+(ct=(ot=S+et*P+ht)-y)*ct+(ut=(pt=x+et*V+dt)-p)*ut)>0&&At<O*O&&(it*=kt=1/(At=R.sqrt(At)),ct*=kt,ut*=kt,n.addPoint(u+it*O,y+ct*O,p+ut*O,it,ct,ut,At-O,this.flip)))}}}),Se.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Se,detectCollision:function(t,e,n){var a=t,o=e,r=a.position,u=o.position,y=u.x-r.x,p=u.y-r.y,d=u.z-r.z,m=y*y+p*p+d*d,S=a.radius,x=S+o.radius;if(m>0&&m<x*x){var g=1/(m=R.sqrt(m));y*=g,p*=g,d*=g,n.addPoint(r.x+y*S,r.y+p*S,r.z+d*S,y,p,d,m-x,!1)}}}),Ge.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Ge,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,u=this.flip?e:t,y=this.flip?t:e,p=u.radius;o.sub(u.position,y.position),o.x*=y.normal.x,o.y*=y.normal.y,o.z*=y.normal.z,(a=o.lengthSq())>0&&a<p*p&&(a=R.sqrt(a),o.copy(y.normal).negate(),r.copy(u.position).addScaledVector(o,p),n.addPointVec(r,o,a-p,this.flip))}}),tn.prototype=Object.assign(Object.create(Pe.prototype),{constructor:tn,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,u=this.cc,y=this.flip?e:t,p=this.flip?t:e,d=y.dimentions,m=y.halfWidth,S=y.halfHeight,x=y.halfDepth,g=0;this.dix.set(d[0],d[1],d[2]),this.diy.set(d[3],d[4],d[5]),this.diz.set(d[6],d[7],d[8]),o.sub(y.position,p.position),o.x*=p.normal.x,o.y*=p.normal.y,o.z*=p.normal.z,u.set(R.dotVectors(this.dix,o),R.dotVectors(this.diy,o),R.dotVectors(this.diz,o)),u.x>m?u.x=m:u.x<-m?u.x=-m:g=1,u.y>S?u.y=S:u.y<-S?u.y=-S:g|=2,u.z>x?u.z=x:u.z<-x?u.z=-x:g|=4,g===7&&(o.set(u.x<0?m+u.x:m-u.x,u.y<0?S+u.y:S-u.y,u.z<0?x+u.z:x-u.z),o.x<o.y?o.x<o.z?(a=o.x-m,u.x<0?(u.x=-m,o.copy(this.dix)):(u.x=m,o.subEqual(this.dix))):(a=o.z-x,u.z<0?(u.z=-x,o.copy(this.diz)):(u.z=x,o.subEqual(this.diz))):o.y<o.z?(a=o.y-S,u.y<0?(u.y=-S,o.copy(this.diy)):(u.y=S,o.subEqual(this.diy))):(a=o.z-x,u.z<0?(u.z=-x,o.copy(this.diz)):(u.z=x,o.subEqual(this.diz))),r.copy(p.position).addScaledVector(o,1),n.addPointVec(r,o,a,this.flip))}}),Object.assign(Tn.prototype,{World:!0,play:function(){if(this.timer===null){var t=this;this.timer=setInterval(function(){t.step()},this.timerate)}},stop:function(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)},setGravity:function(t){this.gravity.fromArray(t)},getInfo:function(){return this.isStat?this.performance.show():""},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;this.joints!==null;)this.removeJoint(this.joints);for(;this.contacts!==null;)this.removeContact(this.contacts);for(;this.rigidBodies!==null;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(t){t.parent&&ue("World","It is not possible to be added to more than one world one of the rigid body"),t.setParent(this);for(var e=t.shapes;e!==null;e=e.next)this.addShape(e);this.rigidBodies!==null&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var n=e.jointLink;n!=null;){var a=n.joint;n=n.next,this.removeJoint(a)}for(var o=t.shapes;o!==null;o=o.next)this.removeShape(o);var r=e.prev,u=e.next;r!==null&&(r.next=u),u!==null&&(u.prev=r),this.rigidBodies==e&&(this.rigidBodies=u),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=this.rigidBodies;e!==null;){if(e.name===t)return e;e=e.next}for(var n=this.joints;n!==null;){if(n.name===t)return n;n=n.next}return null},addShape:function(t){t.parent&&t.parent.parent||ue("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&ue("World","It is not possible to be added to more than one world one of the joint"),this.joints!=null&&((this.joints.prev=t).next=this.joints),this.joints=t,t.setParent(this),this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),this.joints==e&&(this.joints=a),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},addContact:function(t,e){var n;this.unusedContacts!==null?(n=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):n=new Ks,n.attach(t,e),n.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=n).next=this.contacts),this.contacts=n,this.numContacts++},removeContact:function(t){var e=t.prev,n=t.next;n&&(n.prev=e),e&&(e.next=n),this.contacts==t&&(this.contacts=n),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},getContact:function(t,e){var n,a;t=t.constructor===Ns?t.name:t,e=e.constructor===Ns?e.name:e;for(var o=this.contacts;o!==null;){if(n=o.body1.name,a=o.body2.name,n===t&&a===e||a===t&&n===e)return o.touching?o:null;o=o.next}return null},checkContact:function(t,e){for(var n,a,o=this.contacts;o!==null;){if(n=o.body1.name||" ",a=o.body2.name||" ",n==t&&a==e||a==t&&n==e)return!!o.touching;o=o.next}},callSleep:function(t){return!!t.allowSleep&&!(t.linearVelocity.lengthSq()>.04)&&!(t.angularVelocity.lengthSq()>.25)},step:function(){var t=this.isStat;t&&this.performance.setTime(0);for(var e=this.rigidBodies;e!==null;)e.addedToIsland=!1,e.sleeping&&e.testWakeUp(),e=e.next;t&&this.performance.setTime(1),this.broadPhase.detectPairs();for(var n=this.broadPhase.pairs,a=this.broadPhase.numPairs;a--;){var o,r,u,y=n[a];y.shape1.id<y.shape2.id?(o=y.shape1,r=y.shape2):(o=y.shape2,r=y.shape1),u=o.numContacts<r.numContacts?o.contactLink:r.contactLink;for(var p=!1;u;){if((it=u.contact).shape1==o&&it.shape2==r){it.persisting=!0,p=!0;break}u=u.next}p||this.addContact(o,r)}for(t&&this.performance.calcBroadPhase(),this.numContactPoints=0,it=this.contacts;it!==null;)if(it.persisting||!it.shape1.aabb.intersectTest(it.shape2.aabb)){var d=it.body1,m=it.body2;(d.isDynamic&&!d.sleeping||m.isDynamic&&!m.sleeping)&&it.updateManifold(),this.numContactPoints+=it.manifold.numPoints,it.persisting=!1,it.constraint.addedToIsland=!1,it=it.next}else{var S=it.next;this.removeContact(it),it=S}t&&this.performance.calcNarrowPhase();var x,g,P=1/this.timeStep;for(x=this.joints;x!==null;x=x.next)x.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],t&&this.performance.setTime(1),this.numIslands=0;for(var V=this.rigidBodies;V!==null;V=V.next)if(!(V.addedToIsland||V.isStatic||V.sleeping))if(V.isLonely())V.isDynamic&&V.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(V)?(V.sleepTime+=this.timeStep,V.sleepTime>.5?V.sleep():V.updatePosition(this.timeStep)):(V.sleepTime=0,V.updatePosition(this.timeStep)),this.numIslands++;else{var O=0,nt=0,M=1;this.islandStack[0]=V,V.addedToIsland=!0;do if(e=this.islandStack[--M],this.islandStack[M]=null,e.sleeping=!1,this.islandRigidBodies[O++]=e,!e.isStatic){for(var tt=e.contactLink;tt!==null;tt=tt.next){var it;!(g=(it=tt.contact).constraint).addedToIsland&&it.touching&&(this.islandConstraints[nt++]=g,g.addedToIsland=!0,(S=tt.body).addedToIsland||(this.islandStack[M++]=S,S.addedToIsland=!0))}for(var ct=e.jointLink;ct!==null;ct=ct.next)(g=ct.joint).addedToIsland||(this.islandConstraints[nt++]=g,g.addedToIsland=!0,!(S=ct.body).addedToIsland&&S.isDynamic&&(this.islandStack[M++]=S,S.addedToIsland=!0))}while(M!=0);for(var ut=new B().addScaledVector(this.gravity,this.timeStep),et=O;et--;)(e=this.islandRigidBodies[et]).isDynamic&&e.linearVelocity.addEqual(ut);if(this.enableRandomizer){for(et=nt;et--;)if(et!==0){var kt=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*et|0;g=this.islandConstraints[et],this.islandConstraints[et]=this.islandConstraints[kt],this.islandConstraints[kt]=g}}for(et=nt;et--;)this.islandConstraints[et].preSolve(this.timeStep,P);for(var G=this.numIterations;G--;)for(et=nt;et--;)this.islandConstraints[et].solve();for(et=nt;et--;)this.islandConstraints[et].postSolve(),this.islandConstraints[et]=null;var ot=10;for(et=O;et--;)e=this.islandRigidBodies[et],this.callSleep(e)?(e.sleepTime+=this.timeStep,e.sleepTime<ot&&(ot=e.sleepTime)):(e.sleepTime=0,ot=0);if(ot>.5)for(et=O;et--;)this.islandRigidBodies[et].sleep(),this.islandRigidBodies[et]=null;else for(et=O;et--;)this.islandRigidBodies[et].updatePosition(this.timeStep),this.islandRigidBodies[et]=null;this.numIslands++}t&&this.performance.calcEnd(),this.postLoop!==null&&this.postLoop()},remove:function(t){},add:function(t){var e=(t=t||{}).type||"box";return e.constructor===String&&(e=[e]),e[0].substring(0,5)==="joint"?this.initJoint(e[0],t):this.initBody(e,t)},initBody:function(t,e){var n=this.invScale,a=e.move||!1,o=e.kinematic||!1,r=e.pos||[0,0,0];r=r.map(function(V){return V*n});var u=e.posShape||[0,0,0];u=u.map(function(V){return V*n});var y=e.rot||[0,0,0];y=y.map(function(V){return V*R.degtorad});var p=e.rotShape;p=y.map(function(V){return V*R.degtorad});var d=e.size===void 0?[1,1,1]:e.size;d.length===1&&(d[1]=d[0]),d.length===2&&(d[2]=d[0]),d=d.map(function(V){return V*n});var m=new gn;e.density!==void 0&&(m.density=e.density),e.friction!==void 0&&(m.friction=e.friction),e.restitution!==void 0&&(m.restitution=e.restitution),e.belongsTo!==void 0&&(m.belongsTo=e.belongsTo),e.collidesWith!==void 0&&(m.collidesWith=e.collidesWith),e.config!==void 0&&(e.config[0]!==void 0&&(m.density=e.config[0]),e.config[1]!==void 0&&(m.friction=e.config[1]),e.config[2]!==void 0&&(m.restitution=e.config[2]),e.config[3]!==void 0&&(m.belongsTo=e.config[3]),e.config[4]!==void 0&&(m.collidesWith=e.config[4]));for(var S,x,g=new Ns(new B(r[0],r[1],r[2]),new Ui().setFromEuler(y[0],y[1],y[2])),P=0;P<t.length;P++){switch(u[x=3*P]!==void 0&&m.relativePosition.set(u[x],u[x+1],u[x+2]),p[x]!==void 0&&m.relativeRotation.setQuat(new Ui().setFromEuler(p[x],p[x+1],p[x+2])),t[P]){case"sphere":S=new js(m,d[x]);break;case"cylinder":S=new Gs(m,d[x],d[x+1]);break;case"box":S=new Rs(m,d[x],d[x+1],d[x+2]);break;case"plane":S=new Us(m)}g.addShape(S)}return e.neverSleep||o?g.allowSleep=!1:g.allowSleep=!0,g.isKinematic=o,a?e.massPos||e.massRot?g.setupMass(1,!1):g.setupMass(1,!0):g.setupMass(2),e.name!==void 0&&(g.name=e.name),this.addRigidBody(g),a&&(e.sleep?g.sleep():g.awake()),g},initJoint:function(t,e){var n,a,o=this.invScale,r=e.axe1||[1,0,0],u=e.axe2||[1,0,0],y=e.pos1||[0,0,0],p=e.pos2||[0,0,0];y=y.map(function(O){return O*o}),p=p.map(function(O){return O*o}),t==="jointDistance"?(n=e.min||0,a=e.max||10,n*=o,a*=o):(n=e.min||57.29578,a=e.max||0,n*=R.degtorad,a*=R.degtorad);var d=e.limit||null,m=e.spring||null,S=e.motor||null,x=new qs;x.scale=this.scale,x.invScale=this.invScale,x.allowCollision=e.collision||!1,x.localAxis1.set(r[0],r[1],r[2]),x.localAxis2.set(u[0],u[1],u[2]),x.localAnchorPoint1.set(y[0],y[1],y[2]),x.localAnchorPoint2.set(p[0],p[1],p[2]);var g,P=null,V=null;if(e.body1===void 0||e.body2===void 0)return ue("World","Can't add joint if attach rigidbodys not define !");if(e.body1.constructor===String?P=this.getByName(e.body1):e.body1.constructor===Number?P=this.getByName(e.body1):e.body1.constructor===Ns&&(P=e.body1),e.body2.constructor===String?V=this.getByName(e.body2):e.body2.constructor===Number?V=this.getByName(e.body2):e.body2.constructor===Ns&&(V=e.body2),P===null||V===null)return ue("World","Can't add joint attach rigidbodys not find !");switch(x.body1=P,x.body2=V,t){case"jointDistance":g=new hn(x,n,a),m!==null&&g.limitMotor.setSpring(m[0],m[1]),S!==null&&g.limitMotor.setMotor(S[0],S[1]);break;case"jointHinge":case"joint":g=new on(x,n,a),m!==null&&g.limitMotor.setSpring(m[0],m[1]),S!==null&&g.limitMotor.setMotor(S[0],S[1]);break;case"jointPrisme":g=new ms(x,n,a);break;case"jointSlide":g=new ln(x,n,a);break;case"jointBall":g=new rn(x);break;case"jointWheel":g=new cn(x),d!==null&&g.rotationalLimitMotor1.setLimit(d[0],d[1]),m!==null&&g.rotationalLimitMotor1.setSpring(m[0],m[1]),S!==null&&g.rotationalLimitMotor1.setMotor(S[0],S[1])}return g.name=e.name||"",this.addJoint(g),g}}),c.Math=R,c.Vec3=B,c.Quat=Ui,c.Mat33=Wi,c.Shape=We,c.Box=Rs,c.Sphere=js,c.Cylinder=Gs,c.Plane=Us,c.Particle=nn,c.ShapeConfig=gn,c.LimitMotor=Yi,c.HingeJoint=on,c.BallAndSocketJoint=rn,c.DistanceJoint=hn,c.PrismaticJoint=ms,c.SliderJoint=ln,c.WheelJoint=cn,c.JointConfig=qs,c.RigidBody=Ns,c.World=Tn,c.REVISION=$,c.BR_NULL=j,c.BR_BRUTE_FORCE=st,c.BR_SWEEP_AND_PRUNE=U,c.BR_BOUNDING_VOLUME_TREE=Vt,c.BODY_NULL=ni,c.BODY_DYNAMIC=1,c.BODY_STATIC=2,c.BODY_KINEMATIC=3,c.BODY_GHOST=4,c.SHAPE_NULL=Jt,c.SHAPE_SPHERE=Tt,c.SHAPE_BOX=ei,c.SHAPE_CYLINDER=yi,c.SHAPE_PLANE=Ei,c.SHAPE_PARTICLE=ui,c.SHAPE_TETRA=6,c.JOINT_NULL=Ue,c.JOINT_DISTANCE=Oe,c.JOINT_BALL_AND_SOCKET=ls,c.JOINT_HINGE=Ss,c.JOINT_WHEEL=Ts,c.JOINT_SLIDER=Cn,c.JOINT_PRISMATIC=Vn,c.AABB_PROX=.005,c.printError=ue,c.InfoDisplay=As,Object.defineProperty(c,"__esModule",{value:!0})});var Yu=(()=>{var c=import.meta.url;return function(h){h=h||{};var s=typeof h<"u"?h:{},b,v;s.ready=new Promise(function(l,f){b=l,v=f});var $=Object.assign({},s),j=(l,f)=>{throw f},st=!0,U="";function Vt(l){return s.locateFile?s.locateFile(l,U):U+l}var ni;typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),c&&(U=c),U.indexOf("blob:")!==0?U=U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):U="";var Jt=s.print||console.log.bind(console),Tt=s.printErr||console.warn.bind(console);Object.assign(s,$),$=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&(j=s.quit);var ei=4,yi;s.wasmBinary&&(yi=s.wasmBinary);var Ei=s.noExitRuntime||!0;typeof WebAssembly!="object"&&qs("no native wasm support detected");var ui,Ue=!1,Oe,ls=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ss(l,f,_){for(var k=f+_,w=f;l[w]&&!(w>=k);)++w;if(w-f>16&&l.buffer&&ls)return ls.decode(l.subarray(f,w));for(var L="";f<w;){var I=l[f++];if(!(I&128)){L+=String.fromCharCode(I);continue}var H=l[f++]&63;if((I&224)==192){L+=String.fromCharCode((I&31)<<6|H);continue}var T=l[f++]&63;if((I&240)==224?I=(I&15)<<12|H<<6|T:I=(I&7)<<18|H<<12|T<<6|l[f++]&63,I<65536)L+=String.fromCharCode(I);else{var Q=I-65536;L+=String.fromCharCode(55296|Q>>10,56320|Q&1023)}}return L}function Ts(l,f){return l?Ss(B,l,f):""}function Cn(l,f,_,k){if(!(k>0))return 0;for(var w=_,L=_+k-1,I=0;I<l.length;++I){var H=l.charCodeAt(I);if(H>=55296&&H<=57343){var T=l.charCodeAt(++I);H=65536+((H&1023)<<10)|T&1023}if(H<=127){if(_>=L)break;f[_++]=H}else if(H<=2047){if(_+1>=L)break;f[_++]=192|H>>6,f[_++]=128|H&63}else if(H<=65535){if(_+2>=L)break;f[_++]=224|H>>12,f[_++]=128|H>>6&63,f[_++]=128|H&63}else{if(_+3>=L)break;f[_++]=240|H>>18,f[_++]=128|H>>12&63,f[_++]=128|H>>6&63,f[_++]=128|H&63}}return f[_]=0,_-w}function Vn(l,f,_){return Cn(l,B,f,_)}function R(l){for(var f=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k<=127?f++:k<=2047?f+=2:k>=55296&&k<=57343?(f+=4,++_):f+=3}return f}var ue,As,B,Ui,Wi,hs,Re,We,Rs,js,Gs;function Us(l){ue=l,s.HEAP8=As=new Int8Array(l),s.HEAP16=Ui=new Int16Array(l),s.HEAP32=hs=new Int32Array(l),s.HEAPU8=B=new Uint8Array(l),s.HEAPU16=Wi=new Uint16Array(l),s.HEAPU32=Re=new Uint32Array(l),s.HEAPF32=We=new Float32Array(l),s.HEAPF64=Gs=new Float64Array(l),s.HEAP64=Rs=new BigInt64Array(l),s.HEAPU64=js=new BigUint64Array(l)}s.INITIAL_MEMORY;var nn,gn=[],Yi=[],Ws=[],kn=[];function je(){return Ei}function Pn(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)In(s.preRun.shift());Ks(gn)}function an(){Ks(Yi)}function on(){Ks(Ws)}function rn(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Hn(s.postRun.shift());Ks(kn)}function In(l){gn.unshift(l)}function hn(l){Yi.unshift(l)}function Hn(l){kn.unshift(l)}var cs=0,ms=null;function ln(l){cs++,s.monitorRunDependencies&&s.monitorRunDependencies(cs)}function cn(l){if(cs--,s.monitorRunDependencies&&s.monitorRunDependencies(cs),cs==0&&ms){var f=ms;ms=null,f()}}function qs(l){s.onAbort&&s.onAbort(l),l="Aborted("+l+")",Tt(l),Ue=!0,Oe=1,l+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(l);throw v(f),f}var qn="data:application/octet-stream;base64,";function Js(l){return l.startsWith(qn)}var we;s.locateFile?(we="HavokPhysics.wasm",Js(we)||(we=Vt(we))):we=new URL("/assets/HavokPhysics.CjZXfFYQ.wasm",import.meta.url).toString();function Zs(l){try{if(l==we&&yi)return new Uint8Array(yi);throw"both async and sync fetching of the wasm failed"}catch(f){qs(f)}}function zn(){return!yi&&st&&typeof fetch=="function"?fetch(we,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+we+"'";return l.arrayBuffer()}).catch(function(){return Zs(we)}):Promise.resolve().then(function(){return Zs(we)})}function un(){var l={env:yt,wasi_snapshot_preview1:yt};function f(I,H){var T=I.exports;s.asm=T,ui=s.asm.memory,Us(ui.buffer),nn=s.asm.__indirect_function_table,hn(s.asm.__wasm_call_ctors),cn()}ln();function _(I){f(I.instance)}function k(I){return zn().then(function(H){return WebAssembly.instantiate(H,l)}).then(function(H){return H}).then(I,function(H){Tt("failed to asynchronously prepare wasm: "+H),qs(H)})}function w(){return!yi&&typeof WebAssembly.instantiateStreaming=="function"&&!Js(we)&&typeof fetch=="function"?fetch(we,{credentials:"same-origin"}).then(function(I){var H=WebAssembly.instantiateStreaming(I,l);return H.then(_,function(T){return Tt("wasm streaming compile failed: "+T),Tt("falling back to ArrayBuffer instantiation"),k(_)})}):k(_)}if(s.instantiateWasm)try{var L=s.instantiateWasm(l,f);return L}catch(I){Tt("Module.instantiateWasm callback failed with error: "+I),v(I)}return w().catch(v),{}}function pn(l){this.name="ExitStatus",this.message="Program terminated with exit("+l+")",this.status=l}function Ks(l){for(;l.length>0;)l.shift()(s)}function Ns(l){if(l instanceof pn||l=="unwind")return Oe;j(1,l)}var mn={};function ds(l){for(;l.length;){var f=l.pop(),_=l.pop();_(f)}}function dn(l){return this.fromWireType(hs[l>>2])}var ts={},us={},$s={},Ms=48,Bs=57;function Ys(l){if(l===void 0)return"_unknown";l=l.replace(/[^a-zA-Z0-9_]/g,"$");var f=l.charCodeAt(0);return f>=Ms&&f<=Bs?"_"+l:l}function Qs(l,f){return l=Ys(l),new Function("body","return function "+l+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(f)}function fn(l,f){var _=Qs(f,function(k){this.name=f,this.message=k;var w=new Error(k).stack;w!==void 0&&(this.stack=this.toString()+`
`+w.replace(/^Error(:[^\n]*)?\n/,""))});return _.prototype=Object.create(l.prototype),_.prototype.constructor=_,_.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},_}var wn=void 0;function yn(l){throw new wn(l)}function vn(l,f,_){l.forEach(function(H){$s[H]=f});function k(H){var T=_(H);T.length!==l.length&&yn("Mismatched type converter count");for(var Q=0;Q<l.length;++Q)Ge(l[Q],T[Q])}var w=new Array(f.length),L=[],I=0;f.forEach((H,T)=>{us.hasOwnProperty(H)?w[T]=us[H]:(L.push(H),ts.hasOwnProperty(H)||(ts[H]=[]),ts[H].push(()=>{w[T]=us[H],++I,I===L.length&&k(w)}))}),L.length===0&&k(w)}function Pe(l){var f=mn[l];delete mn[l];var _=f.elements,k=_.length,w=_.map(function(H){return H.getterReturnType}).concat(_.map(function(H){return H.setterArgumentType})),L=f.rawConstructor,I=f.rawDestructor;vn([l],w,function(H){return _.forEach((T,Q)=>{var St=H[Q],zt=T.getter,Lt=T.getterContext,ii=H[Q+k],re=T.setter,Li=T.setterContext;T.read=zi=>St.fromWireType(zt(Lt,zi)),T.write=(zi,ji)=>{var Xt=[];re(Li,zi,ii.toWireType(Xt,ji)),ds(Xt)}}),[{name:f.name,fromWireType:function(T){for(var Q=new Array(k),St=0;St<k;++St)Q[St]=_[St].read(T);return I(T),Q},toWireType:function(T,Q){if(k!==Q.length)throw new TypeError("Incorrect number of tuple elements for "+f.name+": expected="+k+", actual="+Q.length);for(var St=L(),zt=0;zt<k;++zt)_[zt].write(St,Q[zt]);return T!==null&&T.push(I,St),St},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:I}]})}function _n(l){if(l===null)return"null";var f=typeof l;return f==="object"||f==="array"||f==="function"?l.toString():""+l}function bn(){for(var l=new Array(256),f=0;f<256;++f)l[f]=String.fromCharCode(f);xn=l}var xn=void 0;function _e(l){for(var f="",_=l;B[_];)f+=xn[B[_++]];return f}var Xs=void 0;function Se(l){throw new Xs(l)}function Ge(l,f,_={}){if(!("argPackAdvance"in f))throw new TypeError("registerType registeredInstance requires argPackAdvance");var k=f.name;if(l||Se('type "'+k+'" must have a positive integer typeid pointer'),us.hasOwnProperty(l)){if(_.ignoreDuplicateRegistrations)return;Se("Cannot register type '"+k+"' twice")}if(us[l]=f,delete $s[l],ts.hasOwnProperty(l)){var w=ts[l];delete ts[l],w.forEach(L=>L())}}function tn(l,f,_){switch(f){case 0:return _?function(w){return As[w]}:function(w){return B[w]};case 1:return _?function(w){return Ui[w>>1]}:function(w){return Wi[w>>1]};case 2:return _?function(w){return hs[w>>2]}:function(w){return Re[w>>2]};case 3:return _?function(w){return Rs[w>>3]}:function(w){return js[w>>3]};default:throw new TypeError("Unknown integer type: "+l)}}function Tn(l,f,_,k,w){f=_e(f);var L=t(_),I=f.indexOf("u")!=-1;I&&(w=(1n<<64n)-1n),Ge(l,{name:f,fromWireType:function(H){return H},toWireType:function(H,T){if(typeof T!="bigint"&&typeof T!="number")throw new TypeError('Cannot convert "'+_n(T)+'" to '+this.name);if(T<k||T>w)throw new TypeError('Passing a number "'+_n(T)+'" from JS side to C/C++ side to an argument of type "'+f+'", which is outside the valid range ['+k+", "+w+"]!");return T},argPackAdvance:8,readValueFromPointer:tn(f,L,!I),destructorFunction:null})}function t(l){switch(l){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+l)}}function e(l,f,_,k,w){var L=t(_);f=_e(f),Ge(l,{name:f,fromWireType:function(I){return!!I},toWireType:function(I,H){return H?k:w},argPackAdvance:8,readValueFromPointer:function(I){var H;if(_===1)H=As;else if(_===2)H=Ui;else if(_===4)H=hs;else throw new TypeError("Unknown boolean type size: "+f);return this.fromWireType(H[I>>L])},destructorFunction:null})}var n=[],a=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function o(l){l>4&&--a[l].refcount===0&&(a[l]=void 0,n.push(l))}function r(){for(var l=0,f=5;f<a.length;++f)a[f]!==void 0&&++l;return l}function u(){for(var l=5;l<a.length;++l)if(a[l]!==void 0)return a[l];return null}function y(){s.count_emval_handles=r,s.get_first_emval=u}var p={toValue:l=>(l||Se("Cannot use deleted val. handle = "+l),a[l].value),toHandle:l=>{switch(l){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var f=n.length?n.pop():a.length;return a[f]={refcount:1,value:l},f}}}};function d(l,f){f=_e(f),Ge(l,{name:f,fromWireType:function(_){var k=p.toValue(_);return o(_),k},toWireType:function(_,k){return p.toHandle(k)},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:null})}function m(l,f,_){if(l[f].overloadTable===void 0){var k=l[f];l[f]=function(){return l[f].overloadTable.hasOwnProperty(arguments.length)||Se("Function '"+_+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+l[f].overloadTable+")!"),l[f].overloadTable[arguments.length].apply(this,arguments)},l[f].overloadTable=[],l[f].overloadTable[k.argCount]=k}}function S(l,f,_){s.hasOwnProperty(l)?((_===void 0||s[l].overloadTable!==void 0&&s[l].overloadTable[_]!==void 0)&&Se("Cannot register public name '"+l+"' twice"),m(s,l,l),s.hasOwnProperty(_)&&Se("Cannot register multiple overloads of a function with the same number of arguments ("+_+")!"),s[l].overloadTable[_]=f):(s[l]=f,_!==void 0&&(s[l].numArguments=_))}function x(l,f,_){switch(f){case 0:return function(k){var w=_?As:B;return this.fromWireType(w[k])};case 1:return function(k){var w=_?Ui:Wi;return this.fromWireType(w[k>>1])};case 2:return function(k){var w=_?hs:Re;return this.fromWireType(w[k>>2])};default:throw new TypeError("Unknown integer type: "+l)}}function g(l,f,_,k){var w=t(_);f=_e(f);function L(){}L.values={},Ge(l,{name:f,constructor:L,fromWireType:function(I){return this.constructor.values[I]},toWireType:function(I,H){return H.value},argPackAdvance:8,readValueFromPointer:x(f,w,k),destructorFunction:null}),S(f,L)}function P(l){var f=qt(l),_=_e(f);return It(f),_}function V(l,f){var _=us[l];return _===void 0&&Se(f+" has unknown type "+P(l)),_}function O(l,f,_){var k=V(l,"enum");f=_e(f);var w=k.constructor,L=Object.create(k.constructor.prototype,{value:{value:_},constructor:{value:Qs(k.name+"_"+f,function(){})}});w.values[_]=L,w[f]=L}function nt(l,f){switch(f){case 2:return function(_){return this.fromWireType(We[_>>2])};case 3:return function(_){return this.fromWireType(Gs[_>>3])};default:throw new TypeError("Unknown float type: "+l)}}function M(l,f,_){var k=t(_);f=_e(f),Ge(l,{name:f,fromWireType:function(w){return w},toWireType:function(w,L){return L},argPackAdvance:8,readValueFromPointer:nt(f,k),destructorFunction:null})}function tt(l,f){if(!(l instanceof Function))throw new TypeError("new_ called with constructor type "+typeof l+" which is not a function");var _=Qs(l.name||"unknownFunctionName",function(){});_.prototype=l.prototype;var k=new _,w=l.apply(k,f);return w instanceof Object?w:k}function it(l,f,_,k,w){var L=f.length;L<2&&Se("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var I=f[1]!==null&&_!==null,H=!1,T=1;T<f.length;++T)if(f[T]!==null&&f[T].destructorFunction===void 0){H=!0;break}for(var Q=f[0].name!=="void",St="",zt="",T=0;T<L-2;++T)St+=(T!==0?", ":"")+"arg"+T,zt+=(T!==0?", ":"")+"arg"+T+"Wired";var Lt="return function "+Ys(l)+"("+St+`) {
if (arguments.length !== `+(L-2)+`) {
throwBindingError('function `+l+" called with ' + arguments.length + ' arguments, expected "+(L-2)+` args!');
}
`;H&&(Lt+=`var destructors = [];
`);var ii=H?"destructors":"null",re=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Li=[Se,k,w,ds,f[0],f[1]];I&&(Lt+="var thisWired = classParam.toWireType("+ii+`, this);
`);for(var T=0;T<L-2;++T)Lt+="var arg"+T+"Wired = argType"+T+".toWireType("+ii+", arg"+T+"); // "+f[T+2].name+`
`,re.push("argType"+T),Li.push(f[T+2]);if(I&&(zt="thisWired"+(zt.length>0?", ":"")+zt),Lt+=(Q?"var rv = ":"")+"invoker(fn"+(zt.length>0?", ":"")+zt+`);
`,H)Lt+=`runDestructors(destructors);
`;else for(var T=I?1:2;T<f.length;++T){var zi=T===1?"thisWired":"arg"+(T-2)+"Wired";f[T].destructorFunction!==null&&(Lt+=zi+"_dtor("+zi+"); // "+f[T].name+`
`,re.push(zi+"_dtor"),Li.push(f[T].destructorFunction))}Q&&(Lt+=`var ret = retType.fromWireType(rv);
return ret;
`),Lt+=`}
`,re.push(Lt);var ji=tt(Function,re).apply(null,Li);return ji}function ct(l,f){for(var _=[],k=0;k<l;k++)_.push(Re[f+k*4>>2]);return _}function ut(l,f,_){s.hasOwnProperty(l)||yn("Replacing nonexistant public symbol"),s[l].overloadTable!==void 0&&_!==void 0?s[l].overloadTable[_]=f:(s[l]=f,s[l].argCount=_)}var et=[];function kt(l){var f=et[l];return f||(l>=et.length&&(et.length=l+1),et[l]=f=nn.get(l)),f}function G(l,f){l=_e(l);function _(){return kt(f)}var k=_();return typeof k!="function"&&Se("unknown function pointer with signature "+l+": "+f),k}var ot=void 0;function pt(l,f){var _=[],k={};function w(L){if(!k[L]&&!us[L]){if($s[L]){$s[L].forEach(w);return}_.push(L),k[L]=!0}}throw f.forEach(w),new ot(l+": "+_.map(P).join([", "]))}function Y(l,f,_,k,w,L){var I=ct(f,_);l=_e(l),w=G(k,w),S(l,function(){pt("Cannot call "+l+" due to unbound types",I)},f-1),vn([],I,function(H){var T=[H[0],null].concat(H.slice(1));return ut(l,it(l,T,null,w,L),f-1),[]})}function ht(l,f,_,k,w){f=_e(f);var L=t(_),I=zt=>zt;if(k===0){var H=32-8*_;I=zt=>zt<<H>>>H}var T=f.includes("unsigned"),Q=(zt,Lt)=>{},St;T?St=function(zt,Lt){return Q(Lt,this.name),Lt>>>0}:St=function(zt,Lt){return Q(Lt,this.name),Lt},Ge(l,{name:f,fromWireType:I,toWireType:St,argPackAdvance:8,readValueFromPointer:tn(f,L,k!==0),destructorFunction:null})}function dt(l,f,_){var k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],w=k[f];function L(I){I=I>>2;var H=Re,T=H[I],Q=H[I+1];return new w(ue,Q,T)}_=_e(_),Ge(l,{name:_,fromWireType:L,argPackAdvance:8,readValueFromPointer:L},{ignoreDuplicateRegistrations:!0})}function At(l,f){f=_e(f);var _=f==="std::string";Ge(l,{name:f,fromWireType:function(k){var w=Re[k>>2],L=k+4,I;if(_)for(var H=L,T=0;T<=w;++T){var Q=L+T;if(T==w||B[Q]==0){var St=Q-H,zt=Ts(H,St);I===void 0?I=zt:(I+="\0",I+=zt),H=Q+1}}else{for(var Lt=new Array(w),T=0;T<w;++T)Lt[T]=String.fromCharCode(B[L+T]);I=Lt.join("")}return It(k),I},toWireType:function(k,w){w instanceof ArrayBuffer&&(w=new Uint8Array(w));var L,I=typeof w=="string";I||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int8Array||Se("Cannot pass non-string to std::string"),_&&I?L=R(w):L=w.length;var H=Kt(4+L+1),T=H+4;if(Re[H>>2]=L,_&&I)Vn(w,T,L+1);else if(I)for(var Q=0;Q<L;++Q){var St=w.charCodeAt(Q);St>255&&(It(T),Se("String has UTF-16 code units that do not fit in 8 bits")),B[T+Q]=St}else for(var Q=0;Q<L;++Q)B[T+Q]=w[Q];return k!==null&&k.push(It,H),H},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:function(k){It(k)}})}var ki=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Si(l,f){for(var _=l,k=_>>1,w=k+f/2;!(k>=w)&&Wi[k];)++k;if(_=k<<1,_-l>32&&ki)return ki.decode(B.subarray(l,_));for(var L="",I=0;!(I>=f/2);++I){var H=Ui[l+I*2>>1];if(H==0)break;L+=String.fromCharCode(H)}return L}function vi(l,f,_){if(_===void 0&&(_=2147483647),_<2)return 0;_-=2;for(var k=f,w=_<l.length*2?_/2:l.length,L=0;L<w;++L){var I=l.charCodeAt(L);Ui[f>>1]=I,f+=2}return Ui[f>>1]=0,f-k}function F(l){return l.length*2}function Zt(l,f){for(var _=0,k="";!(_>=f/4);){var w=hs[l+_*4>>2];if(w==0)break;if(++_,w>=65536){var L=w-65536;k+=String.fromCharCode(55296|L>>10,56320|L&1023)}else k+=String.fromCharCode(w)}return k}function N(l,f,_){if(_===void 0&&(_=2147483647),_<4)return 0;for(var k=f,w=k+_-4,L=0;L<l.length;++L){var I=l.charCodeAt(L);if(I>=55296&&I<=57343){var H=l.charCodeAt(++L);I=65536+((I&1023)<<10)|H&1023}if(hs[f>>2]=I,f+=4,f+4>w)break}return hs[f>>2]=0,f-k}function z(l){for(var f=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k>=55296&&k<=57343&&++_,f+=4}return f}function at(l,f,_){_=_e(_);var k,w,L,I,H;f===2?(k=Si,w=vi,I=F,L=()=>Wi,H=1):f===4&&(k=Zt,w=N,I=z,L=()=>Re,H=2),Ge(l,{name:_,fromWireType:function(T){for(var Q=Re[T>>2],St=L(),zt,Lt=T+4,ii=0;ii<=Q;++ii){var re=T+4+ii*f;if(ii==Q||St[re>>H]==0){var Li=re-Lt,zi=k(Lt,Li);zt===void 0?zt=zi:(zt+="\0",zt+=zi),Lt=re+f}}return It(T),zt},toWireType:function(T,Q){typeof Q!="string"&&Se("Cannot pass non-string to C++ string type "+_);var St=I(Q),zt=Kt(4+St+f);return Re[zt>>2]=St>>H,w(Q,zt+4,St+f),T!==null&&T.push(It,zt),zt},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:function(T){It(T)}})}function E(l,f,_,k,w,L){mn[l]={name:_e(f),rawConstructor:G(_,k),rawDestructor:G(w,L),elements:[]}}function D(l,f,_,k,w,L,I,H,T){mn[l].elements.push({getterReturnType:f,getter:G(_,k),getterContext:w,setterArgumentType:L,setter:G(I,H),setterContext:T})}function Bt(l,f){f=_e(f),Ge(l,{isVoid:!0,name:f,argPackAdvance:0,fromWireType:function(){},toWireType:function(_,k){}})}var Et=!0;function xt(){return Et}var gt={};function W(l){var f=gt[l];return f===void 0?_e(l):f}var mt=[];function Pt(l,f,_,k){l=mt[l],f=p.toValue(f),_=W(_),l(f,_,null,k)}function oe(l){var f=mt.length;return mt.push(l),f}function Ni(l,f){for(var _=new Array(l),k=0;k<l;++k)_[k]=V(Re[f+k*ei>>2],"parameter "+k);return _}var Fi=[];function bi(l,f){var _=Ni(l,f),k=_[0],w=k.name+"_$"+_.slice(1).map(function(re){return re.name}).join("_")+"$",L=Fi[w];if(L!==void 0)return L;for(var I=["retType"],H=[k],T="",Q=0;Q<l-1;++Q)T+=(Q!==0?", ":"")+"arg"+Q,I.push("argType"+Q),H.push(_[1+Q]);for(var St=Ys("methodCaller_"+w),zt="return function "+St+`(handle, name, destructors, args) {
`,Lt=0,Q=0;Q<l-1;++Q)zt+="    var arg"+Q+" = argType"+Q+".readValueFromPointer(args"+(Lt?"+"+Lt:"")+`);
`,Lt+=_[Q+1].argPackAdvance;zt+="    var rv = handle[name]("+T+`);
`;for(var Q=0;Q<l-1;++Q)_[Q+1].deleteObject&&(zt+="    argType"+Q+".deleteObject(arg"+Q+`);
`);k.isVoid||(zt+=`    return retType.toWireType(destructors, rv);
`),zt+=`};
`,I.push(zt);var ii=tt(Function,I).apply(null,H);return L=oe(ii),Fi[w]=L,L}function xi(){qs("")}function Nt(){return Date.now()}function _t(){return 2147483648}function K(){return _t()}var lt;lt=()=>performance.now();function wt(l,f,_){B.copyWithin(l,f,f+_)}function Pi(l){try{return ui.grow(l-ue.byteLength+65535>>>16),Us(ui.buffer),1}catch{}}function Qt(l){var f=B.length;l=l>>>0;var _=_t();if(l>_)return!1;let k=(T,Q)=>T+(Q-T%Q)%Q;for(var w=1;w<=4;w*=2){var L=f*(1+.2/w);L=Math.min(L,l+100663296);var I=Math.min(_,k(Math.max(l,L),65536)),H=Pi(I);if(H)return!0}return!1}var $t=[null,[],[]];function Ut(l,f){var _=$t[l];f===0||f===10?((l===1?Jt:Tt)(Ss(_,0)),_.length=0):_.push(f)}function Wt(l,f,_,k){for(var w=0,L=0;L<_;L++){var I=Re[f>>2],H=Re[f+4>>2];f+=8;for(var T=0;T<H;T++)Ut(l,B[I+T]);w+=H}return Re[k>>2]=w,0}function vt(l){Oe=l,je()||(s.onExit&&s.onExit(l),Ue=!0),j(l,new pn(l))}function ft(l,f){Oe=l,vt(l)}wn=s.InternalError=fn(Error,"InternalError"),bn(),Xs=s.BindingError=fn(Error,"BindingError"),y(),ot=s.UnboundTypeError=fn(Error,"UnboundTypeError");var yt={_embind_finalize_value_array:Pe,_embind_register_bigint:Tn,_embind_register_bool:e,_embind_register_emval:d,_embind_register_enum:g,_embind_register_enum_value:O,_embind_register_float:M,_embind_register_function:Y,_embind_register_integer:ht,_embind_register_memory_view:dt,_embind_register_std_string:At,_embind_register_std_wstring:at,_embind_register_value_array:E,_embind_register_value_array_element:D,_embind_register_void:Bt,_emscripten_get_now_is_monotonic:xt,_emval_call_void_method:Pt,_emval_decref:o,_emval_get_method_caller:bi,abort:xi,emscripten_date_now:Nt,emscripten_get_heap_max:K,emscripten_get_now:lt,emscripten_memcpy_big:wt,emscripten_resize_heap:Qt,fd_write:Wt};un(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._HP_GetStatistics=function(){return(s._HP_GetStatistics=s.asm.HP_GetStatistics).apply(null,arguments)},s._HP_Shape_CreateSphere=function(){return(s._HP_Shape_CreateSphere=s.asm.HP_Shape_CreateSphere).apply(null,arguments)},s._HP_Shape_CreateCapsule=function(){return(s._HP_Shape_CreateCapsule=s.asm.HP_Shape_CreateCapsule).apply(null,arguments)},s._HP_Shape_CreateCylinder=function(){return(s._HP_Shape_CreateCylinder=s.asm.HP_Shape_CreateCylinder).apply(null,arguments)},s._HP_Shape_CreateBox=function(){return(s._HP_Shape_CreateBox=s.asm.HP_Shape_CreateBox).apply(null,arguments)},s._HP_Shape_CreateConvexHull=function(){return(s._HP_Shape_CreateConvexHull=s.asm.HP_Shape_CreateConvexHull).apply(null,arguments)},s._HP_Shape_CreateMesh=function(){return(s._HP_Shape_CreateMesh=s.asm.HP_Shape_CreateMesh).apply(null,arguments)},s._HP_Shape_CreateHeightField=function(){return(s._HP_Shape_CreateHeightField=s.asm.HP_Shape_CreateHeightField).apply(null,arguments)},s._HP_Shape_CreateContainer=function(){return(s._HP_Shape_CreateContainer=s.asm.HP_Shape_CreateContainer).apply(null,arguments)},s._HP_Shape_Release=function(){return(s._HP_Shape_Release=s.asm.HP_Shape_Release).apply(null,arguments)},s._HP_Shape_GetType=function(){return(s._HP_Shape_GetType=s.asm.HP_Shape_GetType).apply(null,arguments)},s._HP_Shape_AddChild=function(){return(s._HP_Shape_AddChild=s.asm.HP_Shape_AddChild).apply(null,arguments)},s._HP_Shape_RemoveChild=function(){return(s._HP_Shape_RemoveChild=s.asm.HP_Shape_RemoveChild).apply(null,arguments)},s._HP_Shape_GetNumChildren=function(){return(s._HP_Shape_GetNumChildren=s.asm.HP_Shape_GetNumChildren).apply(null,arguments)},s._HP_Shape_SetChildQSTransform=function(){return(s._HP_Shape_SetChildQSTransform=s.asm.HP_Shape_SetChildQSTransform).apply(null,arguments)},s._HP_Shape_GetChildQSTransform=function(){return(s._HP_Shape_GetChildQSTransform=s.asm.HP_Shape_GetChildQSTransform).apply(null,arguments)},s._HP_Shape_SetFilterInfo=function(){return(s._HP_Shape_SetFilterInfo=s.asm.HP_Shape_SetFilterInfo).apply(null,arguments)},s._HP_Shape_GetFilterInfo=function(){return(s._HP_Shape_GetFilterInfo=s.asm.HP_Shape_GetFilterInfo).apply(null,arguments)},s._HP_Shape_SetMaterial=function(){return(s._HP_Shape_SetMaterial=s.asm.HP_Shape_SetMaterial).apply(null,arguments)},s._HP_Shape_GetMaterial=function(){return(s._HP_Shape_GetMaterial=s.asm.HP_Shape_GetMaterial).apply(null,arguments)},s._HP_Shape_SetDensity=function(){return(s._HP_Shape_SetDensity=s.asm.HP_Shape_SetDensity).apply(null,arguments)},s._HP_Shape_GetDensity=function(){return(s._HP_Shape_GetDensity=s.asm.HP_Shape_GetDensity).apply(null,arguments)},s._HP_Shape_CastRay=function(){return(s._HP_Shape_CastRay=s.asm.HP_Shape_CastRay).apply(null,arguments)},s._HP_Shape_BuildMassProperties=function(){return(s._HP_Shape_BuildMassProperties=s.asm.HP_Shape_BuildMassProperties).apply(null,arguments)},s._HP_ShapePathIterator_GetNext=function(){return(s._HP_ShapePathIterator_GetNext=s.asm.HP_ShapePathIterator_GetNext).apply(null,arguments)},s._HP_Shape_CreateDebugDisplayGeometry=function(){return(s._HP_Shape_CreateDebugDisplayGeometry=s.asm.HP_Shape_CreateDebugDisplayGeometry).apply(null,arguments)},s._HP_DebugGeometry_GetInfo=function(){return(s._HP_DebugGeometry_GetInfo=s.asm.HP_DebugGeometry_GetInfo).apply(null,arguments)},s._HP_DebugGeometry_Release=function(){return(s._HP_DebugGeometry_Release=s.asm.HP_DebugGeometry_Release).apply(null,arguments)},s._HP_Body_Create=function(){return(s._HP_Body_Create=s.asm.HP_Body_Create).apply(null,arguments)},s._HP_Body_Release=function(){return(s._HP_Body_Release=s.asm.HP_Body_Release).apply(null,arguments)},s._HP_Body_SetShape=function(){return(s._HP_Body_SetShape=s.asm.HP_Body_SetShape).apply(null,arguments)},s._HP_Body_GetShape=function(){return(s._HP_Body_GetShape=s.asm.HP_Body_GetShape).apply(null,arguments)},s._HP_Body_SetMotionType=function(){return(s._HP_Body_SetMotionType=s.asm.HP_Body_SetMotionType).apply(null,arguments)},s._HP_Body_GetMotionType=function(){return(s._HP_Body_GetMotionType=s.asm.HP_Body_GetMotionType).apply(null,arguments)},s._HP_Body_SetEventMask=function(){return(s._HP_Body_SetEventMask=s.asm.HP_Body_SetEventMask).apply(null,arguments)},s._HP_Body_GetEventMask=function(){return(s._HP_Body_GetEventMask=s.asm.HP_Body_GetEventMask).apply(null,arguments)},s._HP_Body_SetMassProperties=function(){return(s._HP_Body_SetMassProperties=s.asm.HP_Body_SetMassProperties).apply(null,arguments)},s._HP_Body_GetMassProperties=function(){return(s._HP_Body_GetMassProperties=s.asm.HP_Body_GetMassProperties).apply(null,arguments)},s._HP_Body_SetLinearDamping=function(){return(s._HP_Body_SetLinearDamping=s.asm.HP_Body_SetLinearDamping).apply(null,arguments)},s._HP_Body_GetLinearDamping=function(){return(s._HP_Body_GetLinearDamping=s.asm.HP_Body_GetLinearDamping).apply(null,arguments)},s._HP_Body_SetAngularDamping=function(){return(s._HP_Body_SetAngularDamping=s.asm.HP_Body_SetAngularDamping).apply(null,arguments)},s._HP_Body_GetAngularDamping=function(){return(s._HP_Body_GetAngularDamping=s.asm.HP_Body_GetAngularDamping).apply(null,arguments)},s._HP_Body_SetGravityFactor=function(){return(s._HP_Body_SetGravityFactor=s.asm.HP_Body_SetGravityFactor).apply(null,arguments)},s._HP_Body_GetGravityFactor=function(){return(s._HP_Body_GetGravityFactor=s.asm.HP_Body_GetGravityFactor).apply(null,arguments)},s._HP_Body_GetWorld=function(){return(s._HP_Body_GetWorld=s.asm.HP_Body_GetWorld).apply(null,arguments)},s._HP_Body_SetPosition=function(){return(s._HP_Body_SetPosition=s.asm.HP_Body_SetPosition).apply(null,arguments)},s._HP_Body_GetPosition=function(){return(s._HP_Body_GetPosition=s.asm.HP_Body_GetPosition).apply(null,arguments)},s._HP_Body_SetOrientation=function(){return(s._HP_Body_SetOrientation=s.asm.HP_Body_SetOrientation).apply(null,arguments)},s._HP_Body_GetOrientation=function(){return(s._HP_Body_GetOrientation=s.asm.HP_Body_GetOrientation).apply(null,arguments)},s._HP_Body_SetQTransform=function(){return(s._HP_Body_SetQTransform=s.asm.HP_Body_SetQTransform).apply(null,arguments)},s._HP_Body_GetWorldTransformOffset=function(){return(s._HP_Body_GetWorldTransformOffset=s.asm.HP_Body_GetWorldTransformOffset).apply(null,arguments)},s._HP_Body_GetQTransform=function(){return(s._HP_Body_GetQTransform=s.asm.HP_Body_GetQTransform).apply(null,arguments)},s._HP_Body_SetLinearVelocity=function(){return(s._HP_Body_SetLinearVelocity=s.asm.HP_Body_SetLinearVelocity).apply(null,arguments)},s._HP_Body_GetLinearVelocity=function(){return(s._HP_Body_GetLinearVelocity=s.asm.HP_Body_GetLinearVelocity).apply(null,arguments)},s._HP_Body_SetAngularVelocity=function(){return(s._HP_Body_SetAngularVelocity=s.asm.HP_Body_SetAngularVelocity).apply(null,arguments)},s._HP_Body_GetAngularVelocity=function(){return(s._HP_Body_GetAngularVelocity=s.asm.HP_Body_GetAngularVelocity).apply(null,arguments)},s._HP_Body_ApplyImpulse=function(){return(s._HP_Body_ApplyImpulse=s.asm.HP_Body_ApplyImpulse).apply(null,arguments)},s._HP_Body_SetTargetQTransform=function(){return(s._HP_Body_SetTargetQTransform=s.asm.HP_Body_SetTargetQTransform).apply(null,arguments)},s._HP_Constraint_Create=function(){return(s._HP_Constraint_Create=s.asm.HP_Constraint_Create).apply(null,arguments)},s._HP_Constraint_Release=function(){return(s._HP_Constraint_Release=s.asm.HP_Constraint_Release).apply(null,arguments)},s._HP_Constraint_SetParentBody=function(){return(s._HP_Constraint_SetParentBody=s.asm.HP_Constraint_SetParentBody).apply(null,arguments)},s._HP_Constraint_GetParentBody=function(){return(s._HP_Constraint_GetParentBody=s.asm.HP_Constraint_GetParentBody).apply(null,arguments)},s._HP_Constraint_SetChildBody=function(){return(s._HP_Constraint_SetChildBody=s.asm.HP_Constraint_SetChildBody).apply(null,arguments)},s._HP_Constraint_GetChildBody=function(){return(s._HP_Constraint_GetChildBody=s.asm.HP_Constraint_GetChildBody).apply(null,arguments)},s._HP_Constraint_SetAnchorInParent=function(){return(s._HP_Constraint_SetAnchorInParent=s.asm.HP_Constraint_SetAnchorInParent).apply(null,arguments)},s._HP_Constraint_SetAnchorInChild=function(){return(s._HP_Constraint_SetAnchorInChild=s.asm.HP_Constraint_SetAnchorInChild).apply(null,arguments)},s._HP_Constraint_SetCollisionsEnabled=function(){return(s._HP_Constraint_SetCollisionsEnabled=s.asm.HP_Constraint_SetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_GetCollisionsEnabled=function(){return(s._HP_Constraint_GetCollisionsEnabled=s.asm.HP_Constraint_GetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_SetEnabled=function(){return(s._HP_Constraint_SetEnabled=s.asm.HP_Constraint_SetEnabled).apply(null,arguments)},s._HP_Constraint_GetEnabled=function(){return(s._HP_Constraint_GetEnabled=s.asm.HP_Constraint_GetEnabled).apply(null,arguments)},s._HP_Constraint_SetAxisMinLimit=function(){return(s._HP_Constraint_SetAxisMinLimit=s.asm.HP_Constraint_SetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMinLimit=function(){return(s._HP_Constraint_GetAxisMinLimit=s.asm.HP_Constraint_GetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_SetAxisMaxLimit=function(){return(s._HP_Constraint_SetAxisMaxLimit=s.asm.HP_Constraint_SetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMaxLimit=function(){return(s._HP_Constraint_GetAxisMaxLimit=s.asm.HP_Constraint_GetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMode=function(){return(s._HP_Constraint_GetAxisMode=s.asm.HP_Constraint_GetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisMode=function(){return(s._HP_Constraint_SetAxisMode=s.asm.HP_Constraint_SetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisFriction=function(){return(s._HP_Constraint_SetAxisFriction=s.asm.HP_Constraint_SetAxisFriction).apply(null,arguments)},s._HP_Constraint_GetAxisFriction=function(){return(s._HP_Constraint_GetAxisFriction=s.asm.HP_Constraint_GetAxisFriction).apply(null,arguments)},s._HP_Constraint_SetAxisMotorType=function(){return(s._HP_Constraint_SetAxisMotorType=s.asm.HP_Constraint_SetAxisMotorType).apply(null,arguments)},s._HP_Constraint_GetAxisMotorType=function(){return(s._HP_Constraint_GetAxisMotorType=s.asm.HP_Constraint_GetAxisMotorType).apply(null,arguments)},s._HP_Constraint_SetAxisMotorTarget=function(){return(s._HP_Constraint_SetAxisMotorTarget=s.asm.HP_Constraint_SetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_GetAxisMotorTarget=function(){return(s._HP_Constraint_GetAxisMotorTarget=s.asm.HP_Constraint_GetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_SetAxisMotorMaxForce=function(){return(s._HP_Constraint_SetAxisMotorMaxForce=s.asm.HP_Constraint_SetAxisMotorMaxForce).apply(null,arguments)},s._HP_Constraint_GetAxisMotorMaxForce=function(){return(s._HP_Constraint_GetAxisMotorMaxForce=s.asm.HP_Constraint_GetAxisMotorMaxForce).apply(null,arguments)},s._HP_World_Create=function(){return(s._HP_World_Create=s.asm.HP_World_Create).apply(null,arguments)},s._HP_World_Release=function(){return(s._HP_World_Release=s.asm.HP_World_Release).apply(null,arguments)},s._HP_World_GetBodyBuffer=function(){return(s._HP_World_GetBodyBuffer=s.asm.HP_World_GetBodyBuffer).apply(null,arguments)},s._HP_World_SetGravity=function(){return(s._HP_World_SetGravity=s.asm.HP_World_SetGravity).apply(null,arguments)},s._HP_World_GetGravity=function(){return(s._HP_World_GetGravity=s.asm.HP_World_GetGravity).apply(null,arguments)},s._HP_World_AddBody=function(){return(s._HP_World_AddBody=s.asm.HP_World_AddBody).apply(null,arguments)},s._HP_World_RemoveBody=function(){return(s._HP_World_RemoveBody=s.asm.HP_World_RemoveBody).apply(null,arguments)},s._HP_World_GetNumBodies=function(){return(s._HP_World_GetNumBodies=s.asm.HP_World_GetNumBodies).apply(null,arguments)},s._HP_World_CastRayWithCollector=function(){return(s._HP_World_CastRayWithCollector=s.asm.HP_World_CastRayWithCollector).apply(null,arguments)},s._HP_World_Step=function(){return(s._HP_World_Step=s.asm.HP_World_Step).apply(null,arguments)},s._HP_World_GetNextCollisionEvent=function(){return(s._HP_World_GetNextCollisionEvent=s.asm.HP_World_GetNextCollisionEvent).apply(null,arguments)},s._HP_QueryCollector_Create=function(){return(s._HP_QueryCollector_Create=s.asm.HP_QueryCollector_Create).apply(null,arguments)},s._HP_QueryCollector_Release=function(){return(s._HP_QueryCollector_Release=s.asm.HP_QueryCollector_Release).apply(null,arguments)},s._HP_QueryCollector_GetNumHits=function(){return(s._HP_QueryCollector_GetNumHits=s.asm.HP_QueryCollector_GetNumHits).apply(null,arguments)},s._HP_QueryCollector_GetCastRayResult=function(){return(s._HP_QueryCollector_GetCastRayResult=s.asm.HP_QueryCollector_GetCastRayResult).apply(null,arguments)},s._main=function(){return(s._main=s.asm.main).apply(null,arguments)};var Kt=s._malloc=function(){return(Kt=s._malloc=s.asm.malloc).apply(null,arguments)},It=s._free=function(){return(It=s._free=s.asm.free).apply(null,arguments)};s._HP_Debug_StartRecordingStats=function(){return(s._HP_Debug_StartRecordingStats=s.asm.HP_Debug_StartRecordingStats).apply(null,arguments)},s._HP_Debug_StopRecordingStats=function(){return(s._HP_Debug_StopRecordingStats=s.asm.HP_Debug_StopRecordingStats).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s._htons=function(){return(s._htons=s.asm.htons).apply(null,arguments)},s._ntohs=function(){return(s._ntohs=s.asm.ntohs).apply(null,arguments)};var qt=s.___getTypeName=function(){return(qt=s.___getTypeName=s.asm.__getTypeName).apply(null,arguments)};s.__embind_initialize_bindings=function(){return(s.__embind_initialize_bindings=s.asm._embind_initialize_bindings).apply(null,arguments)},s._htonl=function(){return(s._htonl=s.asm.htonl).apply(null,arguments)},s._setThrew=function(){return(s._setThrew=s.asm.setThrew).apply(null,arguments)},s._saveSetjmp=function(){return(s._saveSetjmp=s.asm.saveSetjmp).apply(null,arguments)},s.stackSave=function(){return(s.stackSave=s.asm.stackSave).apply(null,arguments)},s.stackRestore=function(){return(s.stackRestore=s.asm.stackRestore).apply(null,arguments)},s.stackAlloc=function(){return(s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};var si;ms=function l(){si||Ft(),si||(ms=l)};function ai(l){var f=s._main,_=0,k=0;try{var w=f(_,k);return ft(w,!0),w}catch(L){return Ns(L)}}function Ft(l){if(cs>0||(Pn(),cs>0))return;function f(){si||(si=!0,s.calledRun=!0,!Ue&&(an(),on(),b(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),Mt&&ai(),rn()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),f()},1)):f()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();var Mt=!0;return s.noInitialRun&&(Mt=!1),Ft(),h.ready}})();const Qu=typeof window<"u"?window:global;Qu.HavokPhysics=Yu;const t1={...bu,enhanceApp({app:c}){c.component("demo-preview",Ku)}};export{t1 as R};
