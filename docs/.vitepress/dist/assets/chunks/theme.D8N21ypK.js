import{d as It,o as V,c as J,r as Z,n as zi,a as Qs,t as ji,b as jt,w as ot,e as Lt,T as Bn,_ as Yt,u as $a,i as Ba,f as Ea,g as ta,h as ei,j as Y,k as T,l as Xs,m as Kn,p as yi,q as cs,s as En,v as Cs,x as ia,y as ea,z as Fa,A as Da,B as tn,F as Ki,C as Ye,D as ka,E as Fn,G as Rt,H as ks,I as Pa,J as Dn,K as Es,L as On,M as Oa,N as sa,O as Ra,P as za,Q as wa,R as Rn,S as ja,U as Na,V as Sa,W as Ga,X as Ua,Y as Wa,Z as qa,$ as Ja,a0 as Za}from"./framework.IymsUPEZ.js";const Ka=It({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(y){return(h,s)=>(V(),J("span",{class:zi(["VPBadge",h.type])},[Z(h.$slots,"default",{},()=>[Qs(ji(h.text),1)])],2))}}),Ya={key:0,class:"VPBackdrop"},Qa=It({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(y){return(h,s)=>(V(),jt(Bn,{name:"fade"},{default:ot(()=>[h.show?(V(),J("div",Ya)):Lt("",!0)]),_:1}))}}),Xa=Yt(Qa,[["__scopeId","data-v-56d85110"]]),fi=$a;function to(y,h){let s,b=!1;return()=>{s&&clearTimeout(s),b?s=setTimeout(y,h):(y(),(b=!0)&&setTimeout(()=>b=!1,h))}}function Yn(y){return/^\//.test(y)?y:`/${y}`}function na(y){const{pathname:h,search:s,hash:b,protocol:v}=new URL(y,"http://a.com");if(Ba(y)||y.startsWith("#")||!v.startsWith("http")||!Ea(h))return y;const{site:A}=fi(),O=h.endsWith("/")||h.endsWith(".html")?y:y.replace(/(?:(^\.+)\/)?.*$/,`$1${h.replace(/(\.md)?$/,A.value.cleanUrls?"":".html")}${s}${b}`);return ta(O)}function Sn({correspondingLink:y=!1}={}){const{site:h,localeIndex:s,page:b,theme:v,hash:A}=fi(),O=ei(()=>{var G,Ot;return{label:(G=h.value.locales[s.value])==null?void 0:G.label,link:((Ot=h.value.locales[s.value])==null?void 0:Ot.link)||(s.value==="root"?"/":`/${s.value}/`)}});return{localeLinks:ei(()=>Object.entries(h.value.locales).flatMap(([G,Ot])=>O.value.label===Ot.label?[]:{text:Ot.label,link:io(Ot.link||(G==="root"?"/":`/${G}/`),v.value.i18nRouting!==!1&&y,b.value.relativePath.slice(O.value.link.length-1),!h.value.cleanUrls)+A.value})),currentLang:O}}function io(y,h,s,b){return h?y.replace(/\/$/,"")+Yn(s.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,b?".html":"")):y}const eo={class:"NotFound"},so={class:"code"},no={class:"title"},ao={class:"quote"},oo={class:"action"},ro=["href","aria-label"],ho=It({__name:"NotFound",setup(y){const{theme:h}=fi(),{currentLang:s}=Sn();return(b,v)=>{var A,O,et,G,Ot;return V(),J("div",eo,[Y("p",so,ji(((A=T(h).notFound)==null?void 0:A.code)??"404"),1),Y("h1",no,ji(((O=T(h).notFound)==null?void 0:O.title)??"PAGE NOT FOUND"),1),v[0]||(v[0]=Y("div",{class:"divider"},null,-1)),Y("blockquote",ao,ji(((et=T(h).notFound)==null?void 0:et.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),Y("div",oo,[Y("a",{class:"link",href:T(ta)(T(s).link),"aria-label":((G=T(h).notFound)==null?void 0:G.linkLabel)??"go to home"},ji(((Ot=T(h).notFound)==null?void 0:Ot.linkText)??"Take me home"),9,ro)])])}}}),lo=Yt(ho,[["__scopeId","data-v-8d9859ca"]]);function Ma(y,h){if(Array.isArray(y))return An(y);if(y==null)return[];h=Yn(h);const s=Object.keys(y).sort((v,A)=>A.split("/").length-v.split("/").length).find(v=>h.startsWith(Yn(v))),b=s?y[s]:[];return Array.isArray(b)?An(b):An(b.items,b.base)}function co(y){const h=[];let s=0;for(const b in y){const v=y[b];if(v.items){s=h.push(v);continue}h[s]||h.push({items:[]}),h[s].items.push(v)}return h}function uo(y){const h=[];function s(b){for(const v of b)v.text&&v.link&&h.push({text:v.text,link:v.link,docFooterText:v.docFooterText}),v.items&&s(v.items)}return s(y),h}function Qn(y,h){return Array.isArray(h)?h.some(s=>Qn(y,s)):Xs(y,h.link)?!0:h.items?Qn(y,h.items):!1}function An(y,h){return[...y].map(s=>{const b={...s},v=b.base||h;return v&&b.link&&(b.link=v+b.link),b.items&&(b.items=An(b.items,v)),b})}function Vs(){const{frontmatter:y,page:h,theme:s}=fi(),b=Kn("(min-width: 960px)"),v=yi(!1),A=ei(()=>{const Bi=s.value.sidebar,ui=h.value.relativePath;return Bi?Ma(Bi,ui):[]}),O=yi(A.value);cs(A,(Bi,ui)=>{JSON.stringify(Bi)!==JSON.stringify(ui)&&(O.value=A.value)});const et=ei(()=>y.value.sidebar!==!1&&O.value.length>0&&y.value.layout!=="home"),G=ei(()=>Ot?y.value.aside==null?s.value.aside==="left":y.value.aside==="left":!1),Ot=ei(()=>y.value.layout==="home"?!1:y.value.aside!=null?!!y.value.aside:s.value.aside!==!1),ti=ei(()=>et.value&&b.value),qt=ei(()=>et.value?co(O.value):[]);function Ct(){v.value=!0}function si(){v.value=!1}function vi(){v.value?si():Ct()}return{isOpen:v,sidebar:O,sidebarGroups:qt,hasSidebar:et,hasAside:Ot,leftAside:G,isSidebarEnabled:ti,open:Ct,close:si,toggle:vi}}function po(y,h){let s;En(()=>{s=y.value?document.activeElement:void 0}),Cs(()=>{window.addEventListener("keyup",b)}),ia(()=>{window.removeEventListener("keyup",b)});function b(v){v.key==="Escape"&&y.value&&(h(),s==null||s.focus())}}function mo(y){const{page:h,hash:s}=fi(),b=yi(!1),v=ei(()=>y.value.collapsed!=null),A=ei(()=>!!y.value.link),O=yi(!1),et=()=>{O.value=Xs(h.value.relativePath,y.value.link)};cs([h,y,s],et),Cs(et);const G=ei(()=>O.value?!0:y.value.items?Qn(h.value.relativePath,y.value.items):!1),Ot=ei(()=>!!(y.value.items&&y.value.items.length));En(()=>{b.value=!!(v.value&&y.value.collapsed)}),ea(()=>{(O.value||G.value)&&(b.value=!1)});function ti(){v.value&&(b.value=!b.value)}return{collapsed:b,collapsible:v,isLink:A,isActiveLink:O,hasActiveLink:G,hasChildren:Ot,toggle:ti}}function fo(){const{hasSidebar:y}=Vs(),h=Kn("(min-width: 960px)"),s=Kn("(min-width: 1280px)");return{isAsideEnabled:ei(()=>!s.value&&!h.value?!1:y.value?s.value:h.value)}}const Xn=[];function La(y){return typeof y.outline=="object"&&!Array.isArray(y.outline)&&y.outline.label||y.outlineTitle||"On this page"}function aa(y){const h=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(s=>s.id&&s.hasChildNodes()).map(s=>{const b=Number(s.tagName[1]);return{element:s,title:yo(s),link:"#"+s.id,level:b}});return vo(h,y)}function yo(y){let h="";for(const s of y.childNodes)if(s.nodeType===1){if(s.classList.contains("VPBadge")||s.classList.contains("header-anchor")||s.classList.contains("ignore-header"))continue;h+=s.textContent}else s.nodeType===3&&(h+=s.textContent);return h.trim()}function vo(y,h){if(h===!1)return[];const s=(typeof h=="object"&&!Array.isArray(h)?h.level:h)||2,[b,v]=typeof s=="number"?[s,s]:s==="deep"?[2,6]:s;return xo(y,b,v)}function _o(y,h){const{isAsideEnabled:s}=fo(),b=to(A,100);let v=null;Cs(()=>{requestAnimationFrame(A),window.addEventListener("scroll",b)}),Fa(()=>{O(location.hash)}),ia(()=>{window.removeEventListener("scroll",b)});function A(){if(!s.value)return;const et=window.scrollY,G=window.innerHeight,Ot=document.body.offsetHeight,ti=Math.abs(et+G-Ot)<1,qt=Xn.map(({element:si,link:vi})=>({link:vi,top:bo(si)})).filter(({top:si})=>!Number.isNaN(si)).sort((si,vi)=>si.top-vi.top);if(!qt.length){O(null);return}if(et<1){O(null);return}if(ti){O(qt[qt.length-1].link);return}let Ct=null;for(const{link:si,top:vi}of qt){if(vi>et+Da()+4)break;Ct=si}O(Ct)}function O(et){v&&v.classList.remove("active"),et==null?v=null:v=y.value.querySelector(`a[href="${decodeURIComponent(et)}"]`);const G=v;G?(G.classList.add("active"),h.value.style.top=G.offsetTop+39+"px",h.value.style.opacity="1"):(h.value.style.top="33px",h.value.style.opacity="0")}}function bo(y){let h=0;for(;y!==document.body;){if(y===null)return NaN;h+=y.offsetTop,y=y.offsetParent}return h}function xo(y,h,s){Xn.length=0;const b=[],v=[];return y.forEach(A=>{const O={...A,children:[]};let et=v[v.length-1];for(;et&&et.level>=O.level;)v.pop(),et=v[v.length-1];if(O.element.classList.contains("ignore-header")||et&&"shouldIgnore"in et){v.push({level:O.level,shouldIgnore:!0});return}O.level>s||O.level<h||(Xn.push({element:O.element,link:O.link}),et?et.children.push(O):b.push(O),v.push(O))}),b}const go=["href","title"],ko=It({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(y){function h({target:s}){const b=s.href.split("#")[1],v=document.getElementById(decodeURIComponent(b));v==null||v.focus({preventScroll:!0})}return(s,b)=>{const v=tn("VPDocOutlineItem",!0);return V(),J("ul",{class:zi(["VPDocOutlineItem",s.root?"root":"nested"])},[(V(!0),J(Ki,null,Ye(s.headers,({children:A,link:O,title:et})=>(V(),J("li",null,[Y("a",{class:"outline-link",href:O,onClick:h,title:et},ji(et),9,go),A!=null&&A.length?(V(),jt(v,{key:0,headers:A},null,8,["headers"])):Lt("",!0)]))),256))],2)}}}),Ca=Yt(ko,[["__scopeId","data-v-b34beec7"]]),Po={class:"content"},zo={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},wo=It({__name:"VPDocAsideOutline",setup(y){const{frontmatter:h,theme:s}=fi(),b=ka([]);Fn(()=>{b.value=aa(h.value.outline??s.value.outline)});const v=yi(),A=yi();return _o(v,A),(O,et)=>(V(),J("nav",{"aria-labelledby":"doc-outline-aria-label",class:zi(["VPDocAsideOutline",{"has-outline":b.value.length>0}]),ref_key:"container",ref:v},[Y("div",Po,[Y("div",{class:"outline-marker",ref_key:"marker",ref:A},null,512),Y("div",zo,ji(T(La)(T(s))),1),Rt(Ca,{headers:b.value,root:!0},null,8,["headers"])])],2))}}),No=Yt(wo,[["__scopeId","data-v-0c1830f0"]]),So={class:"VPDocAsideCarbonAds"},Mo=It({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(y){const h=()=>null;return(s,b)=>(V(),J("div",So,[Rt(T(h),{"carbon-ads":s.carbonAds},null,8,["carbon-ads"])]))}}),Lo={class:"VPDocAside"},Co=It({__name:"VPDocAside",setup(y){const{theme:h}=fi();return(s,b)=>(V(),J("div",Lo,[Z(s.$slots,"aside-top",{},void 0,!0),Z(s.$slots,"aside-outline-before",{},void 0,!0),Rt(No),Z(s.$slots,"aside-outline-after",{},void 0,!0),b[0]||(b[0]=Y("div",{class:"spacer"},null,-1)),Z(s.$slots,"aside-ads-before",{},void 0,!0),T(h).carbonAds?(V(),jt(Mo,{key:0,"carbon-ads":T(h).carbonAds},null,8,["carbon-ads"])):Lt("",!0),Z(s.$slots,"aside-ads-after",{},void 0,!0),Z(s.$slots,"aside-bottom",{},void 0,!0)]))}}),Vo=Yt(Co,[["__scopeId","data-v-a2caa428"]]);function Io(){const{theme:y,page:h}=fi();return ei(()=>{const{text:s="Edit this page",pattern:b=""}=y.value.editLink||{};let v;return typeof b=="function"?v=b(h.value):v=b.replace(/:path/g,h.value.filePath),{url:v,text:s}})}function Ho(){const{page:y,theme:h,frontmatter:s}=fi();return ei(()=>{var Ot,ti,qt,Ct,si,vi,Bi,ui;const b=Ma(h.value.sidebar,y.value.relativePath),v=uo(b),A=To(v,Pe=>Pe.link.replace(/[?#].*$/,"")),O=A.findIndex(Pe=>Xs(y.value.relativePath,Pe.link)),et=((Ot=h.value.docFooter)==null?void 0:Ot.prev)===!1&&!s.value.prev||s.value.prev===!1,G=((ti=h.value.docFooter)==null?void 0:ti.next)===!1&&!s.value.next||s.value.next===!1;return{prev:et?void 0:{text:(typeof s.value.prev=="string"?s.value.prev:typeof s.value.prev=="object"?s.value.prev.text:void 0)??((qt=A[O-1])==null?void 0:qt.docFooterText)??((Ct=A[O-1])==null?void 0:Ct.text),link:(typeof s.value.prev=="object"?s.value.prev.link:void 0)??((si=A[O-1])==null?void 0:si.link)},next:G?void 0:{text:(typeof s.value.next=="string"?s.value.next:typeof s.value.next=="object"?s.value.next.text:void 0)??((vi=A[O+1])==null?void 0:vi.docFooterText)??((Bi=A[O+1])==null?void 0:Bi.text),link:(typeof s.value.next=="object"?s.value.next.link:void 0)??((ui=A[O+1])==null?void 0:ui.link)}}})}function To(y,h){const s=new Set;return y.filter(b=>{const v=h(b);return s.has(v)?!1:s.add(v)})}const Ps=It({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(y){const h=y,s=ei(()=>h.tag??(h.href?"a":"span")),b=ei(()=>h.href&&Pa.test(h.href)||h.target==="_blank");return(v,A)=>(V(),jt(ks(s.value),{class:zi(["VPLink",{link:v.href,"vp-external-link-icon":b.value,"no-icon":v.noIcon}]),href:v.href?T(na)(v.href):void 0,target:v.target??(b.value?"_blank":void 0),rel:v.rel??(b.value?"noreferrer":void 0)},{default:ot(()=>[Z(v.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),Ao={class:"VPLastUpdated"},$o=["datetime"],Bo=It({__name:"VPDocFooterLastUpdated",setup(y){const{theme:h,page:s,lang:b}=fi(),v=ei(()=>new Date(s.value.lastUpdated)),A=ei(()=>v.value.toISOString()),O=yi("");return Cs(()=>{En(()=>{var et,G,Ot;O.value=new Intl.DateTimeFormat((G=(et=h.value.lastUpdated)==null?void 0:et.formatOptions)!=null&&G.forceLocale?b.value:void 0,((Ot=h.value.lastUpdated)==null?void 0:Ot.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(v.value)})}),(et,G)=>{var Ot;return V(),J("p",Ao,[Qs(ji(((Ot=T(h).lastUpdated)==null?void 0:Ot.text)||T(h).lastUpdatedText||"Last updated")+": ",1),Y("time",{datetime:A.value},ji(O.value),9,$o)])}}}),Eo=Yt(Bo,[["__scopeId","data-v-d18cbb3f"]]),Fo={key:0,class:"VPDocFooter"},Do={key:0,class:"edit-info"},Oo={key:0,class:"edit-link"},Ro={key:1,class:"last-updated"},jo={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},Go={class:"pager"},Uo=["innerHTML"],Wo=["innerHTML"],qo={class:"pager"},Jo=["innerHTML"],Zo=["innerHTML"],Ko=It({__name:"VPDocFooter",setup(y){const{theme:h,page:s,frontmatter:b}=fi(),v=Io(),A=Ho(),O=ei(()=>h.value.editLink&&b.value.editLink!==!1),et=ei(()=>s.value.lastUpdated),G=ei(()=>O.value||et.value||A.value.prev||A.value.next);return(Ot,ti)=>{var qt,Ct,si,vi;return G.value?(V(),J("footer",Fo,[Z(Ot.$slots,"doc-footer-before",{},void 0,!0),O.value||et.value?(V(),J("div",Do,[O.value?(V(),J("div",Oo,[Rt(Ps,{class:"edit-link-button",href:T(v).url,"no-icon":!0},{default:ot(()=>[ti[0]||(ti[0]=Y("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),Qs(" "+ji(T(v).text),1)]),_:1},8,["href"])])):Lt("",!0),et.value?(V(),J("div",Ro,[Rt(Eo)])):Lt("",!0)])):Lt("",!0),(qt=T(A).prev)!=null&&qt.link||(Ct=T(A).next)!=null&&Ct.link?(V(),J("nav",jo,[ti[1]||(ti[1]=Y("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),Y("div",Go,[(si=T(A).prev)!=null&&si.link?(V(),jt(Ps,{key:0,class:"pager-link prev",href:T(A).prev.link},{default:ot(()=>{var Bi;return[Y("span",{class:"desc",innerHTML:((Bi=T(h).docFooter)==null?void 0:Bi.prev)||"Previous page"},null,8,Uo),Y("span",{class:"title",innerHTML:T(A).prev.text},null,8,Wo)]}),_:1},8,["href"])):Lt("",!0)]),Y("div",qo,[(vi=T(A).next)!=null&&vi.link?(V(),jt(Ps,{key:0,class:"pager-link next",href:T(A).next.link},{default:ot(()=>{var Bi;return[Y("span",{class:"desc",innerHTML:((Bi=T(h).docFooter)==null?void 0:Bi.next)||"Next page"},null,8,Jo),Y("span",{class:"title",innerHTML:T(A).next.text},null,8,Zo)]}),_:1},8,["href"])):Lt("",!0)])])):Lt("",!0)])):Lt("",!0)}}}),Yo=Yt(Ko,[["__scopeId","data-v-afb6f860"]]),Qo={class:"container"},Xo={class:"aside-container"},tr={class:"aside-content"},ir={class:"content"},er={class:"content-container"},sr={class:"main"},nr=It({__name:"VPDoc",setup(y){const{theme:h}=fi(),s=Dn(),{hasSidebar:b,hasAside:v,leftAside:A}=Vs(),O=ei(()=>s.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(et,G)=>{const Ot=tn("Content");return V(),J("div",{class:zi(["VPDoc",{"has-sidebar":T(b),"has-aside":T(v)}])},[Z(et.$slots,"doc-top",{},void 0,!0),Y("div",Qo,[T(v)?(V(),J("div",{key:0,class:zi(["aside",{"left-aside":T(A)}])},[G[0]||(G[0]=Y("div",{class:"aside-curtain"},null,-1)),Y("div",Xo,[Y("div",tr,[Rt(Vo,null,{"aside-top":ot(()=>[Z(et.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ot(()=>[Z(et.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ot(()=>[Z(et.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[Z(et.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[Z(et.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[Z(et.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):Lt("",!0),Y("div",ir,[Y("div",er,[Z(et.$slots,"doc-before",{},void 0,!0),Y("main",sr,[Rt(Ot,{class:zi(["vp-doc",[O.value,T(h).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),Rt(Yo,null,{"doc-footer-before":ot(()=>[Z(et.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),Z(et.$slots,"doc-after",{},void 0,!0)])])]),Z(et.$slots,"doc-bottom",{},void 0,!0)],2)}}}),ar=Yt(nr,[["__scopeId","data-v-b2eb44bd"]]),or=It({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(y){const h=y,s=ei(()=>h.href&&Pa.test(h.href)),b=ei(()=>h.tag||(h.href?"a":"button"));return(v,A)=>(V(),jt(ks(b.value),{class:zi(["VPButton",[v.size,v.theme]]),href:v.href?T(na)(v.href):void 0,target:h.target??(s.value?"_blank":void 0),rel:h.rel??(s.value?"noreferrer":void 0)},{default:ot(()=>[Qs(ji(v.text),1)]),_:1},8,["class","href","target","rel"]))}}),rr=Yt(or,[["__scopeId","data-v-add215d8"]]),hr=["src","alt"],lr=It({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(y){return(h,s)=>{const b=tn("VPImage",!0);return h.image?(V(),J(Ki,{key:0},[typeof h.image=="string"||"src"in h.image?(V(),J("img",Es({key:0,class:"VPImage"},typeof h.image=="string"?h.$attrs:{...h.image,...h.$attrs},{src:T(ta)(typeof h.image=="string"?h.image:h.image.src),alt:h.alt??(typeof h.image=="string"?"":h.image.alt||"")}),null,16,hr)):(V(),J(Ki,{key:1},[Rt(b,Es({class:"dark",image:h.image.dark,alt:h.image.alt},h.$attrs),null,16,["image","alt"]),Rt(b,Es({class:"light",image:h.image.light,alt:h.image.alt},h.$attrs),null,16,["image","alt"])],64))],64)):Lt("",!0)}}}),$n=Yt(lr,[["__scopeId","data-v-b5b96cad"]]),cr={class:"container"},ur={class:"main"},pr={key:0,class:"name"},mr=["innerHTML"],dr=["innerHTML"],fr=["innerHTML"],yr={key:0,class:"actions"},vr={key:0,class:"image"},_r={class:"image-container"},br=It({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(y){const h=On("hero-image-slot-exists");return(s,b)=>(V(),J("div",{class:zi(["VPHero",{"has-image":s.image||T(h)}])},[Y("div",cr,[Y("div",ur,[Z(s.$slots,"home-hero-info-before",{},void 0,!0),Z(s.$slots,"home-hero-info",{},()=>[s.name?(V(),J("h1",pr,[Y("span",{innerHTML:s.name,class:"clip"},null,8,mr)])):Lt("",!0),s.text?(V(),J("p",{key:1,innerHTML:s.text,class:"text"},null,8,dr)):Lt("",!0),s.tagline?(V(),J("p",{key:2,innerHTML:s.tagline,class:"tagline"},null,8,fr)):Lt("",!0)],!0),Z(s.$slots,"home-hero-info-after",{},void 0,!0),s.actions?(V(),J("div",yr,[(V(!0),J(Ki,null,Ye(s.actions,v=>(V(),J("div",{key:v.link,class:"action"},[Rt(rr,{tag:"a",size:"medium",theme:v.theme,text:v.text,href:v.link,target:v.target,rel:v.rel},null,8,["theme","text","href","target","rel"])]))),128))])):Lt("",!0),Z(s.$slots,"home-hero-actions-after",{},void 0,!0)]),s.image||T(h)?(V(),J("div",vr,[Y("div",_r,[b[0]||(b[0]=Y("div",{class:"image-bg"},null,-1)),Z(s.$slots,"home-hero-image",{},()=>[s.image?(V(),jt($n,{key:0,class:"image-src",image:s.image},null,8,["image"])):Lt("",!0)],!0)])])):Lt("",!0)])],2))}}),xr=Yt(br,[["__scopeId","data-v-1ac9b4cd"]]),gr=It({__name:"VPHomeHero",setup(y){const{frontmatter:h}=fi();return(s,b)=>T(h).hero?(V(),jt(xr,{key:0,class:"VPHomeHero",name:T(h).hero.name,text:T(h).hero.text,tagline:T(h).hero.tagline,image:T(h).hero.image,actions:T(h).hero.actions},{"home-hero-info-before":ot(()=>[Z(s.$slots,"home-hero-info-before")]),"home-hero-info":ot(()=>[Z(s.$slots,"home-hero-info")]),"home-hero-info-after":ot(()=>[Z(s.$slots,"home-hero-info-after")]),"home-hero-actions-after":ot(()=>[Z(s.$slots,"home-hero-actions-after")]),"home-hero-image":ot(()=>[Z(s.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):Lt("",!0)}}),kr={class:"box"},Pr={key:0,class:"icon"},zr=["innerHTML"],wr=["innerHTML"],Nr=["innerHTML"],Sr={key:4,class:"link-text"},Mr={class:"link-text-value"},Lr=It({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(y){return(h,s)=>(V(),jt(Ps,{class:"VPFeature",href:h.link,rel:h.rel,target:h.target,"no-icon":!0,tag:h.link?"a":"div"},{default:ot(()=>[Y("article",kr,[typeof h.icon=="object"&&h.icon.wrap?(V(),J("div",Pr,[Rt($n,{image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])])):typeof h.icon=="object"?(V(),jt($n,{key:1,image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])):h.icon?(V(),J("div",{key:2,class:"icon",innerHTML:h.icon},null,8,zr)):Lt("",!0),Y("h2",{class:"title",innerHTML:h.title},null,8,wr),h.details?(V(),J("p",{key:3,class:"details",innerHTML:h.details},null,8,Nr)):Lt("",!0),h.linkText?(V(),J("div",Sr,[Y("p",Mr,[Qs(ji(h.linkText)+" ",1),s[0]||(s[0]=Y("span",{class:"vpi-arrow-right link-text-icon"},null,-1))])])):Lt("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),Cr=Yt(Lr,[["__scopeId","data-v-5314f4c1"]]),Vr={key:0,class:"VPFeatures"},Ir={class:"container"},Hr={class:"items"},Tr=It({__name:"VPFeatures",props:{features:{}},setup(y){const h=y,s=ei(()=>{const b=h.features.length;if(b){if(b===2)return"grid-2";if(b===3)return"grid-3";if(b%3===0)return"grid-6";if(b>3)return"grid-4"}else return});return(b,v)=>b.features?(V(),J("div",Vr,[Y("div",Ir,[Y("div",Hr,[(V(!0),J(Ki,null,Ye(b.features,A=>(V(),J("div",{key:A.title,class:zi(["item",[s.value]])},[Rt(Cr,{icon:A.icon,title:A.title,details:A.details,link:A.link,"link-text":A.linkText,rel:A.rel,target:A.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):Lt("",!0)}}),Ar=Yt(Tr,[["__scopeId","data-v-d4f59a21"]]),$r=It({__name:"VPHomeFeatures",setup(y){const{frontmatter:h}=fi();return(s,b)=>T(h).features?(V(),jt(Ar,{key:0,class:"VPHomeFeatures",features:T(h).features},null,8,["features"])):Lt("",!0)}}),Br=It({__name:"VPHomeContent",setup(y){const{width:h}=Oa({initialWidth:0,includeScrollbar:!1});return(s,b)=>(V(),J("div",{class:"vp-doc container",style:sa(T(h)?{"--vp-offset":`calc(50% - ${T(h)/2}px)`}:{})},[Z(s.$slots,"default",{},void 0,!0)],4))}}),Er=Yt(Br,[["__scopeId","data-v-b6b67434"]]),Fr={class:"VPHome"},Dr=It({__name:"VPHome",setup(y){const{frontmatter:h}=fi();return(s,b)=>{const v=tn("Content");return V(),J("div",Fr,[Z(s.$slots,"home-hero-before",{},void 0,!0),Rt(gr,null,{"home-hero-info-before":ot(()=>[Z(s.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[Z(s.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[Z(s.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[Z(s.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[Z(s.$slots,"home-hero-image",{},void 0,!0)]),_:3}),Z(s.$slots,"home-hero-after",{},void 0,!0),Z(s.$slots,"home-features-before",{},void 0,!0),Rt($r),Z(s.$slots,"home-features-after",{},void 0,!0),T(h).markdownStyles!==!1?(V(),jt(Er,{key:0},{default:ot(()=>[Rt(v)]),_:1})):(V(),jt(v,{key:1}))])}}}),Or=Yt(Dr,[["__scopeId","data-v-2fc47b3b"]]),Rr={},jr={class:"VPPage"};function Gr(y,h){const s=tn("Content");return V(),J("div",jr,[Z(y.$slots,"page-top"),Rt(s),Z(y.$slots,"page-bottom")])}const Ur=Yt(Rr,[["render",Gr]]),Wr=It({__name:"VPContent",setup(y){const{page:h,frontmatter:s}=fi(),{hasSidebar:b}=Vs();return(v,A)=>(V(),J("div",{class:zi(["VPContent",{"has-sidebar":T(b),"is-home":T(s).layout==="home"}]),id:"VPContent"},[T(h).isNotFound?Z(v.$slots,"not-found",{key:0},()=>[Rt(lo)],!0):T(s).layout==="page"?(V(),jt(Ur,{key:1},{"page-top":ot(()=>[Z(v.$slots,"page-top",{},void 0,!0)]),"page-bottom":ot(()=>[Z(v.$slots,"page-bottom",{},void 0,!0)]),_:3})):T(s).layout==="home"?(V(),jt(Or,{key:2},{"home-hero-before":ot(()=>[Z(v.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":ot(()=>[Z(v.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[Z(v.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[Z(v.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[Z(v.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[Z(v.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ot(()=>[Z(v.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ot(()=>[Z(v.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ot(()=>[Z(v.$slots,"home-features-after",{},void 0,!0)]),_:3})):T(s).layout&&T(s).layout!=="doc"?(V(),jt(ks(T(s).layout),{key:3})):(V(),jt(ar,{key:4},{"doc-top":ot(()=>[Z(v.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":ot(()=>[Z(v.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":ot(()=>[Z(v.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ot(()=>[Z(v.$slots,"doc-before",{},void 0,!0)]),"doc-after":ot(()=>[Z(v.$slots,"doc-after",{},void 0,!0)]),"aside-top":ot(()=>[Z(v.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":ot(()=>[Z(v.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[Z(v.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[Z(v.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[Z(v.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":ot(()=>[Z(v.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),qr=Yt(Wr,[["__scopeId","data-v-0dd86371"]]),Jr={class:"container"},Zr=["innerHTML"],Kr=["innerHTML"],Yr=It({__name:"VPFooter",setup(y){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Vs();return(v,A)=>T(h).footer&&T(s).footer!==!1?(V(),J("footer",{key:0,class:zi(["VPFooter",{"has-sidebar":T(b)}])},[Y("div",Jr,[T(h).footer.message?(V(),J("p",{key:0,class:"message",innerHTML:T(h).footer.message},null,8,Zr)):Lt("",!0),T(h).footer.copyright?(V(),J("p",{key:1,class:"copyright",innerHTML:T(h).footer.copyright},null,8,Kr)):Lt("",!0)])],2)):Lt("",!0)}}),Qr=Yt(Yr,[["__scopeId","data-v-04948523"]]);function Xr(){const{theme:y,frontmatter:h}=fi(),s=ka([]),b=ei(()=>s.value.length>0);return Fn(()=>{s.value=aa(h.value.outline??y.value.outline)}),{headers:s,hasLocalNav:b}}const th={class:"menu-text"},ih={class:"header"},eh={class:"outline"},sh=It({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(y){const h=y,{theme:s}=fi(),b=yi(!1),v=yi(0),A=yi(),O=yi();function et(qt){var Ct;(Ct=A.value)!=null&&Ct.contains(qt.target)||(b.value=!1)}cs(b,qt=>{if(qt){document.addEventListener("click",et);return}document.removeEventListener("click",et)}),Ra("Escape",()=>{b.value=!1}),Fn(()=>{b.value=!1});function G(){b.value=!b.value,v.value=window.innerHeight+Math.min(window.scrollY-h.navHeight,0)}function Ot(qt){qt.target.classList.contains("outline-link")&&(O.value&&(O.value.style.transition="none"),za(()=>{b.value=!1}))}function ti(){b.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(qt,Ct)=>(V(),J("div",{class:"VPLocalNavOutlineDropdown",style:sa({"--vp-vh":v.value+"px"}),ref_key:"main",ref:A},[qt.headers.length>0?(V(),J("button",{key:0,onClick:G,class:zi({open:b.value})},[Y("span",th,ji(T(La)(T(s))),1),Ct[0]||(Ct[0]=Y("span",{class:"vpi-chevron-right icon"},null,-1))],2)):(V(),J("button",{key:1,onClick:ti},ji(T(s).returnToTopLabel||"Return to top"),1)),Rt(Bn,{name:"flyout"},{default:ot(()=>[b.value?(V(),J("div",{key:0,ref_key:"items",ref:O,class:"items",onClick:Ot},[Y("div",ih,[Y("a",{class:"top-link",href:"#",onClick:ti},ji(T(s).returnToTopLabel||"Return to top"),1)]),Y("div",eh,[Rt(Ca,{headers:qt.headers},null,8,["headers"])])],512)):Lt("",!0)]),_:1})],4))}}),nh=Yt(sh,[["__scopeId","data-v-32bde505"]]),ah={class:"container"},oh=["aria-expanded"],rh={class:"menu-text"},hh=It({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(y){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Vs(),{headers:v}=Xr(),{y:A}=wa(),O=yi(0);Cs(()=>{O.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),Fn(()=>{v.value=aa(s.value.outline??h.value.outline)});const et=ei(()=>v.value.length===0),G=ei(()=>et.value&&!b.value),Ot=ei(()=>({VPLocalNav:!0,"has-sidebar":b.value,empty:et.value,fixed:G.value}));return(ti,qt)=>T(s).layout!=="home"&&(!G.value||T(A)>=O.value)?(V(),J("div",{key:0,class:zi(Ot.value)},[Y("div",ah,[T(b)?(V(),J("button",{key:0,class:"menu","aria-expanded":ti.open,"aria-controls":"VPSidebarNav",onClick:qt[0]||(qt[0]=Ct=>ti.$emit("open-menu"))},[qt[1]||(qt[1]=Y("span",{class:"vpi-align-left menu-icon"},null,-1)),Y("span",rh,ji(T(h).sidebarMenuLabel||"Menu"),1)],8,oh)):Lt("",!0),Rt(nh,{headers:T(v),navHeight:O.value},null,8,["headers","navHeight"])])],2)):Lt("",!0)}}),lh=Yt(hh,[["__scopeId","data-v-109aa1d1"]]);function ch(){const y=yi(!1);function h(){y.value=!0,window.addEventListener("resize",v)}function s(){y.value=!1,window.removeEventListener("resize",v)}function b(){y.value?s():h()}function v(){window.outerWidth>=768&&s()}const A=Dn();return cs(()=>A.path,s),{isScreenOpen:y,openScreen:h,closeScreen:s,toggleScreen:b}}const uh={},ph={class:"VPSwitch",type:"button",role:"switch"},mh={class:"check"},dh={key:0,class:"icon"};function fh(y,h){return V(),J("button",ph,[Y("span",mh,[y.$slots.default?(V(),J("span",dh,[Z(y.$slots,"default",{},void 0,!0)])):Lt("",!0)])])}const yh=Yt(uh,[["render",fh],["__scopeId","data-v-2d3dff65"]]),vh=It({__name:"VPSwitchAppearance",setup(y){const{isDark:h,theme:s}=fi(),b=On("toggle-appearance",()=>{h.value=!h.value}),v=yi("");return ea(()=>{v.value=h.value?s.value.lightModeSwitchTitle||"Switch to light theme":s.value.darkModeSwitchTitle||"Switch to dark theme"}),(A,O)=>(V(),jt(yh,{title:v.value,class:"VPSwitchAppearance","aria-checked":T(h),onClick:T(b)},{default:ot(()=>O[0]||(O[0]=[Y("span",{class:"vpi-sun sun"},null,-1),Y("span",{class:"vpi-moon moon"},null,-1)])),_:1},8,["title","aria-checked","onClick"]))}}),oa=Yt(vh,[["__scopeId","data-v-ad44012e"]]),_h={key:0,class:"VPNavBarAppearance"},bh=It({__name:"VPNavBarAppearance",setup(y){const{site:h}=fi();return(s,b)=>T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),J("div",_h,[Rt(oa)])):Lt("",!0)}}),xh=Yt(bh,[["__scopeId","data-v-479af6bd"]]),ra=yi();let Va=!1,Jn=0;function gh(y){const h=yi(!1);if(Rn){!Va&&kh(),Jn++;const s=cs(ra,b=>{var v,A,O;b===y.el.value||(v=y.el.value)!=null&&v.contains(b)?(h.value=!0,(A=y.onFocus)==null||A.call(y)):(h.value=!1,(O=y.onBlur)==null||O.call(y))});ia(()=>{s(),Jn--,Jn||Ph()})}return ja(h)}function kh(){document.addEventListener("focusin",Ia),Va=!0,ra.value=document.activeElement}function Ph(){document.removeEventListener("focusin",Ia)}function Ia(){ra.value=document.activeElement}const zh={class:"VPMenuLink"},wh=["innerHTML"],Nh=It({__name:"VPMenuLink",props:{item:{}},setup(y){const{page:h}=fi();return(s,b)=>(V(),J("div",zh,[Rt(Ps,{class:zi({active:T(Xs)(T(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,wh)]),_:1},8,["class","href","target","rel","no-icon"])]))}}),jn=Yt(Nh,[["__scopeId","data-v-e37bf191"]]),Sh={class:"VPMenuGroup"},Mh={key:0,class:"title"},Lh=It({__name:"VPMenuGroup",props:{text:{},items:{}},setup(y){return(h,s)=>(V(),J("div",Sh,[h.text?(V(),J("p",Mh,ji(h.text),1)):Lt("",!0),(V(!0),J(Ki,null,Ye(h.items,b=>(V(),J(Ki,null,["link"in b?(V(),jt(jn,{key:0,item:b},null,8,["item"])):Lt("",!0)],64))),256))]))}}),Ch=Yt(Lh,[["__scopeId","data-v-7fda3df1"]]),Vh={class:"VPMenu"},Ih={key:0,class:"items"},Hh=It({__name:"VPMenu",props:{items:{}},setup(y){return(h,s)=>(V(),J("div",Vh,[h.items?(V(),J("div",Ih,[(V(!0),J(Ki,null,Ye(h.items,b=>(V(),J(Ki,{key:JSON.stringify(b)},["link"in b?(V(),jt(jn,{key:0,item:b},null,8,["item"])):"component"in b?(V(),jt(ks(b.component),Es({key:1,ref_for:!0},b.props),null,16)):(V(),jt(Ch,{key:2,text:b.text,items:b.items},null,8,["text","items"]))],64))),128))])):Lt("",!0),Z(h.$slots,"default",{},void 0,!0)]))}}),Th=Yt(Hh,[["__scopeId","data-v-0dba8e39"]]),Ah=["aria-expanded","aria-label"],$h={key:0,class:"text"},Bh=["innerHTML"],Eh={key:1,class:"vpi-more-horizontal icon"},Fh={class:"menu"},Dh=It({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(y){const h=yi(!1),s=yi();gh({el:s,onBlur:b});function b(){h.value=!1}return(v,A)=>(V(),J("div",{class:"VPFlyout",ref_key:"el",ref:s,onMouseenter:A[1]||(A[1]=O=>h.value=!0),onMouseleave:A[2]||(A[2]=O=>h.value=!1)},[Y("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":h.value,"aria-label":v.label,onClick:A[0]||(A[0]=O=>h.value=!h.value)},[v.button||v.icon?(V(),J("span",$h,[v.icon?(V(),J("span",{key:0,class:zi([v.icon,"option-icon"])},null,2)):Lt("",!0),v.button?(V(),J("span",{key:1,innerHTML:v.button},null,8,Bh)):Lt("",!0),A[3]||(A[3]=Y("span",{class:"vpi-chevron-down text-icon"},null,-1))])):(V(),J("span",Eh))],8,Ah),Y("div",Fh,[Rt(Th,{items:v.items},{default:ot(()=>[Z(v.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),ha=Yt(Dh,[["__scopeId","data-v-a312e9e9"]]),Oh=["href","aria-label","innerHTML"],Rh=It({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(y){const h=y,s=yi();Cs(async()=>{var A;await za();const v=(A=s.value)==null?void 0:A.children[0];v instanceof HTMLElement&&v.className.startsWith("vpi-social-")&&(getComputedStyle(v).maskImage||getComputedStyle(v).webkitMaskImage)==="none"&&v.style.setProperty("--icon",`url('https://api.iconify.design/simple-icons/${h.icon}.svg')`)});const b=ei(()=>typeof h.icon=="object"?h.icon.svg:`<span class="vpi-social-${h.icon}"></span>`);return(v,A)=>(V(),J("a",{ref_key:"el",ref:s,class:"VPSocialLink no-icon",href:v.link,"aria-label":v.ariaLabel??(typeof v.icon=="string"?v.icon:""),target:"_blank",rel:"noopener",innerHTML:b.value},null,8,Oh))}}),jh=Yt(Rh,[["__scopeId","data-v-6b58c92c"]]),Gh={class:"VPSocialLinks"},Uh=It({__name:"VPSocialLinks",props:{links:{}},setup(y){return(h,s)=>(V(),J("div",Gh,[(V(!0),J(Ki,null,Ye(h.links,({link:b,icon:v,ariaLabel:A})=>(V(),jt(jh,{key:b,icon:v,link:b,ariaLabel:A},null,8,["icon","link","ariaLabel"]))),128))]))}}),la=Yt(Uh,[["__scopeId","data-v-55096b87"]]),Wh={key:0,class:"group translations"},qh={class:"trans-title"},Jh={key:1,class:"group"},Zh={class:"item appearance"},Kh={class:"label"},Yh={class:"appearance-action"},Qh={key:2,class:"group"},Xh={class:"item social-links"},tl=It({__name:"VPNavBarExtra",setup(y){const{site:h,theme:s}=fi(),{localeLinks:b,currentLang:v}=Sn({correspondingLink:!0}),A=ei(()=>b.value.length&&v.value.label||h.value.appearance||s.value.socialLinks);return(O,et)=>A.value?(V(),jt(ha,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:ot(()=>[T(b).length&&T(v).label?(V(),J("div",Wh,[Y("p",qh,ji(T(v).label),1),(V(!0),J(Ki,null,Ye(T(b),G=>(V(),jt(jn,{key:G.link,item:G},null,8,["item"]))),128))])):Lt("",!0),T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),J("div",Jh,[Y("div",Zh,[Y("p",Kh,ji(T(s).darkModeSwitchLabel||"Appearance"),1),Y("div",Yh,[Rt(oa)])])])):Lt("",!0),T(s).socialLinks?(V(),J("div",Qh,[Y("div",Xh,[Rt(la,{class:"social-links-list",links:T(s).socialLinks},null,8,["links"])])])):Lt("",!0)]),_:1})):Lt("",!0)}}),il=Yt(tl,[["__scopeId","data-v-35b44de5"]]),el=["aria-expanded"],sl=It({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(y){return(h,s)=>(V(),J("button",{type:"button",class:zi(["VPNavBarHamburger",{active:h.active}]),"aria-label":"mobile navigation","aria-expanded":h.active,"aria-controls":"VPNavScreen",onClick:s[0]||(s[0]=b=>h.$emit("click"))},s[1]||(s[1]=[Y("span",{class:"container"},[Y("span",{class:"top"}),Y("span",{class:"middle"}),Y("span",{class:"bottom"})],-1)]),10,el))}}),nl=Yt(sl,[["__scopeId","data-v-ffd84aee"]]),al=["innerHTML"],ol=It({__name:"VPNavBarMenuLink",props:{item:{}},setup(y){const{page:h}=fi();return(s,b)=>(V(),jt(Ps,{class:zi({VPNavBarMenuLink:!0,active:T(Xs)(T(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,tabindex:"0"},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,al)]),_:1},8,["class","href","target","rel","no-icon"]))}}),rl=Yt(ol,[["__scopeId","data-v-433daf3f"]]),hl=It({__name:"VPNavBarMenuGroup",props:{item:{}},setup(y){const h=y,{page:s}=fi(),b=A=>"component"in A?!1:"link"in A?Xs(s.value.relativePath,A.link,!!h.item.activeMatch):A.items.some(b),v=ei(()=>b(h.item));return(A,O)=>(V(),jt(ha,{class:zi({VPNavBarMenuGroup:!0,active:T(Xs)(T(s).relativePath,A.item.activeMatch,!!A.item.activeMatch)||v.value}),button:A.item.text,items:A.item.items},null,8,["class","button","items"]))}}),ll={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},cl=It({__name:"VPNavBarMenu",setup(y){const{theme:h}=fi();return(s,b)=>T(h).nav?(V(),J("nav",ll,[b[0]||(b[0]=Y("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),(V(!0),J(Ki,null,Ye(T(h).nav,v=>(V(),J(Ki,{key:JSON.stringify(v)},["link"in v?(V(),jt(rl,{key:0,item:v},null,8,["item"])):"component"in v?(V(),jt(ks(v.component),Es({key:1,ref_for:!0},v.props),null,16)):(V(),jt(hl,{key:2,item:v},null,8,["item"]))],64))),128))])):Lt("",!0)}}),ul=Yt(cl,[["__scopeId","data-v-293e75d8"]]);function pl(y){const{localeIndex:h,theme:s}=fi();function b(v){var vi,Bi,ui;const A=v.split("."),O=(vi=s.value.search)==null?void 0:vi.options,et=O&&typeof O=="object",G=et&&((ui=(Bi=O.locales)==null?void 0:Bi[h.value])==null?void 0:ui.translations)||null,Ot=et&&O.translations||null;let ti=G,qt=Ot,Ct=y;const si=A.pop();for(const Pe of A){let De=null;const rs=Ct==null?void 0:Ct[Pe];rs&&(De=Ct=rs);const zs=qt==null?void 0:qt[Pe];zs&&(De=qt=zs);const Is=ti==null?void 0:ti[Pe];Is&&(De=ti=Is),rs||(Ct=De),zs||(qt=De),Is||(ti=De)}return(ti==null?void 0:ti[si])??(qt==null?void 0:qt[si])??(Ct==null?void 0:Ct[si])??""}return b}const ml=["aria-label"],dl={class:"DocSearch-Button-Container"},fl={class:"DocSearch-Button-Placeholder"},ga=It({__name:"VPNavBarSearchButton",setup(y){const s=pl({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(b,v)=>(V(),J("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":T(s)("button.buttonAriaLabel")},[Y("span",dl,[v[0]||(v[0]=Y("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1)),Y("span",fl,ji(T(s)("button.buttonText")),1)]),v[1]||(v[1]=Y("span",{class:"DocSearch-Button-Keys"},[Y("kbd",{class:"DocSearch-Button-Key"}),Y("kbd",{class:"DocSearch-Button-Key"},"K")],-1))],8,ml))}}),yl={class:"VPNavBarSearch"},vl={id:"local-search"},_l={key:1,id:"docsearch"},bl=It({__name:"VPNavBarSearch",setup(y){const h=()=>null,s=()=>null,{theme:b}=fi(),v=yi(!1),A=yi(!1);Cs(()=>{});function O(){v.value||(v.value=!0,setTimeout(et,16))}function et(){const ti=new Event("keydown");ti.key="k",ti.metaKey=!0,window.dispatchEvent(ti),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||et()},16)}const G=yi(!1),Ot="";return(ti,qt)=>{var Ct;return V(),J("div",yl,[T(Ot)==="local"?(V(),J(Ki,{key:0},[G.value?(V(),jt(T(h),{key:0,onClose:qt[0]||(qt[0]=si=>G.value=!1)})):Lt("",!0),Y("div",vl,[Rt(ga,{onClick:qt[1]||(qt[1]=si=>G.value=!0)})])],64)):T(Ot)==="algolia"?(V(),J(Ki,{key:1},[v.value?(V(),jt(T(s),{key:0,algolia:((Ct=T(b).search)==null?void 0:Ct.options)??T(b).algolia,onVnodeBeforeMount:qt[2]||(qt[2]=si=>A.value=!0)},null,8,["algolia"])):Lt("",!0),A.value?Lt("",!0):(V(),J("div",_l,[Rt(ga,{onClick:O})]))],64)):Lt("",!0)])}}}),xl=It({__name:"VPNavBarSocialLinks",setup(y){const{theme:h}=fi();return(s,b)=>T(h).socialLinks?(V(),jt(la,{key:0,class:"VPNavBarSocialLinks",links:T(h).socialLinks},null,8,["links"])):Lt("",!0)}}),gl=Yt(xl,[["__scopeId","data-v-133dd7ae"]]),kl=["href","rel","target"],Pl=["innerHTML"],zl={key:2},wl=It({__name:"VPNavBarTitle",setup(y){const{site:h,theme:s}=fi(),{hasSidebar:b}=Vs(),{currentLang:v}=Sn(),A=ei(()=>{var G;return typeof s.value.logoLink=="string"?s.value.logoLink:(G=s.value.logoLink)==null?void 0:G.link}),O=ei(()=>{var G;return typeof s.value.logoLink=="string"||(G=s.value.logoLink)==null?void 0:G.rel}),et=ei(()=>{var G;return typeof s.value.logoLink=="string"||(G=s.value.logoLink)==null?void 0:G.target});return(G,Ot)=>(V(),J("div",{class:zi(["VPNavBarTitle",{"has-sidebar":T(b)}])},[Y("a",{class:"title",href:A.value??T(na)(T(v).link),rel:O.value,target:et.value},[Z(G.$slots,"nav-bar-title-before",{},void 0,!0),T(s).logo?(V(),jt($n,{key:0,class:"logo",image:T(s).logo},null,8,["image"])):Lt("",!0),T(s).siteTitle?(V(),J("span",{key:1,innerHTML:T(s).siteTitle},null,8,Pl)):T(s).siteTitle===void 0?(V(),J("span",zl,ji(T(h).title),1)):Lt("",!0),Z(G.$slots,"nav-bar-title-after",{},void 0,!0)],8,kl)],2))}}),Nl=Yt(wl,[["__scopeId","data-v-99399193"]]),Sl={class:"items"},Ml={class:"title"},Ll=It({__name:"VPNavBarTranslations",setup(y){const{theme:h}=fi(),{localeLinks:s,currentLang:b}=Sn({correspondingLink:!0});return(v,A)=>T(s).length&&T(b).label?(V(),jt(ha,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:T(h).langMenuLabel||"Change language"},{default:ot(()=>[Y("div",Sl,[Y("p",Ml,ji(T(b).label),1),(V(!0),J(Ki,null,Ye(T(s),O=>(V(),jt(jn,{key:O.link,item:O},null,8,["item"]))),128))])]),_:1},8,["label"])):Lt("",!0)}}),Cl=Yt(Ll,[["__scopeId","data-v-62e7bfef"]]),Vl={class:"wrapper"},Il={class:"container"},Hl={class:"title"},Tl={class:"content"},Al={class:"content-body"},$l=It({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(y){const h=y,{y:s}=wa(),{hasSidebar:b}=Vs(),{frontmatter:v}=fi(),A=yi({});return ea(()=>{A.value={"has-sidebar":b.value,home:v.value.layout==="home",top:s.value===0,"screen-open":h.isScreenOpen}}),(O,et)=>(V(),J("div",{class:zi(["VPNavBar",A.value])},[Y("div",Vl,[Y("div",Il,[Y("div",Hl,[Rt(Nl,null,{"nav-bar-title-before":ot(()=>[Z(O.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[Z(O.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),Y("div",Tl,[Y("div",Al,[Z(O.$slots,"nav-bar-content-before",{},void 0,!0),Rt(bl,{class:"search"}),Rt(ul,{class:"menu"}),Rt(Cl,{class:"translations"}),Rt(xh,{class:"appearance"}),Rt(gl,{class:"social-links"}),Rt(il,{class:"extra"}),Z(O.$slots,"nav-bar-content-after",{},void 0,!0),Rt(nl,{class:"hamburger",active:O.isScreenOpen,onClick:et[0]||(et[0]=G=>O.$emit("toggle-screen"))},null,8,["active"])])])])]),et[1]||(et[1]=Y("div",{class:"divider"},[Y("div",{class:"divider-line"})],-1))],2))}}),Bl=Yt($l,[["__scopeId","data-v-9b91819e"]]),El={key:0,class:"VPNavScreenAppearance"},Fl={class:"text"},Dl=It({__name:"VPNavScreenAppearance",setup(y){const{site:h,theme:s}=fi();return(b,v)=>T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),J("div",El,[Y("p",Fl,ji(T(s).darkModeSwitchLabel||"Appearance"),1),Rt(oa)])):Lt("",!0)}}),Ol=Yt(Dl,[["__scopeId","data-v-c1751912"]]),Rl=["innerHTML"],jl=It({__name:"VPNavScreenMenuLink",props:{item:{}},setup(y){const h=On("close-screen");return(s,b)=>(V(),jt(Ps,{class:"VPNavScreenMenuLink",href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,onClick:T(h)},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,Rl)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),Gl=Yt(jl,[["__scopeId","data-v-6761ae87"]]),Ul=["innerHTML"],Wl=It({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(y){const h=On("close-screen");return(s,b)=>(V(),jt(Ps,{class:"VPNavScreenMenuGroupLink",href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,onClick:T(h)},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,Ul)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),Ha=Yt(Wl,[["__scopeId","data-v-9b2c3073"]]),ql={class:"VPNavScreenMenuGroupSection"},Jl={key:0,class:"title"},Zl=It({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(y){return(h,s)=>(V(),J("div",ql,[h.text?(V(),J("p",Jl,ji(h.text),1)):Lt("",!0),(V(!0),J(Ki,null,Ye(h.items,b=>(V(),jt(Ha,{key:b.text,item:b},null,8,["item"]))),128))]))}}),Kl=Yt(Zl,[["__scopeId","data-v-d33a0504"]]),Yl=["aria-controls","aria-expanded"],Ql=["innerHTML"],Xl=["id"],tc={key:0,class:"item"},ic={key:1,class:"item"},ec={key:2,class:"group"},sc=It({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(y){const h=y,s=yi(!1),b=ei(()=>`NavScreenGroup-${h.text.replace(" ","-").toLowerCase()}`);function v(){s.value=!s.value}return(A,O)=>(V(),J("div",{class:zi(["VPNavScreenMenuGroup",{open:s.value}])},[Y("button",{class:"button","aria-controls":b.value,"aria-expanded":s.value,onClick:v},[Y("span",{class:"button-text",innerHTML:A.text},null,8,Ql),O[0]||(O[0]=Y("span",{class:"vpi-plus button-icon"},null,-1))],8,Yl),Y("div",{id:b.value,class:"items"},[(V(!0),J(Ki,null,Ye(A.items,et=>(V(),J(Ki,{key:JSON.stringify(et)},["link"in et?(V(),J("div",tc,[Rt(Ha,{item:et},null,8,["item"])])):"component"in et?(V(),J("div",ic,[(V(),jt(ks(et.component),Es({ref_for:!0},et.props,{"screen-menu":""}),null,16))])):(V(),J("div",ec,[Rt(Kl,{text:et.text,items:et.items},null,8,["text","items"])]))],64))),128))],8,Xl)],2))}}),nc=Yt(sc,[["__scopeId","data-v-ff95a03c"]]),ac={key:0,class:"VPNavScreenMenu"},oc=It({__name:"VPNavScreenMenu",setup(y){const{theme:h}=fi();return(s,b)=>T(h).nav?(V(),J("nav",ac,[(V(!0),J(Ki,null,Ye(T(h).nav,v=>(V(),J(Ki,{key:JSON.stringify(v)},["link"in v?(V(),jt(Gl,{key:0,item:v},null,8,["item"])):"component"in v?(V(),jt(ks(v.component),Es({key:1,ref_for:!0},v.props,{"screen-menu":""}),null,16)):(V(),jt(nc,{key:2,text:v.text||"",items:v.items},null,8,["text","items"]))],64))),128))])):Lt("",!0)}}),rc=It({__name:"VPNavScreenSocialLinks",setup(y){const{theme:h}=fi();return(s,b)=>T(h).socialLinks?(V(),jt(la,{key:0,class:"VPNavScreenSocialLinks",links:T(h).socialLinks},null,8,["links"])):Lt("",!0)}}),hc={class:"list"},lc=It({__name:"VPNavScreenTranslations",setup(y){const{localeLinks:h,currentLang:s}=Sn({correspondingLink:!0}),b=yi(!1);function v(){b.value=!b.value}return(A,O)=>T(h).length&&T(s).label?(V(),J("div",{key:0,class:zi(["VPNavScreenTranslations",{open:b.value}])},[Y("button",{class:"title",onClick:v},[O[0]||(O[0]=Y("span",{class:"vpi-languages icon lang"},null,-1)),Qs(" "+ji(T(s).label)+" ",1),O[1]||(O[1]=Y("span",{class:"vpi-chevron-down icon chevron"},null,-1))]),Y("ul",hc,[(V(!0),J(Ki,null,Ye(T(h),et=>(V(),J("li",{key:et.link,class:"item"},[Rt(Ps,{class:"link",href:et.link},{default:ot(()=>[Qs(ji(et.text),1)]),_:2},1032,["href"])]))),128))])],2)):Lt("",!0)}}),cc=Yt(lc,[["__scopeId","data-v-8a4dccbd"]]),uc={class:"container"},pc=It({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(y){const h=yi(null),s=Na(Rn?document.body:null);return(b,v)=>(V(),jt(Bn,{name:"fade",onEnter:v[0]||(v[0]=A=>s.value=!0),onAfterLeave:v[1]||(v[1]=A=>s.value=!1)},{default:ot(()=>[b.open?(V(),J("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:h,id:"VPNavScreen"},[Y("div",uc,[Z(b.$slots,"nav-screen-content-before",{},void 0,!0),Rt(oc,{class:"menu"}),Rt(cc,{class:"translations"}),Rt(Ol,{class:"appearance"}),Rt(rc,{class:"social-links"}),Z(b.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):Lt("",!0)]),_:3}))}}),mc=Yt(pc,[["__scopeId","data-v-a687ce3b"]]),dc={key:0,class:"VPNav"},fc=It({__name:"VPNav",setup(y){const{isScreenOpen:h,closeScreen:s,toggleScreen:b}=ch(),{frontmatter:v}=fi(),A=ei(()=>v.value.navbar!==!1);return Sa("close-screen",s),En(()=>{Rn&&document.documentElement.classList.toggle("hide-nav",!A.value)}),(O,et)=>A.value?(V(),J("header",dc,[Rt(Bl,{"is-screen-open":T(h),onToggleScreen:T(b)},{"nav-bar-title-before":ot(()=>[Z(O.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[Z(O.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ot(()=>[Z(O.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ot(()=>[Z(O.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),Rt(mc,{open:T(h)},{"nav-screen-content-before":ot(()=>[Z(O.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ot(()=>[Z(O.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):Lt("",!0)}}),yc=Yt(fc,[["__scopeId","data-v-5efbb5ad"]]),vc=["role","tabindex"],_c={key:1,class:"items"},bc=It({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(y){const h=y,{collapsed:s,collapsible:b,isLink:v,isActiveLink:A,hasActiveLink:O,hasChildren:et,toggle:G}=mo(ei(()=>h.item)),Ot=ei(()=>et.value?"section":"div"),ti=ei(()=>v.value?"a":"div"),qt=ei(()=>et.value?h.depth+2===7?"p":`h${h.depth+2}`:"p"),Ct=ei(()=>v.value?void 0:"button"),si=ei(()=>[[`level-${h.depth}`],{collapsible:b.value},{collapsed:s.value},{"is-link":v.value},{"is-active":A.value},{"has-active":O.value}]);function vi(ui){"key"in ui&&ui.key!=="Enter"||!h.item.link&&G()}function Bi(){h.item.link&&G()}return(ui,Pe)=>{const De=tn("VPSidebarItem",!0);return V(),jt(ks(Ot.value),{class:zi(["VPSidebarItem",si.value])},{default:ot(()=>[ui.item.text?(V(),J("div",Es({key:0,class:"item",role:Ct.value},Ga(ui.item.items?{click:vi,keydown:vi}:{},!0),{tabindex:ui.item.items&&0}),[Pe[1]||(Pe[1]=Y("div",{class:"indicator"},null,-1)),ui.item.link?(V(),jt(Ps,{key:0,tag:ti.value,class:"link",href:ui.item.link,rel:ui.item.rel,target:ui.item.target},{default:ot(()=>[(V(),jt(ks(qt.value),{class:"text",innerHTML:ui.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(V(),jt(ks(qt.value),{key:1,class:"text",innerHTML:ui.item.text},null,8,["innerHTML"])),ui.item.collapsed!=null&&ui.item.items&&ui.item.items.length?(V(),J("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:Bi,onKeydown:Ua(Bi,["enter"]),tabindex:"0"},Pe[0]||(Pe[0]=[Y("span",{class:"vpi-chevron-right caret-icon"},null,-1)]),32)):Lt("",!0)],16,vc)):Lt("",!0),ui.item.items&&ui.item.items.length?(V(),J("div",_c,[ui.depth<5?(V(!0),J(Ki,{key:0},Ye(ui.item.items,rs=>(V(),jt(De,{key:rs.text,item:rs,depth:ui.depth+1},null,8,["item","depth"]))),128)):Lt("",!0)])):Lt("",!0)]),_:1},8,["class"])}}}),xc=Yt(bc,[["__scopeId","data-v-09847e66"]]),gc=It({__name:"VPSidebarGroup",props:{items:{}},setup(y){const h=yi(!0);let s=null;return Cs(()=>{s=setTimeout(()=>{s=null,h.value=!1},300)}),Wa(()=>{s!=null&&(clearTimeout(s),s=null)}),(b,v)=>(V(!0),J(Ki,null,Ye(b.items,A=>(V(),J("div",{key:A.text,class:zi(["group",{"no-transition":h.value}])},[Rt(xc,{item:A,depth:0},null,8,["item"])],2))),128))}}),kc=Yt(gc,[["__scopeId","data-v-9f53f6be"]]),Pc={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},zc=It({__name:"VPSidebar",props:{open:{type:Boolean}},setup(y){const{sidebarGroups:h,hasSidebar:s}=Vs(),b=y,v=yi(null),A=Na(Rn?document.body:null);cs([b,v],()=>{var et;b.open?(A.value=!0,(et=v.value)==null||et.focus()):A.value=!1},{immediate:!0,flush:"post"});const O=yi(0);return cs(h,()=>{O.value+=1},{deep:!0}),(et,G)=>T(s)?(V(),J("aside",{key:0,class:zi(["VPSidebar",{open:et.open}]),ref_key:"navEl",ref:v,onClick:G[0]||(G[0]=qa(()=>{},["stop"]))},[G[2]||(G[2]=Y("div",{class:"curtain"},null,-1)),Y("nav",Pc,[G[1]||(G[1]=Y("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),Z(et.$slots,"sidebar-nav-before",{},void 0,!0),(V(),jt(kc,{items:T(h),key:O.value},null,8,["items"])),Z(et.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):Lt("",!0)}}),wc=Yt(zc,[["__scopeId","data-v-5fc468f2"]]),Nc=It({__name:"VPSkipLink",setup(y){const h=Dn(),s=yi();cs(()=>h.path,()=>s.value.focus());function b({target:v}){const A=document.getElementById(decodeURIComponent(v.hash).slice(1));if(A){const O=()=>{A.removeAttribute("tabindex"),A.removeEventListener("blur",O)};A.setAttribute("tabindex","-1"),A.addEventListener("blur",O),A.focus(),window.scrollTo(0,0)}}return(v,A)=>(V(),J(Ki,null,[Y("span",{ref_key:"backToTop",ref:s,tabindex:"-1"},null,512),Y("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:b}," Skip to content ")],64))}}),Sc=Yt(Nc,[["__scopeId","data-v-39910799"]]),Mc=It({__name:"Layout",setup(y){const{isOpen:h,open:s,close:b}=Vs(),v=Dn();cs(()=>v.path,b),po(h,b);const{frontmatter:A}=fi(),O=Ja(),et=ei(()=>!!O["home-hero-image"]);return Sa("hero-image-slot-exists",et),(G,Ot)=>{const ti=tn("Content");return T(A).layout!==!1?(V(),J("div",{key:0,class:zi(["Layout",T(A).pageClass])},[Z(G.$slots,"layout-top",{},void 0,!0),Rt(Sc),Rt(Xa,{class:"backdrop",show:T(h),onClick:T(b)},null,8,["show","onClick"]),Rt(yc,null,{"nav-bar-title-before":ot(()=>[Z(G.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[Z(G.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ot(()=>[Z(G.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ot(()=>[Z(G.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":ot(()=>[Z(G.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ot(()=>[Z(G.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),Rt(lh,{open:T(h),onOpenMenu:T(s)},null,8,["open","onOpenMenu"]),Rt(wc,{open:T(h)},{"sidebar-nav-before":ot(()=>[Z(G.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":ot(()=>[Z(G.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),Rt(qr,null,{"page-top":ot(()=>[Z(G.$slots,"page-top",{},void 0,!0)]),"page-bottom":ot(()=>[Z(G.$slots,"page-bottom",{},void 0,!0)]),"not-found":ot(()=>[Z(G.$slots,"not-found",{},void 0,!0)]),"home-hero-before":ot(()=>[Z(G.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":ot(()=>[Z(G.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[Z(G.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[Z(G.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[Z(G.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[Z(G.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ot(()=>[Z(G.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ot(()=>[Z(G.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ot(()=>[Z(G.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":ot(()=>[Z(G.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ot(()=>[Z(G.$slots,"doc-before",{},void 0,!0)]),"doc-after":ot(()=>[Z(G.$slots,"doc-after",{},void 0,!0)]),"doc-top":ot(()=>[Z(G.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":ot(()=>[Z(G.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":ot(()=>[Z(G.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ot(()=>[Z(G.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ot(()=>[Z(G.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[Z(G.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[Z(G.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[Z(G.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),Rt(Qr),Z(G.$slots,"layout-bottom",{},void 0,!0)],2)):(V(),jt(ti,{key:1}))}}}),Lc=Yt(Mc,[["__scopeId","data-v-50c8557b"]]),Cc={Layout:Lc,enhanceApp:({app:y})=>{y.component("Badge",Ka)}},Gn=(y,h)=>{const s=y.__vccOpts||y;for(const[b,v]of h)s[b]=v;return s},Vc={},Ic={t:"1661231422733",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3259",width:"20",height:"20"},Hc=Y("path",{d:"M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"3260"},null,-1),Tc=[Hc];function Ac(y,h){return V(),J("svg",Ic,Tc)}const $c=Gn(Vc,[["render",Ac]]),Bc={},Ec={t:"1661231449868",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3541",width:"20",height:"20"},Fc=Y("path",{d:"M305.6 225.6c-17.6-17.6-43.2-17.6-59.2 0L19.2 460.8c-25.6 30.4-25.6 72 0 97.6l225.6 235.2c8 8 20.8 12.8 30.4 12.8s20.8-4.8 30.4-12.8c17.6-17.6 17.6-43.2 0-59.2L88 512l217.6-225.6c17.6-17.6 17.6-43.2 0-60.8zM1001.6 460.8L774.4 225.6c-17.6-17.6-43.2-17.6-59.2 0s-17.6 43.2 0 59.2L932.8 512 715.2 737.6c-17.6 17.6-17.6 43.2 0 59.2 8 8 17.6 12.8 30.4 12.8 12.8 0 20.8-4.8 30.4-12.8l225.6-235.2c28.8-28.8 28.8-70.4 0-100.8zM612.8 230.4c-20.8-8-46.4 4.8-56 25.6L382.4 742.4c-8 20.8 4.8 46.4 25.6 56 4.8 0 8 4.8 12.8 4.8 17.6 0 33.6-12.8 38.4-30.4l179.2-491.2c8-20.8-4.8-46.4-25.6-51.2z","p-id":"3542"},null,-1),Dc=[Fc];function Oc(y,h){return V(),J("svg",Ec,Dc)}const Rc=Gn(Bc,[["render",Oc]]),jc={},Gc={viewBox:"0 0 544 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Uc=Y("path",{d:"M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z",fill:"currentColor"},null,-1),Wc=[Uc];function qc(y,h){return V(),J("svg",Gc,Wc)}const Jc=Gn(jc,[["render",qc]]),Hn="vitepress-demo-preview",Tn=(y,h,s,b)=>{let v=h===""?`${y}`:`${y}-${h}`;return s&&(v+=`__${s}`),b&&(v+=`--${b}`),v},Ta=(y="")=>({b:()=>Tn(Hn,y),e:(h="")=>Tn(Hn,y,h),m:(h="")=>Tn(Hn,y,"",h),bem:(h,s,b)=>Tn(Hn,h,s,b)}),Zc=()=>{const y=yi(!0);return{isCodeFold:y,setCodeFold:h=>{y.value=h}}},Kc=()=>({copyContent:yi(""),clickCopy:async y=>{await navigator.clipboard.writeText(y)}}),Yc={},Qc={width:"20",height:"20",viewBox:"0 0 48 48",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Xc=Y("path",{d:"M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),tu=Y("path",{d:"M17 24L22 29L32 19",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),iu=[Xc,tu];function eu(y,h){return V(),J("svg",Qc,iu)}const su=Gn(Yc,[["render",eu]]),nu=It({__name:"message-notice",props:{content:{default:"复制成功！"},close:null},setup(y,{expose:h}){const s=y,b=Ta(),v=yi(!1),A=Ot=>{v.value=Ot},O=yi(-999),et=Ot=>{O.value=Ot};cs(v,Ot=>{Ot===!0&&setTimeout(()=>{v.value=!1},3e3)});const G=()=>{s.close()};return h({setVisible:A,setTopHeight:et}),(Ot,ti)=>(V(),jt(Bn,{name:"slide-fade",onAfterLeave:G},{default:ot(()=>[v.value?(V(),J("div",{key:0,class:zi([T(b).bem("message-notice","container")]),style:sa({top:O.value+"px"})},[Rt(su),Y("span",null,ji(y.content),1)],6)):Lt("",!0)]),_:1}))}}),Zn=[],au={open:()=>{const y=document.createElement("div"),h=Za(nu,{content:"复制成功！",close:()=>{document.body.removeChild(y),Zn.pop(),h.unmount()}}),s=h.mount(y);document.body.appendChild(y);const b=Zn.length,v=b===0?10:(b+1)*10+b*42;s.setTopHeight(v),s.setVisible(!0),Zn.push(s)}},ou=["innerHTML"],ru=It({__name:"ElementPlus",props:{code:null,showCode:null,title:{default:"默认标题"},description:{default:"描述内容"}},setup(y){const h=y,s=Ta(),{isCodeFold:b,setCodeFold:v}=Zc(),{clickCopy:A}=Kc(),O=yi(decodeURIComponent(h.code)),et=yi(decodeURIComponent(h.showCode)),G=yi(null),Ot=()=>{A(O.value),au.open()},ti=ei(()=>{var Ct;return G.value?(Ct=G.value)==null?void 0:Ct.clientHeight:0}),qt=Ct=>{b.value?G.value.style.height="0px":G.value.style.height=`${Ct}px`};return Cs(()=>{const Ct=ti.value;qt(Ct)}),cs(b,()=>{const Ct=ti.value;qt(Ct)}),(Ct,si)=>(V(),J("div",{class:zi([T(s).e("element-plus__container")])},[Y("section",{class:zi([T(s).bem("preview")])},[Z(Ct.$slots,"default")],2),Y("section",{class:zi([T(s).bem("description")])},[Y("div",{class:zi([T(s).bem("description","split-line")])},null,2),Y("div",{class:zi([T(s).bem("description","handle-btn")])},[T(b)?(V(),jt($c,{key:1,onClick:si[1]||(si[1]=vi=>T(v)(!1))})):(V(),jt(Rc,{key:0,onClick:si[0]||(si[0]=vi=>T(v)(!0))})),Rt(Jc,{onClick:Ot})],2)],2),Y("section",{class:zi([T(s).bem("source")]),ref_key:"sourceCodeArea",ref:G},[Y("div",{innerHTML:et.value,class:"language-vue"},null,8,ou)],2)],2))}});(function(y,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):h((typeof window<"u"?window:global).OIMO={})})(void 0,function(y){Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(a!=null)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e});var h,s,b,v,A="1.0.9",O=0,et=1,G=2,Ot=3,ti=0,qt=0,Ct=1,si=2,vi=3,Bi=4,ui=5,Pe=0,De=1,rs=2,zs=3,Is=4,Mn=5,Ln=6,j={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(t,e,n){return(1-n)*t+n*e},randInt:function(t,e){return t+j.floor(j.random()*(e-t+1))},rand:function(t,e){return t+j.random()*(e-t)},generateUUID:(s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=new Array(36),v=0,function(){for(var t=0;t<36;t++)t===8||t===13||t===18||t===23?b[t]="-":t===14?b[t]="4":(v<=2&&(v=33554432+16777216*Math.random()|0),h=15&v,v>>=4,b[t]=s[t===19?3&h|8:h]);return b.join("")}),int:function(t){return j.floor(t)},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,n){return j.max(e,j.min(n,t))},distance:function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2];return j.sqrt(n*n+a*a+o*o)},acosClamp:function(t){return t>1?0:t<-1?j.PI:j.acos(t)},distanceVector:function(t,e){var n=t.x-e.x,a=t.y-e.y,o=t.z-e.z;return n*n+a*a+o*o},dotVectors:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}};function ce(t,e){console.error("[OIMO] "+t+": "+e)}function Hs(t){this.parent=t,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=A,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}function $(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function Gi(t,e,n,a){this.x=t||0,this.y=e||0,this.z=n||0,this.w=a!==void 0?a:1}function Ui(t,e,n,a,o,r,c,f,u){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.")}function os(t,e,n,a,o,r){this.elements=new Float32Array(6);var c=this.elements;c[0]=t||0,c[1]=n||0,c[2]=o||0,c[3]=e||0,c[4]=a||0,c[5]=r||0}Object.assign(Hs.prototype,{setTime:function(t){this.times[t||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),this.tt===100&&this.resetMax(),this.tt>100&&(this.broadPhaseTime>this.MaxBroadPhaseTime&&(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime>this.MaxNarrowPhaseTime&&(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime>this.MaxSolvingTime&&(this.MaxSolvingTime=this.solvingTime),this.totalTime>this.MaxTotalTime&&(this.MaxTotalTime=this.totalTime),this.updateTime>this.MaxUpdateTime&&(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt>500&&(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){return["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconds<br><br>","broadphase &nbsp;"+j.fix(this.broadPhaseTime)+" | "+j.fix(this.MaxBroadPhaseTime)+"<br>","narrowphase "+j.fix(this.narrowPhaseTime)+" | "+j.fix(this.MaxNarrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;"+j.fix(this.solvingTime)+" | "+j.fix(this.MaxSolvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+j.fix(this.totalTime)+" | "+j.fix(this.MaxTotalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;"+j.fix(this.updateTime)+" | "+j.fix(this.MaxUpdateTime)+"<br>"].join(`
`)},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}}),Object.assign($.prototype,{Vec3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},add:function(t,e){return e!==void 0?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t,e){return e!==void 0?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},subScaledVector:function(t,e){return this.x-=t.x*e,this.y-=t.y*e,this.z-=t.z*e,this},cross:function(t,e){if(e!==void 0)return this.crossVectors(t,e);var n=this.x,a=this.y,o=this.z;return this.x=a*t.z-o*t.y,this.y=o*t.x-n*t.z,this.z=n*t.y-a*t.x,this},crossVectors:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,c=e.y,f=e.z;return this.x=a*f-o*c,this.y=o*r-n*f,this.z=n*c-a*r,this},tangent:function(t){var e=t.x,n=t.y,a=t.z;return this.x=n*e-a*a,this.y=-a*n-e*e,this.z=e*a+n*n,this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return j.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyMatrix3:function(t,e){var n=this.x,a=this.y,o=this.z,r=t.elements;return e?(this.x=r[0]*n+r[1]*a+r[2]*o,this.y=r[3]*n+r[4]*a+r[5]*o,this.z=r[6]*n+r[7]*a+r[8]*o):(this.x=r[0]*n+r[3]*a+r[6]*o,this.y=r[1]*n+r[4]*a+r[7]*o,this.z=r[2]*n+r[5]*a+r[8]*o),this},applyQuaternion:function(t){var e=this.x,n=this.y,a=this.z,o=t.x,r=t.y,c=t.z,f=t.w,u=f*e+r*a-c*n,m=f*n+c*e-o*a,p=f*a+o*n-r*e,N=-o*e-r*n-c*a;return this.x=u*f+N*-o+m*-c-p*-r,this.y=m*f+N*-r+p*-o-u*-c,this.z=p*f+N*-c+u*-r-m*-o,this},testZero:function(){return this.x!==0||this.y!==0||this.z!==0},testDiff:function(t){return!this.equals(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},normalize:function(){return this.divideScalar(this.length())},toArray:function(t,e){e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}}),Object.assign(Gi.prototype,{Quat:!0,set:function(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this},addTime:function(t,e){var n=t.x,a=t.y,o=t.z,r=this.w,c=this.x,f=this.y,u=this.z;return e*=.5,this.x+=e*(n*r+a*u-o*f),this.y+=e*(a*r+o*c-n*u),this.z+=e*(o*r+n*f-a*c),this.w+=e*(-n*c-a*f-o*u),this.normalize(),this},multiply:function(t,e){return e!==void 0?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,a=t.y,o=t.z,r=t.w,c=e.x,f=e.y,u=e.z,m=e.w;return this.x=n*m+r*c+a*u-o*f,this.y=a*m+r*f+o*c-n*u,this.z=o*m+r*u+n*f-a*c,this.w=r*m-n*c-a*f-o*u,this},setFromUnitVectors:function(t,e){var n=new $,a=t.dot(e)+1;return a<j.EPS2?(a=0,j.abs(t.x)>j.abs(t.z)?n.set(-t.y,t.x,0):n.set(0,-t.z,t.y)):n.crossVectors(t,e),this._x=n.x,this._y=n.y,this._z=n.z,this._w=a,this.normalize()},arc:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,c=e.y,f=e.z,u=n*r+a*c+o*f;if(u==-1)return r=a*n-o*o,c=-o*a-n*n,f=n*o+a*a,u=1/j.sqrt(r*r+c*c+f*f),this.w=0,this.x=r*u,this.y=c*u,this.z=f*u,this;var m=a*f-o*c,p=o*r-n*f,N=n*c-a*r;return this.w=j.sqrt(.5*(1+u)),u=.5/this.w,this.x=m*u,this.y=p*u,this.z=N*u,this},normalize:function(){var t=this.length();return t===0?this.set(0,0,0,1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},inverse:function(){return this.conjugate().normalize()},invert:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return j.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(t){return new Gi(this.x,this.y,this.z,this.w)},testDiff:function(t){return!this.equals(t)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},toString:function(){return"Quat["+this.x.toFixed(4)+", ("+this.y.toFixed(4)+", "+this.z.toFixed(4)+", "+this.w.toFixed(4)+")]"},setFromEuler:function(t,e,n){var a=Math.cos(.5*t),o=Math.cos(.5*e),r=Math.cos(.5*n),c=Math.sin(.5*t),f=Math.sin(.5*e),u=Math.sin(.5*n);return this.x=c*o*r+a*f*u,this.y=a*f*r-c*o*u,this.z=a*o*u+c*f*r,this.w=a*o*r-c*f*u,this},setFromAxis:function(t,e){t.normalize(),e*=.5;var n=j.sin(e);return this.x=n*t.x,this.y=n*t.y,this.z=n*t.z,this.w=j.cos(e),this},setFromMat33:function(t){var e,n=t[0]+t[4]+t[8];if(n>0)e=j.sqrt(n+1),this.w=.5/e,e=.5/e,this.x=(t[5]-t[7])*e,this.y=(t[6]-t[2])*e,this.z=(t[1]-t[3])*e;else{var a=[],o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var r=(o+1)%3,c=(o+2)%3;e=j.sqrt(t[3*o+o]-t[3*r+r]-t[3*c+c]+1),a[o]=.5*fRoot,e=.5/fRoot,this.w=(t[3*r+c]-t[3*c+r])*e,a[r]=(t[3*r+o]+t[3*o+r])*e,a[c]=(t[3*c+o]+t[3*o+c])*e,this.x=a[1],this.y=a[2],this.z=a[3]}return this},toArray:function(t,e){t[e=e||0]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w},fromArray:function(t,e){return e=e||0,this.set(t[e],t[e+1],t[e+2],t[e+3]),this}}),Object.assign(Ui.prototype,{Mat33:!0,set:function(t,e,n,a,o,r,c,f,u){var m=this.elements;return m[0]=t,m[1]=e,m[2]=n,m[3]=a,m[4]=o,m[5]=r,m[6]=c,m[7]=f,m[8]=u,this},add:function(t,e){if(e!==void 0)return this.addMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]+=a[0],n[1]+=a[1],n[2]+=a[2],n[3]+=a[3],n[4]+=a[4],n[5]+=a[5],n[6]+=a[6],n[7]+=a[7],n[8]+=a[8],this},addMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]+o[0],n[1]=a[1]+o[1],n[2]=a[2]+o[2],n[3]=a[3]+o[3],n[4]=a[4]+o[4],n[5]=a[5]+o[5],n[6]=a[6]+o[6],n[7]=a[7]+o[7],n[8]=a[8]+o[8],this},addEqual:function(t){var e=this.elements,n=t.elements;return e[0]+=n[0],e[1]+=n[1],e[2]+=n[2],e[3]+=n[3],e[4]+=n[4],e[5]+=n[5],e[6]+=n[6],e[7]+=n[7],e[8]+=n[8],this},sub:function(t,e){if(e!==void 0)return this.subMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]-=a[0],n[1]-=a[1],n[2]-=a[2],n[3]-=a[3],n[4]-=a[4],n[5]-=a[5],n[6]-=a[6],n[7]-=a[7],n[8]-=a[8],this},subMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]-o[0],n[1]=a[1]-o[1],n[2]=a[2]-o[2],n[3]=a[3]-o[3],n[4]=a[4]-o[4],n[5]=a[5]-o[5],n[6]=a[6]-o[6],n[7]=a[7]-o[7],n[8]=a[8]-o[8],this},subEqual:function(t){var e=this.elements,n=t.elements;return e[0]-=n[0],e[1]-=n[1],e[2]-=n[2],e[3]-=n[3],e[4]-=n[4],e[5]-=n[5],e[6]-=n[6],e[7]-=n[7],e[8]-=n[8],this},scale:function(t,e){var n=this.elements,a=t.elements;return n[0]=a[0]*e,n[1]=a[1]*e,n[2]=a[2]*e,n[3]=a[3]*e,n[4]=a[4]*e,n[5]=a[5]*e,n[6]=a[6]*e,n[7]=a[7]*e,n[8]=a[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},multiplyMatrices:function(t,e,n){n&&(e=e.clone().transpose());var a=this.elements,o=t.elements,r=e.elements,c=o[0],f=o[3],u=o[6],m=o[1],p=o[4],N=o[7],x=o[2],g=o[5],P=o[8],I=r[0],D=r[3],nt=r[6],M=r[1],tt=r[4],it=r[7],ct=r[2],ut=r[5],st=r[8];return a[0]=c*I+m*D+x*nt,a[1]=c*M+m*tt+x*it,a[2]=c*ct+m*ut+x*st,a[3]=f*I+p*D+g*nt,a[4]=f*M+p*tt+g*it,a[5]=f*ct+p*ut+g*st,a[6]=u*I+N*D+P*nt,a[7]=u*M+N*tt+P*it,a[8]=u*ct+N*ut+P*st,this},transpose:function(t){if(t!==void 0){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this}var n=this.elements,a=n[1],o=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=a,n[5]=n[7],n[6]=o,n[7]=r,this},setQuat:function(t){var e=this.elements,n=t.x,a=t.y,o=t.z,r=t.w,c=n+n,f=a+a,u=o+o,m=n*c,p=n*f,N=n*u,x=a*f,g=a*u,P=o*u,I=r*c,D=r*f,nt=r*u;return e[0]=1-(x+P),e[1]=p-nt,e[2]=N+D,e[3]=p+nt,e[4]=1-(m+P),e[5]=g-I,e[6]=N-D,e[7]=g+I,e[8]=1-(m+x),this},invert:function(t){var e=this.elements,n=t.elements,a=n[0],o=n[3],r=n[6],c=n[1],f=n[4],u=n[7],m=n[2],p=n[5],N=n[8],x=N*f-p*u,g=-N*o+p*r,P=u*o-f*r,I=a*x+c*g+m*P;return I===0?(console.log("can't invert matrix, determinant is 0"),this.identity()):(I=1/I,e[0]=x*I,e[1]=(-N*c+m*u)*I,e[2]=(p*c-m*f)*I,e[3]=g*I,e[4]=(N*a-m*r)*I,e[5]=(-p*a+m*o)*I,e[6]=P*I,e[7]=(-u*a+c*r)*I,e[8]=(f*a-c*o)*I,this)},addOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]+=t*(a*a+o*o),r[4]+=t*(n*n+o*o),r[8]+=t*(n*n+a*a);var c=t*n*a,f=t*a*o,u=t*o*n;return r[1]-=c,r[3]-=c,r[2]-=f,r[6]-=f,r[5]-=u,r[7]-=u,this},subOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]-=t*(a*a+o*o),r[4]-=t*(n*n+o*o),r[8]-=t*(n*n+a*a);var c=t*n*a,f=t*a*o,u=t*o*n;return r[1]+=c,r[3]+=c,r[2]+=f,r[6]+=f,r[5]+=u,r[7]+=u,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new Ui().fromArray(this.elements)},copy:function(t){for(var e=0;e<9;e++)this.elements[e]=t.elements[e];return this},determinant:function(){var t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],r=t[4],c=t[5],f=t[6],u=t[7],m=t[8];return e*r*m-e*c*u-n*o*m+n*c*f+a*o*u-a*r*f},fromArray:function(t,e){e===void 0&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}),Object.assign(os.prototype,{AABB:!0,set:function(t,e,n,a,o,r){var c=this.elements;return c[0]=t,c[3]=e,c[1]=n,c[4]=a,c[2]=o,c[5]=r,this},intersectTest:function(t){var e=this.elements,n=t.elements;return e[0]>n[3]||e[1]>n[4]||e[2]>n[5]||e[3]<n[0]||e[4]<n[1]||e[5]<n[2]},intersectTestTwo:function(t){var e=this.elements,n=t.elements;return e[0]<n[0]||e[1]<n[1]||e[2]<n[2]||e[3]>n[3]||e[4]>n[4]||e[5]>n[5]},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t,e){var n=e||0,a=t.elements;return this.set(a[0]-n,a[3]+n,a[1]-n,a[4]+n,a[2]-n,a[5]+n),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var n=t.elements,a=e.elements,o=this.elements;return o[0]=n[0]<a[0]?n[0]:a[0],o[1]=n[1]<a[1]?n[1]:a[1],o[2]=n[2]<a[2]?n[2]:a[2],o[3]=n[3]>a[3]?n[3]:a[3],o[4]=n[4]>a[4]?n[4]:a[4],o[5]=n[5]>a[5]?n[5]:a[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],n=t[4]-t[1],a=t[5]-t[2];return 2*(e*(n+a)+n*a)},intersectsWithPoint:function(t,e,n){var a=this.elements;return t>=a[0]&&t<=a[3]&&e>=a[1]&&e<=a[4]&&n>=a[2]&&n<=a[5]},setFromPoints:function(t){this.makeEmpty();for(var e=0;e<t.length;e++)this.expandByPoint(t[e])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var e=this.elements;this.set(j.min(e[0],t.x),j.min(e[1],t.y),j.min(e[2],t.z),j.max(e[3],t.x),j.max(e[4],t.y),j.max(e[5],t.z))},expandByScalar:function(t){var e=this.elements;e[0]+=-t,e[1]+=-t,e[2]+=-t,e[3]+=t,e[4]+=t,e[5]+=t}});var Oe=0;function Ge(t){this.type=qt,this.id=Oe++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new $,this.rotation=new Ui,this.relativePosition=new $().copy(t.relativePosition),this.relativeRotation=new Ui().copy(t.relativeRotation),this.aabb=new os,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith}function Fs(t,e,n,a){Ge.call(this,t),this.type=si,this.width=e,this.height=n,this.depth=a,this.halfWidth=.5*e,this.halfHeight=.5*n,this.halfDepth=.5*a,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}function Ds(t,e){Ge.call(this,t),this.type=Ct,this.radius=e}function Os(t,e,n){Ge.call(this,t),this.type=vi,this.radius=e,this.height=n,this.halfHeight=.5*n,this.normalDirection=new $,this.halfDirection=new $}function Rs(t,e){Ge.call(this,t),this.type=Bi,this.normal=new $(0,1,0)}function en(t,e){Ge.call(this,t),this.type=ui}function bn(){this.relativePosition=new $,this.relativeRotation=new Ui,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function Yi(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}function js(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}function xn(t){this.prev=null,this.next=null,this.body=null,this.joint=t}function Re(t){js.call(this),this.scale=1,this.invScale=1,this.name="",this.id=NaN,this.type=Pe,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=new $().copy(t.localAnchorPoint1),this.localAnchorPoint2=new $().copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new $,this.relativeAnchorPoint2=new $,this.anchorPoint1=new $,this.anchorPoint2=new $,this.allowCollision=t.allowCollision,this.b1Link=new xn(this),this.b2Link=new xn(this)}function gn(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}function sn(t,e,n,a){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}function nn(t,e,n){Re.call(this,t),this.type=zs,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new $().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.limitMotor=new Yi(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.lc=new gn(this),this.r3=new sn(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function an(t){Re.call(this,t),this.type=rs,this.lc=new gn(this)}function Cn(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}function on(t,e,n){Re.call(this,t),this.type=De,this.nor=new $,this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t=new Cn(this,this.limitMotor)}function Vn(t,e){this.joint=t,this.targetOrientation=new Gi().invert(e),this.relativeOrientation=new Gi,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new $,this.imp=new $,this.rn0=new $,this.rn1=new $,this.rn2=new $,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}function hs(t,e,n,a){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}function us(t,e,n){Re.call(this,t),this.type=Ln,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.ax1=new $,this.ax2=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.ac=new Vn(this,new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t3=new hs(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function rn(t,e,n){Re.call(this,t),this.type=Mn,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new $().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.rotationalLimitMotor=new Yi(this.nor,!1),this.r3=new sn(this,this.rotationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0)),this.translationalLimitMotor=new Yi(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=n,this.t3=new hs(this,this.translationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function hn(t){Re.call(this,t),this.type=Is,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.localAngle1=new $,this.localAngle2=new $;var e=j.dotVectors(this.localAxis1,this.localAxis2);if(e>-1&&e<1)this.localAngle1.set(this.localAxis2.x-e*this.localAxis1.x,this.localAxis2.y-e*this.localAxis1.y,this.localAxis2.z-e*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-e*this.localAxis2.x,this.localAxis1.y-e*this.localAxis2.y,this.localAxis1.z-e*this.localAxis2.z).normalize();else{var n=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(n,!0)}this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.translationalLimitMotor=new Yi(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new Yi(this.tan,!1),this.rotationalLimitMotor2=new Yi(this.bin,!1),this.t3=new hs(this,new Yi(this.nor,!0),this.translationalLimitMotor,new Yi(this.bin,!0)),this.t3.weight=1,this.r3=new sn(this,new Yi(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}function Gs(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new $,this.localAnchorPoint2=new $,this.localAxis1=new $,this.localAxis2=new $,this.allowCollision=!1}function Un(){this.mass=0,this.inertia=new Ui}function Us(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t}function Ne(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function Ws(){this.warmStarted=!1,this.position=new $,this.localPoint1=new $,this.localPoint2=new $,this.normal=new $,this.tangent=new $,this.binormal=new $,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function kn(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new Ws,new Ws,new Ws,new Ws]}function ln(){this.nor=new $,this.tan=new $,this.bin=new $,this.norU1=new $,this.tanU1=new $,this.binU1=new $,this.norU2=new $,this.tanU2=new $,this.binU2=new $,this.norT1=new $,this.tanT1=new $,this.binT1=new $,this.norT2=new $,this.tanT2=new $,this.binT2=new $,this.norTU1=new $,this.tanTU1=new $,this.binTU1=new $,this.norTU2=new $,this.tanTU2=new $,this.binTU2=new $,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function cn(t){js.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new $,this.tmpC1=new $,this.tmpC2=new $,this.tmpP1=new $,this.tmpP2=new $,this.tmplv1=new $,this.tmplv2=new $,this.tmpav1=new $,this.tmpav2=new $,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new ln,this.cs.next=new ln,this.cs.next.next=new ln,this.cs.next.next.next=new ln}function qs(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=j.INF,this.b1Link=new Us(this),this.b2Link=new Us(this),this.s1Link=new Us(this),this.s2Link=new Us(this),this.manifold=new kn,this.buffer=[new Ne,new Ne,new Ne,new Ne],this.points=this.manifold.points,this.constraint=new cn(this.manifold)}function ws(t,e){this.position=t||new $,this.orientation=e||new Gi,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name="",this.prev=null,this.next=null,this.type=ti,this.massInfo=new Un,this.newPosition=new $,this.controlPos=!1,this.newOrientation=new Gi,this.newRotation=new $,this.currentRotation=new $,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new Gi,this.pos=new $,this.linearVelocity=new $,this.angularVelocity=new $,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new $,this.sleepOrientation=new Gi,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new Ui,this.mass=0,this.inverseMass=0,this.inverseInertia=new Ui,this.localInertia=new Ui,this.inverseLocalInertia=new Ui,this.tmpInertia=new Ui,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}function un(t,e){this.shape1=t||null,this.shape2=e||null}function ps(){this.types=O,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(Ge.prototype,{Shape:!0,calculateMassInfo:function(t){ce("Shape","Inheritance error.")},updateProxy:function(){ce("Shape","Inheritance error.")}}),Fs.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Fs,calculateMassInfo:function(t){var e=this.width*this.height*this.depth*this.density;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.height*this.height)*(1/12))},updateProxy:function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var n=e[9],a=e[10],o=e[11],r=e[12],c=e[13],f=e[14],u=e[15],m=e[16],p=e[17],N=this.position.x,x=this.position.y,g=this.position.z,P=this.elements;P[0]=N+n+r+u,P[1]=x+a+c+m,P[2]=g+o+f+p,P[3]=N+n+r-u,P[4]=x+a+c-m,P[5]=g+o+f-p,P[6]=N+n-r+u,P[7]=x+a-c+m,P[8]=g+o-f+p,P[9]=N+n-r-u,P[10]=x+a-c-m,P[11]=g+o-f-p,P[12]=N-n+r+u,P[13]=x-a+c+m,P[14]=g-o+f+p,P[15]=N-n+r-u,P[16]=x-a+c-m,P[17]=g-o+f-p,P[18]=N-n-r+u,P[19]=x-a-c+m,P[20]=g-o-f+p,P[21]=N-n-r-u,P[22]=x-a-c-m,P[23]=g-o-f-p;var I=e[9]<0?-e[9]:e[9],D=e[10]<0?-e[10]:e[10],nt=e[11]<0?-e[11]:e[11];I=e[12]<0?I-e[12]:I+e[12],D=e[13]<0?D-e[13]:D+e[13],nt=e[14]<0?nt-e[14]:nt+e[14],I=e[15]<0?I-e[15]:I+e[15],D=e[16]<0?D-e[16]:D+e[16],nt=e[17]<0?nt-e[17]:nt+e[17];var M=.005;this.aabb.set(this.position.x-I-M,this.position.x+I+M,this.position.y-D-M,this.position.y+D+M,this.position.z-nt-M,this.position.z+nt+M),this.proxy!=null&&this.proxy.update()}}),Ds.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Ds,volume:function(){return j.PI*this.radius*1.333333},calculateMassInfo:function(t){var e=this.volume()*this.radius*this.radius*this.density;t.mass=e;var n=e*this.radius*this.radius*.4;t.inertia.set(n,0,0,0,n,0,0,0,n)},updateProxy:function(){var t=.005;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),this.proxy!=null&&this.proxy.update()}}),Os.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Os,calculateMassInfo:function(t){var e=this.radius*this.radius,n=j.PI*e*this.height*this.density,a=(.25*e+.0833*this.height*this.height)*n,o=.5*e;t.mass=n,t.inertia.set(a,0,0,0,o,0,0,0,a)},updateProxy:function(){var t,e,n,a,o,r,c,f,u,m,p,N=this.rotation.elements;o=N[1]*N[1],r=N[4]*N[4],c=N[7]*N[7],this.normalDirection.set(N[1],N[4],N[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),e=1-o,(t=j.sqrt(e*e+o*r+o*c))>0&&(t=this.radius/t),e*=t,n=1-r,(t=j.sqrt(r*o+n*n+r*c))>0&&(t=this.radius/t),n*=t,a=1-c,(t=j.sqrt(c*o+c*r+a*a))>0&&(t=this.radius/t),a*=t,f=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,u=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,m=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,f=e<0?f-e:f+e,u=n<0?u-n:u+n,m=a<0?m-a:m+a,p=.005,this.aabb.set(this.position.x-f-p,this.position.x+f+p,this.position.y-u-p,this.position.y+u+p,this.position.z-m-p,this.position.z+m+p),this.proxy!=null&&this.proxy.update()}}),Rs.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Rs,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.mass=this.density,t.inertia.set(1,0,0,0,1,0,0,0,1)},updateProxy:function(){var t=.005,e=-j.INF,n=j.INF,a=this.normal;this.aabb.set(a.x===-1?this.position.x-t:e,a.x===1?this.position.x+t:n,a.y===-1?this.position.y-t:e,a.y===1?this.position.y+t:n,a.z===-1?this.position.z-t:e,a.z===1?this.position.z+t:n),this.proxy!=null&&this.proxy.update()}}),en.prototype=Object.assign(Object.create(Ge.prototype),{constructor:en,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.inertia.set(0,0,0,0,0,0,0,0,0)},updateProxy:function(){this.aabb.set(this.position.x-0,this.position.x+0,this.position.y-0,this.position.y+0,this.position.z-0,this.position.z+0),this.proxy!=null&&this.proxy.update()}}),Object.assign(Yi.prototype,{LimitMotor:!0,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}}),Object.assign(js.prototype,{Constraint:!0,preSolve:function(t,e){ce("Constraint","Inheritance error.")},solve:function(){ce("Constraint","Inheritance error.")},postSolve:function(){ce("Constraint","Inheritance error.")}}),Re.prototype=Object.assign(Object.create(js.prototype),{constructor:Re,setId:function(t){this.id=i},setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name="J"+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(t){this.b1Link.body=this.body2,this.b2Link.body=this.body1,t?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(this.body1.jointLink!=null?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,this.body2.jointLink!=null?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(t){if(t)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var e=this.b1Link.prev,n=this.b1Link.next;e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=n),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,e=this.b2Link.prev,n=this.b2Link.next,e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=n),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(t,e){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){return[new $().scale(this.anchorPoint1,this.scale),new $().scale(this.anchorPoint2,this.scale)]}}),Object.assign(gn.prototype,{LinearConstraint:!0,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var n=this.ii1.elements,a=this.ii2.elements;this.ax1x=this.r1z*n[1]+-this.r1y*n[2],this.ax1y=this.r1z*n[4]+-this.r1y*n[5],this.ax1z=this.r1z*n[7]+-this.r1y*n[8],this.ay1x=-this.r1z*n[0]+this.r1x*n[2],this.ay1y=-this.r1z*n[3]+this.r1x*n[5],this.ay1z=-this.r1z*n[6]+this.r1x*n[8],this.az1x=this.r1y*n[0]+-this.r1x*n[1],this.az1y=this.r1y*n[3]+-this.r1x*n[4],this.az1z=this.r1y*n[6]+-this.r1x*n[7],this.ax2x=this.r2z*a[1]+-this.r2y*a[2],this.ax2y=this.r2z*a[4]+-this.r2y*a[5],this.ax2z=this.r2z*a[7]+-this.r2y*a[8],this.ay2x=-this.r2z*a[0]+this.r2x*a[2],this.ay2y=-this.r2z*a[3]+this.r2x*a[5],this.ay2z=-this.r2z*a[6]+this.r2x*a[8],this.az2x=this.r2y*a[0]+-this.r2x*a[1],this.az2y=this.r2y*a[3]+-this.r2x*a[4],this.az2z=this.r2y*a[6]+-this.r2x*a[7];var o=this.m1+this.m2,r=new Ui().set(o,0,0,0,o,0,0,0,o).elements;r[0]+=n[4]*this.r1z*this.r1z-(n[7]+n[5])*this.r1y*this.r1z+n[8]*this.r1y*this.r1y,r[1]+=(n[6]*this.r1y+n[5]*this.r1x)*this.r1z-n[3]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[2]+=(n[3]*this.r1y-n[4]*this.r1x)*this.r1z-n[6]*this.r1y*this.r1y+n[7]*this.r1x*this.r1y,r[3]+=(n[2]*this.r1y+n[7]*this.r1x)*this.r1z-n[1]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[4]+=n[0]*this.r1z*this.r1z-(n[6]+n[2])*this.r1x*this.r1z+n[8]*this.r1x*this.r1x,r[5]+=(n[1]*this.r1x-n[0]*this.r1y)*this.r1z-n[7]*this.r1x*this.r1x+n[6]*this.r1x*this.r1y,r[6]+=(n[1]*this.r1y-n[4]*this.r1x)*this.r1z-n[2]*this.r1y*this.r1y+n[5]*this.r1x*this.r1y,r[7]+=(n[3]*this.r1x-n[0]*this.r1y)*this.r1z-n[5]*this.r1x*this.r1x+n[2]*this.r1x*this.r1y,r[8]+=n[0]*this.r1y*this.r1y-(n[3]+n[1])*this.r1x*this.r1y+n[4]*this.r1x*this.r1x,r[0]+=a[4]*this.r2z*this.r2z-(a[7]+a[5])*this.r2y*this.r2z+a[8]*this.r2y*this.r2y,r[1]+=(a[6]*this.r2y+a[5]*this.r2x)*this.r2z-a[3]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[2]+=(a[3]*this.r2y-a[4]*this.r2x)*this.r2z-a[6]*this.r2y*this.r2y+a[7]*this.r2x*this.r2y,r[3]+=(a[2]*this.r2y+a[7]*this.r2x)*this.r2z-a[1]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[4]+=a[0]*this.r2z*this.r2z-(a[6]+a[2])*this.r2x*this.r2z+a[8]*this.r2x*this.r2x,r[5]+=(a[1]*this.r2x-a[0]*this.r2y)*this.r2z-a[7]*this.r2x*this.r2x+a[6]*this.r2x*this.r2y,r[6]+=(a[1]*this.r2y-a[4]*this.r2x)*this.r2z-a[2]*this.r2y*this.r2y+a[5]*this.r2x*this.r2y,r[7]+=(a[3]*this.r2x-a[0]*this.r2y)*this.r2z-a[5]*this.r2x*this.r2x+a[2]*this.r2x*this.r2y,r[8]+=a[0]*this.r2y*this.r2y-(a[3]+a[1])*this.r2x*this.r2y+a[4]*this.r2x*this.r2x;var c=1/(r[0]*(r[4]*r[8]-r[7]*r[5])+r[3]*(r[7]*r[2]-r[1]*r[8])+r[6]*(r[1]*r[5]-r[4]*r[2]));this.dd=new Ui().set(r[4]*r[8]-r[5]*r[7],r[2]*r[7]-r[1]*r[8],r[1]*r[5]-r[2]*r[4],r[5]*r[6]-r[3]*r[8],r[0]*r[8]-r[2]*r[6],r[2]*r[3]-r[0]*r[5],r[3]*r[7]-r[4]*r[6],r[1]*r[6]-r[0]*r[7],r[0]*r[4]-r[1]*r[3]).scaleEqual(c),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var f=j.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);f>.005?(f=(.005-f)/f*e*.05,this.velx*=f,this.vely*=f,this.velz*=f):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,n=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,a=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,o=e*t[0]+n*t[1]+a*t[2],r=e*t[3]+n*t[4]+a*t[5],c=e*t[6]+n*t[7]+a*t[8];this.impx+=o,this.impy+=r,this.impz+=c,this.l1.x+=o*this.m1,this.l1.y+=r*this.m1,this.l1.z+=c*this.m1,this.a1.x+=o*this.ax1x+r*this.ay1x+c*this.az1x,this.a1.y+=o*this.ax1y+r*this.ay1y+c*this.az1y,this.a1.z+=o*this.ax1z+r*this.ay1z+c*this.az1z,this.l2.x-=o*this.m2,this.l2.y-=r*this.m2,this.l2.z-=c*this.m2,this.a2.x-=o*this.ax2x+r*this.ay2x+c*this.az2x,this.a2.y-=o*this.ax2y+r*this.ay2y+c*this.az2y,this.a2.z-=o*this.ax2z+r*this.ay2z+c*this.az2z}}),Object.assign(sn.prototype,{Rotational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.limitMotor1.frequency,r=this.limitMotor2.frequency,c=this.limitMotor3.frequency,f=o>0,u=r>0,m=c>0,p=this.lowerLimit1<=this.upperLimit1,N=this.lowerLimit2<=this.upperLimit2,x=this.lowerLimit3<=this.upperLimit3,g=this.limitMotor1.angle;p?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-g):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),f||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var P=this.limitMotor2.angle;N?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-P):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),u||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var I=this.limitMotor3.angle;if(x?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-I):I<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-I):I>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-I):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),m||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||f)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||u)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||m)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,f&&this.limitState1!=2){var D=6.2831853*o,nt=D*D*t,M=e/(nt+2*this.limitMotor1.dampingRatio*D);this.cfm1=this.kv00*M,this.limitVelocity1*=nt*M}else this.cfm1=0,this.limitVelocity1*=.05*e;u&&this.limitState2!=2?(M=e/((nt=(D=6.2831853*r)*D*t)+2*this.limitMotor2.dampingRatio*D),this.cfm2=this.kv11*M,this.limitVelocity2*=nt*M):(this.cfm2=0,this.limitVelocity2*=.05*e),m&&this.limitState3!=2?(M=e/((nt=(D=6.2831853*c)*D*t)+2*this.limitMotor3.dampingRatio*D),this.cfm3=this.kv22*M,this.limitVelocity3*=nt*M):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var tt=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*tt,this.d01=(this.k02*this.k21-this.k01*this.k22)*tt,this.d02=(this.k01*this.k12-this.k02*this.k11)*tt,this.d10=(this.k12*this.k20-this.k10*this.k22)*tt,this.d11=(this.k00*this.k22-this.k02*this.k20)*tt,this.d12=(this.k02*this.k10-this.k00*this.k12)*tt,this.d20=(this.k10*this.k21-this.k11*this.k20)*tt,this.d21=(this.k01*this.k20-this.k00*this.k21)*tt,this.d22=(this.k00*this.k11-this.k01*this.k10)*tt,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var it=this.limitImpulse1+this.motorImpulse1,ct=this.limitImpulse2+this.motorImpulse2,ut=this.limitImpulse3+this.motorImpulse3;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z;this.limitVelocity3=30;var a=t*this.ax1+e*this.ay1+n*this.az1-this.limitVelocity1,o=t*this.ax2+e*this.ay2+n*this.az2-this.limitVelocity2,r=t*this.ax3+e*this.ay3+n*this.az3-this.limitVelocity3,c=a*this.d00+o*this.d01+r*this.d02,f=a*this.d10+o*this.d11+r*this.d12,u=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=c,this.limitImpulse2+=f,this.limitImpulse3+=u,this.a1.x+=c*this.a1x1+f*this.a1x2+u*this.a1x3,this.a1.y+=c*this.a1y1+f*this.a1y2+u*this.a1y3,this.a1.z+=c*this.a1z1+f*this.a1z2+u*this.a1z3,this.a2.x-=c*this.a2x1+f*this.a2x2+u*this.a2x3,this.a2.y-=c*this.a2y1+f*this.a2y2+u*this.a2y3,this.a2.z-=c*this.a2z1+f*this.a2z2+u*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,c=this.motorImpulse1,f=this.motorImpulse2,u=this.motorImpulse3,m=0,p=0,N=0;this.enableMotor1&&(m=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=m,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),m=this.motorImpulse1-c),this.enableMotor2&&(p=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=p,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),p=this.motorImpulse2-f),this.enableMotor3&&(N=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=N,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),N=this.motorImpulse3-u),a+=m*this.kv00+p*this.k01+N*this.k02,o+=m*this.k10+p*this.kv11+N*this.k12,r+=m*this.k20+p*this.k21+N*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,I=a*this.d00+o*this.d01+r*this.d02,D=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=I,this.limitImpulse2+=D,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(I=-x)*this.k10,r+=I*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(D=-g)*this.k01,r+=D*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),D=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),I=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),I=(this.k11*a+-this.k01*o)*M,D=(-this.k10*a+this.k00*o)*M;break;case 5:D=o/this.k11;break;case 6:I=a/this.k00}this.limitImpulse1=I+x,this.limitImpulse2=D+g,this.limitImpulse3=nt+P;var it=m+I,ct=p+D,ut=N+nt;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,o=t*this.ax2+e*this.ay2+n*this.az2}}),nn.prototype=Object.assign(Object.create(Re.prototype),{constructor:nn,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var n=j.acosClamp(j.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),j.dotVectors(this.nor,this.tmp)<0?this.limitMotor.angle=-n:this.limitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=j.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=j.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.lc.preSolve(t,e)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}}),an.prototype=Object.assign(Object.create(Re.prototype),{constructor:an,preSolve:function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},solve:function(){this.lc.solve()},postSolve:function(){}}),Object.assign(Cn.prototype,{TranslationalConstraint:!0,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,c=this.p2.z-this.p1.z,f=o*this.ax+r*this.ay+c*this.az,u=this.limitMotor.frequency,m=u>0;(m&&f>20||f<-20)&&(m=!1),this.lowerLimit<=this.upperLimit?(this.lowerLimit==this.upperLimit?(this.limitState!=0&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-f,m||(f=this.lowerLimit)):f<this.lowerLimit?(this.limitState!=-1&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-f,m||(f=this.lowerLimit)):f>this.upperLimit?(this.limitState!=1&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-f,m||(f=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),m||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(this.limitState!=0||m)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var p=f*this.ax,N=f*this.ay,x=f*this.az,g=this.m1/(this.m1+this.m2),P=1-g;if(this.r1x=this.r1.x+p*g,this.r1y=this.r1.y+N*g,this.r1z=this.r1.z+x*g,this.r2x=this.r2.x-p*P,this.r2y=this.r2.y-N*P,this.r2z=this.r2.z-x*P,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,m&&this.limitState!=2){var I=6.2831853*u,D=I*I*t,nt=e/(D+2*this.limitMotor.dampingRatio*I);this.cfm=this.motorDenom*nt,this.limitVelocity*=D*nt}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm);var M=this.limitImpulse+this.motorImpulse;this.l1.x+=M*this.l1x,this.l1.y+=M*this.l1y,this.l1.z+=M*this.l1z,this.a1.x+=M*this.a1x,this.a1.y+=M*this.a1y,this.a1.z+=M*this.a1z,this.l2.x-=M*this.l2x,this.l2.y-=M*this.l2y,this.l2.z-=M*this.l2z,this.a2.x-=M*this.a2x,this.a2.y-=M*this.a2y,this.a2.z-=M*this.a2z},solve:function(){var t,e,n=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(n-this.motorSpeed)*this.invMotorDenom;var a=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),n-=(t=this.motorImpulse-a)*this.motorDenom}else t=0;if(this.limitState!=2){e=(n-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var o=this.limitImpulse;this.limitImpulse+=e,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),e=this.limitImpulse-o}else e=0;var r=e+t;this.l1.x+=r*this.l1x,this.l1.y+=r*this.l1y,this.l1.z+=r*this.l1z,this.a1.x+=r*this.a1x,this.a1.y+=r*this.a1y,this.a1.z+=r*this.a1z,this.l2.x-=r*this.l2x,this.l2.y-=r*this.l2y,this.l2.z-=r*this.l2z,this.a2.x-=r*this.a2x,this.a2.y-=r*this.a2y,this.a2.z-=r*this.a2z}}),on.prototype=Object.assign(Object.create(Re.prototype),{constructor:on,preSolve:function(t,e){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(t,e)},solve:function(){this.t.solve()},postSolve:function(){}}),Object.assign(Vn.prototype,{AngularConstraint:!0,preSolve:function(t,e){var n,a,o;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),n=1/((o=new Ui().add(this.ii1,this.ii2).elements)[0]*(o[4]*o[8]-o[7]*o[5])+o[3]*(o[7]*o[2]-o[1]*o[8])+o[6]*(o[1]*o[5]-o[4]*o[2])),this.dd=new Ui().set(o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]).multiplyScalar(n),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),n=2*this.relativeOrientation.w,this.vel.copy(this.relativeOrientation).multiplyScalar(n),(a=this.vel.length())>.02?(a=(.02-a)/a*e*.05,this.vel.multiplyScalar(a)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var t=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(t).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}}),Object.assign(hs.prototype,{Translational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,c=this.p2.z-this.p1.z,f=o*this.ax1+r*this.ay1+c*this.az1,u=o*this.ax2+r*this.ay2+c*this.az2,m=o*this.ax3+r*this.ay3+c*this.az3,p=this.limitMotor1.frequency,N=this.limitMotor2.frequency,x=this.limitMotor3.frequency,g=p>0,P=N>0,I=x>0,D=this.lowerLimit1<=this.upperLimit1,nt=this.lowerLimit2<=this.upperLimit2,M=this.lowerLimit3<=this.upperLimit3;(g&&f>20||f<-20)&&(g=!1),(P&&u>20||u<-20)&&(P=!1),(I&&m>20||m<-20)&&(I=!1),D?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-f,g||(f=this.lowerLimit1)):f<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-f,g||(f=this.lowerLimit1)):f>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-f,g||(f=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),g||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),nt?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-u,P||(u=this.lowerLimit2)):u<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-u,P||(u=this.lowerLimit2)):u>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-u,P||(u=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),P||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),M?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m,I||(m=this.lowerLimit3)):m<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-m,I||(m=this.lowerLimit3)):m>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-m,I||(m=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),I||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||g)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||P)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||I)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var tt=f*this.ax1+u*this.ax2+m*this.ax2,it=f*this.ay1+u*this.ay2+m*this.ay2,ct=f*this.az1+u*this.az2+m*this.az2,ut=this.m2/(this.m1+this.m2);this.weight>=0&&(ut=this.weight);var st=1-ut;this.r1x=this.r1.x+tt*ut,this.r1y=this.r1.y+it*ut,this.r1z=this.r1.z+ct*ut,this.r2x=this.r2.x-tt*st,this.r2y=this.r2.y-it*st,this.r2z=this.r2.z-ct*st,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var kt=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*kt,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*kt,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*kt,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*kt,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*kt,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*kt,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*kt,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*kt,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*kt,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,g&&this.limitState1!=2){var U=6.2831853*p,rt=U*U*t,pt=e/(rt+2*this.limitMotor1.dampingRatio*U);this.cfm1=this.kv00*pt,this.limitVelocity1*=rt*pt}else this.cfm1=0,this.limitVelocity1*=.05*e;P&&this.limitState2!=2?(pt=e/((rt=(U=6.2831853*N)*U*t)+2*this.limitMotor2.dampingRatio*U),this.cfm2=this.kv11*pt,this.limitVelocity2*=rt*pt):(this.cfm2=0,this.limitVelocity2*=.05*e),I&&this.limitState3!=2?(pt=e/((rt=(U=6.2831853*x)*U*t)+2*this.limitMotor3.dampingRatio*U),this.cfm3=this.kv22*pt,this.limitVelocity3*=rt*pt):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var Q=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*Q,this.d01=(this.k02*this.k21-this.k01*this.k22)*Q,this.d02=(this.k01*this.k12-this.k02*this.k11)*Q,this.d10=(this.k12*this.k20-this.k10*this.k22)*Q,this.d11=(this.k00*this.k22-this.k02*this.k20)*Q,this.d12=(this.k02*this.k10-this.k00*this.k12)*Q,this.d20=(this.k10*this.k21-this.k11*this.k20)*Q,this.d21=(this.k01*this.k20-this.k00*this.k21)*Q,this.d22=(this.k00*this.k11-this.k01*this.k10)*Q;var ht=this.limitImpulse1+this.motorImpulse1,dt=this.limitImpulse2+this.motorImpulse2,Ht=this.limitImpulse3+this.motorImpulse3;this.l1.x+=ht*this.l1x1+dt*this.l1x2+Ht*this.l1x3,this.l1.y+=ht*this.l1y1+dt*this.l1y2+Ht*this.l1y3,this.l1.z+=ht*this.l1z1+dt*this.l1z2+Ht*this.l1z3,this.a1.x+=ht*this.a1x1+dt*this.a1x2+Ht*this.a1x3,this.a1.y+=ht*this.a1y1+dt*this.a1y2+Ht*this.a1y3,this.a1.z+=ht*this.a1z1+dt*this.a1z2+Ht*this.a1z3,this.l2.x-=ht*this.l2x1+dt*this.l2x2+Ht*this.l2x3,this.l2.y-=ht*this.l2y1+dt*this.l2y2+Ht*this.l2y3,this.l2.z-=ht*this.l2z1+dt*this.l2z2+Ht*this.l2z3,this.a2.x-=ht*this.a2x1+dt*this.a2x2+Ht*this.a2x3,this.a2.y-=ht*this.a2y1+dt*this.a2y2+Ht*this.a2y3,this.a2.z-=ht*this.a2z1+dt*this.a2z2+Ht*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,c=this.motorImpulse1,f=this.motorImpulse2,u=this.motorImpulse3,m=0,p=0,N=0;this.enableMotor1&&(m=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=m,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),m=this.motorImpulse1-c),this.enableMotor2&&(p=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=p,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),p=this.motorImpulse2-f),this.enableMotor3&&(N=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=N,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),N=this.motorImpulse3-u),a+=m*this.kv00+p*this.k01+N*this.k02,o+=m*this.k10+p*this.kv11+N*this.k12,r+=m*this.k20+p*this.k21+N*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,I=a*this.d00+o*this.d01+r*this.d02,D=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=I,this.limitImpulse2+=D,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(I=-x)*this.k10,r+=I*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(D=-g)*this.k01,r+=D*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),D=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),I=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),I=(this.k11*a+-this.k01*o)*M,D=(-this.k10*a+this.k00*o)*M;break;case 5:D=o/this.k11;break;case 6:I=a/this.k00}this.limitImpulse1=x+I,this.limitImpulse2=g+D,this.limitImpulse3=P+nt;var it=m+I,ct=p+D,ut=N+nt;this.l1.x+=it*this.l1x1+ct*this.l1x2+ut*this.l1x3,this.l1.y+=it*this.l1y1+ct*this.l1y2+ut*this.l1y3,this.l1.z+=it*this.l1z1+ct*this.l1z2+ut*this.l1z3,this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.l2.x-=it*this.l2x1+ct*this.l2x2+ut*this.l2x3,this.l2.y-=it*this.l2y1+ct*this.l2y2+ut*this.l2y3,this.l2.z-=it*this.l2z1+ct*this.l2z2+ut*this.l2z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3}}),us.prototype=Object.assign(Object.create(Re.prototype),{constructor:us,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}}),rn.prototype=Object.assign(Object.create(Re.prototype),{constructor:rn,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var n=j.acosClamp(j.dotVectors(this.an1,this.an2));j.dotVectors(this.nor,this.tmp)<0?this.rotationalLimitMotor.angle=-n:this.rotationalLimitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=j.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=j.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),hn.prototype=Object.assign(Object.create(Re.prototype),{constructor:hn,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=j.dotVectors(this.ax1,this.ax2);var n=j.dotVectors(this.an1,this.ax2);j.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))<0?this.rotationalLimitMotor1.angle=-n:this.rotationalLimitMotor1.angle=n,n=j.dotVectors(this.an2,this.ax1),j.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))<0?this.rotationalLimitMotor2.angle=-n:this.rotationalLimitMotor2.angle=n,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),kn.prototype={constructor:kn,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPointVec:function(t,e,n,a){var o=this.points[this.numPoints++];o.position.copy(t),o.localPoint1.sub(t,this.body1.position).applyMatrix3(this.body1.rotation),o.localPoint2.sub(t,this.body2.position).applyMatrix3(this.body2.rotation),o.normal.copy(e),a&&o.normal.negate(),o.normalImpulse=0,o.penetration=n,o.warmStarted=!1},addPoint:function(t,e,n,a,o,r,c,f){var u=this.points[this.numPoints++];u.position.set(t,e,n),u.localPoint1.sub(u.position,this.body1.position).applyMatrix3(this.body1.rotation),u.localPoint2.sub(u.position,this.body2.position).applyMatrix3(this.body2.rotation),u.normalImpulse=0,u.normal.set(a,o,r),f&&u.normal.negate(),u.penetration=c,u.warmStarted=!1}},cn.prototype=Object.assign(Object.create(js.prototype),{constructor:cn,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var n=this.m1+this.m2;this.num=this.manifold.numPoints;for(var a,o,r,c,f,u,m,p=this.cs,N=0;N<this.num;N++)a=this.ps[N],this.tmpP1.sub(a.position,this.p1),this.tmpP2.sub(a.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),p.norImp=a.normalImpulse,p.tanImp=a.tangentImpulse,p.binImp=a.binormalImpulse,p.nor.copy(a.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),o=j.dotVectors(p.nor,this.tmp),p.tan.set(this.tmp.x-o*p.nor.x,this.tmp.y-o*p.nor.y,this.tmp.z-o*p.nor.z),j.dotVectors(p.tan,p.tan)<=.04&&p.tan.tangent(p.nor),p.tan.normalize(),p.bin.crossVectors(p.nor,p.tan),p.norU1.scale(p.nor,this.m1),p.norU2.scale(p.nor,this.m2),p.tanU1.scale(p.tan,this.m1),p.tanU2.scale(p.tan,this.m2),p.binU1.scale(p.bin,this.m1),p.binU2.scale(p.bin,this.m2),p.norT1.crossVectors(this.tmpP1,p.nor),p.tanT1.crossVectors(this.tmpP1,p.tan),p.binT1.crossVectors(this.tmpP1,p.bin),p.norT2.crossVectors(this.tmpP2,p.nor),p.tanT2.crossVectors(this.tmpP2,p.tan),p.binT2.crossVectors(this.tmpP2,p.bin),u=this.i1,m=this.i2,p.norTU1.copy(p.norT1).applyMatrix3(u,!0),p.tanTU1.copy(p.tanT1).applyMatrix3(u,!0),p.binTU1.copy(p.binT1).applyMatrix3(u,!0),p.norTU2.copy(p.norT2).applyMatrix3(m,!0),p.tanTU2.copy(p.tanT2).applyMatrix3(m,!0),p.binTU2.copy(p.binT2).applyMatrix3(m,!0),this.tmpC1.crossVectors(p.norTU1,this.tmpP1),this.tmpC2.crossVectors(p.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),p.norDen=1/(n+j.dotVectors(p.nor,this.tmp)),this.tmpC1.crossVectors(p.tanTU1,this.tmpP1),this.tmpC2.crossVectors(p.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),p.tanDen=1/(n+j.dotVectors(p.tan,this.tmp)),this.tmpC1.crossVectors(p.binTU1,this.tmpP1),this.tmpC2.crossVectors(p.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),p.binDen=1/(n+j.dotVectors(p.bin,this.tmp)),a.warmStarted?(r=a.normalImpulse,this.lv1.addScaledVector(p.norU1,r),this.av1.addScaledVector(p.norTU1,r),this.lv2.subScaledVector(p.norU2,r),this.av2.subScaledVector(p.norTU2,r),p.norImp=r,p.tanImp=0,p.binImp=0,o=0):(p.norImp=0,p.tanImp=0,p.binImp=0),o>-1&&(o=0),(c=this.restitution*-o)<(f=-(a.penetration+.005)*e*.05)&&(c=f),p.norTar=c,p.last=N==this.num-1,p=p.next},solve:function(){var t,e,n,a,o,r,c,f,u;this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var m=this.cs;o=m.norImp,r=m.tanImp,c=m.binImp,f=-o*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),t=r,n=c,(u=(r+=e=(j.dotVectors(this.tmp,m.tan)+j.dotVectors(this.tmpav2,m.tanT2)-j.dotVectors(this.tmpav1,m.tanT1))*m.tanDen)*r+(c+=a=(j.dotVectors(this.tmp,m.bin)+j.dotVectors(this.tmpav2,m.binT2)-j.dotVectors(this.tmpav1,m.binT1))*m.binDen)*c)>f*f&&(r*=u=f/j.sqrt(u),c*=u),e=r-t,a=c-n,this.tmp.set(m.tanU1.x*e+m.binU1.x*a,m.tanU1.y*e+m.binU1.y*a,m.tanU1.z*e+m.binU1.z*a),this.tmplv1.addEqual(this.tmp),this.tmp.set(m.tanTU1.x*e+m.binTU1.x*a,m.tanTU1.y*e+m.binTU1.y*a,m.tanTU1.z*e+m.binTU1.z*a),this.tmpav1.addEqual(this.tmp),this.tmp.set(m.tanU2.x*e+m.binU2.x*a,m.tanU2.y*e+m.binU2.y*a,m.tanU2.z*e+m.binU2.z*a),this.tmplv2.subEqual(this.tmp),this.tmp.set(m.tanTU2.x*e+m.binTU2.x*a,m.tanTU2.y*e+m.binTU2.y*a,m.tanTU2.z*e+m.binTU2.z*a),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),t=o,(o+=e=(j.dotVectors(this.tmp,m.nor)+j.dotVectors(this.tmpav2,m.norT2)-j.dotVectors(this.tmpav1,m.norT1)-m.norTar)*m.norDen)>0&&(o=0),e=o-t,this.tmplv1.addScaledVector(m.norU1,e),this.tmpav1.addScaledVector(m.norTU1,e),this.tmplv2.subScaledVector(m.norU2,e),this.tmpav2.subScaledVector(m.norTU2,e),m.norImp=o,m.tanImp=r,m.binImp=c,!m.last;)m=m.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var t,e=this.cs,n=this.num;n--;)(t=this.ps[n]).normal.copy(e.nor),t.tangent.copy(e.tan),t.binormal.copy(e.bin),t.normalImpulse=e.norImp,t.tangentImpulse=e.tanImp,t.binormalImpulse=e.binImp,t.normalDenominator=e.norDen,t.tangentDenominator=e.tanDen,t.binormalDenominator=e.binDen,e=e.next}}),Object.assign(qs.prototype,{Contact:!0,mixRestitution:function(t,e){return j.sqrt(t*e)},mixFriction:function(t,e){return j.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var n=this.buffer[e],a=this.points[e];n.lp1X=a.localPoint1.x,n.lp1Y=a.localPoint1.y,n.lp1Z=a.localPoint1.z,n.lp2X=a.localPoint2.x,n.lp2Y=a.localPoint2.y,n.lp2Z=a.localPoint2.z,n.impulse=a.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var o=this.manifold.numPoints;if(o==0)return this.touching=!1,this.close=!1,void(this.dist=j.INF);for((this.touching||this.dist<.001)&&(this.close=!0),this.touching=!0,e=o;e--;){for(var r=(a=this.points[e]).localPoint1.x,c=a.localPoint1.y,f=a.localPoint1.z,u=a.localPoint2.x,m=a.localPoint2.y,p=a.localPoint2.z,N=-1,x=4e-4,g=t;g--;){var P=(n=this.buffer[g]).lp1X-r,I=n.lp1Y-c,D=n.lp1Z-f,nt=P*P+I*I+D*D,M=(P=n.lp2X-u)*P+(I=n.lp2Y-m)*I+(D=n.lp2Z-p)*D;nt<M?nt<x&&(x=nt,N=g):M<x&&(x=M,N=g),x<this.dist&&(this.dist=x)}if(N!=-1){var tt=this.buffer[N];this.buffer[N]=this.buffer[--t],this.buffer[t]=tt,a.normalImpulse=tt.impulse,a.warmStarted=!0}else a.normalImpulse=0,a.warmStarted=!1}},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,t.contactLink!=null?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,e.contactLink!=null?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,this.body1.contactLink!=null?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,this.body2.contactLink!=null?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}}),Object.assign(ws.prototype,{setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(t){t.parent&&ce("RigidBody","It is not possible that you add a shape which already has an associated body."),this.shapes!=null&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var n=e.prev,a=e.next;n!=null&&(n.next=a),a!=null&&(a.prev=n),this.shapes==e&&(this.shapes=a),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var n=e===void 0||e;this.type=t||2,this.isDynamic=this.type===1,this.isStatic=this.type===2,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var a=new Ui,o=new $,r=this.shapes;r!==null;r=r.next){r.calculateMassInfo(this.massInfo);var c=this.massInfo.mass;o.addScaledVector(r.relativePosition,c),this.mass+=c,this.rotateInertia(r.relativeRotation,this.massInfo.inertia,a),this.localInertia.add(a),this.localInertia.addOffset(c,r.relativePosition)}if(this.inverseMass=1/this.mass,o.scaleEqual(this.inverseMass),n){for(this.position.add(o),r=this.shapes;r!==null;r=r.next)r.relativePosition.subEqual(o);this.localInertia.subOffset(this.mass,o)}this.inverseLocalInertia.invert(this.localInertia),this.type===2&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;t!=null;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;e!=null;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var n=this.shapes;n!=null;n=n.next)n.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;t!=null;t=t.next)t.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&&this.awake()},isLonely:function(){return this.numJoints==0&&this.numContacts==0},updatePosition:function(t){switch(this.type){case 2:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case 1:this.isKinematic&&(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&&(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/t),this.controlPos=!1),this.controlRot&&(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t),this.updateMesh();break;default:ce("RigidBody","Invalid type.")}this.syncShapes(),this.updateMesh()},getAxis:function(){return new $(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(t,e,n){this.tmpInertia.multiplyMatrices(t,e),n.multiplyMatrices(this.tmpInertia,t,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var t=this.shapes;t!=null;t=t.next)t.position.copy(t.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),t.rotation.multiplyMatrices(this.rotation,t.relativeRotation),t.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScaledVector(e,this.inverseMass);var n=new $().copy(t).sub(this.position).cross(e).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(n)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(t){this.newOrientation=new Gi().setFromEuler(t.x*j.degtorad,t.y*j.degtorad,t.z*j.degtorad),this.controlRot=!0},resetPosition:function(t,e,n){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,n).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new Gi(t.x,t.y,t.z,t.w),this.awake()},resetRotation:function(t,e,n){this.angularVelocity.set(0,0,0),this.orientation=new Gi().setFromEuler(t*j.degtorad,e*j.degtorad,n*j.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(t){this.mesh=t,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),this.mesh!==null&&(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}}),Object.assign(ps.prototype,{BroadPhase:!0,createProxy:function(t){ce("BroadPhase","Inheritance error.")},addProxy:function(t){ce("BroadPhase","Inheritance error.")},removeProxy:function(t){ce("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var n,a=t.parent,o=e.parent;if(a==o||!a.isDynamic&&!o.isDynamic||!(t.belongsTo&e.collidesWith)||!(e.belongsTo&t.collidesWith))return!1;for(n=a.numJoints<o.numJoints?a.jointLink:o.jointLink;n!==null;){var r=n.joint;if(!r.allowCollision&&(r.body1==a&&r.body2==o||r.body1==o&&r.body2==a))return!1;n=n.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(t,e){var n=new un(t,e);this.pairs.push(n),this.numPairs++}});var pn=0;function Qe(t){this.shape=t,this.aabb=t.aabb}function ls(t){Qe.call(this,t),this.id=pn++}function Ts(){ps.call(this),this.types=et,this.proxies=[]}function Ns(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}function As(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0}function Js(t,e){Qe.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new As(this,!1),this.max[0]=new As(this,!0),this.min[1]=new As(this,!1),this.max[1]=new As(this,!0),this.min[2]=new As(this,!1),this.max[2]=new As(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}function Zs(){ps.call(this),this.types=G,this.numElementsD=0,this.numElementsS=0,this.axesD=[new Ns,new Ns,new Ns],this.axesS=[new Ns,new Ns,new Ns],this.index1=0,this.index2=1}function mn(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new os}function Pn(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new os}function dn(t){Qe.call(this,t),this.leaf=new mn,this.leaf.proxy=this}function fn(){ps.call(this),this.types=Ot,this.tree=new Pn,this.stack=[],this.leaves=[],this.numLeaves=0}function ze(){this.flip=!1}function yn(){ze.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}function vn(t){ze.call(this),this.flip=t}function _n(){ze.call(this)}function _e(t){ze.call(this),this.flip=t}function Ks(t){ze.call(this),this.flip=t}function Se(){ze.call(this)}function je(t){ze.call(this),this.flip=t,this.n=new $,this.p=new $}function Ys(t){ze.call(this),this.flip=t,this.n=new $,this.p=new $,this.dix=new $,this.diy=new $,this.diz=new $,this.cc=new $,this.cc2=new $}function In(t){switch(t instanceof Object||(t={}),this.scale=t.worldscale||1,this.invScale=1/this.scale,this.timeStep=t.timestep||.01666,this.timerate=1e3*this.timeStep,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=t.iterations||8,t.broadphase||2){case 1:this.broadPhase=new Ts;break;case 2:default:this.broadPhase=new Zs;break;case 3:this.broadPhase=new fn}this.Btypes=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhaseType=this.Btypes[t.broadphase||2],this.performance=null,this.isStat=t.info!==void 0&&t.info,this.isStat&&(this.performance=new Hs(this)),this.enableRandomizer=t.random===void 0||t.random,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new $(0,-9.8,0),t.gravity!==void 0&&this.gravity.fromArray(t.gravity),this.detectors=[],this.detectors.length=5;for(var e=5;e--;)this.detectors[e]=[],this.detectors[e].length=5;this.detectors[Ct][Ct]=new Se,this.detectors[Ct][si]=new _e(!1),this.detectors[si][Ct]=new _e(!0),this.detectors[si][si]=new yn,this.detectors[vi][vi]=new _n,this.detectors[vi][si]=new vn(!0),this.detectors[si][vi]=new vn(!1),this.detectors[vi][Ct]=new Ks(!0),this.detectors[Ct][vi]=new Ks(!1),this.detectors[Bi][Ct]=new je(!0),this.detectors[Ct][Bi]=new je(!1),this.detectors[Bi][si]=new Ys(!0),this.detectors[si][Bi]=new Ys(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(Qe.prototype,{Proxy:!0,update:function(){ce("Proxy","Inheritance error.")}}),ls.prototype=Object.assign(Object.create(Qe.prototype),{constructor:ls,update:function(){}}),Ts.prototype=Object.assign(Object.create(ps.prototype),{constructor:Ts,createProxy:function(t){return new ls(t)},addProxy:function(t){this.proxies.push(t)},removeProxy:function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},collectPairs:function(){var t,e,n,a=0,o=this.proxies,r=o.length;for(this.numPairChecks=r*(r-1)>>1;a<r;)for(e=o[a++],t=a+1;t<r;)n=o[t++],!e.aabb.intersectTest(n.aabb)&&this.isAvailablePair(e.shape,n.shape)&&this.addPair(e.shape,n.shape)}}),Object.assign(Ns.prototype,{SAPAxis:!0,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var n=[],a=this.numElements;a--;)n[a]=this.elements[a]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var n=-1,a=-1,o=0,r=this.numElements;o<r;o++){var c=this.elements[o];if(c==t||c==e){if(n!=-1){a=o;break}n=o}}for(o=n+1,r=a;o<r;o++)this.elements[o-1]=this.elements[o];for(o=a+1,r=this.numElements;o<r;o++)this.elements[o-2]=this.elements[o];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e;)e++;e=e*this.numElements>>2,t=0;for(var n=!1,a=this.elements,o=1,r=this.numElements;o<r;o++){var c=a[o],f=c.value,u=a[o-1];if(u.value>f){var m=o;do{if(a[m]=u,--m==0)break;u=a[m-1]}while(u.value>f);if(a[m]=c,(t+=o-m)>e){n=!0;break}}}if(n){t=2;var p=this.stack;for(p[0]=0,p[1]=this.numElements-1;t>0;){var N=p[--t],x=p[--t],g=N-x;if(g>16){var P=x+j.floor(.5*g);for(c=a[P],a[P]=a[N],a[N]=c,f=c.value,o=x-1,m=N;;){var I,D;do I=a[++o];while(I.value<f);do D=a[--m];while(f<D.value&&m!=x);if(o>=m)break;a[o]=D,a[m]=I}a[N]=a[o],a[o]=c,o-x>N-o?(p[t++]=x,p[t++]=o-1,p[t++]=o+1,p[t++]=N):(p[t++]=o+1,p[t++]=N,p[t++]=x,p[t++]=o-1)}else for(o=x+1;o<=N;o++)if(f=(c=a[o]).value,(u=a[o-1]).value>f){m=o;do{if(a[m]=u,--m==0)break;u=a[m-1]}while(u.value>f);a[m]=c}}}},calculateTestCount:function(){for(var t=1,e=0,n=1,a=this.numElements;n<a;n++)this.elements[n].max?t--:(e+=t,t++);return e}}),Js.prototype=Object.assign(Object.create(Qe.prototype),{constructor:Js,isDynamic:function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},update:function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(this.belongsTo==1&&!this.isDynamic()||this.belongsTo==2&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))}}),Zs.prototype=Object.assign(Object.create(ps.prototype),{constructor:Zs,createProxy:function(t){return new Js(this,t)},addProxy:function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},removeProxy:function(t){var e=t;if(e.belongsTo!=0){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2}e.belongsTo=0}},collectPairs:function(){if(this.numElementsD!=0){var t,e,n,a,o=this.axesD[this.index1],r=this.axesD[this.index2];o.sort(),r.sort(),o.calculateTestCount()<=r.calculateTestCount()?((r=this.axesS[this.index1]).sort(),t=o.elements,e=r.elements):((o=this.axesS[this.index2]).sort(),t=r.elements,e=o.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var c=0,f=0;c<this.numElementsD;){var u,m;if(f==this.numElementsS)u=t[c],m=!0,c++;else{var p=t[c],N=e[f];p.value<N.value?(u=p,m=!0,c++):(u=N,m=!1,f++)}if(u.max){var x=u.pair;if(m){if(x==n){n=n.pair;continue}u=n}else{if(x==a){a=a.pair;continue}u=a}for(;u;){if((M=u.pair)==x){u.pair=M.pair;break}u=M}}else{for(var g=u.proxy.shape,P=u.min1.value,I=u.max1.value,D=u.min2.value,nt=u.max2.value,M=n;M!=null;M=M.pair){var tt=M.proxy.shape;this.numPairChecks++,P>M.max1.value||I<M.min1.value||D>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt)}if(m){for(M=a;M!=null;M=M.pair)tt=M.proxy.shape,this.numPairChecks++,P>M.max1.value||I<M.min1.value||D>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt);u.pair=n,n=u}else u.pair=a,a=u}}this.index2=3^(this.index1|this.index2)}}}),Object.assign(Pn.prototype,{DBVT:!0,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(this.root!=null){for(var e,n,a=t.aabb,o=this.root;o.proxy==null;){var r=o.child1,c=o.child2,f=o.aabb,u=r.aabb,m=c.aabb;e=f.surfaceArea(),this.aabb.combine(a,f);var p=2*(n=this.aabb.surfaceArea()),N=2*(n-e),x=N;this.aabb.combine(a,u),r.proxy!=null?x+=this.aabb.surfaceArea():x+=this.aabb.surfaceArea()-u.surfaceArea();var g=N;if(this.aabb.combine(a,m),c.proxy!=null?g+=this.aabb.surfaceArea():g+=this.aabb.surfaceArea()-m.surfaceArea(),x<g){if(p<x)break;o=r}else{if(p<g)break;o=c}}var P,I=o.parent;(P=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new mn).parent=I,P.child1=t,P.child2=o,P.aabb.combine(t.aabb,o.aabb),P.height=o.height+1,o.parent=P,t.parent=P,o==this.root?this.root=P:I.child1==o?I.child1=P:I.child2=P;do P=this.balance(P),this.fix(P),P=P.parent;while(P!=null)}else this.root=t},getBalance:function(t){return t.proxy!=null?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t!=this.root){var e,n=t.parent;if(e=n.child1==t?n.child2:n.child1,n==this.root)return this.root=e,void(e.parent=null);var a=n.parent;e.parent=a,a.child1==n?a.child1=e:a.child2=e,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=n);do a=this.balance(a),this.fix(a),a=a.parent;while(a!=null)}else this.root=null},balance:function(t){var e=t.height;if(e<2)return t;var n,a=t.parent,o=t.child1,r=t.child2,c=o.height,f=r.height,u=c-f;if(u>1){var m=o.child1,p=o.child2,N=m.height,x=p.height;return N>x?(o.child2=t,t.parent=o,t.child1=p,p.parent=t,t.aabb.combine(p.aabb,r.aabb),n=x-f,t.height=x-(n&n>>31)+1,o.aabb.combine(m.aabb,t.aabb),n=N-e,o.height=N-(n&n>>31)+1):(o.child1=t,t.parent=o,t.child1=m,m.parent=t,t.aabb.combine(m.aabb,r.aabb),n=N-f,t.height=N-(n&n>>31)+1,o.aabb.combine(t.aabb,p.aabb),n=e-x,o.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=o:a.child2=o:this.root=o,o.parent=a,o}if(u<-1){var g=r.child1,P=r.child2,I=g.height,D=P.height;return I>D?(r.child2=t,t.parent=r,t.child2=P,P.parent=t,t.aabb.combine(o.aabb,P.aabb),n=c-D,t.height=c-(n&n>>31)+1,r.aabb.combine(g.aabb,t.aabb),n=I-e,r.height=I-(n&n>>31)+1):(r.child1=t,t.parent=r,t.child2=g,g.parent=t,t.aabb.combine(o.aabb,g.aabb),n=c-I,t.height=c-(n&n>>31)+1,r.aabb.combine(t.aabb,P.aabb),n=e-D,r.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=r:a.child2=r:this.root=r,r.parent=a,r}return t},fix:function(t){var e=t.child1,n=t.child2;t.aabb.combine(e.aabb,n.aabb),t.height=e.height<n.height?n.height+1:e.height+1}}),dn.prototype=Object.assign(Object.create(Qe.prototype),{constructor:dn,update:function(){}}),fn.prototype=Object.assign(Object.create(ps.prototype),{constructor:fn,createProxy:function(t){return new dn(t)},addProxy:function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},removeProxy:function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves<2))for(var t,e=this.numLeaves;e--;)(t=this.leaves[e]).proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,.1),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},collide:function(t,e){var n,a,o,r,c,f,u=2;for(this.stack[0]=t,this.stack[1]=e;u>0;)if(o=this.stack[--u],r=this.stack[--u],c=o.proxy!=null,f=r.proxy!=null,this.numPairChecks++,c&&f){if((n=o.proxy.shape)==(a=r.proxy.shape)||n.aabb.intersectTest(a.aabb)||!this.isAvailablePair(n,a))continue;this.addPair(n,a)}else{if(o.aabb.intersectTest(r.aabb))continue;f||!c&&o.aabb.surfaceArea()>r.aabb.surfaceArea()?(this.stack[u++]=o.child1,this.stack[u++]=r,this.stack[u++]=o.child2,this.stack[u++]=r):(this.stack[u++]=o,this.stack[u++]=r.child1,this.stack[u++]=o,this.stack[u++]=r.child2)}}}),Object.assign(ze.prototype,{CollisionDetector:!0,detectCollision:function(t,e,n){ce("CollisionDetector","Inheritance error.")}}),yn.prototype=Object.assign(Object.create(ze.prototype),{constructor:yn,detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,c,f,u,m,p,N,x,g,P,I,D,nt,M,tt,it,ct,ut,st,kt,U,rt,pt,Q,ht,dt,Ht,ki,wi,_i,E,Zt,S,z,at,B=a.elements,F=o.elements,At=a.dimentions,$t=o.dimentions,xt=a.position,gt=o.position,W=xt.x,mt=xt.y,zt=xt.z,oe=gt.x,Ni=gt.y,Ei=gt.z,bi=oe-W,xi=Ni-mt,St=Ei-zt,_t=a.halfWidth,K=a.halfHeight,lt=a.halfDepth,wt=o.halfWidth,Pi=o.halfHeight,Qt=o.halfDepth,Tt=At[0],Ut=At[1],Wt=At[2],vt=At[3],ft=At[4],yt=At[5],Kt=At[6],Vt=At[7],Jt=At[8],ni=At[9],ai=At[10],Bt=At[11],Mt=At[12],l=At[13],d=At[14],_=At[15],k=At[16],w=At[17],L=$t[0],H=$t[1],C=$t[2],R=$t[3],X=$t[4],Nt=$t[5],Pt=$t[6],Gt=$t[7],Xt=$t[8],ue=$t[9],Mi=$t[10],Li=$t[11],Wi=$t[12],ii=$t[13],be=$t[14],xe=$t[15],ge=$t[16],ci=$t[17],ri=Ut*C-Wt*H,Hi=Wt*L-Tt*C,hi=Tt*H-Ut*L,pe=Ut*Nt-Wt*X,me=Wt*R-Tt*Nt,de=Tt*X-Ut*R,fe=Ut*Xt-Wt*Gt,ye=Wt*Pt-Tt*Xt,ve=Tt*Gt-Ut*Pt,Fi=ft*C-yt*H,Di=yt*L-vt*C,Qi=vt*H-ft*L,Me=ft*Nt-yt*X,Le=yt*R-vt*Nt,Ce=vt*X-ft*R,Ve=ft*Xt-yt*Gt,Ie=yt*Pt-vt*Xt,He=vt*Gt-ft*Pt,Te=Vt*C-Jt*H,Ae=Jt*L-Kt*C,$e=Kt*H-Vt*L,Be=Vt*Nt-Jt*X,Ee=Jt*R-Kt*Nt,Fe=Kt*X-Vt*R,bt=Vt*Xt-Jt*Gt,$s=Jt*Pt-Kt*Xt,Bs=Kt*Gt-Vt*Pt,ca=!1,ua=!1,pa=!1,ma=!1,da=!1,fa=!1,ya=!1,va=!1,_a=!1;if((r=(E=Tt*bi+Ut*xi+Wt*St)>0)||(E=-E),(S=Tt*L+Ut*H+Wt*C)<0&&(S=-S),(z=Tt*R+Ut*X+Wt*Nt)<0&&(z=-z),(at=Tt*Pt+Ut*Gt+Wt*Xt)<0&&(at=-at),!((it=E-(Zt=_t)-(S*wt+z*Pi+at*Qt))>0||((c=(E=vt*bi+ft*xi+yt*St)>0)||(E=-E),(S=vt*L+ft*H+yt*C)<0&&(S=-S),(z=vt*R+ft*X+yt*Nt)<0&&(z=-z),(at=vt*Pt+ft*Gt+yt*Xt)<0&&(at=-at),(ct=E-(Zt=K)-(S*wt+z*Pi+at*Qt))>0||((f=(E=Kt*bi+Vt*xi+Jt*St)>0)||(E=-E),(S=Kt*L+Vt*H+Jt*C)<0&&(S=-S),(z=Kt*R+Vt*X+Jt*Nt)<0&&(z=-z),(at=Kt*Pt+Vt*Gt+Jt*Xt)<0&&(at=-at),(ut=E-(Zt=lt)-(S*wt+z*Pi+at*Qt))>0||((u=(E=L*bi+H*xi+C*St)>0)||(E=-E),(S=L*Tt+H*Ut+C*Wt)<0&&(S=-S),(z=L*vt+H*ft+C*yt)<0&&(z=-z),(at=L*Kt+H*Vt+C*Jt)<0&&(at=-at),(st=1*(E-(Zt=S*_t+z*K+at*lt)-wt))>0||((m=(E=R*bi+X*xi+Nt*St)>0)||(E=-E),(S=R*Tt+X*Ut+Nt*Wt)<0&&(S=-S),(z=R*vt+X*ft+Nt*yt)<0&&(z=-z),(at=R*Kt+X*Vt+Nt*Jt)<0&&(at=-at),(kt=1*(E-(Zt=S*_t+z*K+at*lt)-Pi))>0||((p=(E=Pt*bi+Gt*xi+Xt*St)>0)||(E=-E),(S=Pt*Tt+Gt*Ut+Xt*Wt)<0&&(S=-S),(z=Pt*vt+Gt*ft+Xt*yt)<0&&(z=-z),(at=Pt*Kt+Gt*Vt+Xt*Jt)<0&&(at=-at),(U=1*(E-(Zt=S*_t+z*K+at*lt)-Qt))>0))))))){if((E=ri*ri+Hi*Hi+hi*hi)>1e-5){if((N=(E=(ri*=E=1/j.sqrt(E))*bi+(Hi*=E)*xi+(hi*=E)*St)>0)||(E=-E),(S=ri*vt+Hi*ft+hi*yt)<0&&(S=-S),(z=ri*Kt+Hi*Vt+hi*Jt)<0&&(z=-z),Zt=S*K+z*lt,(S=ri*R+Hi*X+hi*Nt)<0&&(S=-S),(z=ri*Pt+Hi*Gt+hi*Xt)<0&&(z=-z),(rt=E-Zt-(S*Pi+z*Qt))>0)return}else N=!1,rt=0,ca=!0;if((E=pe*pe+me*me+de*de)>1e-5){if((x=(E=(pe*=E=1/j.sqrt(E))*bi+(me*=E)*xi+(de*=E)*St)>0)||(E=-E),(S=pe*vt+me*ft+de*yt)<0&&(S=-S),(z=pe*Kt+me*Vt+de*Jt)<0&&(z=-z),Zt=S*K+z*lt,(S=pe*L+me*H+de*C)<0&&(S=-S),(z=pe*Pt+me*Gt+de*Xt)<0&&(z=-z),(pt=E-Zt-(S*wt+z*Qt))>0)return}else x=!1,pt=0,ua=!0;if((E=fe*fe+ye*ye+ve*ve)>1e-5){if((g=(E=(fe*=E=1/j.sqrt(E))*bi+(ye*=E)*xi+(ve*=E)*St)>0)||(E=-E),(S=fe*vt+ye*ft+ve*yt)<0&&(S=-S),(z=fe*Kt+ye*Vt+ve*Jt)<0&&(z=-z),Zt=S*K+z*lt,(S=fe*L+ye*H+ve*C)<0&&(S=-S),(z=fe*R+ye*X+ve*Nt)<0&&(z=-z),(Q=E-Zt-(S*wt+z*Pi))>0)return}else g=!1,Q=0,pa=!0;if((E=Fi*Fi+Di*Di+Qi*Qi)>1e-5){if((P=(E=(Fi*=E=1/j.sqrt(E))*bi+(Di*=E)*xi+(Qi*=E)*St)>0)||(E=-E),(S=Fi*Tt+Di*Ut+Qi*Wt)<0&&(S=-S),(z=Fi*Kt+Di*Vt+Qi*Jt)<0&&(z=-z),Zt=S*_t+z*lt,(S=Fi*R+Di*X+Qi*Nt)<0&&(S=-S),(z=Fi*Pt+Di*Gt+Qi*Xt)<0&&(z=-z),(ht=E-Zt-(S*Pi+z*Qt))>0)return}else P=!1,ht=0,ma=!0;if((E=Me*Me+Le*Le+Ce*Ce)>1e-5){if((I=(E=(Me*=E=1/j.sqrt(E))*bi+(Le*=E)*xi+(Ce*=E)*St)>0)||(E=-E),(S=Me*Tt+Le*Ut+Ce*Wt)<0&&(S=-S),(z=Me*Kt+Le*Vt+Ce*Jt)<0&&(z=-z),Zt=S*_t+z*lt,(S=Me*L+Le*H+Ce*C)<0&&(S=-S),(z=Me*Pt+Le*Gt+Ce*Xt)<0&&(z=-z),(dt=E-Zt-(S*wt+z*Qt))>0)return}else I=!1,dt=0,da=!0;if((E=Ve*Ve+Ie*Ie+He*He)>1e-5){if((D=(E=(Ve*=E=1/j.sqrt(E))*bi+(Ie*=E)*xi+(He*=E)*St)>0)||(E=-E),(S=Ve*Tt+Ie*Ut+He*Wt)<0&&(S=-S),(z=Ve*Kt+Ie*Vt+He*Jt)<0&&(z=-z),Zt=S*_t+z*lt,(S=Ve*L+Ie*H+He*C)<0&&(S=-S),(z=Ve*R+Ie*X+He*Nt)<0&&(z=-z),(Ht=E-Zt-(S*wt+z*Pi))>0)return}else D=!1,Ht=0,fa=!0;if((E=Te*Te+Ae*Ae+$e*$e)>1e-5){if((nt=(E=(Te*=E=1/j.sqrt(E))*bi+(Ae*=E)*xi+($e*=E)*St)>0)||(E=-E),(S=Te*Tt+Ae*Ut+$e*Wt)<0&&(S=-S),(z=Te*vt+Ae*ft+$e*yt)<0&&(z=-z),Zt=S*_t+z*K,(S=Te*R+Ae*X+$e*Nt)<0&&(S=-S),(z=Te*Pt+Ae*Gt+$e*Xt)<0&&(z=-z),(ki=E-Zt-(S*Pi+z*Qt))>0)return}else nt=!1,ki=0,ya=!0;if((E=Be*Be+Ee*Ee+Fe*Fe)>1e-5){if((M=(E=(Be*=E=1/j.sqrt(E))*bi+(Ee*=E)*xi+(Fe*=E)*St)>0)||(E=-E),(S=Be*Tt+Ee*Ut+Fe*Wt)<0&&(S=-S),(z=Be*vt+Ee*ft+Fe*yt)<0&&(z=-z),Zt=S*_t+z*K,(S=Be*L+Ee*H+Fe*C)<0&&(S=-S),(z=Be*Pt+Ee*Gt+Fe*Xt)<0&&(z=-z),(wi=E-Zt-(S*wt+z*Qt))>0)return}else M=!1,wi=0,va=!0;if((E=bt*bt+$s*$s+Bs*Bs)>1e-5){if((tt=(E=(bt*=E=1/j.sqrt(E))*bi+($s*=E)*xi+(Bs*=E)*St)>0)||(E=-E),(S=bt*Tt+$s*Ut+Bs*Wt)<0&&(S=-S),(z=bt*vt+$s*ft+Bs*yt)<0&&(z=-z),Zt=S*_t+z*K,(S=bt*L+$s*H+Bs*C)<0&&(S=-S),(z=bt*R+$s*X+Bs*Nt)<0&&(z=-z),(_i=E-Zt-(S*wt+z*Pi))>0)return}else tt=!1,_i=0,_a=!0;var we=it,Ri=it,Ci=0,ke=r;ct>Ri&&(we=ct,Ri=ct,Ci=1,ke=c),ut>Ri&&(we=ut,Ri=ut,Ci=2,ke=f),st>Ri&&(we=st,Ri=st,Ci=3,ke=u),kt>Ri&&(we=kt,Ri=kt,Ci=4,ke=m),U>Ri&&(we=U,Ri=U,Ci=5,ke=p),rt-.01>Ri&&!ca&&(we=rt,Ri=rt-.01,Ci=6,ke=N),pt-.01>Ri&&!ua&&(we=pt,Ri=pt-.01,Ci=7,ke=x),Q-.01>Ri&&!pa&&(we=Q,Ri=Q-.01,Ci=8,ke=g),ht-.01>Ri&&!ma&&(we=ht,Ri=ht-.01,Ci=9,ke=P),dt-.01>Ri&&!da&&(we=dt,Ri=dt-.01,Ci=10,ke=I),Ht-.01>Ri&&!fa&&(we=Ht,Ri=Ht-.01,Ci=11,ke=D),ki-.01>Ri&&!ya&&(we=ki,Ri=ki-.01,Ci=12,ke=nt),wi-.01>Ri&&!va&&(we=wi,Ri=wi-.01,Ci=13,ke=M),_i-.01>Ri&&!_a&&(we=_i,Ci=14,ke=tt);var Et=0,Ft=0,Dt=0,Xi=0,te=0,ie=0,re=0,he=0,le=0,qi=0,Ji=0,Zi=0,ms=0,ds=0,fs=0,ys=0,vs=0,_s=0,zn=!1;if(Ci==0?(ke?(qi=W+ni,Ji=mt+ai,Zi=zt+Bt,Et=Tt,Ft=Ut,Dt=Wt):(qi=W-ni,Ji=mt-ai,Zi=zt-Bt,Et=-Tt,Ft=-Ut,Dt=-Wt),ms=Mt,ds=l,fs=d,Xi=-vt,te=-ft,ie=-yt,ys=_,vs=k,_s=w,re=-Kt,he=-Vt,le=-Jt):Ci==1?(ke?(qi=W+Mt,Ji=mt+l,Zi=zt+d,Et=vt,Ft=ft,Dt=yt):(qi=W-Mt,Ji=mt-l,Zi=zt-d,Et=-vt,Ft=-ft,Dt=-yt),ms=ni,ds=ai,fs=Bt,Xi=-Tt,te=-Ut,ie=-Wt,ys=_,vs=k,_s=w,re=-Kt,he=-Vt,le=-Jt):Ci==2?(ke?(qi=W+_,Ji=mt+k,Zi=zt+w,Et=Kt,Ft=Vt,Dt=Jt):(qi=W-_,Ji=mt-k,Zi=zt-w,Et=-Kt,Ft=-Vt,Dt=-Jt),ms=ni,ds=ai,fs=Bt,Xi=-Tt,te=-Ut,ie=-Wt,ys=Mt,vs=l,_s=d,re=-vt,he=-ft,le=-yt):Ci==3?(zn=!0,ke?(qi=oe-ue,Ji=Ni-Mi,Zi=Ei-Li,Et=-L,Ft=-H,Dt=-C):(qi=oe+ue,Ji=Ni+Mi,Zi=Ei+Li,Et=L,Ft=H,Dt=C),ms=Wi,ds=ii,fs=be,Xi=-R,te=-X,ie=-Nt,ys=xe,vs=ge,_s=ci,re=-Pt,he=-Gt,le=-Xt):Ci==4?(zn=!0,ke?(qi=oe-Wi,Ji=Ni-ii,Zi=Ei-be,Et=-R,Ft=-X,Dt=-Nt):(qi=oe+Wi,Ji=Ni+ii,Zi=Ei+be,Et=R,Ft=X,Dt=Nt),ms=ue,ds=Mi,fs=Li,Xi=-L,te=-H,ie=-C,ys=xe,vs=ge,_s=ci,re=-Pt,he=-Gt,le=-Xt):Ci==5?(zn=!0,ke?(qi=oe-xe,Ji=Ni-ge,Zi=Ei-ci,Et=-Pt,Ft=-Gt,Dt=-Xt):(qi=oe+xe,Ji=Ni+ge,Zi=Ei+ci,Et=Pt,Ft=Gt,Dt=Xt),ms=ue,ds=Mi,fs=Li,Xi=-L,te=-H,ie=-C,ys=Wi,vs=ii,_s=be,re=-R,he=-X,le=-Nt):Ci==6?(Et=ri,Ft=Hi,Dt=hi,Xi=Tt,te=Ut,ie=Wt,re=L,he=H,le=C):Ci==7?(Et=pe,Ft=me,Dt=de,Xi=Tt,te=Ut,ie=Wt,re=R,he=X,le=Nt):Ci==8?(Et=fe,Ft=ye,Dt=ve,Xi=Tt,te=Ut,ie=Wt,re=Pt,he=Gt,le=Xt):Ci==9?(Et=Fi,Ft=Di,Dt=Qi,Xi=vt,te=ft,ie=yt,re=L,he=H,le=C):Ci==10?(Et=Me,Ft=Le,Dt=Ce,Xi=vt,te=ft,ie=yt,re=R,he=X,le=Nt):Ci==11?(Et=Ve,Ft=Ie,Dt=He,Xi=vt,te=ft,ie=yt,re=Pt,he=Gt,le=Xt):Ci==12?(Et=Te,Ft=Ae,Dt=$e,Xi=Kt,te=Vt,ie=Jt,re=L,he=H,le=C):Ci==13?(Et=Be,Ft=Ee,Dt=Fe,Xi=Kt,te=Vt,ie=Jt,re=R,he=X,le=Nt):Ci==14&&(Et=bt,Ft=$s,Dt=Bs,Xi=Kt,te=Vt,ie=Jt,re=Pt,he=Gt,le=Xt),Ci>5){var Oi,Vi,Ti,Ai,$i,bs,xs,gs,Ss,Ms,Ls;ke||(Et=-Et,Ft=-Ft,Dt=-Dt),Vi=Et*(bs=B[0])+Ft*(xs=B[1])+Dt*(gs=B[2]),(Oi=Et*(Ti=B[3])+Ft*(Ai=B[4])+Dt*($i=B[5]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[6])+Ft*(Ai=B[7])+Dt*($i=B[8]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[9])+Ft*(Ai=B[10])+Dt*($i=B[11]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[12])+Ft*(Ai=B[13])+Dt*($i=B[14]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[15])+Ft*(Ai=B[16])+Dt*($i=B[17]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[18])+Ft*(Ai=B[19])+Dt*($i=B[20]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),(Oi=Et*(Ti=B[21])+Ft*(Ai=B[22])+Dt*($i=B[23]))>Vi&&(Vi=Oi,bs=Ti,xs=Ai,gs=$i),Vi=Et*(Ss=F[0])+Ft*(Ms=F[1])+Dt*(Ls=F[2]),(Oi=Et*(Ti=F[3])+Ft*(Ai=F[4])+Dt*($i=F[5]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[6])+Ft*(Ai=F[7])+Dt*($i=F[8]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[9])+Ft*(Ai=F[10])+Dt*($i=F[11]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[12])+Ft*(Ai=F[13])+Dt*($i=F[14]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[15])+Ft*(Ai=F[16])+Dt*($i=F[17]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[18])+Ft*(Ai=F[19])+Dt*($i=F[20]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i),(Oi=Et*(Ti=F[21])+Ft*(Ai=F[22])+Dt*($i=F[23]))<Vi&&(Vi=Oi,Ss=Ti,Ms=Ai,Ls=$i);var gi=((Ti=Ss-bs)*(Xi-re*(S=Xi*re+te*he+ie*le))+(Ai=Ms-xs)*(te-he*S)+($i=Ls-gs)*(ie-le*S))/(1-S*S);n.addPoint(bs+Xi*gi+Et*we*.5,xs+te*gi+Ft*we*.5,gs+ie*gi+Dt*we*.5,Et,Ft,Dt,we,!1)}else{var Ue,We,qe,Je,Ze,Ke,Xe,ts,is,es,ss,ns,as,li,q,pi,mi,di,ee,se,ne,Ii=1,oi=0,ae=0;zn?((oi=Tt*Et+Ut*Ft+Wt*Dt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=vt*Et+ft*Ft+yt*Dt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=Kt*Et+Vt*Ft+Jt*Dt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(Ue=B[0],We=B[1],qe=B[2],Je=B[6],Ze=B[7],Ke=B[8],Xe=B[9],ts=B[10],is=B[11],es=B[3],ss=B[4],ns=B[5]):ae==1?(Ue=B[15],We=B[16],qe=B[17],Je=B[21],Ze=B[22],Ke=B[23],Xe=B[18],ts=B[19],is=B[20],es=B[12],ss=B[13],ns=B[14]):ae==2?(Ue=B[12],We=B[13],qe=B[14],Je=B[0],Ze=B[1],Ke=B[2],Xe=B[3],ts=B[4],is=B[5],es=B[15],ss=B[16],ns=B[17]):ae==3?(Ue=B[21],We=B[22],qe=B[23],Je=B[9],Ze=B[10],Ke=B[11],Xe=B[6],ts=B[7],is=B[8],es=B[18],ss=B[19],ns=B[20]):ae==4?(Ue=B[12],We=B[13],qe=B[14],Je=B[18],Ze=B[19],Ke=B[20],Xe=B[6],ts=B[7],is=B[8],es=B[0],ss=B[1],ns=B[2]):ae==5&&(Ue=B[3],We=B[4],qe=B[5],Je=F[9],Ze=F[10],Ke=F[11],Xe=B[21],ts=B[22],is=B[23],es=B[15],ss=B[16],ns=B[17])):((oi=L*Et+H*Ft+C*Dt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=R*Et+X*Ft+Nt*Dt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=Pt*Et+Gt*Ft+Xt*Dt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(Ue=F[0],We=F[1],qe=F[2],Je=F[6],Ze=F[7],Ke=F[8],Xe=F[9],ts=F[10],is=F[11],es=F[3],ss=F[4],ns=F[5]):ae==1?(Ue=F[15],We=F[16],qe=F[17],Je=F[21],Ze=F[22],Ke=F[23],Xe=F[18],ts=F[19],is=F[20],es=F[12],ss=F[13],ns=F[14]):ae==2?(Ue=F[12],We=F[13],qe=F[14],Je=F[0],Ze=F[1],Ke=F[2],Xe=F[3],ts=F[4],is=F[5],es=F[15],ss=F[16],ns=F[17]):ae==3?(Ue=F[21],We=F[22],qe=F[23],Je=F[9],Ze=F[10],Ke=F[11],Xe=F[6],ts=F[7],is=F[8],es=F[18],ss=F[19],ns=F[20]):ae==4?(Ue=F[12],We=F[13],qe=F[14],Je=F[18],Ze=F[19],Ke=F[20],Xe=F[6],ts=F[7],is=F[8],es=F[0],ss=F[1],ns=F[2]):ae==5&&(Ue=F[3],We=F[4],qe=F[5],Je=F[9],Ze=F[10],Ke=F[11],Xe=F[21],ts=F[22],is=F[23],es=F[15],ss=F[16],ns=F[17])),this.clipVertices1[0]=Ue,this.clipVertices1[1]=We,this.clipVertices1[2]=qe,this.clipVertices1[3]=Je,this.clipVertices1[4]=Ze,this.clipVertices1[5]=Ke,this.clipVertices1[6]=Xe,this.clipVertices1[7]=ts,this.clipVertices1[8]=is,this.clipVertices1[9]=es,this.clipVertices1[10]=ss,this.clipVertices1[11]=ns,li=0,S=((pi=this.clipVertices1[9])-qi-ms)*Xi+((mi=this.clipVertices1[10])-Ji-ds)*te+((di=this.clipVertices1[11])-Zi-fs)*ie;for(var Si=0;Si<4;Si++)q=3*Si,z=((ee=this.clipVertices1[q])-qi-ms)*Xi+((se=this.clipVertices1[q+1])-Ji-ds)*te+((ne=this.clipVertices1[q+2])-Zi-fs)*ie,S>0?z>0?(q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne):(q=3*li,li++,gi=S/(S-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=S/(S-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne),pi=ee,mi=se,di=ne,S=z;if((as=li)!=0){for(li=0,q=3*(as-1),S=((pi=this.clipVertices2[q])-qi-ys)*re+((mi=this.clipVertices2[q+1])-Ji-vs)*he+((di=this.clipVertices2[q+2])-Zi-_s)*le,Si=0;Si<as;Si++)q=3*Si,z=((ee=this.clipVertices2[q])-qi-ys)*re+((se=this.clipVertices2[q+1])-Ji-vs)*he+((ne=this.clipVertices2[q+2])-Zi-_s)*le,S>0?z>0?(q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne):(q=3*li,li++,gi=S/(S-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=S/(S-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne),pi=ee,mi=se,di=ne,S=z;if((as=li)!=0){for(li=0,q=3*(as-1),S=((pi=this.clipVertices1[q])-qi+ms)*-Xi+((mi=this.clipVertices1[q+1])-Ji+ds)*-te+((di=this.clipVertices1[q+2])-Zi+fs)*-ie,Si=0;Si<as;Si++)q=3*Si,z=((ee=this.clipVertices1[q])-qi+ms)*-Xi+((se=this.clipVertices1[q+1])-Ji+ds)*-te+((ne=this.clipVertices1[q+2])-Zi+fs)*-ie,S>0?z>0?(q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne):(q=3*li,li++,gi=S/(S-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=S/(S-z),this.clipVertices2[q]=pi+(ee-pi)*gi,this.clipVertices2[q+1]=mi+(se-mi)*gi,this.clipVertices2[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices2[q]=ee,this.clipVertices2[q+1]=se,this.clipVertices2[q+2]=ne),pi=ee,mi=se,di=ne,S=z;if((as=li)!=0){for(li=0,q=3*(as-1),S=((pi=this.clipVertices2[q])-qi+ys)*-re+((mi=this.clipVertices2[q+1])-Ji+vs)*-he+((di=this.clipVertices2[q+2])-Zi+_s)*-le,Si=0;Si<as;Si++)q=3*Si,z=((ee=this.clipVertices2[q])-qi+ys)*-re+((se=this.clipVertices2[q+1])-Ji+vs)*-he+((ne=this.clipVertices2[q+2])-Zi+_s)*-le,S>0?z>0?(q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne):(q=3*li,li++,gi=S/(S-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi):z>0&&(q=3*li,li++,gi=S/(S-z),this.clipVertices1[q]=pi+(ee-pi)*gi,this.clipVertices1[q+1]=mi+(se-mi)*gi,this.clipVertices1[q+2]=di+(ne-di)*gi,q=3*li,li++,this.clipVertices1[q]=ee,this.clipVertices1[q+1]=se,this.clipVertices1[q+2]=ne),pi=ee,mi=se,di=ne,S=z;if(zn){var Aa=a;a=o,o=Aa}if((as=li)!=0){var wn=a!=t;if(as>4){Xi=Ue-(pi=.25*(Ue+Je+Xe+es)),te=We-(mi=.25*(We+Ze+ts+ss)),ie=qe-(di=.25*(qe+Ke+is+ns)),re=Je-pi,he=Ze-mi,le=Ke-di;var Wn=0,ba=0,qn=0,xa=0,Nn=-this.INF;for(Ii=this.INF,Si=0;Si<as;Si++)this.used[Si]=!1,q=3*Si,(oi=(pi=this.clipVertices1[q])*Xi+(mi=this.clipVertices1[q+1])*te+(di=this.clipVertices1[q+2])*ie)<Ii&&(Ii=oi,Wn=Si),oi>Nn&&(Nn=oi,qn=Si);for(this.used[Wn]=!0,this.used[qn]=!0,Nn=-this.INF,Ii=this.INF,Si=0;Si<as;Si++)this.used[Si]||(q=3*Si,(oi=(pi=this.clipVertices1[q])*re+(mi=this.clipVertices1[q+1])*he+(di=this.clipVertices1[q+2])*le)<Ii&&(Ii=oi,ba=Si),oi>Nn&&(Nn=oi,xa=Si));q=3*Wn,(oi=((pi=this.clipVertices1[q])-qi)*Et+((mi=this.clipVertices1[q+1])-Ji)*Ft+((di=this.clipVertices1[q+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,wn),q=3*ba,(oi=((pi=this.clipVertices1[q])-qi)*Et+((mi=this.clipVertices1[q+1])-Ji)*Ft+((di=this.clipVertices1[q+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,wn),q=3*qn,(oi=((pi=this.clipVertices1[q])-qi)*Et+((mi=this.clipVertices1[q+1])-Ji)*Ft+((di=this.clipVertices1[q+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,wn),q=3*xa,(oi=((pi=this.clipVertices1[q])-qi)*Et+((mi=this.clipVertices1[q+1])-Ji)*Ft+((di=this.clipVertices1[q+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,wn)}else for(Si=0;Si<as;Si++)q=3*Si,(oi=((pi=this.clipVertices1[q])-qi)*Et+((mi=this.clipVertices1[q+1])-Ji)*Ft+((di=this.clipVertices1[q+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,wn)}}}}}}}}),vn.prototype=Object.assign(Object.create(ze.prototype),{constructor:vn,getSep:function(t,e,n,a,o){var r,c,f,u,m,p,N,x,g,P,I,D,nt,M=new $,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,st=e.position.y,kt=e.position.z,U=ut-tt,rt=st-it,pt=kt-ct;U*U+rt*rt+pt*pt==0&&(rt=.001);var Q=-U,ht=-rt,dt=-pt;this.supportPointB(t,-Q,-ht,-dt,M);var Ht=M.x,ki=M.y,wi=M.z;this.supportPointC(e,Q,ht,dt,M);var _i=M.x,E=M.y,Zt=M.z,S=_i-Ht,z=E-ki,at=Zt-wi;if(S*Q+z*ht+at*dt<=0)return!1;if((Q=z*pt-at*rt)*Q+(ht=at*U-S*pt)*ht+(dt=S*rt-z*U)*dt==0)return n.set(S-U,z-rt,at-pt).normalize(),a.set(.5*(Ht+_i),.5*(ki+E),.5*(wi+Zt)),!0;this.supportPointB(t,-Q,-ht,-dt,M);var B=M.x,F=M.y,At=M.z;this.supportPointC(e,Q,ht,dt,M);var $t=M.x,xt=M.y,gt=M.z,W=$t-B,mt=xt-F,zt=gt-At;if(W*Q+mt*ht+zt*dt<=0)return!1;(Q=(c=z-rt)*(p=zt-pt)-(f=at-pt)*(m=mt-rt))*U+(ht=f*(u=W-U)-(r=S-U)*p)*rt+(dt=r*m-c*u)*pt>0&&(r=S,c=z,f=at,S=W,z=mt,at=zt,W=r,mt=c,zt=f,r=Ht,c=ki,f=wi,Ht=B,ki=F,wi=At,B=r,F=c,At=f,r=_i,c=E,f=Zt,_i=$t,E=xt,Zt=gt,$t=r,xt=c,gt=f,Q=-Q,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPointB(t,-Q,-ht,-dt,M);var Ni=M.x,Ei=M.y,bi=M.z;this.supportPointC(e,Q,ht,dt,M);var xi=M.x,St=M.y,_t=M.z,K=xi-Ni,lt=St-Ei,wt=_t-bi;if(K*Q+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*U+(at*K-S*wt)*rt+(S*lt-z*K)*pt<0)W=K,mt=lt,zt=wt,B=Ni,F=Ei,At=bi,$t=xi,xt=St,gt=_t,Q=(c=z-rt)*(p=wt-pt)-(f=at-pt)*(m=lt-rt),ht=f*(u=K-U)-(r=S-U)*p,dt=r*m-c*u;else if((lt*zt-wt*mt)*U+(wt*W-K*zt)*rt+(K*mt-lt*W)*pt<0)S=K,z=lt,at=wt,Ht=Ni,ki=Ei,wi=bi,_i=xi,E=St,Zt=_t,Q=(c=lt-rt)*(p=zt-pt)-(f=wt-pt)*(m=mt-rt),ht=f*(u=W-U)-(r=K-U)*p,dt=r*m-c*u;else for(var Pi=!1;;){if(Q=(c=mt-z)*(p=wt-at)-(f=zt-at)*(m=lt-z),ht=f*(u=K-S)-(r=W-S)*p,dt=r*m-c*u,(Q*=N=1/j.sqrt(Q*Q+ht*ht+dt*dt))*S+(ht*=N)*z+(dt*=N)*at>=0&&!Pi){var Qt=(z*zt-at*mt)*K+(at*W-S*zt)*lt+(S*mt-z*W)*wt,Tt=(lt*zt-wt*mt)*U+(wt*W-K*zt)*rt+(K*mt-lt*W)*pt,Ut=(rt*at-pt*z)*K+(pt*S-U*at)*lt+(U*z-rt*S)*wt,Wt=(mt*at-zt*z)*U+(zt*S-W*at)*rt+(W*z-mt*S)*pt,vt=Qt+Tt+Ut+Wt;vt<=0&&(Qt=0,vt=(Tt=(mt*wt-zt*lt)*Q+(zt*K-W*wt)*ht+(W*lt-mt*K)*dt)+(Ut=(lt*zt-wt*mt)*Q+(wt*W-K*zt)*ht+(K*mt-lt*W)*dt)+(Wt=(z*zt-at*mt)*Q+(at*W-S*zt)*ht+(S*mt-z*W)*dt));var ft=1/vt;x=(tt*Qt+Ht*Tt+B*Ut+Ni*Wt)*ft,g=(it*Qt+ki*Tt+F*Ut+Ei*Wt)*ft,P=(ct*Qt+wi*Tt+At*Ut+bi*Wt)*ft,I=(ut*Qt+_i*Tt+$t*Ut+xi*Wt)*ft,D=(st*Qt+E*Tt+xt*Ut+St*Wt)*ft,nt=(kt*Qt+Zt*Tt+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPointB(t,-Q,-ht,-dt,M);var yt=M.x,Kt=M.y,Vt=M.z;this.supportPointC(e,Q,ht,dt,M);var Jt=M.x,ni=M.y,ai=M.z,Bt=Jt-yt,Mt=ni-Kt,l=ai-Vt,d=-(Bt*Q+Mt*ht+l*dt);if((Bt-K)*Q+(Mt-lt)*ht+(l-wt)*dt<=.01||d>=0)return!!Pi&&(n.set(-Q,-ht,-dt),a.set(.5*(x+I),.5*(g+D),.5*(P+nt)),o.x=d,!0);(Mt*at-l*z)*U+(l*S-Bt*at)*rt+(Bt*z-Mt*S)*pt<0?(Mt*zt-l*mt)*U+(l*W-Bt*zt)*rt+(Bt*mt-Mt*W)*pt<0?(S=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Vt,_i=Jt,E=ni,Zt=ai):(K=Bt,lt=Mt,wt=l,Ni=yt,Ei=Kt,bi=Vt,xi=Jt,St=ni,_t=ai):(Mt*wt-l*lt)*U+(l*K-Bt*wt)*rt+(Bt*lt-Mt*K)*pt<0?(W=Bt,mt=Mt,zt=l,B=yt,F=Kt,At=Vt,$t=Jt,xt=ni,gt=ai):(S=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Vt,_i=Jt,E=ni,Zt=ai)}}},supportPointB:function(t,e,n,a,o){var r,c,f,u=t.rotation.elements,m=u[0]*e+u[3]*n+u[6]*a,p=u[1]*e+u[4]*n+u[7]*a,N=u[2]*e+u[5]*n+u[8]*a,x=t.halfWidth,g=t.halfHeight,P=t.halfDepth;r=m<0?-x:x,c=p<0?-g:g,f=N<0?-P:P,m=u[0]*r+u[1]*c+u[2]*f+t.position.x,p=u[3]*r+u[4]*c+u[5]*f+t.position.y,N=u[6]*r+u[7]*c+u[8]*f+t.position.z,o.set(m,p,N)},supportPointC:function(t,e,n,a,o){var r,c,f,u=t.rotation.elements,m=u[0]*e+u[3]*n+u[6]*a,p=u[1]*e+u[4]*n+u[7]*a,N=u[2]*e+u[5]*n+u[8]*a,x=m,g=N,P=x*x+g*g,I=t.radius,D=t.halfHeight;P==0?p<0?(r=I,c=-D,f=0):(r=I,c=D,f=0):(P=t.radius/j.sqrt(P),p<0?(r=x*P,c=-D,f=g*P):(r=x*P,c=D,f=g*P)),m=u[0]*r+u[1]*c+u[2]*f+t.position.x,p=u[3]*r+u[4]*c+u[5]*f+t.position.y,N=u[6]*r+u[7]*c+u[8]*f+t.position.z,o.set(m,p,N)},detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=new $,c=new $,f=new $;if(this.getSep(a,o,r,c,f)){var u=a.position.x,m=a.position.y,p=a.position.z,N=o.position.x,x=o.position.y,g=o.position.z,P=a.halfWidth,I=a.halfHeight,D=a.halfDepth,nt=o.halfHeight,M=o.radius,tt=a.dimentions,it=tt[0],ct=tt[1],ut=tt[2],st=tt[3],kt=tt[4],U=tt[5],rt=tt[6],pt=tt[7],Q=tt[8],ht=tt[9],dt=tt[10],Ht=tt[11],ki=tt[12],wi=tt[13],_i=tt[14],E=tt[15],Zt=tt[16],S=tt[17],z=o.normalDirection.x,at=o.normalDirection.y,B=o.normalDirection.z,F=o.halfDirection.x,At=o.halfDirection.y,$t=o.halfDirection.z,xt=r.x,gt=r.y,W=r.z,mt=xt*it+gt*ct+W*ut,zt=xt*st+gt*kt+W*U,oe=xt*rt+gt*pt+W*Q,Ni=xt*z+gt*at+W*B,Ei=mt>0,bi=zt>0,xi=oe>0,St=Ni>0;Ei||(mt=-mt),bi||(zt=-zt),xi||(oe=-oe),St||(Ni=-Ni);var _t,K,lt,wt,Pi,Qt,Tt,Ut,Wt,vt,ft,yt,Kt,Vt,Jt,ni,ai,Bt,Mt,l,d,_,k,w,L,H,C,R,X,Nt,Pt,Gt,Xt,ue,Mi,Li,Wi,ii,be,xe,ge,ci,ri,Hi,hi,pe,me,de,fe,ye,ve,Fi,Di,Qi=0;if(Ni>.999?Qi=mt>.999?mt>Ni?1:4:zt>.999?zt>Ni?2:4:oe>.999&&oe>Ni?3:4:mt>.999?Qi=1:zt>.999?Qi=2:oe>.999&&(Qi=3),Qi==0)n.addPoint(c.x,c.y,c.z,xt,gt,W,f.x,this.flip);else if(Qi==4){var Me,Le,Ce,Ve,Ie,He,Te,Ae,$e,Be,Ee,Fe;St?(wt=N-F,Pi=x-At,Qt=g-$t,xt=-z,gt=-at,W=-B):(wt=N+F,Pi=x+At,Qt=g+$t,xt=z,gt=at,W=B),Qi=0,(ri=it*xt+ct*gt+ut*W)<(l=1)&&(l=ri,Qi=0),-ri<l&&(l=-ri,Qi=1),(ri=st*xt+kt*gt+U*W)<l&&(l=ri,Qi=2),-ri<l&&(l=-ri,Qi=3),(ri=rt*xt+pt*gt+Q*W)<l&&(l=ri,Qi=4),-ri<l&&(l=-ri,Qi=5);var bt=a.elements;switch(Qi){case 0:Me=bt[0],Le=bt[1],Ce=bt[2],Ve=bt[6],Ie=bt[7],He=bt[8],Te=bt[9],Ae=bt[10],$e=bt[11],Be=bt[3],Ee=bt[4],Fe=bt[5];break;case 1:Me=bt[15],Le=bt[16],Ce=bt[17],Ve=bt[21],Ie=bt[22],He=bt[23],Te=bt[18],Ae=bt[19],$e=bt[20],Be=bt[12],Ee=bt[13],Fe=bt[14];break;case 2:Me=bt[12],Le=bt[13],Ce=bt[14],Ve=bt[0],Ie=bt[1],He=bt[2],Te=bt[3],Ae=bt[4],$e=bt[5],Be=bt[15],Ee=bt[16],Fe=bt[17];break;case 3:Me=bt[21],Le=bt[22],Ce=bt[23],Ve=bt[9],Ie=bt[10],He=bt[11],Te=bt[6],Ae=bt[7],$e=bt[8],Be=bt[18],Ee=bt[19],Fe=bt[20];break;case 4:Me=bt[12],Le=bt[13],Ce=bt[14],Ve=bt[18],Ie=bt[19],He=bt[20],Te=bt[6],Ae=bt[7],$e=bt[8],Be=bt[0],Ee=bt[1],Fe=bt[2];break;case 5:Me=bt[3],Le=bt[4],Ce=bt[5],Ve=bt[9],Ie=bt[10],He=bt[11],Te=bt[21],Ae=bt[22],$e=bt[23],Be=bt[15],Ee=bt[16],Fe=bt[17]}(Mt=xt*(Me-wt)+gt*(Le-Pi)+W*(Ce-Qt))<=0&&n.addPoint(Me,Le,Ce,-xt,-gt,-W,Mt,this.flip),(Mt=xt*(Ve-wt)+gt*(Ie-Pi)+W*(He-Qt))<=0&&n.addPoint(Ve,Ie,He,-xt,-gt,-W,Mt,this.flip),(Mt=xt*(Te-wt)+gt*(Ae-Pi)+W*($e-Qt))<=0&&n.addPoint(Te,Ae,$e,-xt,-gt,-W,Mt,this.flip),(Mt=xt*(Be-wt)+gt*(Ee-Pi)+W*(Fe-Qt))<=0&&n.addPoint(Be,Ee,Fe,-xt,-gt,-W,Mt,this.flip)}else{switch(Qi){case 1:Ei?(_t=u+ht,K=m+dt,lt=p+Ht,xt=it,gt=ct,W=ut):(_t=u-ht,K=m-dt,lt=p-Ht,xt=-it,gt=-ct,W=-ut),pe=st,me=kt,de=U,Fi=I,fe=rt,ye=pt,ve=Q,Di=D;break;case 2:bi?(_t=u+ki,K=m+wi,lt=p+_i,xt=st,gt=kt,W=U):(_t=u-ki,K=m-wi,lt=p-_i,xt=-st,gt=-kt,W=-U),pe=it,me=ct,de=ut,Fi=P,fe=rt,ye=pt,ve=Q,Di=D;break;case 3:xi?(_t=u+E,K=m+Zt,lt=p+S,xt=rt,gt=pt,W=Q):(_t=u-E,K=m-Zt,lt=p-S,xt=-rt,gt=-pt,W=-Q),pe=it,me=ct,de=ut,Fi=P,fe=st,ye=kt,ve=U,Di=I}if(wt=N+(d=(l=xt*z+gt*at+W*B)<0?nt:-nt)*z,Pi=x+d*at,Qt=g+d*B,Ni>=.999999?(_=-gt,k=W,w=xt):(_=xt,k=gt,w=W),H=(d=_*z+k*at+w*B)*z-_,C=d*at-k,R=d*B-w,(d=j.sqrt(H*H+C*C+R*R))==0)return;if(_=wt+(H*=d=M/d),k=Pi+(C*=d),w=Qt+(R*=d),l<-.96||l>.96)Tt=z*z*1.5-.5,Ut=z*at*1.5-.866025403*B,Wt=z*B*1.5+.866025403*at,vt=at*z*1.5+.866025403*B,ft=at*at*1.5-.5,yt=at*B*1.5-.866025403*z,Kt=B*z*1.5-.866025403*at,Vt=B*at*1.5+.866025403*z,Jt=B*B*1.5-.5,(ii=pe*(_=(ni=_)-(Mt=xt*(ni-_t)+gt*((ai=k)-K)+W*((Bt=w)-lt))*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*W-lt))<-Fi?ii=-Fi:ii>Fi&&(ii=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),ni=_t+(_=ii*pe+ci*fe),ai=K+(k=ii*me+ci*ye),Bt=lt+(w=ii*de+ci*ve),n.addPoint(ni,ai,Bt,xt,gt,W,Mt,this.flip),ai=H*vt+C*ft+R*yt,Bt=H*Kt+C*Vt+R*Jt,(Mt=xt*((ni=(H=ni=H*Tt+C*Ut+R*Wt)+wt)-_t)+gt*((ai=(C=ai)+Pi)-K)+W*((Bt=(R=Bt)+Qt)-lt))<=0&&((ii=pe*(_=ni-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*W-lt))<-Fi?ii=-Fi:ii>Fi&&(ii=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),ni=_t+(_=ii*pe+ci*fe),ai=K+(k=ii*me+ci*ye),Bt=lt+(w=ii*de+ci*ve),n.addPoint(ni,ai,Bt,xt,gt,W,Mt,this.flip)),ai=H*vt+C*ft+R*yt,Bt=H*Kt+C*Vt+R*Jt,(Mt=xt*((ni=(H=ni=H*Tt+C*Ut+R*Wt)+wt)-_t)+gt*((ai=(C=ai)+Pi)-K)+W*((Bt=(R=Bt)+Qt)-lt))<=0&&((ii=pe*(_=ni-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*W-lt))<-Fi?ii=-Fi:ii>Fi&&(ii=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),ni=_t+(_=ii*pe+ci*fe),ai=K+(k=ii*me+ci*ye),Bt=lt+(w=ii*de+ci*ve),n.addPoint(ni,ai,Bt,xt,gt,W,Mt,this.flip));else{if(Mi=_,l>0?(be=_+2*F,xe=k+2*At,ge=w+2*$t):(be=_-2*F,xe=k-2*At,ge=w-2*$t),_=(be-=(ci=xt*(be-_t)+gt*(xe-K)+W*(ge-lt))*xt)-(Mi-=(ii=xt*(Mi-_t)+gt*((Li=k)-K)+W*((Wi=w)-lt))*xt),k=(xe-=ci*gt)-(Li-=ii*gt),w=(ge-=ci*W)-(Wi-=ii*W),L=ci-ii,Hi=(zt=(Gt=be-_t)*pe+(Xt=xe-K)*me+(ue=ge-lt)*de)-Fi,(ri=(mt=(X=Mi-_t)*pe+(Nt=Li-K)*me+(Pt=Wi-lt)*de)-Fi)>0){if(Hi>0)return;mt=(X=(Mi+=_*(hi=ri/(ri-Hi)))-_t)*pe+(Nt=(Li+=k*hi)-K)*me+(Pt=(Wi+=w*hi)-lt)*de,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ii+=L*hi)}else Hi>0&&(zt=(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t)*pe+(Xt=(xe=Li+k*hi)-K)*me+(ue=(ge=Wi+w*hi)-lt)*de,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ii+L*hi)-ii);if(Hi=zt+Fi,(ri=mt+Fi)<0){if(Hi<0)return;X=(Mi+=_*(hi=ri/(ri-Hi)))-_t,Nt=(Li+=k*hi)-K,Pt=(Wi+=w*hi)-lt,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ii+=L*hi)}else Hi<0&&(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t,Xt=(xe=Li+k*hi)-K,ue=(ge=Wi+w*hi)-lt,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ii+L*hi)-ii);if(Hi=(zt=Gt*fe+Xt*ye+ue*ve)-Di,(ri=(mt=X*fe+Nt*ye+Pt*ve)-Di)>0){if(Hi>0)return;mt=(X=(Mi+=_*(hi=ri/(ri-Hi)))-_t)*fe+(Nt=(Li+=k*hi)-K)*ye+(Pt=(Wi+=w*hi)-lt)*ve,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ii+=L*hi)}else Hi>0&&(zt=(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t)*fe+(Xt=(xe=Li+k*hi)-K)*ye+(ue=(ge=Wi+w*hi)-lt)*ve,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ii+L*hi)-ii);if(Hi=zt+Di,(ri=mt+Di)<0){if(Hi<0)return;Mi+=_*(hi=ri/(ri-Hi)),Li+=k*hi,Wi+=w*hi,ii+=L*hi}else Hi<0&&(be=Mi+_*(hi=ri/(ri-Hi)),xe=Li+k*hi,ge=Wi+w*hi,ci=ii+L*hi);ii<0&&n.addPoint(Mi,Li,Wi,xt,gt,W,ii,this.flip),ci<0&&n.addPoint(be,xe,ge,xt,gt,W,ci,this.flip)}}}}}),_n.prototype=Object.assign(Object.create(ze.prototype),{constructor:_n,getSep:function(t,e,n,a,o){var r,c,f,u,m,p,N,x,g,P,I,D,nt,M=new $,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,st=e.position.y,kt=e.position.z,U=ut-tt,rt=st-it,pt=kt-ct;U*U+rt*rt+pt*pt==0&&(rt=.001);var Q=-U,ht=-rt,dt=-pt;this.supportPoint(t,-Q,-ht,-dt,M);var Ht=M.x,ki=M.y,wi=M.z;this.supportPoint(e,Q,ht,dt,M);var _i=M.x,E=M.y,Zt=M.z,S=_i-Ht,z=E-ki,at=Zt-wi;if(S*Q+z*ht+at*dt<=0)return!1;if((Q=z*pt-at*rt)*Q+(ht=at*U-S*pt)*ht+(dt=S*rt-z*U)*dt==0)return n.set(S-U,z-rt,at-pt).normalize(),a.set(.5*(Ht+_i),.5*(ki+E),.5*(wi+Zt)),!0;this.supportPoint(t,-Q,-ht,-dt,M);var B=M.x,F=M.y,At=M.z;this.supportPoint(e,Q,ht,dt,M);var $t=M.x,xt=M.y,gt=M.z,W=$t-B,mt=xt-F,zt=gt-At;if(W*Q+mt*ht+zt*dt<=0)return!1;(Q=(c=z-rt)*(p=zt-pt)-(f=at-pt)*(m=mt-rt))*U+(ht=f*(u=W-U)-(r=S-U)*p)*rt+(dt=r*m-c*u)*pt>0&&(r=S,c=z,f=at,S=W,z=mt,at=zt,W=r,mt=c,zt=f,r=Ht,c=ki,f=wi,Ht=B,ki=F,wi=At,B=r,F=c,At=f,r=_i,c=E,f=Zt,_i=$t,E=xt,Zt=gt,$t=r,xt=c,gt=f,Q=-Q,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPoint(t,-Q,-ht,-dt,M);var Ni=M.x,Ei=M.y,bi=M.z;this.supportPoint(e,Q,ht,dt,M);var xi=M.x,St=M.y,_t=M.z,K=xi-Ni,lt=St-Ei,wt=_t-bi;if(K*Q+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*U+(at*K-S*wt)*rt+(S*lt-z*K)*pt<0)W=K,mt=lt,zt=wt,B=Ni,F=Ei,At=bi,$t=xi,xt=St,gt=_t,Q=(c=z-rt)*(p=wt-pt)-(f=at-pt)*(m=lt-rt),ht=f*(u=K-U)-(r=S-U)*p,dt=r*m-c*u;else if((lt*zt-wt*mt)*U+(wt*W-K*zt)*rt+(K*mt-lt*W)*pt<0)S=K,z=lt,at=wt,Ht=Ni,ki=Ei,wi=bi,_i=xi,E=St,Zt=_t,Q=(c=lt-rt)*(p=zt-pt)-(f=wt-pt)*(m=mt-rt),ht=f*(u=W-U)-(r=K-U)*p,dt=r*m-c*u;else for(var Pi=!1;;){if(Q=(c=mt-z)*(p=wt-at)-(f=zt-at)*(m=lt-z),ht=f*(u=K-S)-(r=W-S)*p,dt=r*m-c*u,(Q*=N=1/j.sqrt(Q*Q+ht*ht+dt*dt))*S+(ht*=N)*z+(dt*=N)*at>=0&&!Pi){var Qt=(z*zt-at*mt)*K+(at*W-S*zt)*lt+(S*mt-z*W)*wt,Tt=(lt*zt-wt*mt)*U+(wt*W-K*zt)*rt+(K*mt-lt*W)*pt,Ut=(rt*at-pt*z)*K+(pt*S-U*at)*lt+(U*z-rt*S)*wt,Wt=(mt*at-zt*z)*U+(zt*S-W*at)*rt+(W*z-mt*S)*pt,vt=Qt+Tt+Ut+Wt;vt<=0&&(Qt=0,vt=(Tt=(mt*wt-zt*lt)*Q+(zt*K-W*wt)*ht+(W*lt-mt*K)*dt)+(Ut=(lt*zt-wt*mt)*Q+(wt*W-K*zt)*ht+(K*mt-lt*W)*dt)+(Wt=(z*zt-at*mt)*Q+(at*W-S*zt)*ht+(S*mt-z*W)*dt));var ft=1/vt;x=(tt*Qt+Ht*Tt+B*Ut+Ni*Wt)*ft,g=(it*Qt+ki*Tt+F*Ut+Ei*Wt)*ft,P=(ct*Qt+wi*Tt+At*Ut+bi*Wt)*ft,I=(ut*Qt+_i*Tt+$t*Ut+xi*Wt)*ft,D=(st*Qt+E*Tt+xt*Ut+St*Wt)*ft,nt=(kt*Qt+Zt*Tt+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPoint(t,-Q,-ht,-dt,M);var yt=M.x,Kt=M.y,Vt=M.z;this.supportPoint(e,Q,ht,dt,M);var Jt=M.x,ni=M.y,ai=M.z,Bt=Jt-yt,Mt=ni-Kt,l=ai-Vt,d=-(Bt*Q+Mt*ht+l*dt);if((Bt-K)*Q+(Mt-lt)*ht+(l-wt)*dt<=.01||d>=0)return!!Pi&&(n.set(-Q,-ht,-dt),a.set(.5*(x+I),.5*(g+D),.5*(P+nt)),o.x=d,!0);(Mt*at-l*z)*U+(l*S-Bt*at)*rt+(Bt*z-Mt*S)*pt<0?(Mt*zt-l*mt)*U+(l*W-Bt*zt)*rt+(Bt*mt-Mt*W)*pt<0?(S=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Vt,_i=Jt,E=ni,Zt=ai):(K=Bt,lt=Mt,wt=l,Ni=yt,Ei=Kt,bi=Vt,xi=Jt,St=ni,_t=ai):(Mt*wt-l*lt)*U+(l*K-Bt*wt)*rt+(Bt*lt-Mt*K)*pt<0?(W=Bt,mt=Mt,zt=l,B=yt,F=Kt,At=Vt,$t=Jt,xt=ni,gt=ai):(S=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Vt,_i=Jt,E=ni,Zt=ai)}}},supportPoint:function(t,e,n,a,o){var r,c,f,u=t.rotation.elements,m=u[0]*e+u[3]*n+u[6]*a,p=u[1]*e+u[4]*n+u[7]*a,N=u[2]*e+u[5]*n+u[8]*a,x=m,g=N,P=x*x+g*g,I=t.radius,D=t.halfHeight;P==0?p<0?(r=I,c=-D,f=0):(r=I,c=D,f=0):(P=t.radius/j.sqrt(P),p<0?(r=x*P,c=-D,f=g*P):(r=x*P,c=D,f=g*P)),m=u[0]*r+u[1]*c+u[2]*f+t.position.x,p=u[3]*r+u[4]*c+u[5]*f+t.position.y,N=u[6]*r+u[7]*c+u[8]*f+t.position.z,o.set(m,p,N)},detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,c,f,u,m,p,N,x,g,P,I,D,nt,M,tt,it,ct,ut,st,kt,U,rt=a.position,pt=o.position,Q=rt.x,ht=rt.y,dt=rt.z,Ht=pt.x,ki=pt.y,wi=pt.z,_i=a.halfHeight,E=o.halfHeight,Zt=a.normalDirection,S=o.normalDirection,z=a.halfDirection,at=o.halfDirection,B=a.radius,F=o.radius,At=Zt.x,$t=Zt.y,xt=Zt.z,gt=S.x,W=S.y,mt=S.z,zt=z.x,oe=z.y,Ni=z.z,Ei=at.x,bi=at.y,xi=at.z,St=Q-Ht,_t=ht-ki,K=dt-wi,lt=new $,wt=new $,Pi=new $;if(this.getSep(a,o,lt,wt,Pi)){var Qt=lt.x*At+lt.y*$t+lt.z*xt,Tt=lt.x*gt+lt.y*W+lt.z*mt,Ut=Qt>0,Wt=Tt>0;Ut||(Qt=-Qt),Wt||(Tt=-Tt);var vt,ft,yt,Kt=0;(Qt>.999||Tt>.999)&&(Kt=Qt>Tt?1:2);var Vt,Jt,ni,ai,Bt,Mt,l,d,_,k,w,L,H,C,R,X,Nt=Pi.x;switch(vt=lt.x,ft=lt.y,yt=lt.z,Kt){case 0:n.addPoint(wt.x,wt.y,wt.z,vt,ft,yt,Nt,!1);break;case 1:if(Ut?(c=Q+zt,f=ht+oe,u=dt+Ni,vt=At,ft=$t,yt=xt):(c=Q-zt,f=ht-oe,u=dt-Ni,vt=-At,ft=-$t,yt=-xt),m=Ht+(r=(st=vt*gt+ft*W+yt*mt)<0?E:-E)*gt,p=ki+r*W,N=wi+r*mt,Tt>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),St=(r=x*gt+g*W+P*mt)*gt-x,_t=r*W-g,K=r*mt-P,(r=j.sqrt(St*St+_t*_t+K*K))==0)break;if(x=m+(St*=r=F/r),g=p+(_t*=r),P=N+(K*=r),st<-.96||st>.96)Vt=gt*gt*1.5-.5,Jt=gt*W*1.5-.866025403*mt,ni=gt*mt*1.5+.866025403*W,ai=W*gt*1.5+.866025403*mt,Bt=W*W*1.5-.5,Mt=W*mt*1.5-.866025403*gt,l=mt*gt*1.5-.866025403*W,d=mt*W*1.5+.866025403*gt,_=mt*mt*1.5-.5,(r=(x=(k=x)-(H=vt*(k-c)+ft*((w=g)-f)+yt*((L=P)-u))*vt-c)*x+(g=w-H*ft-f)*g+(P=L-H*yt-u)*P)>B*B&&(x*=r=B/j.sqrt(r),g*=r,P*=r),k=c+x,w=f+g,L=u+P,n.addPoint(k,w,L,vt,ft,yt,H,!1),w=St*ai+_t*Bt+K*Mt,L=St*l+_t*d+K*_,(H=vt*((k=(St=k=St*Vt+_t*Jt+K*ni)+m)-c)+ft*((w=(_t=w)+p)-f)+yt*((L=(K=L)+N)-u))<=0&&((r=(x=k-H*vt-c)*x+(g=w-H*ft-f)*g+(P=L-H*yt-u)*P)>B*B&&(x*=r=B/j.sqrt(r),g*=r,P*=r),k=c+x,w=f+g,L=u+P,n.addPoint(k,w,L,vt,ft,yt,H,!1)),w=St*ai+_t*Bt+K*Mt,L=St*l+_t*d+K*_,(H=vt*((k=(St=k=St*Vt+_t*Jt+K*ni)+m)-c)+ft*((w=(_t=w)+p)-f)+yt*((L=(K=L)+N)-u))<=0&&((r=(x=k-H*vt-c)*x+(g=w-H*ft-f)*g+(P=L-H*yt-u)*P)>B*B&&(x*=r=B/j.sqrt(r),g*=r,P*=r),k=c+x,w=f+g,L=u+P,n.addPoint(k,w,L,vt,ft,yt,H,!1));else{if(I=x,st>0?(M=x+gt*E*2,tt=g+W*E*2,it=P+mt*E*2):(M=x-gt*E*2,tt=g-W*E*2,it=P-mt*E*2),(X=(C=(St=c-(I-=(ct=vt*(I-c)+ft*((D=g)-f)+yt*((nt=P)-u))*vt))*(x=(M-=(ut=vt*(M-c)+ft*(tt-f)+yt*(it-u))*vt)-I)+(_t=f-(D-=ct*ft))*(g=(tt-=ut*ft)-D)+(K=u-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*C-(R=x*x+g*g+P*P)*(St*St+_t*_t+K*K-B*B))<0)break;(U=(C-(X=j.sqrt(X)))/R)<(kt=(C+X)/R)&&(r=kt,kt=U,U=r),U>1&&(U=1),kt<0&&(kt=0),x=I+(M-I)*kt,g=D+(tt-D)*kt,P=nt+(it-nt)*kt,M=I+(M-I)*U,tt=D+(tt-D)*U,it=nt+(it-nt)*U,I=x,D=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*U,(ct=r)<0&&n.addPoint(I,D,nt,vt,ft,yt,H,!1),ut<0&&n.addPoint(M,tt,it,vt,ft,yt,H,!1)}break;case 2:if(Wt?(m=Ht-Ei,p=ki-bi,N=wi-xi,vt=-gt,ft=-W,yt=-mt):(m=Ht+Ei,p=ki+bi,N=wi+xi,vt=gt,ft=W,yt=mt),c=Q+(r=(st=vt*At+ft*$t+yt*xt)<0?_i:-_i)*At,f=ht+r*$t,u=dt+r*xt,Qt>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),St=(r=x*At+g*$t+P*xt)*At-x,_t=r*$t-g,K=r*xt-P,(r=j.sqrt(St*St+_t*_t+K*K))==0)break;if(x=c+(St*=r=B/r),g=f+(_t*=r),P=u+(K*=r),st<-.96||st>.96)Vt=At*At*1.5-.5,Jt=At*$t*1.5-.866025403*xt,ni=At*xt*1.5+.866025403*$t,ai=$t*At*1.5+.866025403*xt,Bt=$t*$t*1.5-.5,Mt=$t*xt*1.5-.866025403*At,l=xt*At*1.5-.866025403*$t,d=xt*$t*1.5+.866025403*At,_=xt*xt*1.5-.5,(r=(x=(k=x)-(H=vt*(k-m)+ft*((w=g)-p)+yt*((L=P)-N))*vt-m)*x+(g=w-H*ft-p)*g+(P=L-H*yt-N)*P)>F*F&&(x*=r=F/j.sqrt(r),g*=r,P*=r),k=m+x,w=p+g,L=N+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1),w=St*ai+_t*Bt+K*Mt,L=St*l+_t*d+K*_,(H=vt*((k=(St=k=St*Vt+_t*Jt+K*ni)+c)-m)+ft*((w=(_t=w)+f)-p)+yt*((L=(K=L)+u)-N))<=0&&((r=(x=k-H*vt-m)*x+(g=w-H*ft-p)*g+(P=L-H*yt-N)*P)>F*F&&(x*=r=F/j.sqrt(r),g*=r,P*=r),k=m+x,w=p+g,L=N+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1)),w=St*ai+_t*Bt+K*Mt,L=St*l+_t*d+K*_,(H=vt*((k=(St=k=St*Vt+_t*Jt+K*ni)+c)-m)+ft*((w=(_t=w)+f)-p)+yt*((L=(K=L)+u)-N))<=0&&((r=(x=k-H*vt-m)*x+(g=w-H*ft-p)*g+(P=L-H*yt-N)*P)>F*F&&(x*=r=F/j.sqrt(r),g*=r,P*=r),k=m+x,w=p+g,L=N+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1));else{if(I=x,st>0?(M=x+At*_i*2,tt=g+$t*_i*2,it=P+xt*_i*2):(M=x-At*_i*2,tt=g-$t*_i*2,it=P-xt*_i*2),(X=(C=(St=m-(I-=(ct=vt*(I-m)+ft*((D=g)-p)+yt*((nt=P)-N))*vt))*(x=(M-=(ut=vt*(M-m)+ft*(tt-p)+yt*(it-N))*vt)-I)+(_t=p-(D-=ct*ft))*(g=(tt-=ut*ft)-D)+(K=N-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*C-(R=x*x+g*g+P*P)*(St*St+_t*_t+K*K-F*F))<0)break;(U=(C-(X=j.sqrt(X)))/R)<(kt=(C+X)/R)&&(r=kt,kt=U,U=r),U>1&&(U=1),kt<0&&(kt=0),x=I+(M-I)*kt,g=D+(tt-D)*kt,P=nt+(it-nt)*kt,M=I+(M-I)*U,tt=D+(tt-D)*U,it=nt+(it-nt)*U,I=x,D=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*U,(ct=r)<0&&n.addPoint(I,D,nt,-vt,-ft,-yt,ct,!1),ut<0&&n.addPoint(M,tt,it,-vt,-ft,-yt,ut,!1)}}}}}),_e.prototype=Object.assign(Object.create(ze.prototype),{constructor:_e,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r,c,f,u,m,p=o.dimentions,N=a.position,x=N.x,g=N.y,P=N.z,I=o.position,D=I.x,nt=I.y,M=I.z,tt=a.radius,it=o.halfWidth,ct=o.halfHeight,ut=o.halfDepth,st=x-D,kt=g-nt,U=P-M,rt=p[0]*st+p[1]*kt+p[2]*U,pt=p[3]*st+p[4]*kt+p[5]*U,Q=p[6]*st+p[7]*kt+p[8]*U,ht=0;rt>it?rt=it:rt<-it?rt=-it:ht=1,pt>ct?pt=ct:pt<-ct?pt=-ct:ht|=2,Q>ut?Q=ut:Q<-ut?Q=-ut:ht|=4,ht==7?(U=Q<0?ut+Q:ut-Q,(st=rt<0?it+rt:it-rt)<(kt=pt<0?ct+pt:ct-pt)?st<U?(u=st-it,rt<0?(rt=-it,st=p[0],kt=p[1],U=p[2]):(rt=it,st=-p[0],kt=-p[1],U=-p[2])):(u=U-ut,Q<0?(Q=-ut,st=p[6],kt=p[7],U=p[8]):(Q=ut,st=-p[6],kt=-p[7],U=-p[8])):kt<U?(u=kt-ct,pt<0?(pt=-ct,st=p[3],kt=p[4],U=p[5]):(pt=ct,st=-p[3],kt=-p[4],U=-p[5])):(u=U-ut,Q<0?(Q=-ut,st=p[6],kt=p[7],U=p[8]):(Q=ut,st=-p[6],kt=-p[7],U=-p[8])),r=D+rt*p[0]+pt*p[3]+Q*p[6],c=nt+rt*p[1]+pt*p[4]+Q*p[7],f=M+rt*p[2]+pt*p[5]+Q*p[8],n.addPoint(x+tt*st,g+tt*kt,P+tt*U,st,kt,U,u-tt,this.flip)):(r=D+rt*p[0]+pt*p[3]+Q*p[6],c=nt+rt*p[1]+pt*p[4]+Q*p[7],f=M+rt*p[2]+pt*p[5]+Q*p[8],(u=(st=r-N.x)*st+(kt=c-N.y)*kt+(U=f-N.z)*U)>0&&u<tt*tt&&(st*=m=1/(u=j.sqrt(u)),kt*=m,U*=m,n.addPoint(x+tt*st,g+tt*kt,P+tt*U,st,kt,U,u-tt,this.flip)))}}),Ks.prototype=Object.assign(Object.create(ze.prototype),{constructor:Ks,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=a.position,c=r.x,f=r.y,u=r.z,m=o.position,p=m.x,N=m.y,x=m.z,g=o.normalDirection.x,P=o.normalDirection.y,I=o.normalDirection.z,D=a.radius,nt=o.radius,M=D+nt,tt=o.halfHeight,it=c-p,ct=f-N,ut=u-x,st=it*g+ct*P+ut*I;if(!(st<-tt-D||st>tt+D)){var kt,U=p+st*g,rt=N+st*P,pt=x+st*I,Q=c-U,ht=f-rt,dt=u-pt,Ht=Q*Q+ht*ht+dt*dt;Ht>M*M||(Ht>nt*nt&&(Q*=Ht=nt/j.sqrt(Ht),ht*=Ht,dt*=Ht),st<-tt?st=-tt:st>tt&&(st=tt),(Ht=(it=(U=p+st*g+Q)-c)*it+(ct=(rt=N+st*P+ht)-f)*ct+(ut=(pt=x+st*I+dt)-u)*ut)>0&&Ht<D*D&&(it*=kt=1/(Ht=j.sqrt(Ht)),ct*=kt,ut*=kt,n.addPoint(c+it*D,f+ct*D,u+ut*D,it,ct,ut,Ht-D,this.flip)))}}}),Se.prototype=Object.assign(Object.create(ze.prototype),{constructor:Se,detectCollision:function(t,e,n){var a=t,o=e,r=a.position,c=o.position,f=c.x-r.x,u=c.y-r.y,m=c.z-r.z,p=f*f+u*u+m*m,N=a.radius,x=N+o.radius;if(p>0&&p<x*x){var g=1/(p=j.sqrt(p));f*=g,u*=g,m*=g,n.addPoint(r.x+f*N,r.y+u*N,r.z+m*N,f,u,m,p-x,!1)}}}),je.prototype=Object.assign(Object.create(ze.prototype),{constructor:je,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,c=this.flip?e:t,f=this.flip?t:e,u=c.radius;o.sub(c.position,f.position),o.x*=f.normal.x,o.y*=f.normal.y,o.z*=f.normal.z,(a=o.lengthSq())>0&&a<u*u&&(a=j.sqrt(a),o.copy(f.normal).negate(),r.copy(c.position).addScaledVector(o,u),n.addPointVec(r,o,a-u,this.flip))}}),Ys.prototype=Object.assign(Object.create(ze.prototype),{constructor:Ys,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,c=this.cc,f=this.flip?e:t,u=this.flip?t:e,m=f.dimentions,p=f.halfWidth,N=f.halfHeight,x=f.halfDepth,g=0;this.dix.set(m[0],m[1],m[2]),this.diy.set(m[3],m[4],m[5]),this.diz.set(m[6],m[7],m[8]),o.sub(f.position,u.position),o.x*=u.normal.x,o.y*=u.normal.y,o.z*=u.normal.z,c.set(j.dotVectors(this.dix,o),j.dotVectors(this.diy,o),j.dotVectors(this.diz,o)),c.x>p?c.x=p:c.x<-p?c.x=-p:g=1,c.y>N?c.y=N:c.y<-N?c.y=-N:g|=2,c.z>x?c.z=x:c.z<-x?c.z=-x:g|=4,g===7&&(o.set(c.x<0?p+c.x:p-c.x,c.y<0?N+c.y:N-c.y,c.z<0?x+c.z:x-c.z),o.x<o.y?o.x<o.z?(a=o.x-p,c.x<0?(c.x=-p,o.copy(this.dix)):(c.x=p,o.subEqual(this.dix))):(a=o.z-x,c.z<0?(c.z=-x,o.copy(this.diz)):(c.z=x,o.subEqual(this.diz))):o.y<o.z?(a=o.y-N,c.y<0?(c.y=-N,o.copy(this.diy)):(c.y=N,o.subEqual(this.diy))):(a=o.z-x,c.z<0?(c.z=-x,o.copy(this.diz)):(c.z=x,o.subEqual(this.diz))),r.copy(u.position).addScaledVector(o,1),n.addPointVec(r,o,a,this.flip))}}),Object.assign(In.prototype,{World:!0,play:function(){if(this.timer===null){var t=this;this.timer=setInterval(function(){t.step()},this.timerate)}},stop:function(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)},setGravity:function(t){this.gravity.fromArray(t)},getInfo:function(){return this.isStat?this.performance.show():""},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;this.joints!==null;)this.removeJoint(this.joints);for(;this.contacts!==null;)this.removeContact(this.contacts);for(;this.rigidBodies!==null;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(t){t.parent&&ce("World","It is not possible to be added to more than one world one of the rigid body"),t.setParent(this);for(var e=t.shapes;e!==null;e=e.next)this.addShape(e);this.rigidBodies!==null&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var n=e.jointLink;n!=null;){var a=n.joint;n=n.next,this.removeJoint(a)}for(var o=t.shapes;o!==null;o=o.next)this.removeShape(o);var r=e.prev,c=e.next;r!==null&&(r.next=c),c!==null&&(c.prev=r),this.rigidBodies==e&&(this.rigidBodies=c),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=this.rigidBodies;e!==null;){if(e.name===t)return e;e=e.next}for(var n=this.joints;n!==null;){if(n.name===t)return n;n=n.next}return null},addShape:function(t){t.parent&&t.parent.parent||ce("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&ce("World","It is not possible to be added to more than one world one of the joint"),this.joints!=null&&((this.joints.prev=t).next=this.joints),this.joints=t,t.setParent(this),this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),this.joints==e&&(this.joints=a),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},addContact:function(t,e){var n;this.unusedContacts!==null?(n=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):n=new qs,n.attach(t,e),n.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=n).next=this.contacts),this.contacts=n,this.numContacts++},removeContact:function(t){var e=t.prev,n=t.next;n&&(n.prev=e),e&&(e.next=n),this.contacts==t&&(this.contacts=n),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},getContact:function(t,e){var n,a;t=t.constructor===ws?t.name:t,e=e.constructor===ws?e.name:e;for(var o=this.contacts;o!==null;){if(n=o.body1.name,a=o.body2.name,n===t&&a===e||a===t&&n===e)return o.touching?o:null;o=o.next}return null},checkContact:function(t,e){for(var n,a,o=this.contacts;o!==null;){if(n=o.body1.name||" ",a=o.body2.name||" ",n==t&&a==e||a==t&&n==e)return!!o.touching;o=o.next}},callSleep:function(t){return!!t.allowSleep&&!(t.linearVelocity.lengthSq()>.04)&&!(t.angularVelocity.lengthSq()>.25)},step:function(){var t=this.isStat;t&&this.performance.setTime(0);for(var e=this.rigidBodies;e!==null;)e.addedToIsland=!1,e.sleeping&&e.testWakeUp(),e=e.next;t&&this.performance.setTime(1),this.broadPhase.detectPairs();for(var n=this.broadPhase.pairs,a=this.broadPhase.numPairs;a--;){var o,r,c,f=n[a];f.shape1.id<f.shape2.id?(o=f.shape1,r=f.shape2):(o=f.shape2,r=f.shape1),c=o.numContacts<r.numContacts?o.contactLink:r.contactLink;for(var u=!1;c;){if((it=c.contact).shape1==o&&it.shape2==r){it.persisting=!0,u=!0;break}c=c.next}u||this.addContact(o,r)}for(t&&this.performance.calcBroadPhase(),this.numContactPoints=0,it=this.contacts;it!==null;)if(it.persisting||!it.shape1.aabb.intersectTest(it.shape2.aabb)){var m=it.body1,p=it.body2;(m.isDynamic&&!m.sleeping||p.isDynamic&&!p.sleeping)&&it.updateManifold(),this.numContactPoints+=it.manifold.numPoints,it.persisting=!1,it.constraint.addedToIsland=!1,it=it.next}else{var N=it.next;this.removeContact(it),it=N}t&&this.performance.calcNarrowPhase();var x,g,P=1/this.timeStep;for(x=this.joints;x!==null;x=x.next)x.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],t&&this.performance.setTime(1),this.numIslands=0;for(var I=this.rigidBodies;I!==null;I=I.next)if(!(I.addedToIsland||I.isStatic||I.sleeping))if(I.isLonely())I.isDynamic&&I.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(I)?(I.sleepTime+=this.timeStep,I.sleepTime>.5?I.sleep():I.updatePosition(this.timeStep)):(I.sleepTime=0,I.updatePosition(this.timeStep)),this.numIslands++;else{var D=0,nt=0,M=1;this.islandStack[0]=I,I.addedToIsland=!0;do if(e=this.islandStack[--M],this.islandStack[M]=null,e.sleeping=!1,this.islandRigidBodies[D++]=e,!e.isStatic){for(var tt=e.contactLink;tt!==null;tt=tt.next){var it;!(g=(it=tt.contact).constraint).addedToIsland&&it.touching&&(this.islandConstraints[nt++]=g,g.addedToIsland=!0,(N=tt.body).addedToIsland||(this.islandStack[M++]=N,N.addedToIsland=!0))}for(var ct=e.jointLink;ct!==null;ct=ct.next)(g=ct.joint).addedToIsland||(this.islandConstraints[nt++]=g,g.addedToIsland=!0,!(N=ct.body).addedToIsland&&N.isDynamic&&(this.islandStack[M++]=N,N.addedToIsland=!0))}while(M!=0);for(var ut=new $().addScaledVector(this.gravity,this.timeStep),st=D;st--;)(e=this.islandRigidBodies[st]).isDynamic&&e.linearVelocity.addEqual(ut);if(this.enableRandomizer){for(st=nt;st--;)if(st!==0){var kt=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*st|0;g=this.islandConstraints[st],this.islandConstraints[st]=this.islandConstraints[kt],this.islandConstraints[kt]=g}}for(st=nt;st--;)this.islandConstraints[st].preSolve(this.timeStep,P);for(var U=this.numIterations;U--;)for(st=nt;st--;)this.islandConstraints[st].solve();for(st=nt;st--;)this.islandConstraints[st].postSolve(),this.islandConstraints[st]=null;var rt=10;for(st=D;st--;)e=this.islandRigidBodies[st],this.callSleep(e)?(e.sleepTime+=this.timeStep,e.sleepTime<rt&&(rt=e.sleepTime)):(e.sleepTime=0,rt=0);if(rt>.5)for(st=D;st--;)this.islandRigidBodies[st].sleep(),this.islandRigidBodies[st]=null;else for(st=D;st--;)this.islandRigidBodies[st].updatePosition(this.timeStep),this.islandRigidBodies[st]=null;this.numIslands++}t&&this.performance.calcEnd(),this.postLoop!==null&&this.postLoop()},remove:function(t){},add:function(t){var e=(t=t||{}).type||"box";return e.constructor===String&&(e=[e]),e[0].substring(0,5)==="joint"?this.initJoint(e[0],t):this.initBody(e,t)},initBody:function(t,e){var n=this.invScale,a=e.move||!1,o=e.kinematic||!1,r=e.pos||[0,0,0];r=r.map(function(I){return I*n});var c=e.posShape||[0,0,0];c=c.map(function(I){return I*n});var f=e.rot||[0,0,0];f=f.map(function(I){return I*j.degtorad});var u=e.rotShape;u=f.map(function(I){return I*j.degtorad});var m=e.size===void 0?[1,1,1]:e.size;m.length===1&&(m[1]=m[0]),m.length===2&&(m[2]=m[0]),m=m.map(function(I){return I*n});var p=new bn;e.density!==void 0&&(p.density=e.density),e.friction!==void 0&&(p.friction=e.friction),e.restitution!==void 0&&(p.restitution=e.restitution),e.belongsTo!==void 0&&(p.belongsTo=e.belongsTo),e.collidesWith!==void 0&&(p.collidesWith=e.collidesWith),e.config!==void 0&&(e.config[0]!==void 0&&(p.density=e.config[0]),e.config[1]!==void 0&&(p.friction=e.config[1]),e.config[2]!==void 0&&(p.restitution=e.config[2]),e.config[3]!==void 0&&(p.belongsTo=e.config[3]),e.config[4]!==void 0&&(p.collidesWith=e.config[4]));for(var N,x,g=new ws(new $(r[0],r[1],r[2]),new Gi().setFromEuler(f[0],f[1],f[2])),P=0;P<t.length;P++){switch(c[x=3*P]!==void 0&&p.relativePosition.set(c[x],c[x+1],c[x+2]),u[x]!==void 0&&p.relativeRotation.setQuat(new Gi().setFromEuler(u[x],u[x+1],u[x+2])),t[P]){case"sphere":N=new Ds(p,m[x]);break;case"cylinder":N=new Os(p,m[x],m[x+1]);break;case"box":N=new Fs(p,m[x],m[x+1],m[x+2]);break;case"plane":N=new Rs(p)}g.addShape(N)}return e.neverSleep||o?g.allowSleep=!1:g.allowSleep=!0,g.isKinematic=o,a?e.massPos||e.massRot?g.setupMass(1,!1):g.setupMass(1,!0):g.setupMass(2),e.name!==void 0&&(g.name=e.name),this.addRigidBody(g),a&&(e.sleep?g.sleep():g.awake()),g},initJoint:function(t,e){var n,a,o=this.invScale,r=e.axe1||[1,0,0],c=e.axe2||[1,0,0],f=e.pos1||[0,0,0],u=e.pos2||[0,0,0];f=f.map(function(D){return D*o}),u=u.map(function(D){return D*o}),t==="jointDistance"?(n=e.min||0,a=e.max||10,n*=o,a*=o):(n=e.min||57.29578,a=e.max||0,n*=j.degtorad,a*=j.degtorad);var m=e.limit||null,p=e.spring||null,N=e.motor||null,x=new Gs;x.scale=this.scale,x.invScale=this.invScale,x.allowCollision=e.collision||!1,x.localAxis1.set(r[0],r[1],r[2]),x.localAxis2.set(c[0],c[1],c[2]),x.localAnchorPoint1.set(f[0],f[1],f[2]),x.localAnchorPoint2.set(u[0],u[1],u[2]);var g,P=null,I=null;if(e.body1===void 0||e.body2===void 0)return ce("World","Can't add joint if attach rigidbodys not define !");if(e.body1.constructor===String?P=this.getByName(e.body1):e.body1.constructor===Number?P=this.getByName(e.body1):e.body1.constructor===ws&&(P=e.body1),e.body2.constructor===String?I=this.getByName(e.body2):e.body2.constructor===Number?I=this.getByName(e.body2):e.body2.constructor===ws&&(I=e.body2),P===null||I===null)return ce("World","Can't add joint attach rigidbodys not find !");switch(x.body1=P,x.body2=I,t){case"jointDistance":g=new on(x,n,a),p!==null&&g.limitMotor.setSpring(p[0],p[1]),N!==null&&g.limitMotor.setMotor(N[0],N[1]);break;case"jointHinge":case"joint":g=new nn(x,n,a),p!==null&&g.limitMotor.setSpring(p[0],p[1]),N!==null&&g.limitMotor.setMotor(N[0],N[1]);break;case"jointPrisme":g=new us(x,n,a);break;case"jointSlide":g=new rn(x,n,a);break;case"jointBall":g=new an(x);break;case"jointWheel":g=new hn(x),m!==null&&g.rotationalLimitMotor1.setLimit(m[0],m[1]),p!==null&&g.rotationalLimitMotor1.setSpring(p[0],p[1]),N!==null&&g.rotationalLimitMotor1.setMotor(N[0],N[1])}return g.name=e.name||"",this.addJoint(g),g}}),y.Math=j,y.Vec3=$,y.Quat=Gi,y.Mat33=Ui,y.Shape=Ge,y.Box=Fs,y.Sphere=Ds,y.Cylinder=Os,y.Plane=Rs,y.Particle=en,y.ShapeConfig=bn,y.LimitMotor=Yi,y.HingeJoint=nn,y.BallAndSocketJoint=an,y.DistanceJoint=on,y.PrismaticJoint=us,y.SliderJoint=rn,y.WheelJoint=hn,y.JointConfig=Gs,y.RigidBody=ws,y.World=In,y.REVISION=A,y.BR_NULL=O,y.BR_BRUTE_FORCE=et,y.BR_SWEEP_AND_PRUNE=G,y.BR_BOUNDING_VOLUME_TREE=Ot,y.BODY_NULL=ti,y.BODY_DYNAMIC=1,y.BODY_STATIC=2,y.BODY_KINEMATIC=3,y.BODY_GHOST=4,y.SHAPE_NULL=qt,y.SHAPE_SPHERE=Ct,y.SHAPE_BOX=si,y.SHAPE_CYLINDER=vi,y.SHAPE_PLANE=Bi,y.SHAPE_PARTICLE=ui,y.SHAPE_TETRA=6,y.JOINT_NULL=Pe,y.JOINT_DISTANCE=De,y.JOINT_BALL_AND_SOCKET=rs,y.JOINT_HINGE=zs,y.JOINT_WHEEL=Is,y.JOINT_SLIDER=Mn,y.JOINT_PRISMATIC=Ln,y.AABB_PROX=.005,y.printError=ce,y.InfoDisplay=Hs,Object.defineProperty(y,"__esModule",{value:!0})});var hu=(()=>{var y=import.meta.url;return function(h){h=h||{};var s=typeof h<"u"?h:{},b,v;s.ready=new Promise(function(l,d){b=l,v=d});var A=Object.assign({},s),O=(l,d)=>{throw d},et=!0,G="";function Ot(l){return s.locateFile?s.locateFile(l,G):G+l}var ti;typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),y&&(G=y),G.indexOf("blob:")!==0?G=G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1):G="";var qt=s.print||console.log.bind(console),Ct=s.printErr||console.warn.bind(console);Object.assign(s,A),A=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&(O=s.quit);var si=4,vi;s.wasmBinary&&(vi=s.wasmBinary);var Bi=s.noExitRuntime||!0;typeof WebAssembly!="object"&&Gs("no native wasm support detected");var ui,Pe=!1,De,rs=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function zs(l,d,_){for(var k=d+_,w=d;l[w]&&!(w>=k);)++w;if(w-d>16&&l.buffer&&rs)return rs.decode(l.subarray(d,w));for(var L="";d<w;){var H=l[d++];if(!(H&128)){L+=String.fromCharCode(H);continue}var C=l[d++]&63;if((H&224)==192){L+=String.fromCharCode((H&31)<<6|C);continue}var R=l[d++]&63;if((H&240)==224?H=(H&15)<<12|C<<6|R:H=(H&7)<<18|C<<12|R<<6|l[d++]&63,H<65536)L+=String.fromCharCode(H);else{var X=H-65536;L+=String.fromCharCode(55296|X>>10,56320|X&1023)}}return L}function Is(l,d){return l?zs($,l,d):""}function Mn(l,d,_,k){if(!(k>0))return 0;for(var w=_,L=_+k-1,H=0;H<l.length;++H){var C=l.charCodeAt(H);if(C>=55296&&C<=57343){var R=l.charCodeAt(++H);C=65536+((C&1023)<<10)|R&1023}if(C<=127){if(_>=L)break;d[_++]=C}else if(C<=2047){if(_+1>=L)break;d[_++]=192|C>>6,d[_++]=128|C&63}else if(C<=65535){if(_+2>=L)break;d[_++]=224|C>>12,d[_++]=128|C>>6&63,d[_++]=128|C&63}else{if(_+3>=L)break;d[_++]=240|C>>18,d[_++]=128|C>>12&63,d[_++]=128|C>>6&63,d[_++]=128|C&63}}return d[_]=0,_-w}function Ln(l,d,_){return Mn(l,$,d,_)}function j(l){for(var d=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k<=127?d++:k<=2047?d+=2:k>=55296&&k<=57343?(d+=4,++_):d+=3}return d}var ce,Hs,$,Gi,Ui,os,Oe,Ge,Fs,Ds,Os;function Rs(l){ce=l,s.HEAP8=Hs=new Int8Array(l),s.HEAP16=Gi=new Int16Array(l),s.HEAP32=os=new Int32Array(l),s.HEAPU8=$=new Uint8Array(l),s.HEAPU16=Ui=new Uint16Array(l),s.HEAPU32=Oe=new Uint32Array(l),s.HEAPF32=Ge=new Float32Array(l),s.HEAPF64=Os=new Float64Array(l),s.HEAP64=Fs=new BigInt64Array(l),s.HEAPU64=Ds=new BigUint64Array(l)}s.INITIAL_MEMORY;var en,bn=[],Yi=[],js=[],xn=[];function Re(){return Bi}function gn(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Cn(s.preRun.shift());qs(bn)}function sn(){qs(Yi)}function nn(){qs(js)}function an(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Vn(s.postRun.shift());qs(xn)}function Cn(l){bn.unshift(l)}function on(l){Yi.unshift(l)}function Vn(l){xn.unshift(l)}var hs=0,us=null;function rn(l){hs++,s.monitorRunDependencies&&s.monitorRunDependencies(hs)}function hn(l){if(hs--,s.monitorRunDependencies&&s.monitorRunDependencies(hs),hs==0&&us){var d=us;us=null,d()}}function Gs(l){s.onAbort&&s.onAbort(l),l="Aborted("+l+")",Ct(l),Pe=!0,De=1,l+=". Build with -sASSERTIONS for more info.";var d=new WebAssembly.RuntimeError(l);throw v(d),d}var Un="data:application/octet-stream;base64,";function Us(l){return l.startsWith(Un)}var Ne;s.locateFile?(Ne="HavokPhysics.wasm",Us(Ne)||(Ne=Ot(Ne))):Ne=new URL("/assets/HavokPhysics.CjZXfFYQ.wasm",import.meta.url).toString();function Ws(l){try{if(l==Ne&&vi)return new Uint8Array(vi);throw"both async and sync fetching of the wasm failed"}catch(d){Gs(d)}}function kn(){return!vi&&et&&typeof fetch=="function"?fetch(Ne,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+Ne+"'";return l.arrayBuffer()}).catch(function(){return Ws(Ne)}):Promise.resolve().then(function(){return Ws(Ne)})}function ln(){var l={env:yt,wasi_snapshot_preview1:yt};function d(H,C){var R=H.exports;s.asm=R,ui=s.asm.memory,Rs(ui.buffer),en=s.asm.__indirect_function_table,on(s.asm.__wasm_call_ctors),hn()}rn();function _(H){d(H.instance)}function k(H){return kn().then(function(C){return WebAssembly.instantiate(C,l)}).then(function(C){return C}).then(H,function(C){Ct("failed to asynchronously prepare wasm: "+C),Gs(C)})}function w(){return!vi&&typeof WebAssembly.instantiateStreaming=="function"&&!Us(Ne)&&typeof fetch=="function"?fetch(Ne,{credentials:"same-origin"}).then(function(H){var C=WebAssembly.instantiateStreaming(H,l);return C.then(_,function(R){return Ct("wasm streaming compile failed: "+R),Ct("falling back to ArrayBuffer instantiation"),k(_)})}):k(_)}if(s.instantiateWasm)try{var L=s.instantiateWasm(l,d);return L}catch(H){Ct("Module.instantiateWasm callback failed with error: "+H),v(H)}return w().catch(v),{}}function cn(l){this.name="ExitStatus",this.message="Program terminated with exit("+l+")",this.status=l}function qs(l){for(;l.length>0;)l.shift()(s)}function ws(l){if(l instanceof cn||l=="unwind")return De;O(1,l)}var un={};function ps(l){for(;l.length;){var d=l.pop(),_=l.pop();_(d)}}function pn(l){return this.fromWireType(os[l>>2])}var Qe={},ls={},Ts={},Ns=48,As=57;function Js(l){if(l===void 0)return"_unknown";l=l.replace(/[^a-zA-Z0-9_]/g,"$");var d=l.charCodeAt(0);return d>=Ns&&d<=As?"_"+l:l}function Zs(l,d){return l=Js(l),new Function("body","return function "+l+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(d)}function mn(l,d){var _=Zs(d,function(k){this.name=d,this.message=k;var w=new Error(k).stack;w!==void 0&&(this.stack=this.toString()+`
`+w.replace(/^Error(:[^\n]*)?\n/,""))});return _.prototype=Object.create(l.prototype),_.prototype.constructor=_,_.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},_}var Pn=void 0;function dn(l){throw new Pn(l)}function fn(l,d,_){l.forEach(function(C){Ts[C]=d});function k(C){var R=_(C);R.length!==l.length&&dn("Mismatched type converter count");for(var X=0;X<l.length;++X)je(l[X],R[X])}var w=new Array(d.length),L=[],H=0;d.forEach((C,R)=>{ls.hasOwnProperty(C)?w[R]=ls[C]:(L.push(C),Qe.hasOwnProperty(C)||(Qe[C]=[]),Qe[C].push(()=>{w[R]=ls[C],++H,H===L.length&&k(w)}))}),L.length===0&&k(w)}function ze(l){var d=un[l];delete un[l];var _=d.elements,k=_.length,w=_.map(function(C){return C.getterReturnType}).concat(_.map(function(C){return C.setterArgumentType})),L=d.rawConstructor,H=d.rawDestructor;fn([l],w,function(C){return _.forEach((R,X)=>{var Nt=C[X],Pt=R.getter,Gt=R.getterContext,Xt=C[X+k],ue=R.setter,Mi=R.setterContext;R.read=Li=>Nt.fromWireType(Pt(Gt,Li)),R.write=(Li,Wi)=>{var ii=[];ue(Mi,Li,Xt.toWireType(ii,Wi)),ps(ii)}}),[{name:d.name,fromWireType:function(R){for(var X=new Array(k),Nt=0;Nt<k;++Nt)X[Nt]=_[Nt].read(R);return H(R),X},toWireType:function(R,X){if(k!==X.length)throw new TypeError("Incorrect number of tuple elements for "+d.name+": expected="+k+", actual="+X.length);for(var Nt=L(),Pt=0;Pt<k;++Pt)_[Pt].write(Nt,X[Pt]);return R!==null&&R.push(H,Nt),Nt},argPackAdvance:8,readValueFromPointer:pn,destructorFunction:H}]})}function yn(l){if(l===null)return"null";var d=typeof l;return d==="object"||d==="array"||d==="function"?l.toString():""+l}function vn(){for(var l=new Array(256),d=0;d<256;++d)l[d]=String.fromCharCode(d);_n=l}var _n=void 0;function _e(l){for(var d="",_=l;$[_];)d+=_n[$[_++]];return d}var Ks=void 0;function Se(l){throw new Ks(l)}function je(l,d,_={}){if(!("argPackAdvance"in d))throw new TypeError("registerType registeredInstance requires argPackAdvance");var k=d.name;if(l||Se('type "'+k+'" must have a positive integer typeid pointer'),ls.hasOwnProperty(l)){if(_.ignoreDuplicateRegistrations)return;Se("Cannot register type '"+k+"' twice")}if(ls[l]=d,delete Ts[l],Qe.hasOwnProperty(l)){var w=Qe[l];delete Qe[l],w.forEach(L=>L())}}function Ys(l,d,_){switch(d){case 0:return _?function(w){return Hs[w]}:function(w){return $[w]};case 1:return _?function(w){return Gi[w>>1]}:function(w){return Ui[w>>1]};case 2:return _?function(w){return os[w>>2]}:function(w){return Oe[w>>2]};case 3:return _?function(w){return Fs[w>>3]}:function(w){return Ds[w>>3]};default:throw new TypeError("Unknown integer type: "+l)}}function In(l,d,_,k,w){d=_e(d);var L=t(_),H=d.indexOf("u")!=-1;H&&(w=(1n<<64n)-1n),je(l,{name:d,fromWireType:function(C){return C},toWireType:function(C,R){if(typeof R!="bigint"&&typeof R!="number")throw new TypeError('Cannot convert "'+yn(R)+'" to '+this.name);if(R<k||R>w)throw new TypeError('Passing a number "'+yn(R)+'" from JS side to C/C++ side to an argument of type "'+d+'", which is outside the valid range ['+k+", "+w+"]!");return R},argPackAdvance:8,readValueFromPointer:Ys(d,L,!H),destructorFunction:null})}function t(l){switch(l){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+l)}}function e(l,d,_,k,w){var L=t(_);d=_e(d),je(l,{name:d,fromWireType:function(H){return!!H},toWireType:function(H,C){return C?k:w},argPackAdvance:8,readValueFromPointer:function(H){var C;if(_===1)C=Hs;else if(_===2)C=Gi;else if(_===4)C=os;else throw new TypeError("Unknown boolean type size: "+d);return this.fromWireType(C[H>>L])},destructorFunction:null})}var n=[],a=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function o(l){l>4&&--a[l].refcount===0&&(a[l]=void 0,n.push(l))}function r(){for(var l=0,d=5;d<a.length;++d)a[d]!==void 0&&++l;return l}function c(){for(var l=5;l<a.length;++l)if(a[l]!==void 0)return a[l];return null}function f(){s.count_emval_handles=r,s.get_first_emval=c}var u={toValue:l=>(l||Se("Cannot use deleted val. handle = "+l),a[l].value),toHandle:l=>{switch(l){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var d=n.length?n.pop():a.length;return a[d]={refcount:1,value:l},d}}}};function m(l,d){d=_e(d),je(l,{name:d,fromWireType:function(_){var k=u.toValue(_);return o(_),k},toWireType:function(_,k){return u.toHandle(k)},argPackAdvance:8,readValueFromPointer:pn,destructorFunction:null})}function p(l,d,_){if(l[d].overloadTable===void 0){var k=l[d];l[d]=function(){return l[d].overloadTable.hasOwnProperty(arguments.length)||Se("Function '"+_+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+l[d].overloadTable+")!"),l[d].overloadTable[arguments.length].apply(this,arguments)},l[d].overloadTable=[],l[d].overloadTable[k.argCount]=k}}function N(l,d,_){s.hasOwnProperty(l)?((_===void 0||s[l].overloadTable!==void 0&&s[l].overloadTable[_]!==void 0)&&Se("Cannot register public name '"+l+"' twice"),p(s,l,l),s.hasOwnProperty(_)&&Se("Cannot register multiple overloads of a function with the same number of arguments ("+_+")!"),s[l].overloadTable[_]=d):(s[l]=d,_!==void 0&&(s[l].numArguments=_))}function x(l,d,_){switch(d){case 0:return function(k){var w=_?Hs:$;return this.fromWireType(w[k])};case 1:return function(k){var w=_?Gi:Ui;return this.fromWireType(w[k>>1])};case 2:return function(k){var w=_?os:Oe;return this.fromWireType(w[k>>2])};default:throw new TypeError("Unknown integer type: "+l)}}function g(l,d,_,k){var w=t(_);d=_e(d);function L(){}L.values={},je(l,{name:d,constructor:L,fromWireType:function(H){return this.constructor.values[H]},toWireType:function(H,C){return C.value},argPackAdvance:8,readValueFromPointer:x(d,w,k),destructorFunction:null}),N(d,L)}function P(l){var d=Jt(l),_=_e(d);return Vt(d),_}function I(l,d){var _=ls[l];return _===void 0&&Se(d+" has unknown type "+P(l)),_}function D(l,d,_){var k=I(l,"enum");d=_e(d);var w=k.constructor,L=Object.create(k.constructor.prototype,{value:{value:_},constructor:{value:Zs(k.name+"_"+d,function(){})}});w.values[_]=L,w[d]=L}function nt(l,d){switch(d){case 2:return function(_){return this.fromWireType(Ge[_>>2])};case 3:return function(_){return this.fromWireType(Os[_>>3])};default:throw new TypeError("Unknown float type: "+l)}}function M(l,d,_){var k=t(_);d=_e(d),je(l,{name:d,fromWireType:function(w){return w},toWireType:function(w,L){return L},argPackAdvance:8,readValueFromPointer:nt(d,k),destructorFunction:null})}function tt(l,d){if(!(l instanceof Function))throw new TypeError("new_ called with constructor type "+typeof l+" which is not a function");var _=Zs(l.name||"unknownFunctionName",function(){});_.prototype=l.prototype;var k=new _,w=l.apply(k,d);return w instanceof Object?w:k}function it(l,d,_,k,w){var L=d.length;L<2&&Se("argTypes array size mismatch! Must at least get return value and 'this' types!"),d[1];for(var H=!1,C=1;C<d.length;++C)if(d[C]!==null&&d[C].destructorFunction===void 0){H=!0;break}for(var R=d[0].name!=="void",X="",Nt="",C=0;C<L-2;++C)X+=(C!==0?", ":"")+"arg"+C,Nt+=(C!==0?", ":"")+"arg"+C+"Wired";var Pt="return function "+Js(l)+"("+X+`) {
if (arguments.length !== `+(L-2)+`) {
throwBindingError('function `+l+" called with ' + arguments.length + ' arguments, expected "+(L-2)+` args!');
}
`;H&&(Pt+=`var destructors = [];
`);for(var Gt=H?"destructors":"null",Xt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ue=[Se,k,w,ps,d[0],d[1]],C=0;C<L-2;++C)Pt+="var arg"+C+"Wired = argType"+C+".toWireType("+Gt+", arg"+C+"); // "+d[C+2].name+`
`,Xt.push("argType"+C),ue.push(d[C+2]);if(Pt+=(R?"var rv = ":"")+"invoker(fn"+(Nt.length>0?", ":"")+Nt+`);
`,H)Pt+=`runDestructors(destructors);
`;else for(var C=2;C<d.length;++C){var Mi=C===1?"thisWired":"arg"+(C-2)+"Wired";d[C].destructorFunction!==null&&(Pt+=Mi+"_dtor("+Mi+"); // "+d[C].name+`
`,Xt.push(Mi+"_dtor"),ue.push(d[C].destructorFunction))}R&&(Pt+=`var ret = retType.fromWireType(rv);
return ret;
`),Pt+=`}
`,Xt.push(Pt);var Li=tt(Function,Xt).apply(null,ue);return Li}function ct(l,d){for(var _=[],k=0;k<l;k++)_.push(Oe[d+k*4>>2]);return _}function ut(l,d,_){s.hasOwnProperty(l)||dn("Replacing nonexistant public symbol"),s[l].overloadTable!==void 0&&_!==void 0?s[l].overloadTable[_]=d:(s[l]=d,s[l].argCount=_)}var st=[];function kt(l){var d=st[l];return d||(l>=st.length&&(st.length=l+1),st[l]=d=en.get(l)),d}function U(l,d){l=_e(l);function _(){return kt(d)}var k=_();return typeof k!="function"&&Se("unknown function pointer with signature "+l+": "+d),k}var rt=void 0;function pt(l,d){var _=[],k={};function w(L){if(!k[L]&&!ls[L]){if(Ts[L]){Ts[L].forEach(w);return}_.push(L),k[L]=!0}}throw d.forEach(w),new rt(l+": "+_.map(P).join([", "]))}function Q(l,d,_,k,w,L){var H=ct(d,_);l=_e(l),w=U(k,w),N(l,function(){pt("Cannot call "+l+" due to unbound types",H)},d-1),fn([],H,function(C){var R=[C[0],null].concat(C.slice(1));return ut(l,it(l,R,null,w,L),d-1),[]})}function ht(l,d,_,k,w){d=_e(d);var L=t(_),H=Pt=>Pt;if(k===0){var C=32-8*_;H=Pt=>Pt<<C>>>C}var R=d.includes("unsigned"),X=(Pt,Gt)=>{},Nt;R?Nt=function(Pt,Gt){return X(Gt,this.name),Gt>>>0}:Nt=function(Pt,Gt){return X(Gt,this.name),Gt},je(l,{name:d,fromWireType:H,toWireType:Nt,argPackAdvance:8,readValueFromPointer:Ys(d,L,k!==0),destructorFunction:null})}function dt(l,d,_){var k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],w=k[d];function L(H){H=H>>2;var C=Oe,R=C[H],X=C[H+1];return new w(ce,X,R)}_=_e(_),je(l,{name:_,fromWireType:L,argPackAdvance:8,readValueFromPointer:L},{ignoreDuplicateRegistrations:!0})}function Ht(l,d){d=_e(d);var _=d==="std::string";je(l,{name:d,fromWireType:function(k){var w=Oe[k>>2],L=k+4,H;if(_)for(var C=L,R=0;R<=w;++R){var X=L+R;if(R==w||$[X]==0){var Nt=X-C,Pt=Is(C,Nt);H===void 0?H=Pt:(H+="\0",H+=Pt),C=X+1}}else{for(var Gt=new Array(w),R=0;R<w;++R)Gt[R]=String.fromCharCode($[L+R]);H=Gt.join("")}return Vt(k),H},toWireType:function(k,w){w instanceof ArrayBuffer&&(w=new Uint8Array(w));var L,H=typeof w=="string";H||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int8Array||Se("Cannot pass non-string to std::string"),_&&H?L=j(w):L=w.length;var C=Kt(4+L+1),R=C+4;if(Oe[C>>2]=L,_&&H)Ln(w,R,L+1);else if(H)for(var X=0;X<L;++X){var Nt=w.charCodeAt(X);Nt>255&&(Vt(R),Se("String has UTF-16 code units that do not fit in 8 bits")),$[R+X]=Nt}else for(var X=0;X<L;++X)$[R+X]=w[X];return k!==null&&k.push(Vt,C),C},argPackAdvance:8,readValueFromPointer:pn,destructorFunction:function(k){Vt(k)}})}var ki=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function wi(l,d){for(var _=l,k=_>>1,w=k+d/2;!(k>=w)&&Ui[k];)++k;if(_=k<<1,_-l>32&&ki)return ki.decode($.subarray(l,_));for(var L="",H=0;!(H>=d/2);++H){var C=Gi[l+H*2>>1];if(C==0)break;L+=String.fromCharCode(C)}return L}function _i(l,d,_){if(_===void 0&&(_=2147483647),_<2)return 0;_-=2;for(var k=d,w=_<l.length*2?_/2:l.length,L=0;L<w;++L){var H=l.charCodeAt(L);Gi[d>>1]=H,d+=2}return Gi[d>>1]=0,d-k}function E(l){return l.length*2}function Zt(l,d){for(var _=0,k="";!(_>=d/4);){var w=os[l+_*4>>2];if(w==0)break;if(++_,w>=65536){var L=w-65536;k+=String.fromCharCode(55296|L>>10,56320|L&1023)}else k+=String.fromCharCode(w)}return k}function S(l,d,_){if(_===void 0&&(_=2147483647),_<4)return 0;for(var k=d,w=k+_-4,L=0;L<l.length;++L){var H=l.charCodeAt(L);if(H>=55296&&H<=57343){var C=l.charCodeAt(++L);H=65536+((H&1023)<<10)|C&1023}if(os[d>>2]=H,d+=4,d+4>w)break}return os[d>>2]=0,d-k}function z(l){for(var d=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k>=55296&&k<=57343&&++_,d+=4}return d}function at(l,d,_){_=_e(_);var k,w,L,H,C;d===2?(k=wi,w=_i,H=E,L=()=>Ui,C=1):d===4&&(k=Zt,w=S,H=z,L=()=>Oe,C=2),je(l,{name:_,fromWireType:function(R){for(var X=Oe[R>>2],Nt=L(),Pt,Gt=R+4,Xt=0;Xt<=X;++Xt){var ue=R+4+Xt*d;if(Xt==X||Nt[ue>>C]==0){var Mi=ue-Gt,Li=k(Gt,Mi);Pt===void 0?Pt=Li:(Pt+="\0",Pt+=Li),Gt=ue+d}}return Vt(R),Pt},toWireType:function(R,X){typeof X!="string"&&Se("Cannot pass non-string to C++ string type "+_);var Nt=H(X),Pt=Kt(4+Nt+d);return Oe[Pt>>2]=Nt>>C,w(X,Pt+4,Nt+d),R!==null&&R.push(Vt,Pt),Pt},argPackAdvance:8,readValueFromPointer:pn,destructorFunction:function(R){Vt(R)}})}function B(l,d,_,k,w,L){un[l]={name:_e(d),rawConstructor:U(_,k),rawDestructor:U(w,L),elements:[]}}function F(l,d,_,k,w,L,H,C,R){un[l].elements.push({getterReturnType:d,getter:U(_,k),getterContext:w,setterArgumentType:L,setter:U(H,C),setterContext:R})}function At(l,d){d=_e(d),je(l,{isVoid:!0,name:d,argPackAdvance:0,fromWireType:function(){},toWireType:function(_,k){}})}var $t=!0;function xt(){return $t}var gt={};function W(l){var d=gt[l];return d===void 0?_e(l):d}var mt=[];function zt(l,d,_,k){l=mt[l],d=u.toValue(d),_=W(_),l(d,_,null,k)}function oe(l){var d=mt.length;return mt.push(l),d}function Ni(l,d){for(var _=new Array(l),k=0;k<l;++k)_[k]=I(Oe[d+k*si>>2],"parameter "+k);return _}var Ei=[];function bi(l,d){var _=Ni(l,d),k=_[0],w=k.name+"_$"+_.slice(1).map(function(ue){return ue.name}).join("_")+"$",L=Ei[w];if(L!==void 0)return L;for(var H=["retType"],C=[k],R="",X=0;X<l-1;++X)R+=(X!==0?", ":"")+"arg"+X,H.push("argType"+X),C.push(_[1+X]);for(var Nt=Js("methodCaller_"+w),Pt="return function "+Nt+`(handle, name, destructors, args) {
`,Gt=0,X=0;X<l-1;++X)Pt+="    var arg"+X+" = argType"+X+".readValueFromPointer(args"+(Gt?"+"+Gt:"")+`);
`,Gt+=_[X+1].argPackAdvance;Pt+="    var rv = handle[name]("+R+`);
`;for(var X=0;X<l-1;++X)_[X+1].deleteObject&&(Pt+="    argType"+X+".deleteObject(arg"+X+`);
`);k.isVoid||(Pt+=`    return retType.toWireType(destructors, rv);
`),Pt+=`};
`,H.push(Pt);var Xt=tt(Function,H).apply(null,C);return L=oe(Xt),Ei[w]=L,L}function xi(){Gs("")}function St(){return Date.now()}function _t(){return 2147483648}function K(){return _t()}var lt;lt=()=>performance.now();function wt(l,d,_){$.copyWithin(l,d,d+_)}function Pi(l){try{return ui.grow(l-ce.byteLength+65535>>>16),Rs(ui.buffer),1}catch{}}function Qt(l){var d=$.length;l=l>>>0;var _=_t();if(l>_)return!1;let k=(R,X)=>R+(X-R%X)%X;for(var w=1;w<=4;w*=2){var L=d*(1+.2/w);L=Math.min(L,l+100663296);var H=Math.min(_,k(Math.max(l,L),65536)),C=Pi(H);if(C)return!0}return!1}var Tt=[null,[],[]];function Ut(l,d){var _=Tt[l];d===0||d===10?((l===1?qt:Ct)(zs(_,0)),_.length=0):_.push(d)}function Wt(l,d,_,k){for(var w=0,L=0;L<_;L++){var H=Oe[d>>2],C=Oe[d+4>>2];d+=8;for(var R=0;R<C;R++)Ut(l,$[H+R]);w+=C}return Oe[k>>2]=w,0}function vt(l){De=l,Re()||(s.onExit&&s.onExit(l),Pe=!0),O(l,new cn(l))}function ft(l,d){De=l,vt(l)}Pn=s.InternalError=mn(Error,"InternalError"),vn(),Ks=s.BindingError=mn(Error,"BindingError"),f(),rt=s.UnboundTypeError=mn(Error,"UnboundTypeError");var yt={_embind_finalize_value_array:ze,_embind_register_bigint:In,_embind_register_bool:e,_embind_register_emval:m,_embind_register_enum:g,_embind_register_enum_value:D,_embind_register_float:M,_embind_register_function:Q,_embind_register_integer:ht,_embind_register_memory_view:dt,_embind_register_std_string:Ht,_embind_register_std_wstring:at,_embind_register_value_array:B,_embind_register_value_array_element:F,_embind_register_void:At,_emscripten_get_now_is_monotonic:xt,_emval_call_void_method:zt,_emval_decref:o,_emval_get_method_caller:bi,abort:xi,emscripten_date_now:St,emscripten_get_heap_max:K,emscripten_get_now:lt,emscripten_memcpy_big:wt,emscripten_resize_heap:Qt,fd_write:Wt};ln(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._HP_GetStatistics=function(){return(s._HP_GetStatistics=s.asm.HP_GetStatistics).apply(null,arguments)},s._HP_Shape_CreateSphere=function(){return(s._HP_Shape_CreateSphere=s.asm.HP_Shape_CreateSphere).apply(null,arguments)},s._HP_Shape_CreateCapsule=function(){return(s._HP_Shape_CreateCapsule=s.asm.HP_Shape_CreateCapsule).apply(null,arguments)},s._HP_Shape_CreateCylinder=function(){return(s._HP_Shape_CreateCylinder=s.asm.HP_Shape_CreateCylinder).apply(null,arguments)},s._HP_Shape_CreateBox=function(){return(s._HP_Shape_CreateBox=s.asm.HP_Shape_CreateBox).apply(null,arguments)},s._HP_Shape_CreateConvexHull=function(){return(s._HP_Shape_CreateConvexHull=s.asm.HP_Shape_CreateConvexHull).apply(null,arguments)},s._HP_Shape_CreateMesh=function(){return(s._HP_Shape_CreateMesh=s.asm.HP_Shape_CreateMesh).apply(null,arguments)},s._HP_Shape_CreateHeightField=function(){return(s._HP_Shape_CreateHeightField=s.asm.HP_Shape_CreateHeightField).apply(null,arguments)},s._HP_Shape_CreateContainer=function(){return(s._HP_Shape_CreateContainer=s.asm.HP_Shape_CreateContainer).apply(null,arguments)},s._HP_Shape_Release=function(){return(s._HP_Shape_Release=s.asm.HP_Shape_Release).apply(null,arguments)},s._HP_Shape_GetType=function(){return(s._HP_Shape_GetType=s.asm.HP_Shape_GetType).apply(null,arguments)},s._HP_Shape_AddChild=function(){return(s._HP_Shape_AddChild=s.asm.HP_Shape_AddChild).apply(null,arguments)},s._HP_Shape_RemoveChild=function(){return(s._HP_Shape_RemoveChild=s.asm.HP_Shape_RemoveChild).apply(null,arguments)},s._HP_Shape_GetNumChildren=function(){return(s._HP_Shape_GetNumChildren=s.asm.HP_Shape_GetNumChildren).apply(null,arguments)},s._HP_Shape_SetChildQSTransform=function(){return(s._HP_Shape_SetChildQSTransform=s.asm.HP_Shape_SetChildQSTransform).apply(null,arguments)},s._HP_Shape_GetChildQSTransform=function(){return(s._HP_Shape_GetChildQSTransform=s.asm.HP_Shape_GetChildQSTransform).apply(null,arguments)},s._HP_Shape_SetFilterInfo=function(){return(s._HP_Shape_SetFilterInfo=s.asm.HP_Shape_SetFilterInfo).apply(null,arguments)},s._HP_Shape_GetFilterInfo=function(){return(s._HP_Shape_GetFilterInfo=s.asm.HP_Shape_GetFilterInfo).apply(null,arguments)},s._HP_Shape_SetMaterial=function(){return(s._HP_Shape_SetMaterial=s.asm.HP_Shape_SetMaterial).apply(null,arguments)},s._HP_Shape_GetMaterial=function(){return(s._HP_Shape_GetMaterial=s.asm.HP_Shape_GetMaterial).apply(null,arguments)},s._HP_Shape_SetDensity=function(){return(s._HP_Shape_SetDensity=s.asm.HP_Shape_SetDensity).apply(null,arguments)},s._HP_Shape_GetDensity=function(){return(s._HP_Shape_GetDensity=s.asm.HP_Shape_GetDensity).apply(null,arguments)},s._HP_Shape_CastRay=function(){return(s._HP_Shape_CastRay=s.asm.HP_Shape_CastRay).apply(null,arguments)},s._HP_Shape_BuildMassProperties=function(){return(s._HP_Shape_BuildMassProperties=s.asm.HP_Shape_BuildMassProperties).apply(null,arguments)},s._HP_ShapePathIterator_GetNext=function(){return(s._HP_ShapePathIterator_GetNext=s.asm.HP_ShapePathIterator_GetNext).apply(null,arguments)},s._HP_Shape_CreateDebugDisplayGeometry=function(){return(s._HP_Shape_CreateDebugDisplayGeometry=s.asm.HP_Shape_CreateDebugDisplayGeometry).apply(null,arguments)},s._HP_DebugGeometry_GetInfo=function(){return(s._HP_DebugGeometry_GetInfo=s.asm.HP_DebugGeometry_GetInfo).apply(null,arguments)},s._HP_DebugGeometry_Release=function(){return(s._HP_DebugGeometry_Release=s.asm.HP_DebugGeometry_Release).apply(null,arguments)},s._HP_Body_Create=function(){return(s._HP_Body_Create=s.asm.HP_Body_Create).apply(null,arguments)},s._HP_Body_Release=function(){return(s._HP_Body_Release=s.asm.HP_Body_Release).apply(null,arguments)},s._HP_Body_SetShape=function(){return(s._HP_Body_SetShape=s.asm.HP_Body_SetShape).apply(null,arguments)},s._HP_Body_GetShape=function(){return(s._HP_Body_GetShape=s.asm.HP_Body_GetShape).apply(null,arguments)},s._HP_Body_SetMotionType=function(){return(s._HP_Body_SetMotionType=s.asm.HP_Body_SetMotionType).apply(null,arguments)},s._HP_Body_GetMotionType=function(){return(s._HP_Body_GetMotionType=s.asm.HP_Body_GetMotionType).apply(null,arguments)},s._HP_Body_SetEventMask=function(){return(s._HP_Body_SetEventMask=s.asm.HP_Body_SetEventMask).apply(null,arguments)},s._HP_Body_GetEventMask=function(){return(s._HP_Body_GetEventMask=s.asm.HP_Body_GetEventMask).apply(null,arguments)},s._HP_Body_SetMassProperties=function(){return(s._HP_Body_SetMassProperties=s.asm.HP_Body_SetMassProperties).apply(null,arguments)},s._HP_Body_GetMassProperties=function(){return(s._HP_Body_GetMassProperties=s.asm.HP_Body_GetMassProperties).apply(null,arguments)},s._HP_Body_SetLinearDamping=function(){return(s._HP_Body_SetLinearDamping=s.asm.HP_Body_SetLinearDamping).apply(null,arguments)},s._HP_Body_GetLinearDamping=function(){return(s._HP_Body_GetLinearDamping=s.asm.HP_Body_GetLinearDamping).apply(null,arguments)},s._HP_Body_SetAngularDamping=function(){return(s._HP_Body_SetAngularDamping=s.asm.HP_Body_SetAngularDamping).apply(null,arguments)},s._HP_Body_GetAngularDamping=function(){return(s._HP_Body_GetAngularDamping=s.asm.HP_Body_GetAngularDamping).apply(null,arguments)},s._HP_Body_SetGravityFactor=function(){return(s._HP_Body_SetGravityFactor=s.asm.HP_Body_SetGravityFactor).apply(null,arguments)},s._HP_Body_GetGravityFactor=function(){return(s._HP_Body_GetGravityFactor=s.asm.HP_Body_GetGravityFactor).apply(null,arguments)},s._HP_Body_GetWorld=function(){return(s._HP_Body_GetWorld=s.asm.HP_Body_GetWorld).apply(null,arguments)},s._HP_Body_SetPosition=function(){return(s._HP_Body_SetPosition=s.asm.HP_Body_SetPosition).apply(null,arguments)},s._HP_Body_GetPosition=function(){return(s._HP_Body_GetPosition=s.asm.HP_Body_GetPosition).apply(null,arguments)},s._HP_Body_SetOrientation=function(){return(s._HP_Body_SetOrientation=s.asm.HP_Body_SetOrientation).apply(null,arguments)},s._HP_Body_GetOrientation=function(){return(s._HP_Body_GetOrientation=s.asm.HP_Body_GetOrientation).apply(null,arguments)},s._HP_Body_SetQTransform=function(){return(s._HP_Body_SetQTransform=s.asm.HP_Body_SetQTransform).apply(null,arguments)},s._HP_Body_GetWorldTransformOffset=function(){return(s._HP_Body_GetWorldTransformOffset=s.asm.HP_Body_GetWorldTransformOffset).apply(null,arguments)},s._HP_Body_GetQTransform=function(){return(s._HP_Body_GetQTransform=s.asm.HP_Body_GetQTransform).apply(null,arguments)},s._HP_Body_SetLinearVelocity=function(){return(s._HP_Body_SetLinearVelocity=s.asm.HP_Body_SetLinearVelocity).apply(null,arguments)},s._HP_Body_GetLinearVelocity=function(){return(s._HP_Body_GetLinearVelocity=s.asm.HP_Body_GetLinearVelocity).apply(null,arguments)},s._HP_Body_SetAngularVelocity=function(){return(s._HP_Body_SetAngularVelocity=s.asm.HP_Body_SetAngularVelocity).apply(null,arguments)},s._HP_Body_GetAngularVelocity=function(){return(s._HP_Body_GetAngularVelocity=s.asm.HP_Body_GetAngularVelocity).apply(null,arguments)},s._HP_Body_ApplyImpulse=function(){return(s._HP_Body_ApplyImpulse=s.asm.HP_Body_ApplyImpulse).apply(null,arguments)},s._HP_Body_SetTargetQTransform=function(){return(s._HP_Body_SetTargetQTransform=s.asm.HP_Body_SetTargetQTransform).apply(null,arguments)},s._HP_Constraint_Create=function(){return(s._HP_Constraint_Create=s.asm.HP_Constraint_Create).apply(null,arguments)},s._HP_Constraint_Release=function(){return(s._HP_Constraint_Release=s.asm.HP_Constraint_Release).apply(null,arguments)},s._HP_Constraint_SetParentBody=function(){return(s._HP_Constraint_SetParentBody=s.asm.HP_Constraint_SetParentBody).apply(null,arguments)},s._HP_Constraint_GetParentBody=function(){return(s._HP_Constraint_GetParentBody=s.asm.HP_Constraint_GetParentBody).apply(null,arguments)},s._HP_Constraint_SetChildBody=function(){return(s._HP_Constraint_SetChildBody=s.asm.HP_Constraint_SetChildBody).apply(null,arguments)},s._HP_Constraint_GetChildBody=function(){return(s._HP_Constraint_GetChildBody=s.asm.HP_Constraint_GetChildBody).apply(null,arguments)},s._HP_Constraint_SetAnchorInParent=function(){return(s._HP_Constraint_SetAnchorInParent=s.asm.HP_Constraint_SetAnchorInParent).apply(null,arguments)},s._HP_Constraint_SetAnchorInChild=function(){return(s._HP_Constraint_SetAnchorInChild=s.asm.HP_Constraint_SetAnchorInChild).apply(null,arguments)},s._HP_Constraint_SetCollisionsEnabled=function(){return(s._HP_Constraint_SetCollisionsEnabled=s.asm.HP_Constraint_SetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_GetCollisionsEnabled=function(){return(s._HP_Constraint_GetCollisionsEnabled=s.asm.HP_Constraint_GetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_SetEnabled=function(){return(s._HP_Constraint_SetEnabled=s.asm.HP_Constraint_SetEnabled).apply(null,arguments)},s._HP_Constraint_GetEnabled=function(){return(s._HP_Constraint_GetEnabled=s.asm.HP_Constraint_GetEnabled).apply(null,arguments)},s._HP_Constraint_SetAxisMinLimit=function(){return(s._HP_Constraint_SetAxisMinLimit=s.asm.HP_Constraint_SetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMinLimit=function(){return(s._HP_Constraint_GetAxisMinLimit=s.asm.HP_Constraint_GetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_SetAxisMaxLimit=function(){return(s._HP_Constraint_SetAxisMaxLimit=s.asm.HP_Constraint_SetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMaxLimit=function(){return(s._HP_Constraint_GetAxisMaxLimit=s.asm.HP_Constraint_GetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMode=function(){return(s._HP_Constraint_GetAxisMode=s.asm.HP_Constraint_GetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisMode=function(){return(s._HP_Constraint_SetAxisMode=s.asm.HP_Constraint_SetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisFriction=function(){return(s._HP_Constraint_SetAxisFriction=s.asm.HP_Constraint_SetAxisFriction).apply(null,arguments)},s._HP_Constraint_GetAxisFriction=function(){return(s._HP_Constraint_GetAxisFriction=s.asm.HP_Constraint_GetAxisFriction).apply(null,arguments)},s._HP_Constraint_SetAxisMotorType=function(){return(s._HP_Constraint_SetAxisMotorType=s.asm.HP_Constraint_SetAxisMotorType).apply(null,arguments)},s._HP_Constraint_GetAxisMotorType=function(){return(s._HP_Constraint_GetAxisMotorType=s.asm.HP_Constraint_GetAxisMotorType).apply(null,arguments)},s._HP_Constraint_SetAxisMotorTarget=function(){return(s._HP_Constraint_SetAxisMotorTarget=s.asm.HP_Constraint_SetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_GetAxisMotorTarget=function(){return(s._HP_Constraint_GetAxisMotorTarget=s.asm.HP_Constraint_GetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_SetAxisMotorMaxForce=function(){return(s._HP_Constraint_SetAxisMotorMaxForce=s.asm.HP_Constraint_SetAxisMotorMaxForce).apply(null,arguments)},s._HP_Constraint_GetAxisMotorMaxForce=function(){return(s._HP_Constraint_GetAxisMotorMaxForce=s.asm.HP_Constraint_GetAxisMotorMaxForce).apply(null,arguments)},s._HP_World_Create=function(){return(s._HP_World_Create=s.asm.HP_World_Create).apply(null,arguments)},s._HP_World_Release=function(){return(s._HP_World_Release=s.asm.HP_World_Release).apply(null,arguments)},s._HP_World_GetBodyBuffer=function(){return(s._HP_World_GetBodyBuffer=s.asm.HP_World_GetBodyBuffer).apply(null,arguments)},s._HP_World_SetGravity=function(){return(s._HP_World_SetGravity=s.asm.HP_World_SetGravity).apply(null,arguments)},s._HP_World_GetGravity=function(){return(s._HP_World_GetGravity=s.asm.HP_World_GetGravity).apply(null,arguments)},s._HP_World_AddBody=function(){return(s._HP_World_AddBody=s.asm.HP_World_AddBody).apply(null,arguments)},s._HP_World_RemoveBody=function(){return(s._HP_World_RemoveBody=s.asm.HP_World_RemoveBody).apply(null,arguments)},s._HP_World_GetNumBodies=function(){return(s._HP_World_GetNumBodies=s.asm.HP_World_GetNumBodies).apply(null,arguments)},s._HP_World_CastRayWithCollector=function(){return(s._HP_World_CastRayWithCollector=s.asm.HP_World_CastRayWithCollector).apply(null,arguments)},s._HP_World_Step=function(){return(s._HP_World_Step=s.asm.HP_World_Step).apply(null,arguments)},s._HP_World_GetNextCollisionEvent=function(){return(s._HP_World_GetNextCollisionEvent=s.asm.HP_World_GetNextCollisionEvent).apply(null,arguments)},s._HP_QueryCollector_Create=function(){return(s._HP_QueryCollector_Create=s.asm.HP_QueryCollector_Create).apply(null,arguments)},s._HP_QueryCollector_Release=function(){return(s._HP_QueryCollector_Release=s.asm.HP_QueryCollector_Release).apply(null,arguments)},s._HP_QueryCollector_GetNumHits=function(){return(s._HP_QueryCollector_GetNumHits=s.asm.HP_QueryCollector_GetNumHits).apply(null,arguments)},s._HP_QueryCollector_GetCastRayResult=function(){return(s._HP_QueryCollector_GetCastRayResult=s.asm.HP_QueryCollector_GetCastRayResult).apply(null,arguments)},s._main=function(){return(s._main=s.asm.main).apply(null,arguments)};var Kt=s._malloc=function(){return(Kt=s._malloc=s.asm.malloc).apply(null,arguments)},Vt=s._free=function(){return(Vt=s._free=s.asm.free).apply(null,arguments)};s._HP_Debug_StartRecordingStats=function(){return(s._HP_Debug_StartRecordingStats=s.asm.HP_Debug_StartRecordingStats).apply(null,arguments)},s._HP_Debug_StopRecordingStats=function(){return(s._HP_Debug_StopRecordingStats=s.asm.HP_Debug_StopRecordingStats).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s._htons=function(){return(s._htons=s.asm.htons).apply(null,arguments)},s._ntohs=function(){return(s._ntohs=s.asm.ntohs).apply(null,arguments)};var Jt=s.___getTypeName=function(){return(Jt=s.___getTypeName=s.asm.__getTypeName).apply(null,arguments)};s.__embind_initialize_bindings=function(){return(s.__embind_initialize_bindings=s.asm._embind_initialize_bindings).apply(null,arguments)},s._htonl=function(){return(s._htonl=s.asm.htonl).apply(null,arguments)},s._setThrew=function(){return(s._setThrew=s.asm.setThrew).apply(null,arguments)},s._saveSetjmp=function(){return(s._saveSetjmp=s.asm.saveSetjmp).apply(null,arguments)},s.stackSave=function(){return(s.stackSave=s.asm.stackSave).apply(null,arguments)},s.stackRestore=function(){return(s.stackRestore=s.asm.stackRestore).apply(null,arguments)},s.stackAlloc=function(){return(s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};var ni;us=function l(){ni||Bt(),ni||(us=l)};function ai(l){var d=s._main,_=0,k=0;try{var w=d(_,k);return ft(w,!0),w}catch(L){return ws(L)}}function Bt(l){if(hs>0||(gn(),hs>0))return;function d(){ni||(ni=!0,s.calledRun=!0,!Pe&&(sn(),nn(),b(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),Mt&&ai(),an()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),d()},1)):d()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();var Mt=!0;return s.noInitialRun&&(Mt=!1),Bt(),h.ready}})();const lu=typeof window<"u"?window:global;lu.HavokPhysics=hu;const uu={...Cc,enhanceApp({app:y}){y.component("demo-preview",ru)}};export{uu as R};
