import{d as Vt,o as V,c as q,r as J,n as zi,a as tn,t as ji,b as jt,w as ot,e as Lt,T as Fn,_ as Yt,u as Ga,i as Ua,f as Wa,g as ea,h as ii,j as Y,k as T,p as Fe,l as De,m as en,q as Qn,s as yi,v as ps,x as Dn,y as Is,z as sa,A as na,B as qa,C as Ja,D as sn,F as Ki,E as Xe,G as za,H as On,I as Rt,J as zs,K as wa,L as Rn,M as Ds,N as jn,O as Za,P as aa,Q as Ka,R as Sa,S as Na,U as Gn,V as Ya,W as Ma,X as La,Y as Ca,Z as Qa,$ as Xa,a0 as to,a1 as io,a2 as eo,a3 as so}from"./framework.C9yAFGvZ.js";const no=Vt({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(u){return(h,s)=>(V(),q("span",{class:zi(["VPBadge",h.type])},[J(h.$slots,"default",{},()=>[tn(ji(h.text),1)])],2))}}),ao={key:0,class:"VPBackdrop"},oo=Vt({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(u){return(h,s)=>(V(),jt(Fn,{name:"fade"},{default:ot(()=>[h.show?(V(),q("div",ao)):Lt("",!0)]),_:1}))}}),ro=Yt(oo,[["__scopeId","data-v-5b902f8a"]]),fi=Ga;function ho(u,h){let s,b=!1;return()=>{s&&clearTimeout(s),b?s=setTimeout(u,h):(u(),(b=!0)&&setTimeout(()=>b=!1,h))}}function Xn(u){return/^\//.test(u)?u:`/${u}`}function oa(u){const{pathname:h,search:s,hash:b,protocol:v}=new URL(u,"http://a.com");if(Ua(u)||u.startsWith("#")||!v.startsWith("http")||!Wa(h))return u;const{site:A}=fi(),j=h.endsWith("/")||h.endsWith(".html")?u:u.replace(/(?:(^\.+)\/)?.*$/,`$1${h.replace(/(\.md)?$/,A.value.cleanUrls?"":".html")}${s}${b}`);return ea(j)}function Ln({correspondingLink:u=!1}={}){const{site:h,localeIndex:s,page:b,theme:v,hash:A}=fi(),j=ii(()=>{var Z,Ot;return{label:(Z=h.value.locales[s.value])==null?void 0:Z.label,link:((Ot=h.value.locales[s.value])==null?void 0:Ot.link)||(s.value==="root"?"/":`/${s.value}/`)}});return{localeLinks:ii(()=>Object.entries(h.value.locales).flatMap(([Z,Ot])=>j.value.label===Ot.label?[]:{text:Ot.label,link:lo(Ot.link||(Z==="root"?"/":`/${Z}/`),v.value.i18nRouting!==!1&&u,b.value.relativePath.slice(j.value.link.length-1),!h.value.cleanUrls)+A.value})),currentLang:j}}function lo(u,h,s,b){return h?u.replace(/\/$/,"")+Xn(s.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,b?".html":"")):u}const co=u=>(Fe("data-v-c5cfffc1"),u=u(),De(),u),uo={class:"NotFound"},po={class:"code"},mo={class:"title"},fo=co(()=>Y("div",{class:"divider"},null,-1)),yo={class:"quote"},vo={class:"action"},_o=["href","aria-label"],bo=Vt({__name:"NotFound",setup(u){const{theme:h}=fi(),{currentLang:s}=Ln();return(b,v)=>{var A,j,et,Z,Ot;return V(),q("div",uo,[Y("p",po,ji(((A=T(h).notFound)==null?void 0:A.code)??"404"),1),Y("h1",mo,ji(((j=T(h).notFound)==null?void 0:j.title)??"PAGE NOT FOUND"),1),fo,Y("blockquote",yo,ji(((et=T(h).notFound)==null?void 0:et.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),Y("div",vo,[Y("a",{class:"link",href:T(ea)(T(s).link),"aria-label":((Z=T(h).notFound)==null?void 0:Z.linkLabel)??"go to home"},ji(((Ot=T(h).notFound)==null?void 0:Ot.linkText)??"Take me home"),9,_o)])])}}}),xo=Yt(bo,[["__scopeId","data-v-c5cfffc1"]]);function Va(u,h){if(Array.isArray(u))return Bn(u);if(u==null)return[];h=Xn(h);const s=Object.keys(u).sort((v,A)=>A.split("/").length-v.split("/").length).find(v=>h.startsWith(Xn(v))),b=s?u[s]:[];return Array.isArray(b)?Bn(b):Bn(b.items,b.base)}function go(u){const h=[];let s=0;for(const b in u){const v=u[b];if(v.items){s=h.push(v);continue}h[s]||h.push({items:[]}),h[s].items.push(v)}return h}function ko(u){const h=[];function s(b){for(const v of b)v.text&&v.link&&h.push({text:v.text,link:v.link,docFooterText:v.docFooterText}),v.items&&s(v.items)}return s(u),h}function ta(u,h){return Array.isArray(h)?h.some(s=>ta(u,s)):en(u,h.link)?!0:h.items?ta(u,h.items):!1}function Bn(u,h){return[...u].map(s=>{const b={...s},v=b.base||h;return v&&b.link&&(b.link=v+b.link),b.items&&(b.items=Bn(b.items,v)),b})}function Hs(){const{frontmatter:u,page:h,theme:s}=fi(),b=Qn("(min-width: 960px)"),v=yi(!1),A=ii(()=>{const Bi=s.value.sidebar,ui=h.value.relativePath;return Bi?Va(Bi,ui):[]}),j=yi(A.value);ps(A,(Bi,ui)=>{JSON.stringify(Bi)!==JSON.stringify(ui)&&(j.value=A.value)});const et=ii(()=>u.value.sidebar!==!1&&j.value.length>0&&u.value.layout!=="home"),Z=ii(()=>Ot?u.value.aside==null?s.value.aside==="left":u.value.aside==="left":!1),Ot=ii(()=>u.value.layout==="home"?!1:u.value.aside!=null?!!u.value.aside:s.value.aside!==!1),ni=ii(()=>et.value&&b.value),Jt=ii(()=>et.value?go(j.value):[]);function It(){v.value=!0}function ei(){v.value=!1}function vi(){v.value?ei():It()}return{isOpen:v,sidebar:j,sidebarGroups:Jt,hasSidebar:et,hasAside:Ot,leftAside:Z,isSidebarEnabled:ni,open:It,close:ei,toggle:vi}}function Po(u,h){let s;Dn(()=>{s=u.value?document.activeElement:void 0}),Is(()=>{window.addEventListener("keyup",b)}),sa(()=>{window.removeEventListener("keyup",b)});function b(v){v.key==="Escape"&&u.value&&(h(),s==null||s.focus())}}function zo(u){const{page:h,hash:s}=fi(),b=yi(!1),v=ii(()=>u.value.collapsed!=null),A=ii(()=>!!u.value.link),j=yi(!1),et=()=>{j.value=en(h.value.relativePath,u.value.link)};ps([h,u,s],et),Is(et);const Z=ii(()=>j.value?!0:u.value.items?ta(h.value.relativePath,u.value.items):!1),Ot=ii(()=>!!(u.value.items&&u.value.items.length));Dn(()=>{b.value=!!(v.value&&u.value.collapsed)}),na(()=>{(j.value||Z.value)&&(b.value=!1)});function ni(){v.value&&(b.value=!b.value)}return{collapsed:b,collapsible:v,isLink:A,isActiveLink:j,hasActiveLink:Z,hasChildren:Ot,toggle:ni}}function wo(){const{hasSidebar:u}=Hs(),h=Qn("(min-width: 960px)"),s=Qn("(min-width: 1280px)");return{isAsideEnabled:ii(()=>!s.value&&!h.value?!1:u.value?s.value:h.value)}}const ia=[];function Ia(u){return typeof u.outline=="object"&&!Array.isArray(u.outline)&&u.outline.label||u.outlineTitle||"On this page"}function ra(u){const h=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(s=>s.id&&s.hasChildNodes()).map(s=>{const b=Number(s.tagName[1]);return{element:s,title:So(s),link:"#"+s.id,level:b}});return No(h,u)}function So(u){let h="";for(const s of u.childNodes)if(s.nodeType===1){if(s.classList.contains("VPBadge")||s.classList.contains("header-anchor")||s.classList.contains("ignore-header"))continue;h+=s.textContent}else s.nodeType===3&&(h+=s.textContent);return h.trim()}function No(u,h){if(h===!1)return[];const s=(typeof h=="object"&&!Array.isArray(h)?h.level:h)||2,[b,v]=typeof s=="number"?[s,s]:s==="deep"?[2,6]:s;return Co(u,b,v)}function Mo(u,h){const{isAsideEnabled:s}=wo(),b=ho(A,100);let v=null;Is(()=>{requestAnimationFrame(A),window.addEventListener("scroll",b)}),qa(()=>{j(location.hash)}),sa(()=>{window.removeEventListener("scroll",b)});function A(){if(!s.value)return;const et=window.scrollY,Z=window.innerHeight,Ot=document.body.offsetHeight,ni=Math.abs(et+Z-Ot)<1,Jt=ia.map(({element:ei,link:vi})=>({link:vi,top:Lo(ei)})).filter(({top:ei})=>!Number.isNaN(ei)).sort((ei,vi)=>ei.top-vi.top);if(!Jt.length){j(null);return}if(et<1){j(null);return}if(ni){j(Jt[Jt.length-1].link);return}let It=null;for(const{link:ei,top:vi}of Jt){if(vi>et+Ja()+4)break;It=ei}j(It)}function j(et){v&&v.classList.remove("active"),et==null?v=null:v=u.value.querySelector(`a[href="${decodeURIComponent(et)}"]`);const Z=v;Z?(Z.classList.add("active"),h.value.style.top=Z.offsetTop+39+"px",h.value.style.opacity="1"):(h.value.style.top="33px",h.value.style.opacity="0")}}function Lo(u){let h=0;for(;u!==document.body;){if(u===null)return NaN;h+=u.offsetTop,u=u.offsetParent}return h}function Co(u,h,s){ia.length=0;const b=[],v=[];return u.forEach(A=>{const j={...A,children:[]};let et=v[v.length-1];for(;et&&et.level>=j.level;)v.pop(),et=v[v.length-1];if(j.element.classList.contains("ignore-header")||et&&"shouldIgnore"in et){v.push({level:j.level,shouldIgnore:!0});return}j.level>s||j.level<h||(ia.push({element:j.element,link:j.link}),et?et.children.push(j):b.push(j),v.push(j))}),b}const Vo=["href","title"],Io=Vt({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(u){function h({target:s}){const b=s.href.split("#")[1],v=document.getElementById(decodeURIComponent(b));v==null||v.focus({preventScroll:!0})}return(s,b)=>{const v=sn("VPDocOutlineItem",!0);return V(),q("ul",{class:zi(["VPDocOutlineItem",s.root?"root":"nested"])},[(V(!0),q(Ki,null,Xe(s.headers,({children:A,link:j,title:et})=>(V(),q("li",null,[Y("a",{class:"outline-link",href:j,onClick:h,title:et},ji(et),9,Vo),A!=null&&A.length?(V(),jt(v,{key:0,headers:A},null,8,["headers"])):Lt("",!0)]))),256))],2)}}}),Ha=Yt(Io,[["__scopeId","data-v-bd9537d5"]]),Ho={class:"content"},To={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},Ao=Vt({__name:"VPDocAsideOutline",setup(u){const{frontmatter:h,theme:s}=fi(),b=za([]);On(()=>{b.value=ra(h.value.outline??s.value.outline)});const v=yi(),A=yi();return Mo(v,A),(j,et)=>(V(),q("nav",{"aria-labelledby":"doc-outline-aria-label",class:zi(["VPDocAsideOutline",{"has-outline":b.value.length>0}]),ref_key:"container",ref:v},[Y("div",Ho,[Y("div",{class:"outline-marker",ref_key:"marker",ref:A},null,512),Y("div",To,ji(T(Ia)(T(s))),1),Rt(Ha,{headers:b.value,root:!0},null,8,["headers"])])],2))}}),$o=Yt(Ao,[["__scopeId","data-v-8062ed2e"]]),Bo={class:"VPDocAsideCarbonAds"},Eo=Vt({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(u){const h=()=>null;return(s,b)=>(V(),q("div",Bo,[Rt(T(h),{"carbon-ads":s.carbonAds},null,8,["carbon-ads"])]))}}),Fo=u=>(Fe("data-v-c7aa946d"),u=u(),De(),u),Do={class:"VPDocAside"},Oo=Fo(()=>Y("div",{class:"spacer"},null,-1)),Ro=Vt({__name:"VPDocAside",setup(u){const{theme:h}=fi();return(s,b)=>(V(),q("div",Do,[J(s.$slots,"aside-top",{},void 0,!0),J(s.$slots,"aside-outline-before",{},void 0,!0),Rt($o),J(s.$slots,"aside-outline-after",{},void 0,!0),Oo,J(s.$slots,"aside-ads-before",{},void 0,!0),T(h).carbonAds?(V(),jt(Eo,{key:0,"carbon-ads":T(h).carbonAds},null,8,["carbon-ads"])):Lt("",!0),J(s.$slots,"aside-ads-after",{},void 0,!0),J(s.$slots,"aside-bottom",{},void 0,!0)]))}}),jo=Yt(Ro,[["__scopeId","data-v-c7aa946d"]]);function Go(){const{theme:u,page:h}=fi();return ii(()=>{const{text:s="Edit this page",pattern:b=""}=u.value.editLink||{};let v;return typeof b=="function"?v=b(h.value):v=b.replace(/:path/g,h.value.filePath),{url:v,text:s}})}function Uo(){const{page:u,theme:h,frontmatter:s}=fi();return ii(()=>{var Ot,ni,Jt,It,ei,vi,Bi,ui;const b=Va(h.value.sidebar,u.value.relativePath),v=ko(b),A=Wo(v,Ue=>Ue.link.replace(/[?#].*$/,"")),j=A.findIndex(Ue=>en(u.value.relativePath,Ue.link)),et=((Ot=h.value.docFooter)==null?void 0:Ot.prev)===!1&&!s.value.prev||s.value.prev===!1,Z=((ni=h.value.docFooter)==null?void 0:ni.next)===!1&&!s.value.next||s.value.next===!1;return{prev:et?void 0:{text:(typeof s.value.prev=="string"?s.value.prev:typeof s.value.prev=="object"?s.value.prev.text:void 0)??((Jt=A[j-1])==null?void 0:Jt.docFooterText)??((It=A[j-1])==null?void 0:It.text),link:(typeof s.value.prev=="object"?s.value.prev.link:void 0)??((ei=A[j-1])==null?void 0:ei.link)},next:Z?void 0:{text:(typeof s.value.next=="string"?s.value.next:typeof s.value.next=="object"?s.value.next.text:void 0)??((vi=A[j+1])==null?void 0:vi.docFooterText)??((Bi=A[j+1])==null?void 0:Bi.text),link:(typeof s.value.next=="object"?s.value.next.link:void 0)??((ui=A[j+1])==null?void 0:ui.link)}}})}function Wo(u,h){const s=new Set;return u.filter(b=>{const v=h(b);return s.has(v)?!1:s.add(v)})}const ws=Vt({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(u){const h=u,s=ii(()=>h.tag??(h.href?"a":"span")),b=ii(()=>h.href&&wa.test(h.href)||h.target==="_blank");return(v,A)=>(V(),jt(zs(s.value),{class:zi(["VPLink",{link:v.href,"vp-external-link-icon":b.value,"no-icon":v.noIcon}]),href:v.href?T(oa)(v.href):void 0,target:v.target??(b.value?"_blank":void 0),rel:v.rel??(b.value?"noreferrer":void 0)},{default:ot(()=>[J(v.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),qo={class:"VPLastUpdated"},Jo=["datetime"],Zo=Vt({__name:"VPDocFooterLastUpdated",setup(u){const{theme:h,page:s,lang:b}=fi(),v=ii(()=>new Date(s.value.lastUpdated)),A=ii(()=>v.value.toISOString()),j=yi("");return Is(()=>{Dn(()=>{var et,Z,Ot;j.value=new Intl.DateTimeFormat((Z=(et=h.value.lastUpdated)==null?void 0:et.formatOptions)!=null&&Z.forceLocale?b.value:void 0,((Ot=h.value.lastUpdated)==null?void 0:Ot.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(v.value)})}),(et,Z)=>{var Ot;return V(),q("p",qo,[tn(ji(((Ot=T(h).lastUpdated)==null?void 0:Ot.text)||T(h).lastUpdatedText||"Last updated")+": ",1),Y("time",{datetime:A.value},ji(j.value),9,Jo)])}}}),Ko=Yt(Zo,[["__scopeId","data-v-4f6c548e"]]),Ta=u=>(Fe("data-v-fa833ed1"),u=u(),De(),u),Yo={key:0,class:"VPDocFooter"},Qo={key:0,class:"edit-info"},Xo={key:0,class:"edit-link"},tr=Ta(()=>Y("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),ir={key:1,class:"last-updated"},er={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},sr=Ta(()=>Y("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),nr={class:"pager"},ar=["innerHTML"],or=["innerHTML"],rr={class:"pager"},hr=["innerHTML"],lr=["innerHTML"],cr=Vt({__name:"VPDocFooter",setup(u){const{theme:h,page:s,frontmatter:b}=fi(),v=Go(),A=Uo(),j=ii(()=>h.value.editLink&&b.value.editLink!==!1),et=ii(()=>s.value.lastUpdated),Z=ii(()=>j.value||et.value||A.value.prev||A.value.next);return(Ot,ni)=>{var Jt,It,ei,vi;return Z.value?(V(),q("footer",Yo,[J(Ot.$slots,"doc-footer-before",{},void 0,!0),j.value||et.value?(V(),q("div",Qo,[j.value?(V(),q("div",Xo,[Rt(ws,{class:"edit-link-button",href:T(v).url,"no-icon":!0},{default:ot(()=>[tr,tn(" "+ji(T(v).text),1)]),_:1},8,["href"])])):Lt("",!0),et.value?(V(),q("div",ir,[Rt(Ko)])):Lt("",!0)])):Lt("",!0),(Jt=T(A).prev)!=null&&Jt.link||(It=T(A).next)!=null&&It.link?(V(),q("nav",er,[sr,Y("div",nr,[(ei=T(A).prev)!=null&&ei.link?(V(),jt(ws,{key:0,class:"pager-link prev",href:T(A).prev.link},{default:ot(()=>{var Bi;return[Y("span",{class:"desc",innerHTML:((Bi=T(h).docFooter)==null?void 0:Bi.prev)||"Previous page"},null,8,ar),Y("span",{class:"title",innerHTML:T(A).prev.text},null,8,or)]}),_:1},8,["href"])):Lt("",!0)]),Y("div",rr,[(vi=T(A).next)!=null&&vi.link?(V(),jt(ws,{key:0,class:"pager-link next",href:T(A).next.link},{default:ot(()=>{var Bi;return[Y("span",{class:"desc",innerHTML:((Bi=T(h).docFooter)==null?void 0:Bi.next)||"Next page"},null,8,hr),Y("span",{class:"title",innerHTML:T(A).next.text},null,8,lr)]}),_:1},8,["href"])):Lt("",!0)])])):Lt("",!0)])):Lt("",!0)}}}),ur=Yt(cr,[["__scopeId","data-v-fa833ed1"]]),pr=u=>(Fe("data-v-19fd377e"),u=u(),De(),u),mr={class:"container"},dr=pr(()=>Y("div",{class:"aside-curtain"},null,-1)),fr={class:"aside-container"},yr={class:"aside-content"},vr={class:"content"},_r={class:"content-container"},br={class:"main"},xr=Vt({__name:"VPDoc",setup(u){const{theme:h}=fi(),s=Rn(),{hasSidebar:b,hasAside:v,leftAside:A}=Hs(),j=ii(()=>s.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(et,Z)=>{const Ot=sn("Content");return V(),q("div",{class:zi(["VPDoc",{"has-sidebar":T(b),"has-aside":T(v)}])},[J(et.$slots,"doc-top",{},void 0,!0),Y("div",mr,[T(v)?(V(),q("div",{key:0,class:zi(["aside",{"left-aside":T(A)}])},[dr,Y("div",fr,[Y("div",yr,[Rt(jo,null,{"aside-top":ot(()=>[J(et.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ot(()=>[J(et.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ot(()=>[J(et.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[J(et.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[J(et.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[J(et.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):Lt("",!0),Y("div",vr,[Y("div",_r,[J(et.$slots,"doc-before",{},void 0,!0),Y("main",br,[Rt(Ot,{class:zi(["vp-doc",[j.value,T(h).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),Rt(ur,null,{"doc-footer-before":ot(()=>[J(et.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),J(et.$slots,"doc-after",{},void 0,!0)])])]),J(et.$slots,"doc-bottom",{},void 0,!0)],2)}}}),gr=Yt(xr,[["__scopeId","data-v-19fd377e"]]),kr=Vt({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(u){const h=u,s=ii(()=>h.href&&wa.test(h.href)),b=ii(()=>h.tag||(h.href?"a":"button"));return(v,A)=>(V(),jt(zs(b.value),{class:zi(["VPButton",[v.size,v.theme]]),href:v.href?T(oa)(v.href):void 0,target:h.target??(s.value?"_blank":void 0),rel:h.rel??(s.value?"noreferrer":void 0)},{default:ot(()=>[tn(ji(v.text),1)]),_:1},8,["class","href","target","rel"]))}}),Pr=Yt(kr,[["__scopeId","data-v-53b12ede"]]),zr=["src","alt"],wr=Vt({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(u){return(h,s)=>{const b=sn("VPImage",!0);return h.image?(V(),q(Ki,{key:0},[typeof h.image=="string"||"src"in h.image?(V(),q("img",Ds({key:0,class:"VPImage"},typeof h.image=="string"?h.$attrs:{...h.image,...h.$attrs},{src:T(ea)(typeof h.image=="string"?h.image:h.image.src),alt:h.alt??(typeof h.image=="string"?"":h.image.alt||"")}),null,16,zr)):(V(),q(Ki,{key:1},[Rt(b,Ds({class:"dark",image:h.image.dark,alt:h.image.alt},h.$attrs),null,16,["image","alt"]),Rt(b,Ds({class:"light",image:h.image.light,alt:h.image.alt},h.$attrs),null,16,["image","alt"])],64))],64)):Lt("",!0)}}}),En=Yt(wr,[["__scopeId","data-v-bd6d32ef"]]),Sr=u=>(Fe("data-v-dd9c862f"),u=u(),De(),u),Nr={class:"container"},Mr={class:"main"},Lr={key:0,class:"name"},Cr=["innerHTML"],Vr=["innerHTML"],Ir=["innerHTML"],Hr={key:0,class:"actions"},Tr={key:0,class:"image"},Ar={class:"image-container"},$r=Sr(()=>Y("div",{class:"image-bg"},null,-1)),Br=Vt({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(u){const h=jn("hero-image-slot-exists");return(s,b)=>(V(),q("div",{class:zi(["VPHero",{"has-image":s.image||T(h)}])},[Y("div",Nr,[Y("div",Mr,[J(s.$slots,"home-hero-info-before",{},void 0,!0),J(s.$slots,"home-hero-info",{},()=>[s.name?(V(),q("h1",Lr,[Y("span",{innerHTML:s.name,class:"clip"},null,8,Cr)])):Lt("",!0),s.text?(V(),q("p",{key:1,innerHTML:s.text,class:"text"},null,8,Vr)):Lt("",!0),s.tagline?(V(),q("p",{key:2,innerHTML:s.tagline,class:"tagline"},null,8,Ir)):Lt("",!0)],!0),J(s.$slots,"home-hero-info-after",{},void 0,!0),s.actions?(V(),q("div",Hr,[(V(!0),q(Ki,null,Xe(s.actions,v=>(V(),q("div",{key:v.link,class:"action"},[Rt(Pr,{tag:"a",size:"medium",theme:v.theme,text:v.text,href:v.link,target:v.target,rel:v.rel},null,8,["theme","text","href","target","rel"])]))),128))])):Lt("",!0),J(s.$slots,"home-hero-actions-after",{},void 0,!0)]),s.image||T(h)?(V(),q("div",Tr,[Y("div",Ar,[$r,J(s.$slots,"home-hero-image",{},()=>[s.image?(V(),jt(En,{key:0,class:"image-src",image:s.image},null,8,["image"])):Lt("",!0)],!0)])])):Lt("",!0)])],2))}}),Er=Yt(Br,[["__scopeId","data-v-dd9c862f"]]),Fr=Vt({__name:"VPHomeHero",setup(u){const{frontmatter:h}=fi();return(s,b)=>T(h).hero?(V(),jt(Er,{key:0,class:"VPHomeHero",name:T(h).hero.name,text:T(h).hero.text,tagline:T(h).hero.tagline,image:T(h).hero.image,actions:T(h).hero.actions},{"home-hero-info-before":ot(()=>[J(s.$slots,"home-hero-info-before")]),"home-hero-info":ot(()=>[J(s.$slots,"home-hero-info")]),"home-hero-info-after":ot(()=>[J(s.$slots,"home-hero-info-after")]),"home-hero-actions-after":ot(()=>[J(s.$slots,"home-hero-actions-after")]),"home-hero-image":ot(()=>[J(s.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):Lt("",!0)}}),Dr=u=>(Fe("data-v-e0623677"),u=u(),De(),u),Or={class:"box"},Rr={key:0,class:"icon"},jr=["innerHTML"],Gr=["innerHTML"],Ur=["innerHTML"],Wr={key:4,class:"link-text"},qr={class:"link-text-value"},Jr=Dr(()=>Y("span",{class:"vpi-arrow-right link-text-icon"},null,-1)),Zr=Vt({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(u){return(h,s)=>(V(),jt(ws,{class:"VPFeature",href:h.link,rel:h.rel,target:h.target,"no-icon":!0,tag:h.link?"a":"div"},{default:ot(()=>[Y("article",Or,[typeof h.icon=="object"&&h.icon.wrap?(V(),q("div",Rr,[Rt(En,{image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])])):typeof h.icon=="object"?(V(),jt(En,{key:1,image:h.icon,alt:h.icon.alt,height:h.icon.height||48,width:h.icon.width||48},null,8,["image","alt","height","width"])):h.icon?(V(),q("div",{key:2,class:"icon",innerHTML:h.icon},null,8,jr)):Lt("",!0),Y("h2",{class:"title",innerHTML:h.title},null,8,Gr),h.details?(V(),q("p",{key:3,class:"details",innerHTML:h.details},null,8,Ur)):Lt("",!0),h.linkText?(V(),q("div",Wr,[Y("p",qr,[tn(ji(h.linkText)+" ",1),Jr])])):Lt("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),Kr=Yt(Zr,[["__scopeId","data-v-e0623677"]]),Yr={key:0,class:"VPFeatures"},Qr={class:"container"},Xr={class:"items"},th=Vt({__name:"VPFeatures",props:{features:{}},setup(u){const h=u,s=ii(()=>{const b=h.features.length;if(b){if(b===2)return"grid-2";if(b===3)return"grid-3";if(b%3===0)return"grid-6";if(b>3)return"grid-4"}else return});return(b,v)=>b.features?(V(),q("div",Yr,[Y("div",Qr,[Y("div",Xr,[(V(!0),q(Ki,null,Xe(b.features,A=>(V(),q("div",{key:A.title,class:zi(["item",[s.value]])},[Rt(Kr,{icon:A.icon,title:A.title,details:A.details,link:A.link,"link-text":A.linkText,rel:A.rel,target:A.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):Lt("",!0)}}),ih=Yt(th,[["__scopeId","data-v-2143533e"]]),eh=Vt({__name:"VPHomeFeatures",setup(u){const{frontmatter:h}=fi();return(s,b)=>T(h).features?(V(),jt(ih,{key:0,class:"VPHomeFeatures",features:T(h).features},null,8,["features"])):Lt("",!0)}}),sh=Vt({__name:"VPHomeContent",setup(u){const{width:h}=Za({initialWidth:0,includeScrollbar:!1});return(s,b)=>(V(),q("div",{class:"vp-doc container",style:aa(T(h)?{"--vp-offset":`calc(50% - ${T(h)/2}px)`}:{})},[J(s.$slots,"default",{},void 0,!0)],4))}}),nh=Yt(sh,[["__scopeId","data-v-884a46dc"]]),ah={class:"VPHome"},oh=Vt({__name:"VPHome",setup(u){const{frontmatter:h}=fi();return(s,b)=>{const v=sn("Content");return V(),q("div",ah,[J(s.$slots,"home-hero-before",{},void 0,!0),Rt(Fr,null,{"home-hero-info-before":ot(()=>[J(s.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[J(s.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[J(s.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[J(s.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[J(s.$slots,"home-hero-image",{},void 0,!0)]),_:3}),J(s.$slots,"home-hero-after",{},void 0,!0),J(s.$slots,"home-features-before",{},void 0,!0),Rt(eh),J(s.$slots,"home-features-after",{},void 0,!0),T(h).markdownStyles!==!1?(V(),jt(nh,{key:0},{default:ot(()=>[Rt(v)]),_:1})):(V(),jt(v,{key:1}))])}}}),rh=Yt(oh,[["__scopeId","data-v-67802069"]]),hh={},lh={class:"VPPage"};function ch(u,h){const s=sn("Content");return V(),q("div",lh,[J(u.$slots,"page-top"),Rt(s),J(u.$slots,"page-bottom")])}const uh=Yt(hh,[["render",ch]]),ph=Vt({__name:"VPContent",setup(u){const{page:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs();return(v,A)=>(V(),q("div",{class:zi(["VPContent",{"has-sidebar":T(b),"is-home":T(s).layout==="home"}]),id:"VPContent"},[T(h).isNotFound?J(v.$slots,"not-found",{key:0},()=>[Rt(xo)],!0):T(s).layout==="page"?(V(),jt(uh,{key:1},{"page-top":ot(()=>[J(v.$slots,"page-top",{},void 0,!0)]),"page-bottom":ot(()=>[J(v.$slots,"page-bottom",{},void 0,!0)]),_:3})):T(s).layout==="home"?(V(),jt(rh,{key:2},{"home-hero-before":ot(()=>[J(v.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":ot(()=>[J(v.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[J(v.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[J(v.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[J(v.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[J(v.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ot(()=>[J(v.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ot(()=>[J(v.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ot(()=>[J(v.$slots,"home-features-after",{},void 0,!0)]),_:3})):T(s).layout&&T(s).layout!=="doc"?(V(),jt(zs(T(s).layout),{key:3})):(V(),jt(gr,{key:4},{"doc-top":ot(()=>[J(v.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":ot(()=>[J(v.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":ot(()=>[J(v.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ot(()=>[J(v.$slots,"doc-before",{},void 0,!0)]),"doc-after":ot(()=>[J(v.$slots,"doc-after",{},void 0,!0)]),"aside-top":ot(()=>[J(v.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":ot(()=>[J(v.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[J(v.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[J(v.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[J(v.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":ot(()=>[J(v.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),mh=Yt(ph,[["__scopeId","data-v-6e4abfba"]]),dh={class:"container"},fh=["innerHTML"],yh=["innerHTML"],vh=Vt({__name:"VPFooter",setup(u){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs();return(v,A)=>T(h).footer&&T(s).footer!==!1?(V(),q("footer",{key:0,class:zi(["VPFooter",{"has-sidebar":T(b)}])},[Y("div",dh,[T(h).footer.message?(V(),q("p",{key:0,class:"message",innerHTML:T(h).footer.message},null,8,fh)):Lt("",!0),T(h).footer.copyright?(V(),q("p",{key:1,class:"copyright",innerHTML:T(h).footer.copyright},null,8,yh)):Lt("",!0)])],2)):Lt("",!0)}}),_h=Yt(vh,[["__scopeId","data-v-85b91068"]]);function bh(){const{theme:u,frontmatter:h}=fi(),s=za([]),b=ii(()=>s.value.length>0);return On(()=>{s.value=ra(h.value.outline??u.value.outline)}),{headers:s,hasLocalNav:b}}const xh=u=>(Fe("data-v-dd4cdfaf"),u=u(),De(),u),gh={class:"menu-text"},kh=xh(()=>Y("span",{class:"vpi-chevron-right icon"},null,-1)),Ph={class:"header"},zh={class:"outline"},wh=Vt({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(u){const h=u,{theme:s}=fi(),b=yi(!1),v=yi(0),A=yi(),j=yi();function et(Jt){var It;(It=A.value)!=null&&It.contains(Jt.target)||(b.value=!1)}ps(b,Jt=>{if(Jt){document.addEventListener("click",et);return}document.removeEventListener("click",et)}),Ka("Escape",()=>{b.value=!1}),On(()=>{b.value=!1});function Z(){b.value=!b.value,v.value=window.innerHeight+Math.min(window.scrollY-h.navHeight,0)}function Ot(Jt){Jt.target.classList.contains("outline-link")&&(j.value&&(j.value.style.transition="none"),Sa(()=>{b.value=!1}))}function ni(){b.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(Jt,It)=>(V(),q("div",{class:"VPLocalNavOutlineDropdown",style:aa({"--vp-vh":v.value+"px"}),ref_key:"main",ref:A},[Jt.headers.length>0?(V(),q("button",{key:0,onClick:Z,class:zi({open:b.value})},[Y("span",gh,ji(T(Ia)(T(s))),1),kh],2)):(V(),q("button",{key:1,onClick:ni},ji(T(s).returnToTopLabel||"Return to top"),1)),Rt(Fn,{name:"flyout"},{default:ot(()=>[b.value?(V(),q("div",{key:0,ref_key:"items",ref:j,class:"items",onClick:Ot},[Y("div",Ph,[Y("a",{class:"top-link",href:"#",onClick:ni},ji(T(s).returnToTopLabel||"Return to top"),1)]),Y("div",zh,[Rt(Ha,{headers:Jt.headers},null,8,["headers"])])],512)):Lt("",!0)]),_:1})],4))}}),Sh=Yt(wh,[["__scopeId","data-v-dd4cdfaf"]]),Nh=u=>(Fe("data-v-14a1fbee"),u=u(),De(),u),Mh={class:"container"},Lh=["aria-expanded"],Ch=Nh(()=>Y("span",{class:"vpi-align-left menu-icon"},null,-1)),Vh={class:"menu-text"},Ih=Vt({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(u){const{theme:h,frontmatter:s}=fi(),{hasSidebar:b}=Hs(),{headers:v}=bh(),{y:A}=Na(),j=yi(0);Is(()=>{j.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),On(()=>{v.value=ra(s.value.outline??h.value.outline)});const et=ii(()=>v.value.length===0),Z=ii(()=>et.value&&!b.value),Ot=ii(()=>({VPLocalNav:!0,"has-sidebar":b.value,empty:et.value,fixed:Z.value}));return(ni,Jt)=>T(s).layout!=="home"&&(!Z.value||T(A)>=j.value)?(V(),q("div",{key:0,class:zi(Ot.value)},[Y("div",Mh,[T(b)?(V(),q("button",{key:0,class:"menu","aria-expanded":ni.open,"aria-controls":"VPSidebarNav",onClick:Jt[0]||(Jt[0]=It=>ni.$emit("open-menu"))},[Ch,Y("span",Vh,ji(T(h).sidebarMenuLabel||"Menu"),1)],8,Lh)):Lt("",!0),Rt(Sh,{headers:T(v),navHeight:j.value},null,8,["headers","navHeight"])])],2)):Lt("",!0)}}),Hh=Yt(Ih,[["__scopeId","data-v-14a1fbee"]]);function Th(){const u=yi(!1);function h(){u.value=!0,window.addEventListener("resize",v)}function s(){u.value=!1,window.removeEventListener("resize",v)}function b(){u.value?s():h()}function v(){window.outerWidth>=768&&s()}const A=Rn();return ps(()=>A.path,s),{isScreenOpen:u,openScreen:h,closeScreen:s,toggleScreen:b}}const Ah={},$h={class:"VPSwitch",type:"button",role:"switch"},Bh={class:"check"},Eh={key:0,class:"icon"};function Fh(u,h){return V(),q("button",$h,[Y("span",Bh,[u.$slots.default?(V(),q("span",Eh,[J(u.$slots,"default",{},void 0,!0)])):Lt("",!0)])])}const Dh=Yt(Ah,[["render",Fh],["__scopeId","data-v-8b6fe691"]]),Aa=u=>(Fe("data-v-bff99e46"),u=u(),De(),u),Oh=Aa(()=>Y("span",{class:"vpi-sun sun"},null,-1)),Rh=Aa(()=>Y("span",{class:"vpi-moon moon"},null,-1)),jh=Vt({__name:"VPSwitchAppearance",setup(u){const{isDark:h,theme:s}=fi(),b=jn("toggle-appearance",()=>{h.value=!h.value}),v=yi("");return na(()=>{v.value=h.value?s.value.lightModeSwitchTitle||"Switch to light theme":s.value.darkModeSwitchTitle||"Switch to dark theme"}),(A,j)=>(V(),jt(Dh,{title:v.value,class:"VPSwitchAppearance","aria-checked":T(h),onClick:T(b)},{default:ot(()=>[Oh,Rh]),_:1},8,["title","aria-checked","onClick"]))}}),ha=Yt(jh,[["__scopeId","data-v-bff99e46"]]),Gh={key:0,class:"VPNavBarAppearance"},Uh=Vt({__name:"VPNavBarAppearance",setup(u){const{site:h}=fi();return(s,b)=>T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),q("div",Gh,[Rt(ha)])):Lt("",!0)}}),Wh=Yt(Uh,[["__scopeId","data-v-9111f3f5"]]),la=yi();let $a=!1,Kn=0;function qh(u){const h=yi(!1);if(Gn){!$a&&Jh(),Kn++;const s=ps(la,b=>{var v,A,j;b===u.el.value||(v=u.el.value)!=null&&v.contains(b)?(h.value=!0,(A=u.onFocus)==null||A.call(u)):(h.value=!1,(j=u.onBlur)==null||j.call(u))});sa(()=>{s(),Kn--,Kn||Zh()})}return Ya(h)}function Jh(){document.addEventListener("focusin",Ba),$a=!0,la.value=document.activeElement}function Zh(){document.removeEventListener("focusin",Ba)}function Ba(){la.value=document.activeElement}const Kh={class:"VPMenuLink"},Yh=["innerHTML"],Qh=Vt({__name:"VPMenuLink",props:{item:{}},setup(u){const{page:h}=fi();return(s,b)=>(V(),q("div",Kh,[Rt(ws,{class:zi({active:T(en)(T(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,Yh)]),_:1},8,["class","href","target","rel","no-icon"])]))}}),Un=Yt(Qh,[["__scopeId","data-v-df173cfa"]]),Xh={class:"VPMenuGroup"},tl={key:0,class:"title"},il=Vt({__name:"VPMenuGroup",props:{text:{},items:{}},setup(u){return(h,s)=>(V(),q("div",Xh,[h.text?(V(),q("p",tl,ji(h.text),1)):Lt("",!0),(V(!0),q(Ki,null,Xe(h.items,b=>(V(),q(Ki,null,["link"in b?(V(),jt(Un,{key:0,item:b},null,8,["item"])):Lt("",!0)],64))),256))]))}}),el=Yt(il,[["__scopeId","data-v-a2dca118"]]),sl={class:"VPMenu"},nl={key:0,class:"items"},al=Vt({__name:"VPMenu",props:{items:{}},setup(u){return(h,s)=>(V(),q("div",sl,[h.items?(V(),q("div",nl,[(V(!0),q(Ki,null,Xe(h.items,b=>(V(),q(Ki,{key:JSON.stringify(b)},["link"in b?(V(),jt(Un,{key:0,item:b},null,8,["item"])):"component"in b?(V(),jt(zs(b.component),Ma(Ds({key:1},b.props)),null,16)):(V(),jt(el,{key:2,text:b.text,items:b.items},null,8,["text","items"]))],64))),128))])):Lt("",!0),J(h.$slots,"default",{},void 0,!0)]))}}),ol=Yt(al,[["__scopeId","data-v-937c5afa"]]),rl=u=>(Fe("data-v-e28b0197"),u=u(),De(),u),hl=["aria-expanded","aria-label"],ll={key:0,class:"text"},cl=["innerHTML"],ul=rl(()=>Y("span",{class:"vpi-chevron-down text-icon"},null,-1)),pl={key:1,class:"vpi-more-horizontal icon"},ml={class:"menu"},dl=Vt({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(u){const h=yi(!1),s=yi();qh({el:s,onBlur:b});function b(){h.value=!1}return(v,A)=>(V(),q("div",{class:"VPFlyout",ref_key:"el",ref:s,onMouseenter:A[1]||(A[1]=j=>h.value=!0),onMouseleave:A[2]||(A[2]=j=>h.value=!1)},[Y("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":h.value,"aria-label":v.label,onClick:A[0]||(A[0]=j=>h.value=!h.value)},[v.button||v.icon?(V(),q("span",ll,[v.icon?(V(),q("span",{key:0,class:zi([v.icon,"option-icon"])},null,2)):Lt("",!0),v.button?(V(),q("span",{key:1,innerHTML:v.button},null,8,cl)):Lt("",!0),ul])):(V(),q("span",pl))],8,hl),Y("div",ml,[Rt(ol,{items:v.items},{default:ot(()=>[J(v.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),ca=Yt(dl,[["__scopeId","data-v-e28b0197"]]),fl=["href","aria-label","innerHTML"],yl=Vt({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(u){const h=u,s=yi();Is(async()=>{var A;await Sa();const v=(A=s.value)==null?void 0:A.children[0];v instanceof HTMLElement&&v.className.startsWith("vpi-social-")&&(getComputedStyle(v).maskImage||getComputedStyle(v).webkitMaskImage)==="none"&&v.style.setProperty("--icon",`url('https://api.iconify.design/simple-icons/${h.icon}.svg')`)});const b=ii(()=>typeof h.icon=="object"?h.icon.svg:`<span class="vpi-social-${h.icon}"></span>`);return(v,A)=>(V(),q("a",{ref_key:"el",ref:s,class:"VPSocialLink no-icon",href:v.link,"aria-label":v.ariaLabel??(typeof v.icon=="string"?v.icon:""),target:"_blank",rel:"noopener",innerHTML:b.value},null,8,fl))}}),vl=Yt(yl,[["__scopeId","data-v-4b8c6cac"]]),_l={class:"VPSocialLinks"},bl=Vt({__name:"VPSocialLinks",props:{links:{}},setup(u){return(h,s)=>(V(),q("div",_l,[(V(!0),q(Ki,null,Xe(h.links,({link:b,icon:v,ariaLabel:A})=>(V(),jt(vl,{key:b,icon:v,link:b,ariaLabel:A},null,8,["icon","link","ariaLabel"]))),128))]))}}),ua=Yt(bl,[["__scopeId","data-v-1962642b"]]),xl={key:0,class:"group translations"},gl={class:"trans-title"},kl={key:1,class:"group"},Pl={class:"item appearance"},zl={class:"label"},wl={class:"appearance-action"},Sl={key:2,class:"group"},Nl={class:"item social-links"},Ml=Vt({__name:"VPNavBarExtra",setup(u){const{site:h,theme:s}=fi(),{localeLinks:b,currentLang:v}=Ln({correspondingLink:!0}),A=ii(()=>b.value.length&&v.value.label||h.value.appearance||s.value.socialLinks);return(j,et)=>A.value?(V(),jt(ca,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:ot(()=>[T(b).length&&T(v).label?(V(),q("div",xl,[Y("p",gl,ji(T(v).label),1),(V(!0),q(Ki,null,Xe(T(b),Z=>(V(),jt(Un,{key:Z.link,item:Z},null,8,["item"]))),128))])):Lt("",!0),T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),q("div",kl,[Y("div",Pl,[Y("p",zl,ji(T(s).darkModeSwitchLabel||"Appearance"),1),Y("div",wl,[Rt(ha)])])])):Lt("",!0),T(s).socialLinks?(V(),q("div",Sl,[Y("div",Nl,[Rt(ua,{class:"social-links-list",links:T(s).socialLinks},null,8,["links"])])])):Lt("",!0)]),_:1})):Lt("",!0)}}),Ll=Yt(Ml,[["__scopeId","data-v-84df4d42"]]),Cl=u=>(Fe("data-v-d86f42be"),u=u(),De(),u),Vl=["aria-expanded"],Il=Cl(()=>Y("span",{class:"container"},[Y("span",{class:"top"}),Y("span",{class:"middle"}),Y("span",{class:"bottom"})],-1)),Hl=[Il],Tl=Vt({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(u){return(h,s)=>(V(),q("button",{type:"button",class:zi(["VPNavBarHamburger",{active:h.active}]),"aria-label":"mobile navigation","aria-expanded":h.active,"aria-controls":"VPNavScreen",onClick:s[0]||(s[0]=b=>h.$emit("click"))},Hl,10,Vl))}}),Al=Yt(Tl,[["__scopeId","data-v-d86f42be"]]),$l=["innerHTML"],Bl=Vt({__name:"VPNavBarMenuLink",props:{item:{}},setup(u){const{page:h}=fi();return(s,b)=>(V(),jt(ws,{class:zi({VPNavBarMenuLink:!0,active:T(en)(T(h).relativePath,s.item.activeMatch||s.item.link,!!s.item.activeMatch)}),href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,tabindex:"0"},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,$l)]),_:1},8,["class","href","target","rel","no-icon"]))}}),El=Yt(Bl,[["__scopeId","data-v-8d9c5f75"]]),Fl=Vt({__name:"VPNavBarMenuGroup",props:{item:{}},setup(u){const h=u,{page:s}=fi(),b=A=>"component"in A?!1:"link"in A?en(s.value.relativePath,A.link,!!h.item.activeMatch):A.items.some(b),v=ii(()=>b(h.item));return(A,j)=>(V(),jt(ca,{class:zi({VPNavBarMenuGroup:!0,active:T(en)(T(s).relativePath,A.item.activeMatch,!!A.item.activeMatch)||v.value}),button:A.item.text,items:A.item.items},null,8,["class","button","items"]))}}),Dl=u=>(Fe("data-v-abd6d188"),u=u(),De(),u),Ol={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Rl=Dl(()=>Y("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),jl=Vt({__name:"VPNavBarMenu",setup(u){const{theme:h}=fi();return(s,b)=>T(h).nav?(V(),q("nav",Ol,[Rl,(V(!0),q(Ki,null,Xe(T(h).nav,v=>(V(),q(Ki,{key:JSON.stringify(v)},["link"in v?(V(),jt(El,{key:0,item:v},null,8,["item"])):"component"in v?(V(),jt(zs(v.component),Ma(Ds({key:1},v.props)),null,16)):(V(),jt(Fl,{key:2,item:v},null,8,["item"]))],64))),128))])):Lt("",!0)}}),Gl=Yt(jl,[["__scopeId","data-v-abd6d188"]]);function Ul(u){const{localeIndex:h,theme:s}=fi();function b(v){var vi,Bi,ui;const A=v.split("."),j=(vi=s.value.search)==null?void 0:vi.options,et=j&&typeof j=="object",Z=et&&((ui=(Bi=j.locales)==null?void 0:Bi[h.value])==null?void 0:ui.translations)||null,Ot=et&&j.translations||null;let ni=Z,Jt=Ot,It=u;const ei=A.pop();for(const Ue of A){let Oe=null;const ls=It==null?void 0:It[Ue];ls&&(Oe=It=ls);const Ss=Jt==null?void 0:Jt[Ue];Ss&&(Oe=Jt=Ss);const Ts=ni==null?void 0:ni[Ue];Ts&&(Oe=ni=Ts),ls||(It=Oe),Ss||(Jt=Oe),Ts||(ni=Oe)}return(ni==null?void 0:ni[ei])??(Jt==null?void 0:Jt[ei])??(It==null?void 0:It[ei])??""}return b}const Wl=["aria-label"],ql={class:"DocSearch-Button-Container"},Jl=Y("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1),Zl={class:"DocSearch-Button-Placeholder"},Kl=Y("span",{class:"DocSearch-Button-Keys"},[Y("kbd",{class:"DocSearch-Button-Key"}),Y("kbd",{class:"DocSearch-Button-Key"},"K")],-1),Pa=Vt({__name:"VPNavBarSearchButton",setup(u){const s=Ul({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(b,v)=>(V(),q("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":T(s)("button.buttonAriaLabel")},[Y("span",ql,[Jl,Y("span",Zl,ji(T(s)("button.buttonText")),1)]),Kl],8,Wl))}}),Yl={class:"VPNavBarSearch"},Ql={id:"local-search"},Xl={key:1,id:"docsearch"},tc=Vt({__name:"VPNavBarSearch",setup(u){const h=()=>null,s=()=>null,{theme:b}=fi(),v=yi(!1),A=yi(!1);Is(()=>{});function j(){v.value||(v.value=!0,setTimeout(et,16))}function et(){const ni=new Event("keydown");ni.key="k",ni.metaKey=!0,window.dispatchEvent(ni),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||et()},16)}const Z=yi(!1),Ot="";return(ni,Jt)=>{var It;return V(),q("div",Yl,[T(Ot)==="local"?(V(),q(Ki,{key:0},[Z.value?(V(),jt(T(h),{key:0,onClose:Jt[0]||(Jt[0]=ei=>Z.value=!1)})):Lt("",!0),Y("div",Ql,[Rt(Pa,{onClick:Jt[1]||(Jt[1]=ei=>Z.value=!0)})])],64)):T(Ot)==="algolia"?(V(),q(Ki,{key:1},[v.value?(V(),jt(T(s),{key:0,algolia:((It=T(b).search)==null?void 0:It.options)??T(b).algolia,onVnodeBeforeMount:Jt[2]||(Jt[2]=ei=>A.value=!0)},null,8,["algolia"])):Lt("",!0),A.value?Lt("",!0):(V(),q("div",Xl,[Rt(Pa,{onClick:j})]))],64)):Lt("",!0)])}}}),ic=Vt({__name:"VPNavBarSocialLinks",setup(u){const{theme:h}=fi();return(s,b)=>T(h).socialLinks?(V(),jt(ua,{key:0,class:"VPNavBarSocialLinks",links:T(h).socialLinks},null,8,["links"])):Lt("",!0)}}),ec=Yt(ic,[["__scopeId","data-v-5de0579f"]]),sc=["href","rel","target"],nc=["innerHTML"],ac={key:2},oc=Vt({__name:"VPNavBarTitle",setup(u){const{site:h,theme:s}=fi(),{hasSidebar:b}=Hs(),{currentLang:v}=Ln(),A=ii(()=>{var Z;return typeof s.value.logoLink=="string"?s.value.logoLink:(Z=s.value.logoLink)==null?void 0:Z.link}),j=ii(()=>{var Z;return typeof s.value.logoLink=="string"||(Z=s.value.logoLink)==null?void 0:Z.rel}),et=ii(()=>{var Z;return typeof s.value.logoLink=="string"||(Z=s.value.logoLink)==null?void 0:Z.target});return(Z,Ot)=>(V(),q("div",{class:zi(["VPNavBarTitle",{"has-sidebar":T(b)}])},[Y("a",{class:"title",href:A.value??T(oa)(T(v).link),rel:j.value,target:et.value},[J(Z.$slots,"nav-bar-title-before",{},void 0,!0),T(s).logo?(V(),jt(En,{key:0,class:"logo",image:T(s).logo},null,8,["image"])):Lt("",!0),T(s).siteTitle?(V(),q("span",{key:1,innerHTML:T(s).siteTitle},null,8,nc)):T(s).siteTitle===void 0?(V(),q("span",ac,ji(T(h).title),1)):Lt("",!0),J(Z.$slots,"nav-bar-title-after",{},void 0,!0)],8,sc)],2))}}),rc=Yt(oc,[["__scopeId","data-v-82b36183"]]),hc={class:"items"},lc={class:"title"},cc=Vt({__name:"VPNavBarTranslations",setup(u){const{theme:h}=fi(),{localeLinks:s,currentLang:b}=Ln({correspondingLink:!0});return(v,A)=>T(s).length&&T(b).label?(V(),jt(ca,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:T(h).langMenuLabel||"Change language"},{default:ot(()=>[Y("div",hc,[Y("p",lc,ji(T(b).label),1),(V(!0),q(Ki,null,Xe(T(s),j=>(V(),jt(Un,{key:j.link,item:j},null,8,["item"]))),128))])]),_:1},8,["label"])):Lt("",!0)}}),uc=Yt(cc,[["__scopeId","data-v-7bdf52b2"]]),pc=u=>(Fe("data-v-c1d78b9f"),u=u(),De(),u),mc={class:"wrapper"},dc={class:"container"},fc={class:"title"},yc={class:"content"},vc={class:"content-body"},_c=pc(()=>Y("div",{class:"divider"},[Y("div",{class:"divider-line"})],-1)),bc=Vt({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(u){const h=u,{y:s}=Na(),{hasSidebar:b}=Hs(),{frontmatter:v}=fi(),A=yi({});return na(()=>{A.value={"has-sidebar":b.value,home:v.value.layout==="home",top:s.value===0,"screen-open":h.isScreenOpen}}),(j,et)=>(V(),q("div",{class:zi(["VPNavBar",A.value])},[Y("div",mc,[Y("div",dc,[Y("div",fc,[Rt(rc,null,{"nav-bar-title-before":ot(()=>[J(j.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[J(j.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),Y("div",yc,[Y("div",vc,[J(j.$slots,"nav-bar-content-before",{},void 0,!0),Rt(tc,{class:"search"}),Rt(Gl,{class:"menu"}),Rt(uc,{class:"translations"}),Rt(Wh,{class:"appearance"}),Rt(ec,{class:"social-links"}),Rt(Ll,{class:"extra"}),J(j.$slots,"nav-bar-content-after",{},void 0,!0),Rt(Al,{class:"hamburger",active:j.isScreenOpen,onClick:et[0]||(et[0]=Z=>j.$emit("toggle-screen"))},null,8,["active"])])])])]),_c],2))}}),xc=Yt(bc,[["__scopeId","data-v-c1d78b9f"]]),gc={key:0,class:"VPNavScreenAppearance"},kc={class:"text"},Pc=Vt({__name:"VPNavScreenAppearance",setup(u){const{site:h,theme:s}=fi();return(b,v)=>T(h).appearance&&T(h).appearance!=="force-dark"&&T(h).appearance!=="force-auto"?(V(),q("div",gc,[Y("p",kc,ji(T(s).darkModeSwitchLabel||"Appearance"),1),Rt(ha)])):Lt("",!0)}}),zc=Yt(Pc,[["__scopeId","data-v-ba516f2f"]]),wc=["innerHTML"],Sc=Vt({__name:"VPNavScreenMenuLink",props:{item:{}},setup(u){const h=jn("close-screen");return(s,b)=>(V(),jt(ws,{class:"VPNavScreenMenuLink",href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,onClick:T(h)},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,wc)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),Nc=Yt(Sc,[["__scopeId","data-v-401f5fd0"]]),Mc=["innerHTML"],Lc=Vt({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(u){const h=jn("close-screen");return(s,b)=>(V(),jt(ws,{class:"VPNavScreenMenuGroupLink",href:s.item.link,target:s.item.target,rel:s.item.rel,"no-icon":s.item.noIcon,onClick:T(h)},{default:ot(()=>[Y("span",{innerHTML:s.item.text},null,8,Mc)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),Ea=Yt(Lc,[["__scopeId","data-v-fbaa315c"]]),Cc={class:"VPNavScreenMenuGroupSection"},Vc={key:0,class:"title"},Ic=Vt({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(u){return(h,s)=>(V(),q("div",Cc,[h.text?(V(),q("p",Vc,ji(h.text),1)):Lt("",!0),(V(!0),q(Ki,null,Xe(h.items,b=>(V(),jt(Ea,{key:b.text,item:b},null,8,["item"]))),128))]))}}),Hc=Yt(Ic,[["__scopeId","data-v-43caa91f"]]),Tc=u=>(Fe("data-v-1e622dc1"),u=u(),De(),u),Ac=["aria-controls","aria-expanded"],$c=["innerHTML"],Bc=Tc(()=>Y("span",{class:"vpi-plus button-icon"},null,-1)),Ec=["id"],Fc={key:0,class:"item"},Dc={key:1,class:"item"},Oc={key:2,class:"group"},Rc=Vt({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(u){const h=u,s=yi(!1),b=ii(()=>`NavScreenGroup-${h.text.replace(" ","-").toLowerCase()}`);function v(){s.value=!s.value}return(A,j)=>(V(),q("div",{class:zi(["VPNavScreenMenuGroup",{open:s.value}])},[Y("button",{class:"button","aria-controls":b.value,"aria-expanded":s.value,onClick:v},[Y("span",{class:"button-text",innerHTML:A.text},null,8,$c),Bc],8,Ac),Y("div",{id:b.value,class:"items"},[(V(!0),q(Ki,null,Xe(A.items,et=>(V(),q(Ki,{key:JSON.stringify(et)},["link"in et?(V(),q("div",Fc,[Rt(Ea,{item:et},null,8,["item"])])):"component"in et?(V(),q("div",Dc,[(V(),jt(zs(et.component),Ds(et.props,{"screen-menu":""}),null,16))])):(V(),q("div",Oc,[Rt(Hc,{text:et.text,items:et.items},null,8,["text","items"])]))],64))),128))],8,Ec)],2))}}),jc=Yt(Rc,[["__scopeId","data-v-1e622dc1"]]),Gc={key:0,class:"VPNavScreenMenu"},Uc=Vt({__name:"VPNavScreenMenu",setup(u){const{theme:h}=fi();return(s,b)=>T(h).nav?(V(),q("nav",Gc,[(V(!0),q(Ki,null,Xe(T(h).nav,v=>(V(),q(Ki,{key:JSON.stringify(v)},["link"in v?(V(),jt(Nc,{key:0,item:v},null,8,["item"])):"component"in v?(V(),jt(zs(v.component),Ds({key:1},v.props,{"screen-menu":""}),null,16)):(V(),jt(jc,{key:2,text:v.text||"",items:v.items},null,8,["text","items"]))],64))),128))])):Lt("",!0)}}),Wc=Vt({__name:"VPNavScreenSocialLinks",setup(u){const{theme:h}=fi();return(s,b)=>T(h).socialLinks?(V(),jt(ua,{key:0,class:"VPNavScreenSocialLinks",links:T(h).socialLinks},null,8,["links"])):Lt("",!0)}}),Fa=u=>(Fe("data-v-ce44e31f"),u=u(),De(),u),qc=Fa(()=>Y("span",{class:"vpi-languages icon lang"},null,-1)),Jc=Fa(()=>Y("span",{class:"vpi-chevron-down icon chevron"},null,-1)),Zc={class:"list"},Kc=Vt({__name:"VPNavScreenTranslations",setup(u){const{localeLinks:h,currentLang:s}=Ln({correspondingLink:!0}),b=yi(!1);function v(){b.value=!b.value}return(A,j)=>T(h).length&&T(s).label?(V(),q("div",{key:0,class:zi(["VPNavScreenTranslations",{open:b.value}])},[Y("button",{class:"title",onClick:v},[qc,tn(" "+ji(T(s).label)+" ",1),Jc]),Y("ul",Zc,[(V(!0),q(Ki,null,Xe(T(h),et=>(V(),q("li",{key:et.link,class:"item"},[Rt(ws,{class:"link",href:et.link},{default:ot(()=>[tn(ji(et.text),1)]),_:2},1032,["href"])]))),128))])],2)):Lt("",!0)}}),Yc=Yt(Kc,[["__scopeId","data-v-ce44e31f"]]),Qc={class:"container"},Xc=Vt({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(u){const h=yi(null),s=La(Gn?document.body:null);return(b,v)=>(V(),jt(Fn,{name:"fade",onEnter:v[0]||(v[0]=A=>s.value=!0),onAfterLeave:v[1]||(v[1]=A=>s.value=!1)},{default:ot(()=>[b.open?(V(),q("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:h,id:"VPNavScreen"},[Y("div",Qc,[J(b.$slots,"nav-screen-content-before",{},void 0,!0),Rt(Uc,{class:"menu"}),Rt(Yc,{class:"translations"}),Rt(zc,{class:"appearance"}),Rt(Wc,{class:"social-links"}),J(b.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):Lt("",!0)]),_:3}))}}),tu=Yt(Xc,[["__scopeId","data-v-cb086c52"]]),iu={key:0,class:"VPNav"},eu=Vt({__name:"VPNav",setup(u){const{isScreenOpen:h,closeScreen:s,toggleScreen:b}=Th(),{frontmatter:v}=fi(),A=ii(()=>v.value.navbar!==!1);return Ca("close-screen",s),Dn(()=>{Gn&&document.documentElement.classList.toggle("hide-nav",!A.value)}),(j,et)=>A.value?(V(),q("header",iu,[Rt(xc,{"is-screen-open":T(h),onToggleScreen:T(b)},{"nav-bar-title-before":ot(()=>[J(j.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[J(j.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ot(()=>[J(j.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ot(()=>[J(j.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),Rt(tu,{open:T(h)},{"nav-screen-content-before":ot(()=>[J(j.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ot(()=>[J(j.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):Lt("",!0)}}),su=Yt(eu,[["__scopeId","data-v-12116636"]]),Da=u=>(Fe("data-v-07e4782b"),u=u(),De(),u),nu=["role","tabindex"],au=Da(()=>Y("div",{class:"indicator"},null,-1)),ou=["onKeydown"],ru=Da(()=>Y("span",{class:"vpi-chevron-right caret-icon"},null,-1)),hu=[ru],lu={key:1,class:"items"},cu=Vt({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(u){const h=u,{collapsed:s,collapsible:b,isLink:v,isActiveLink:A,hasActiveLink:j,hasChildren:et,toggle:Z}=zo(ii(()=>h.item)),Ot=ii(()=>et.value?"section":"div"),ni=ii(()=>v.value?"a":"div"),Jt=ii(()=>et.value?h.depth+2===7?"p":`h${h.depth+2}`:"p"),It=ii(()=>v.value?void 0:"button"),ei=ii(()=>[[`level-${h.depth}`],{collapsible:b.value},{collapsed:s.value},{"is-link":v.value},{"is-active":A.value},{"has-active":j.value}]);function vi(ui){"key"in ui&&ui.key!=="Enter"||!h.item.link&&Z()}function Bi(){h.item.link&&Z()}return(ui,Ue)=>{const Oe=sn("VPSidebarItem",!0);return V(),jt(zs(Ot.value),{class:zi(["VPSidebarItem",ei.value])},{default:ot(()=>[ui.item.text?(V(),q("div",Ds({key:0,class:"item",role:It.value},Qa(ui.item.items?{click:vi,keydown:vi}:{},!0),{tabindex:ui.item.items&&0}),[au,ui.item.link?(V(),jt(ws,{key:0,tag:ni.value,class:"link",href:ui.item.link,rel:ui.item.rel,target:ui.item.target},{default:ot(()=>[(V(),jt(zs(Jt.value),{class:"text",innerHTML:ui.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(V(),jt(zs(Jt.value),{key:1,class:"text",innerHTML:ui.item.text},null,8,["innerHTML"])),ui.item.collapsed!=null&&ui.item.items&&ui.item.items.length?(V(),q("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:Bi,onKeydown:Xa(Bi,["enter"]),tabindex:"0"},hu,40,ou)):Lt("",!0)],16,nu)):Lt("",!0),ui.item.items&&ui.item.items.length?(V(),q("div",lu,[ui.depth<5?(V(!0),q(Ki,{key:0},Xe(ui.item.items,ls=>(V(),jt(Oe,{key:ls.text,item:ls,depth:ui.depth+1},null,8,["item","depth"]))),128)):Lt("",!0)])):Lt("",!0)]),_:1},8,["class"])}}}),uu=Yt(cu,[["__scopeId","data-v-07e4782b"]]),pu=Vt({__name:"VPSidebarGroup",props:{items:{}},setup(u){const h=yi(!0);let s=null;return Is(()=>{s=setTimeout(()=>{s=null,h.value=!1},300)}),to(()=>{s!=null&&(clearTimeout(s),s=null)}),(b,v)=>(V(!0),q(Ki,null,Xe(b.items,A=>(V(),q("div",{key:A.text,class:zi(["group",{"no-transition":h.value}])},[Rt(uu,{item:A,depth:0},null,8,["item"])],2))),128))}}),mu=Yt(pu,[["__scopeId","data-v-d9b56e08"]]),Oa=u=>(Fe("data-v-2fc172ba"),u=u(),De(),u),du=Oa(()=>Y("div",{class:"curtain"},null,-1)),fu={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},yu=Oa(()=>Y("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),vu=Vt({__name:"VPSidebar",props:{open:{type:Boolean}},setup(u){const h=u,{sidebarGroups:s,hasSidebar:b}=Hs(),v=yi(null),A=La(Gn?document.body:null);ps([h,v],()=>{var et;h.open?(A.value=!0,(et=v.value)==null||et.focus()):A.value=!1},{immediate:!0,flush:"post"});const j=yi(0);return ps(s,()=>{j.value+=1},{deep:!0}),(et,Z)=>T(b)?(V(),q("aside",{key:0,class:zi(["VPSidebar",{open:et.open}]),ref_key:"navEl",ref:v,onClick:Z[0]||(Z[0]=io(()=>{},["stop"]))},[du,Y("nav",fu,[yu,J(et.$slots,"sidebar-nav-before",{},void 0,!0),(V(),jt(mu,{items:T(s),key:j.value},null,8,["items"])),J(et.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):Lt("",!0)}}),_u=Yt(vu,[["__scopeId","data-v-2fc172ba"]]),bu=Vt({__name:"VPSkipLink",setup(u){const h=Rn(),s=yi();ps(()=>h.path,()=>s.value.focus());function b({target:v}){const A=document.getElementById(decodeURIComponent(v.hash).slice(1));if(A){const j=()=>{A.removeAttribute("tabindex"),A.removeEventListener("blur",j)};A.setAttribute("tabindex","-1"),A.addEventListener("blur",j),A.focus(),window.scrollTo(0,0)}}return(v,A)=>(V(),q(Ki,null,[Y("span",{ref_key:"backToTop",ref:s,tabindex:"-1"},null,512),Y("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:b}," Skip to content ")],64))}}),xu=Yt(bu,[["__scopeId","data-v-a518995d"]]),gu=Vt({__name:"Layout",setup(u){const{isOpen:h,open:s,close:b}=Hs(),v=Rn();ps(()=>v.path,b),Po(h,b);const{frontmatter:A}=fi(),j=eo(),et=ii(()=>!!j["home-hero-image"]);return Ca("hero-image-slot-exists",et),(Z,Ot)=>{const ni=sn("Content");return T(A).layout!==!1?(V(),q("div",{key:0,class:zi(["Layout",T(A).pageClass])},[J(Z.$slots,"layout-top",{},void 0,!0),Rt(xu),Rt(ro,{class:"backdrop",show:T(h),onClick:T(b)},null,8,["show","onClick"]),Rt(su,null,{"nav-bar-title-before":ot(()=>[J(Z.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ot(()=>[J(Z.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ot(()=>[J(Z.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ot(()=>[J(Z.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":ot(()=>[J(Z.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ot(()=>[J(Z.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),Rt(Hh,{open:T(h),onOpenMenu:T(s)},null,8,["open","onOpenMenu"]),Rt(_u,{open:T(h)},{"sidebar-nav-before":ot(()=>[J(Z.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":ot(()=>[J(Z.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),Rt(mh,null,{"page-top":ot(()=>[J(Z.$slots,"page-top",{},void 0,!0)]),"page-bottom":ot(()=>[J(Z.$slots,"page-bottom",{},void 0,!0)]),"not-found":ot(()=>[J(Z.$slots,"not-found",{},void 0,!0)]),"home-hero-before":ot(()=>[J(Z.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":ot(()=>[J(Z.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":ot(()=>[J(Z.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":ot(()=>[J(Z.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":ot(()=>[J(Z.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":ot(()=>[J(Z.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ot(()=>[J(Z.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ot(()=>[J(Z.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ot(()=>[J(Z.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":ot(()=>[J(Z.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ot(()=>[J(Z.$slots,"doc-before",{},void 0,!0)]),"doc-after":ot(()=>[J(Z.$slots,"doc-after",{},void 0,!0)]),"doc-top":ot(()=>[J(Z.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":ot(()=>[J(Z.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":ot(()=>[J(Z.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ot(()=>[J(Z.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ot(()=>[J(Z.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ot(()=>[J(Z.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ot(()=>[J(Z.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ot(()=>[J(Z.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),Rt(_h),J(Z.$slots,"layout-bottom",{},void 0,!0)],2)):(V(),jt(ni,{key:1}))}}}),ku=Yt(gu,[["__scopeId","data-v-83f5a6c3"]]),Pu={Layout:ku,enhanceApp:({app:u})=>{u.component("Badge",no)}},Wn=(u,h)=>{const s=u.__vccOpts||u;for(const[b,v]of h)s[b]=v;return s},zu={},wu={t:"1661231422733",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3259",width:"20",height:"20"},Su=Y("path",{d:"M682.666667 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l226.133333-226.133333-226.133333-226.133333c-17.066667-17.066667-17.066667-42.666667 0-59.733334s42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866666 12.8zM341.333333 810.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733334L145.066667 512l226.133333 226.133333c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"3260"},null,-1),Nu=[Su];function Mu(u,h){return V(),q("svg",wu,Nu)}const Lu=Wn(zu,[["render",Mu]]),Cu={},Vu={t:"1661231449868",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3541",width:"20",height:"20"},Iu=Y("path",{d:"M305.6 225.6c-17.6-17.6-43.2-17.6-59.2 0L19.2 460.8c-25.6 30.4-25.6 72 0 97.6l225.6 235.2c8 8 20.8 12.8 30.4 12.8s20.8-4.8 30.4-12.8c17.6-17.6 17.6-43.2 0-59.2L88 512l217.6-225.6c17.6-17.6 17.6-43.2 0-60.8zM1001.6 460.8L774.4 225.6c-17.6-17.6-43.2-17.6-59.2 0s-17.6 43.2 0 59.2L932.8 512 715.2 737.6c-17.6 17.6-17.6 43.2 0 59.2 8 8 17.6 12.8 30.4 12.8 12.8 0 20.8-4.8 30.4-12.8l225.6-235.2c28.8-28.8 28.8-70.4 0-100.8zM612.8 230.4c-20.8-8-46.4 4.8-56 25.6L382.4 742.4c-8 20.8 4.8 46.4 25.6 56 4.8 0 8 4.8 12.8 4.8 17.6 0 33.6-12.8 38.4-30.4l179.2-491.2c8-20.8-4.8-46.4-25.6-51.2z","p-id":"3542"},null,-1),Hu=[Iu];function Tu(u,h){return V(),q("svg",Vu,Hu)}const Au=Wn(Cu,[["render",Tu]]),$u={},Bu={viewBox:"0 0 544 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eu=Y("path",{d:"M399.503 143.667C399.319 152.501 406.332 159.812 415.167 159.997C424.001 160.181 431.312 153.168 431.497 144.333L399.503 143.667ZM416 120L431.997 120.333C431.999 120.207 432 120.081 432 119.954L416 120ZM360 64L360.046 48.0001C360.03 48 360.015 48 360 48L360 64ZM144 64V48C143.984 48 143.968 48 143.953 48.0001L144 64ZM80 128L64.0001 127.953C64 127.968 64 127.984 64 128L80 128ZM80 344H64C64 344.015 64 344.03 64.0001 344.046L80 344ZM136 400L135.954 416C135.97 416 135.985 416 136 416L136 400ZM160 416C168.837 416 176 408.837 176 400C176 391.163 168.837 384 160 384V416ZM217 160H439V128H217V160ZM439 160C461.644 160 480 178.356 480 201H512C512 160.683 479.317 128 439 128V160ZM480 201V423H512V201H480ZM480 423C480 445.644 461.644 464 439 464V496C479.317 496 512 463.317 512 423H480ZM439 464H217V496H439V464ZM217 464C194.356 464 176 445.644 176 423H144C144 463.317 176.683 496 217 496V464ZM176 423V201H144V423H176ZM176 201C176 178.356 194.356 160 217 160V128C176.683 128 144 160.683 144 201H176ZM431.497 144.333L431.997 120.333L400.003 119.667L399.503 143.667L431.497 144.333ZM432 119.954C431.946 100.888 424.347 82.6173 410.865 69.1349L388.238 91.7624C395.741 99.2658 399.97 109.434 400 120.046L432 119.954ZM410.865 69.1349C397.383 55.6526 379.112 48.0543 360.046 48.0001L359.954 79.9999C370.566 80.0301 380.734 84.2589 388.238 91.7624L410.865 69.1349ZM360 48H144V80H360V48ZM143.953 48.0001C122.767 48.0627 102.467 56.5064 87.4868 71.4868L110.114 94.1142C119.117 85.1118 131.316 80.0376 144.047 79.9999L143.953 48.0001ZM87.4868 71.4868C72.5064 86.4673 64.0627 106.767 64.0001 127.953L95.9999 128.047C96.0376 115.316 101.112 103.117 110.114 94.1142L87.4868 71.4868ZM64 128V344H96V128H64ZM64.0001 344.046C64.0543 363.112 71.6526 381.383 85.1349 394.865L107.762 372.238C100.259 364.734 96.0301 354.566 95.9999 343.954L64.0001 344.046ZM85.1349 394.865C98.6173 408.347 116.888 415.946 135.954 416L136.046 384C125.434 383.97 115.266 379.741 107.762 372.238L85.1349 394.865ZM136 416H160V384H136V416Z",fill:"currentColor"},null,-1),Fu=[Eu];function Du(u,h){return V(),q("svg",Bu,Fu)}const Ou=Wn($u,[["render",Du]]),An="vitepress-demo-preview",$n=(u,h,s,b)=>{let v=h===""?`${u}`:`${u}-${h}`;return s&&(v+=`__${s}`),b&&(v+=`--${b}`),v},Ra=(u="")=>({b:()=>$n(An,u),e:(h="")=>$n(An,u,h),m:(h="")=>$n(An,u,"",h),bem:(h,s,b)=>$n(An,h,s,b)}),Ru=()=>{const u=yi(!0);return{isCodeFold:u,setCodeFold:h=>{u.value=h}}},ju=()=>({copyContent:yi(""),clickCopy:async u=>{await navigator.clipboard.writeText(u)}}),Gu={},Uu={width:"20",height:"20",viewBox:"0 0 48 48",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Wu=Y("path",{d:"M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),qu=Y("path",{d:"M17 24L22 29L32 19",fill:"currentColor",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ju=[Wu,qu];function Zu(u,h){return V(),q("svg",Uu,Ju)}const Ku=Wn(Gu,[["render",Zu]]),Yu=Vt({__name:"message-notice",props:{content:{default:""},close:null},setup(u,{expose:h}){const s=u,b=Ra(),v=yi(!1),A=Ot=>{v.value=Ot},j=yi(-999),et=Ot=>{j.value=Ot};ps(v,Ot=>{Ot===!0&&setTimeout(()=>{v.value=!1},3e3)});const Z=()=>{s.close()};return h({setVisible:A,setTopHeight:et}),(Ot,ni)=>(V(),jt(Fn,{name:"slide-fade",onAfterLeave:Z},{default:ot(()=>[v.value?(V(),q("div",{key:0,class:zi([T(b).bem("message-notice","container")]),style:aa({top:j.value+"px"})},[Rt(Ku),Y("span",null,ji(u.content),1)],6)):Lt("",!0)]),_:1}))}}),Yn=[],Qu={open:()=>{const u=document.createElement("div"),h=so(Yu,{content:"",close:()=>{document.body.removeChild(u),Yn.pop(),h.unmount()}}),s=h.mount(u);document.body.appendChild(u);const b=Yn.length,v=b===0?10:(b+1)*10+b*42;s.setTopHeight(v),s.setVisible(!0),Yn.push(s)}},Xu=["innerHTML"],t1=Vt({__name:"ElementPlus",props:{code:null,showCode:null,title:{default:""},description:{default:""}},setup(u){const h=u,s=Ra(),{isCodeFold:b,setCodeFold:v}=Ru(),{clickCopy:A}=ju(),j=yi(decodeURIComponent(h.code)),et=yi(decodeURIComponent(h.showCode)),Z=yi(null),Ot=()=>{A(j.value),Qu.open()},ni=ii(()=>{var It;return Z.value?(It=Z.value)==null?void 0:It.clientHeight:0}),Jt=It=>{b.value?Z.value.style.height="0px":Z.value.style.height=`${It}px`};return Is(()=>{const It=ni.value;Jt(It)}),ps(b,()=>{const It=ni.value;Jt(It)}),(It,ei)=>(V(),q("div",{class:zi([T(s).e("element-plus__container")])},[Y("section",{class:zi([T(s).bem("preview")])},[J(It.$slots,"default")],2),Y("section",{class:zi([T(s).bem("description")])},[Y("div",{class:zi([T(s).bem("description","split-line")])},null,2),Y("div",{class:zi([T(s).bem("description","handle-btn")])},[T(b)?(V(),jt(Lu,{key:1,onClick:ei[1]||(ei[1]=vi=>T(v)(!1))})):(V(),jt(Au,{key:0,onClick:ei[0]||(ei[0]=vi=>T(v)(!0))})),Rt(Ou,{onClick:Ot})],2)],2),Y("section",{class:zi([T(s).bem("source")]),ref_key:"sourceCodeArea",ref:Z},[Y("div",{innerHTML:et.value,class:"language-vue"},null,8,Xu)],2)],2))}});(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):h((typeof window<"u"?window:global).OIMO={})})(void 0,function(u){Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(a!=null)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e});var h,s,b,v,A="1.0.9",j=0,et=1,Z=2,Ot=3,ni=0,Jt=0,It=1,ei=2,vi=3,Bi=4,ui=5,Ue=0,Oe=1,ls=2,Ss=3,Ts=4,Cn=5,Vn=6,R={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(t,e,n){return(1-n)*t+n*e},randInt:function(t,e){return t+R.floor(R.random()*(e-t+1))},rand:function(t,e){return t+R.random()*(e-t)},generateUUID:(s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=new Array(36),v=0,function(){for(var t=0;t<36;t++)t===8||t===13||t===18||t===23?b[t]="-":t===14?b[t]="4":(v<=2&&(v=33554432+16777216*Math.random()|0),h=15&v,v>>=4,b[t]=s[t===19?3&h|8:h]);return b.join("")}),int:function(t){return R.floor(t)},fix:function(t,e){return t.toFixed(e||3,10)},clamp:function(t,e,n){return R.max(e,R.min(n,t))},distance:function(t,e){var n=e[0]-t[0],a=e[1]-t[1],o=e[2]-t[2];return R.sqrt(n*n+a*a+o*o)},acosClamp:function(t){return t>1?0:t<-1?R.PI:R.acos(t)},distanceVector:function(t,e){var n=t.x-e.x,a=t.y-e.y,o=t.z-e.z;return n*n+a*a+o*o},dotVectors:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}};function ce(t,e){console.error("[OIMO] "+t+": "+e)}function As(t){this.parent=t,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=A,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}function $(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function Gi(t,e,n,a){this.x=t||0,this.y=e||0,this.z=n||0,this.w=a!==void 0?a:1}function Ui(t,e,n,a,o,r,c,y,p){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.")}function hs(t,e,n,a,o,r){this.elements=new Float32Array(6);var c=this.elements;c[0]=t||0,c[1]=n||0,c[2]=o||0,c[3]=e||0,c[4]=a||0,c[5]=r||0}Object.assign(As.prototype,{setTime:function(t){this.times[t||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),this.tt===100&&this.resetMax(),this.tt>100&&(this.broadPhaseTime>this.MaxBroadPhaseTime&&(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime>this.MaxNarrowPhaseTime&&(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime>this.MaxSolvingTime&&(this.MaxSolvingTime=this.solvingTime),this.totalTime>this.MaxTotalTime&&(this.MaxTotalTime=this.totalTime),this.updateTime>this.MaxUpdateTime&&(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt>500&&(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3>this.f[0]&&(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){return["Oimo.js "+this.version+"<br>",this.broadPhase+"<br><br>","FPS: "+this.fps+" fps<br><br>","rigidbody "+this.parent.numRigidBodies+"<br>","contact &nbsp;&nbsp;"+this.parent.numContacts+"<br>","ct-point &nbsp;"+this.parent.numContactPoints+"<br>","paircheck "+this.parent.broadPhase.numPairChecks+"<br>","island &nbsp;&nbsp;&nbsp;"+this.parent.numIslands+"<br><br>","Time in milliseconds<br><br>","broadphase &nbsp;"+R.fix(this.broadPhaseTime)+" | "+R.fix(this.MaxBroadPhaseTime)+"<br>","narrowphase "+R.fix(this.narrowPhaseTime)+" | "+R.fix(this.MaxNarrowPhaseTime)+"<br>","solving &nbsp;&nbsp;&nbsp;&nbsp;"+R.fix(this.solvingTime)+" | "+R.fix(this.MaxSolvingTime)+"<br>","total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+R.fix(this.totalTime)+" | "+R.fix(this.MaxTotalTime)+"<br>","updating &nbsp;&nbsp;&nbsp;"+R.fix(this.updateTime)+" | "+R.fix(this.MaxUpdateTime)+"<br>"].join(`
`)},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}}),Object.assign($.prototype,{Vec3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},add:function(t,e){return e!==void 0?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t,e){return e!==void 0?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},subScaledVector:function(t,e){return this.x-=t.x*e,this.y-=t.y*e,this.z-=t.z*e,this},cross:function(t,e){if(e!==void 0)return this.crossVectors(t,e);var n=this.x,a=this.y,o=this.z;return this.x=a*t.z-o*t.y,this.y=o*t.x-n*t.z,this.z=n*t.y-a*t.x,this},crossVectors:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,c=e.y,y=e.z;return this.x=a*y-o*c,this.y=o*r-n*y,this.z=n*c-a*r,this},tangent:function(t){var e=t.x,n=t.y,a=t.z;return this.x=n*e-a*a,this.y=-a*n-e*e,this.z=e*a+n*n,this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return R.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyMatrix3:function(t,e){var n=this.x,a=this.y,o=this.z,r=t.elements;return e?(this.x=r[0]*n+r[1]*a+r[2]*o,this.y=r[3]*n+r[4]*a+r[5]*o,this.z=r[6]*n+r[7]*a+r[8]*o):(this.x=r[0]*n+r[3]*a+r[6]*o,this.y=r[1]*n+r[4]*a+r[7]*o,this.z=r[2]*n+r[5]*a+r[8]*o),this},applyQuaternion:function(t){var e=this.x,n=this.y,a=this.z,o=t.x,r=t.y,c=t.z,y=t.w,p=y*e+r*a-c*n,d=y*n+c*e-o*a,m=y*a+o*n-r*e,S=-o*e-r*n-c*a;return this.x=p*y+S*-o+d*-c-m*-r,this.y=d*y+S*-r+m*-o-p*-c,this.z=m*y+S*-c+p*-r-d*-o,this},testZero:function(){return this.x!==0||this.y!==0||this.z!==0},testDiff:function(t){return!this.equals(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return"Vec3["+this.x.toFixed(4)+", "+this.y.toFixed(4)+", "+this.z.toFixed(4)+"]"},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},normalize:function(){return this.divideScalar(this.length())},toArray:function(t,e){e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}}),Object.assign(Gi.prototype,{Quat:!0,set:function(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this},addTime:function(t,e){var n=t.x,a=t.y,o=t.z,r=this.w,c=this.x,y=this.y,p=this.z;return e*=.5,this.x+=e*(n*r+a*p-o*y),this.y+=e*(a*r+o*c-n*p),this.z+=e*(o*r+n*y-a*c),this.w+=e*(-n*c-a*y-o*p),this.normalize(),this},multiply:function(t,e){return e!==void 0?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,a=t.y,o=t.z,r=t.w,c=e.x,y=e.y,p=e.z,d=e.w;return this.x=n*d+r*c+a*p-o*y,this.y=a*d+r*y+o*c-n*p,this.z=o*d+r*p+n*y-a*c,this.w=r*d-n*c-a*y-o*p,this},setFromUnitVectors:function(t,e){var n=new $,a=t.dot(e)+1;return a<R.EPS2?(a=0,R.abs(t.x)>R.abs(t.z)?n.set(-t.y,t.x,0):n.set(0,-t.z,t.y)):n.crossVectors(t,e),this._x=n.x,this._y=n.y,this._z=n.z,this._w=a,this.normalize()},arc:function(t,e){var n=t.x,a=t.y,o=t.z,r=e.x,c=e.y,y=e.z,p=n*r+a*c+o*y;if(p==-1)return r=a*n-o*o,c=-o*a-n*n,y=n*o+a*a,p=1/R.sqrt(r*r+c*c+y*y),this.w=0,this.x=r*p,this.y=c*p,this.z=y*p,this;var d=a*y-o*c,m=o*r-n*y,S=n*c-a*r;return this.w=R.sqrt(.5*(1+p)),p=.5/this.w,this.x=d*p,this.y=m*p,this.z=S*p,this},normalize:function(){var t=this.length();return t===0?this.set(0,0,0,1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},inverse:function(){return this.conjugate().normalize()},invert:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return R.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(t){return new Gi(this.x,this.y,this.z,this.w)},testDiff:function(t){return!this.equals(t)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},toString:function(){return"Quat["+this.x.toFixed(4)+", ("+this.y.toFixed(4)+", "+this.z.toFixed(4)+", "+this.w.toFixed(4)+")]"},setFromEuler:function(t,e,n){var a=Math.cos(.5*t),o=Math.cos(.5*e),r=Math.cos(.5*n),c=Math.sin(.5*t),y=Math.sin(.5*e),p=Math.sin(.5*n);return this.x=c*o*r+a*y*p,this.y=a*y*r-c*o*p,this.z=a*o*p+c*y*r,this.w=a*o*r-c*y*p,this},setFromAxis:function(t,e){t.normalize(),e*=.5;var n=R.sin(e);return this.x=n*t.x,this.y=n*t.y,this.z=n*t.z,this.w=R.cos(e),this},setFromMat33:function(t){var e,n=t[0]+t[4]+t[8];if(n>0)e=R.sqrt(n+1),this.w=.5/e,e=.5/e,this.x=(t[5]-t[7])*e,this.y=(t[6]-t[2])*e,this.z=(t[1]-t[3])*e;else{var a=[],o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var r=(o+1)%3,c=(o+2)%3;e=R.sqrt(t[3*o+o]-t[3*r+r]-t[3*c+c]+1),a[o]=.5*fRoot,e=.5/fRoot,this.w=(t[3*r+c]-t[3*c+r])*e,a[r]=(t[3*r+o]+t[3*o+r])*e,a[c]=(t[3*c+o]+t[3*o+c])*e,this.x=a[1],this.y=a[2],this.z=a[3]}return this},toArray:function(t,e){t[e=e||0]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w},fromArray:function(t,e){return e=e||0,this.set(t[e],t[e+1],t[e+2],t[e+3]),this}}),Object.assign(Ui.prototype,{Mat33:!0,set:function(t,e,n,a,o,r,c,y,p){var d=this.elements;return d[0]=t,d[1]=e,d[2]=n,d[3]=a,d[4]=o,d[5]=r,d[6]=c,d[7]=y,d[8]=p,this},add:function(t,e){if(e!==void 0)return this.addMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]+=a[0],n[1]+=a[1],n[2]+=a[2],n[3]+=a[3],n[4]+=a[4],n[5]+=a[5],n[6]+=a[6],n[7]+=a[7],n[8]+=a[8],this},addMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]+o[0],n[1]=a[1]+o[1],n[2]=a[2]+o[2],n[3]=a[3]+o[3],n[4]=a[4]+o[4],n[5]=a[5]+o[5],n[6]=a[6]+o[6],n[7]=a[7]+o[7],n[8]=a[8]+o[8],this},addEqual:function(t){var e=this.elements,n=t.elements;return e[0]+=n[0],e[1]+=n[1],e[2]+=n[2],e[3]+=n[3],e[4]+=n[4],e[5]+=n[5],e[6]+=n[6],e[7]+=n[7],e[8]+=n[8],this},sub:function(t,e){if(e!==void 0)return this.subMatrixs(t,e);var n=this.elements,a=t.elements;return n[0]-=a[0],n[1]-=a[1],n[2]-=a[2],n[3]-=a[3],n[4]-=a[4],n[5]-=a[5],n[6]-=a[6],n[7]-=a[7],n[8]-=a[8],this},subMatrixs:function(t,e){var n=this.elements,a=t.elements,o=e.elements;return n[0]=a[0]-o[0],n[1]=a[1]-o[1],n[2]=a[2]-o[2],n[3]=a[3]-o[3],n[4]=a[4]-o[4],n[5]=a[5]-o[5],n[6]=a[6]-o[6],n[7]=a[7]-o[7],n[8]=a[8]-o[8],this},subEqual:function(t){var e=this.elements,n=t.elements;return e[0]-=n[0],e[1]-=n[1],e[2]-=n[2],e[3]-=n[3],e[4]-=n[4],e[5]-=n[5],e[6]-=n[6],e[7]-=n[7],e[8]-=n[8],this},scale:function(t,e){var n=this.elements,a=t.elements;return n[0]=a[0]*e,n[1]=a[1]*e,n[2]=a[2]*e,n[3]=a[3]*e,n[4]=a[4]*e,n[5]=a[5]*e,n[6]=a[6]*e,n[7]=a[7]*e,n[8]=a[8]*e,this},scaleEqual:function(t){var e=this.elements;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,this},multiplyMatrices:function(t,e,n){n&&(e=e.clone().transpose());var a=this.elements,o=t.elements,r=e.elements,c=o[0],y=o[3],p=o[6],d=o[1],m=o[4],S=o[7],x=o[2],g=o[5],P=o[8],I=r[0],D=r[3],nt=r[6],M=r[1],tt=r[4],it=r[7],ct=r[2],ut=r[5],st=r[8];return a[0]=c*I+d*D+x*nt,a[1]=c*M+d*tt+x*it,a[2]=c*ct+d*ut+x*st,a[3]=y*I+m*D+g*nt,a[4]=y*M+m*tt+g*it,a[5]=y*ct+m*ut+g*st,a[6]=p*I+S*D+P*nt,a[7]=p*M+S*tt+P*it,a[8]=p*ct+S*ut+P*st,this},transpose:function(t){if(t!==void 0){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this}var n=this.elements,a=n[1],o=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=a,n[5]=n[7],n[6]=o,n[7]=r,this},setQuat:function(t){var e=this.elements,n=t.x,a=t.y,o=t.z,r=t.w,c=n+n,y=a+a,p=o+o,d=n*c,m=n*y,S=n*p,x=a*y,g=a*p,P=o*p,I=r*c,D=r*y,nt=r*p;return e[0]=1-(x+P),e[1]=m-nt,e[2]=S+D,e[3]=m+nt,e[4]=1-(d+P),e[5]=g-I,e[6]=S-D,e[7]=g+I,e[8]=1-(d+x),this},invert:function(t){var e=this.elements,n=t.elements,a=n[0],o=n[3],r=n[6],c=n[1],y=n[4],p=n[7],d=n[2],m=n[5],S=n[8],x=S*y-m*p,g=-S*o+m*r,P=p*o-y*r,I=a*x+c*g+d*P;return I===0?(console.log("can't invert matrix, determinant is 0"),this.identity()):(I=1/I,e[0]=x*I,e[1]=(-S*c+d*p)*I,e[2]=(m*c-d*y)*I,e[3]=g*I,e[4]=(S*a-d*r)*I,e[5]=(-m*a+d*o)*I,e[6]=P*I,e[7]=(-p*a+c*r)*I,e[8]=(y*a-c*o)*I,this)},addOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]+=t*(a*a+o*o),r[4]+=t*(n*n+o*o),r[8]+=t*(n*n+a*a);var c=t*n*a,y=t*a*o,p=t*o*n;return r[1]-=c,r[3]-=c,r[2]-=y,r[6]-=y,r[5]-=p,r[7]-=p,this},subOffset:function(t,e){var n=e.x,a=e.y,o=e.z,r=this.elements;r[0]-=t*(a*a+o*o),r[4]-=t*(n*n+o*o),r[8]-=t*(n*n+a*a);var c=t*n*a,y=t*a*o,p=t*o*n;return r[1]+=c,r[3]+=c,r[2]+=y,r[6]+=y,r[5]+=p,r[7]+=p,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new Ui().fromArray(this.elements)},copy:function(t){for(var e=0;e<9;e++)this.elements[e]=t.elements[e];return this},determinant:function(){var t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],r=t[4],c=t[5],y=t[6],p=t[7],d=t[8];return e*r*d-e*c*p-n*o*d+n*c*y+a*o*p-a*r*y},fromArray:function(t,e){e===void 0&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}),Object.assign(hs.prototype,{AABB:!0,set:function(t,e,n,a,o,r){var c=this.elements;return c[0]=t,c[3]=e,c[1]=n,c[4]=a,c[2]=o,c[5]=r,this},intersectTest:function(t){var e=this.elements,n=t.elements;return e[0]>n[3]||e[1]>n[4]||e[2]>n[5]||e[3]<n[0]||e[4]<n[1]||e[5]<n[2]},intersectTestTwo:function(t){var e=this.elements,n=t.elements;return e[0]<n[0]||e[1]<n[1]||e[2]<n[2]||e[3]>n[3]||e[4]>n[4]||e[5]>n[5]},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t,e){var n=e||0,a=t.elements;return this.set(a[0]-n,a[3]+n,a[1]-n,a[4]+n,a[2]-n,a[5]+n),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,e){var n=t.elements,a=e.elements,o=this.elements;return o[0]=n[0]<a[0]?n[0]:a[0],o[1]=n[1]<a[1]?n[1]:a[1],o[2]=n[2]<a[2]?n[2]:a[2],o[3]=n[3]>a[3]?n[3]:a[3],o[4]=n[4]>a[4]?n[4]:a[4],o[5]=n[5]>a[5]?n[5]:a[5],this},surfaceArea:function(){var t=this.elements,e=t[3]-t[0],n=t[4]-t[1],a=t[5]-t[2];return 2*(e*(n+a)+n*a)},intersectsWithPoint:function(t,e,n){var a=this.elements;return t>=a[0]&&t<=a[3]&&e>=a[1]&&e<=a[4]&&n>=a[2]&&n<=a[5]},setFromPoints:function(t){this.makeEmpty();for(var e=0;e<t.length;e++)this.expandByPoint(t[e])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var e=this.elements;this.set(R.min(e[0],t.x),R.min(e[1],t.y),R.min(e[2],t.z),R.max(e[3],t.x),R.max(e[4],t.y),R.max(e[5],t.z))},expandByScalar:function(t){var e=this.elements;e[0]+=-t,e[1]+=-t,e[2]+=-t,e[3]+=t,e[4]+=t,e[5]+=t}});var Re=0;function We(t){this.type=Jt,this.id=Re++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new $,this.rotation=new Ui,this.relativePosition=new $().copy(t.relativePosition),this.relativeRotation=new Ui().copy(t.relativeRotation),this.aabb=new hs,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith}function Os(t,e,n,a){We.call(this,t),this.type=ei,this.width=e,this.height=n,this.depth=a,this.halfWidth=.5*e,this.halfHeight=.5*n,this.halfDepth=.5*a,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}function Rs(t,e){We.call(this,t),this.type=It,this.radius=e}function js(t,e,n){We.call(this,t),this.type=vi,this.radius=e,this.height=n,this.halfHeight=.5*n,this.normalDirection=new $,this.halfDirection=new $}function Gs(t,e){We.call(this,t),this.type=Bi,this.normal=new $(0,1,0)}function nn(t,e){We.call(this,t),this.type=ui}function gn(){this.relativePosition=new $,this.relativeRotation=new Ui,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function Yi(t,e){e=e||!1,this.axis=t,this.angle=0,this.lowerLimit=e?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}function Us(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}function kn(t){this.prev=null,this.next=null,this.body=null,this.joint=t}function je(t){Us.call(this),this.scale=1,this.invScale=1,this.name="",this.id=NaN,this.type=Ue,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=new $().copy(t.localAnchorPoint1),this.localAnchorPoint2=new $().copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new $,this.relativeAnchorPoint2=new $,this.anchorPoint1=new $,this.anchorPoint2=new $,this.allowCollision=t.allowCollision,this.b1Link=new kn(this),this.b2Link=new kn(this)}function Pn(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}function an(t,e,n,a){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}function on(t,e,n){je.call(this,t),this.type=Ss,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new $().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.limitMotor=new Yi(this.nor,!1),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.lc=new Pn(this),this.r3=new an(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function rn(t){je.call(this,t),this.type=ls,this.lc=new Pn(this)}function In(t,e){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=e,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}function hn(t,e,n){je.call(this,t),this.type=Oe,this.nor=new $,this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t=new In(this,this.limitMotor)}function Hn(t,e){this.joint=t,this.targetOrientation=new Gi().invert(e),this.relativeOrientation=new Gi,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new $,this.imp=new $,this.rn0=new $,this.rn1=new $,this.rn2=new $,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}function cs(t,e,n,a){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=e,this.limitMotor2=n,this.limitMotor3=a,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}function ms(t,e,n){je.call(this,t),this.type=Vn,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.ax1=new $,this.ax2=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.ac=new Hn(this,new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new Yi(this.nor,!0),this.limitMotor.lowerLimit=e,this.limitMotor.upperLimit=n,this.t3=new cs(this,this.limitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function ln(t,e,n){je.call(this,t),this.type=Cn,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var a=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=new $().tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(a,!0),this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.rotationalLimitMotor=new Yi(this.nor,!1),this.r3=new an(this,this.rotationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0)),this.translationalLimitMotor=new Yi(this.nor,!0),this.translationalLimitMotor.lowerLimit=e,this.translationalLimitMotor.upperLimit=n,this.t3=new cs(this,this.translationalLimitMotor,new Yi(this.tan,!0),new Yi(this.bin,!0))}function cn(t){je.call(this,t),this.type=Ts,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.localAngle1=new $,this.localAngle2=new $;var e=R.dotVectors(this.localAxis1,this.localAxis2);if(e>-1&&e<1)this.localAngle1.set(this.localAxis2.x-e*this.localAxis1.x,this.localAxis2.y-e*this.localAxis1.y,this.localAxis2.z-e*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-e*this.localAxis2.x,this.localAxis1.y-e*this.localAxis2.y,this.localAxis1.z-e*this.localAxis2.z).normalize();else{var n=new Ui().setQuat(new Gi().setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(n,!0)}this.ax1=new $,this.ax2=new $,this.an1=new $,this.an2=new $,this.tmp=new $,this.nor=new $,this.tan=new $,this.bin=new $,this.translationalLimitMotor=new Yi(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new Yi(this.tan,!1),this.rotationalLimitMotor2=new Yi(this.bin,!1),this.t3=new cs(this,new Yi(this.nor,!0),this.translationalLimitMotor,new Yi(this.bin,!0)),this.t3.weight=1,this.r3=new an(this,new Yi(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}function Ws(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new $,this.localAnchorPoint2=new $,this.localAxis1=new $,this.localAxis2=new $,this.allowCollision=!1}function qn(){this.mass=0,this.inertia=new Ui}function qs(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t}function we(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function Js(){this.warmStarted=!1,this.position=new $,this.localPoint1=new $,this.localPoint2=new $,this.normal=new $,this.tangent=new $,this.binormal=new $,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function zn(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new Js,new Js,new Js,new Js]}function un(){this.nor=new $,this.tan=new $,this.bin=new $,this.norU1=new $,this.tanU1=new $,this.binU1=new $,this.norU2=new $,this.tanU2=new $,this.binU2=new $,this.norT1=new $,this.tanT1=new $,this.binT1=new $,this.norT2=new $,this.tanT2=new $,this.binT2=new $,this.norTU1=new $,this.tanTU1=new $,this.binTU1=new $,this.norTU2=new $,this.tanTU2=new $,this.binTU2=new $,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function pn(t){Us.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new $,this.tmpC1=new $,this.tmpC2=new $,this.tmpP1=new $,this.tmpP2=new $,this.tmplv1=new $,this.tmplv2=new $,this.tmpav1=new $,this.tmpav2=new $,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new un,this.cs.next=new un,this.cs.next.next=new un,this.cs.next.next.next=new un}function Zs(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=R.INF,this.b1Link=new qs(this),this.b2Link=new qs(this),this.s1Link=new qs(this),this.s2Link=new qs(this),this.manifold=new zn,this.buffer=[new we,new we,new we,new we],this.points=this.manifold.points,this.constraint=new pn(this.manifold)}function Ns(t,e){this.position=t||new $,this.orientation=e||new Gi,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name="",this.prev=null,this.next=null,this.type=ni,this.massInfo=new qn,this.newPosition=new $,this.controlPos=!1,this.newOrientation=new Gi,this.newRotation=new $,this.currentRotation=new $,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new Gi,this.pos=new $,this.linearVelocity=new $,this.angularVelocity=new $,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new $,this.sleepOrientation=new Gi,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new Ui,this.mass=0,this.inverseMass=0,this.inverseInertia=new Ui,this.localInertia=new Ui,this.inverseLocalInertia=new Ui,this.tmpInertia=new Ui,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}function mn(t,e){this.shape1=t||null,this.shape2=e||null}function ds(){this.types=j,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(We.prototype,{Shape:!0,calculateMassInfo:function(t){ce("Shape","Inheritance error.")},updateProxy:function(){ce("Shape","Inheritance error.")}}),Os.prototype=Object.assign(Object.create(We.prototype),{constructor:Os,calculateMassInfo:function(t){var e=this.width*this.height*this.depth*this.density;t.mass=e,t.inertia.set(e*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,e*(this.width*this.width+this.height*this.height)*(1/12))},updateProxy:function(){var t=this.rotation.elements,e=this.dimentions;e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e[9]=t[0]*this.halfWidth,e[10]=t[3]*this.halfWidth,e[11]=t[6]*this.halfWidth,e[12]=t[1]*this.halfHeight,e[13]=t[4]*this.halfHeight,e[14]=t[7]*this.halfHeight,e[15]=t[2]*this.halfDepth,e[16]=t[5]*this.halfDepth,e[17]=t[8]*this.halfDepth;var n=e[9],a=e[10],o=e[11],r=e[12],c=e[13],y=e[14],p=e[15],d=e[16],m=e[17],S=this.position.x,x=this.position.y,g=this.position.z,P=this.elements;P[0]=S+n+r+p,P[1]=x+a+c+d,P[2]=g+o+y+m,P[3]=S+n+r-p,P[4]=x+a+c-d,P[5]=g+o+y-m,P[6]=S+n-r+p,P[7]=x+a-c+d,P[8]=g+o-y+m,P[9]=S+n-r-p,P[10]=x+a-c-d,P[11]=g+o-y-m,P[12]=S-n+r+p,P[13]=x-a+c+d,P[14]=g-o+y+m,P[15]=S-n+r-p,P[16]=x-a+c-d,P[17]=g-o+y-m,P[18]=S-n-r+p,P[19]=x-a-c+d,P[20]=g-o-y+m,P[21]=S-n-r-p,P[22]=x-a-c-d,P[23]=g-o-y-m;var I=e[9]<0?-e[9]:e[9],D=e[10]<0?-e[10]:e[10],nt=e[11]<0?-e[11]:e[11];I=e[12]<0?I-e[12]:I+e[12],D=e[13]<0?D-e[13]:D+e[13],nt=e[14]<0?nt-e[14]:nt+e[14],I=e[15]<0?I-e[15]:I+e[15],D=e[16]<0?D-e[16]:D+e[16],nt=e[17]<0?nt-e[17]:nt+e[17];var M=.005;this.aabb.set(this.position.x-I-M,this.position.x+I+M,this.position.y-D-M,this.position.y+D+M,this.position.z-nt-M,this.position.z+nt+M),this.proxy!=null&&this.proxy.update()}}),Rs.prototype=Object.assign(Object.create(We.prototype),{constructor:Rs,volume:function(){return R.PI*this.radius*1.333333},calculateMassInfo:function(t){var e=this.volume()*this.radius*this.radius*this.density;t.mass=e;var n=e*this.radius*this.radius*.4;t.inertia.set(n,0,0,0,n,0,0,0,n)},updateProxy:function(){var t=.005;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),this.proxy!=null&&this.proxy.update()}}),js.prototype=Object.assign(Object.create(We.prototype),{constructor:js,calculateMassInfo:function(t){var e=this.radius*this.radius,n=R.PI*e*this.height*this.density,a=(.25*e+.0833*this.height*this.height)*n,o=.5*e;t.mass=n,t.inertia.set(a,0,0,0,o,0,0,0,a)},updateProxy:function(){var t,e,n,a,o,r,c,y,p,d,m,S=this.rotation.elements;o=S[1]*S[1],r=S[4]*S[4],c=S[7]*S[7],this.normalDirection.set(S[1],S[4],S[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),e=1-o,(t=R.sqrt(e*e+o*r+o*c))>0&&(t=this.radius/t),e*=t,n=1-r,(t=R.sqrt(r*o+n*n+r*c))>0&&(t=this.radius/t),n*=t,a=1-c,(t=R.sqrt(c*o+c*r+a*a))>0&&(t=this.radius/t),a*=t,y=this.halfDirection.x<0?-this.halfDirection.x:this.halfDirection.x,p=this.halfDirection.y<0?-this.halfDirection.y:this.halfDirection.y,d=this.halfDirection.z<0?-this.halfDirection.z:this.halfDirection.z,y=e<0?y-e:y+e,p=n<0?p-n:p+n,d=a<0?d-a:d+a,m=.005,this.aabb.set(this.position.x-y-m,this.position.x+y+m,this.position.y-p-m,this.position.y+p+m,this.position.z-d-m,this.position.z+d+m),this.proxy!=null&&this.proxy.update()}}),Gs.prototype=Object.assign(Object.create(We.prototype),{constructor:Gs,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.mass=this.density,t.inertia.set(1,0,0,0,1,0,0,0,1)},updateProxy:function(){var t=.005,e=-R.INF,n=R.INF,a=this.normal;this.aabb.set(a.x===-1?this.position.x-t:e,a.x===1?this.position.x+t:n,a.y===-1?this.position.y-t:e,a.y===1?this.position.y+t:n,a.z===-1?this.position.z-t:e,a.z===1?this.position.z+t:n),this.proxy!=null&&this.proxy.update()}}),nn.prototype=Object.assign(Object.create(We.prototype),{constructor:nn,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.inertia.set(0,0,0,0,0,0,0,0,0)},updateProxy:function(){this.aabb.set(this.position.x-0,this.position.x+0,this.position.y-0,this.position.y+0,this.position.z-0,this.position.z+0),this.proxy!=null&&this.proxy.update()}}),Object.assign(Yi.prototype,{LimitMotor:!0,setLimit:function(t,e){this.lowerLimit=t,this.upperLimit=e},setMotor:function(t,e){this.motorSpeed=t,this.maxMotorForce=e},setSpring:function(t,e){this.frequency=t,this.dampingRatio=e}}),Object.assign(Us.prototype,{Constraint:!0,preSolve:function(t,e){ce("Constraint","Inheritance error.")},solve:function(){ce("Constraint","Inheritance error.")},postSolve:function(){ce("Constraint","Inheritance error.")}}),je.prototype=Object.assign(Object.create(Us.prototype),{constructor:je,setId:function(t){this.id=i},setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name="J"+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(t){this.b1Link.body=this.body2,this.b2Link.body=this.body1,t?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(this.body1.jointLink!=null?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,this.body2.jointLink!=null?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(t){if(t)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var e=this.b1Link.prev,n=this.b1Link.next;e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body1.jointLink==this.b1Link&&(this.body1.jointLink=n),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,e=this.b2Link.prev,n=this.b2Link.next,e!=null&&(e.next=n),n!=null&&(n.prev=e),this.body2.jointLink==this.b2Link&&(this.body2.jointLink=n),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(t,e){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){return[new $().scale(this.anchorPoint1,this.scale),new $().scale(this.anchorPoint2,this.scale)]}}),Object.assign(Pn.prototype,{LinearConstraint:!0,preSolve:function(t,e){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var n=this.ii1.elements,a=this.ii2.elements;this.ax1x=this.r1z*n[1]+-this.r1y*n[2],this.ax1y=this.r1z*n[4]+-this.r1y*n[5],this.ax1z=this.r1z*n[7]+-this.r1y*n[8],this.ay1x=-this.r1z*n[0]+this.r1x*n[2],this.ay1y=-this.r1z*n[3]+this.r1x*n[5],this.ay1z=-this.r1z*n[6]+this.r1x*n[8],this.az1x=this.r1y*n[0]+-this.r1x*n[1],this.az1y=this.r1y*n[3]+-this.r1x*n[4],this.az1z=this.r1y*n[6]+-this.r1x*n[7],this.ax2x=this.r2z*a[1]+-this.r2y*a[2],this.ax2y=this.r2z*a[4]+-this.r2y*a[5],this.ax2z=this.r2z*a[7]+-this.r2y*a[8],this.ay2x=-this.r2z*a[0]+this.r2x*a[2],this.ay2y=-this.r2z*a[3]+this.r2x*a[5],this.ay2z=-this.r2z*a[6]+this.r2x*a[8],this.az2x=this.r2y*a[0]+-this.r2x*a[1],this.az2y=this.r2y*a[3]+-this.r2x*a[4],this.az2z=this.r2y*a[6]+-this.r2x*a[7];var o=this.m1+this.m2,r=new Ui().set(o,0,0,0,o,0,0,0,o).elements;r[0]+=n[4]*this.r1z*this.r1z-(n[7]+n[5])*this.r1y*this.r1z+n[8]*this.r1y*this.r1y,r[1]+=(n[6]*this.r1y+n[5]*this.r1x)*this.r1z-n[3]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[2]+=(n[3]*this.r1y-n[4]*this.r1x)*this.r1z-n[6]*this.r1y*this.r1y+n[7]*this.r1x*this.r1y,r[3]+=(n[2]*this.r1y+n[7]*this.r1x)*this.r1z-n[1]*this.r1z*this.r1z-n[8]*this.r1x*this.r1y,r[4]+=n[0]*this.r1z*this.r1z-(n[6]+n[2])*this.r1x*this.r1z+n[8]*this.r1x*this.r1x,r[5]+=(n[1]*this.r1x-n[0]*this.r1y)*this.r1z-n[7]*this.r1x*this.r1x+n[6]*this.r1x*this.r1y,r[6]+=(n[1]*this.r1y-n[4]*this.r1x)*this.r1z-n[2]*this.r1y*this.r1y+n[5]*this.r1x*this.r1y,r[7]+=(n[3]*this.r1x-n[0]*this.r1y)*this.r1z-n[5]*this.r1x*this.r1x+n[2]*this.r1x*this.r1y,r[8]+=n[0]*this.r1y*this.r1y-(n[3]+n[1])*this.r1x*this.r1y+n[4]*this.r1x*this.r1x,r[0]+=a[4]*this.r2z*this.r2z-(a[7]+a[5])*this.r2y*this.r2z+a[8]*this.r2y*this.r2y,r[1]+=(a[6]*this.r2y+a[5]*this.r2x)*this.r2z-a[3]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[2]+=(a[3]*this.r2y-a[4]*this.r2x)*this.r2z-a[6]*this.r2y*this.r2y+a[7]*this.r2x*this.r2y,r[3]+=(a[2]*this.r2y+a[7]*this.r2x)*this.r2z-a[1]*this.r2z*this.r2z-a[8]*this.r2x*this.r2y,r[4]+=a[0]*this.r2z*this.r2z-(a[6]+a[2])*this.r2x*this.r2z+a[8]*this.r2x*this.r2x,r[5]+=(a[1]*this.r2x-a[0]*this.r2y)*this.r2z-a[7]*this.r2x*this.r2x+a[6]*this.r2x*this.r2y,r[6]+=(a[1]*this.r2y-a[4]*this.r2x)*this.r2z-a[2]*this.r2y*this.r2y+a[5]*this.r2x*this.r2y,r[7]+=(a[3]*this.r2x-a[0]*this.r2y)*this.r2z-a[5]*this.r2x*this.r2x+a[2]*this.r2x*this.r2y,r[8]+=a[0]*this.r2y*this.r2y-(a[3]+a[1])*this.r2x*this.r2y+a[4]*this.r2x*this.r2x;var c=1/(r[0]*(r[4]*r[8]-r[7]*r[5])+r[3]*(r[7]*r[2]-r[1]*r[8])+r[6]*(r[1]*r[5]-r[4]*r[2]));this.dd=new Ui().set(r[4]*r[8]-r[5]*r[7],r[2]*r[7]-r[1]*r[8],r[1]*r[5]-r[2]*r[4],r[5]*r[6]-r[3]*r[8],r[0]*r[8]-r[2]*r[6],r[2]*r[3]-r[0]*r[5],r[3]*r[7]-r[4]*r[6],r[1]*r[6]-r[0]*r[7],r[0]*r[4]-r[1]*r[3]).scaleEqual(c),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var y=R.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);y>.005?(y=(.005-y)/y*e*.05,this.velx*=y,this.vely*=y,this.velz*=y):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,e=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,n=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,a=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,o=e*t[0]+n*t[1]+a*t[2],r=e*t[3]+n*t[4]+a*t[5],c=e*t[6]+n*t[7]+a*t[8];this.impx+=o,this.impy+=r,this.impz+=c,this.l1.x+=o*this.m1,this.l1.y+=r*this.m1,this.l1.z+=c*this.m1,this.a1.x+=o*this.ax1x+r*this.ay1x+c*this.az1x,this.a1.y+=o*this.ax1y+r*this.ay1y+c*this.az1y,this.a1.z+=o*this.ax1z+r*this.ay1z+c*this.az1z,this.l2.x-=o*this.m2,this.l2.y-=r*this.m2,this.l2.z-=c*this.m2,this.a2.x-=o*this.ax2x+r*this.ay2x+c*this.az2x,this.a2.y-=o*this.ax2y+r*this.ay2y+c*this.az2y,this.a2.z-=o*this.ax2z+r*this.ay2z+c*this.az2z}}),Object.assign(an.prototype,{Rotational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.limitMotor1.frequency,r=this.limitMotor2.frequency,c=this.limitMotor3.frequency,y=o>0,p=r>0,d=c>0,m=this.lowerLimit1<=this.upperLimit1,S=this.lowerLimit2<=this.upperLimit2,x=this.lowerLimit3<=this.upperLimit3,g=this.limitMotor1.angle;m?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-g):g>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-g):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),y||(this.limitVelocity1>.02?this.limitVelocity1-=.02:this.limitVelocity1<-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var P=this.limitMotor2.angle;S?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-P):P>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-P):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),p||(this.limitVelocity2>.02?this.limitVelocity2-=.02:this.limitVelocity2<-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var I=this.limitMotor3.angle;if(x?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-I):I<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-I):I>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-I):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),d||(this.limitVelocity3>.02?this.limitVelocity3-=.02:this.limitVelocity3<-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||y)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||p)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||d)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,y&&this.limitState1!=2){var D=6.2831853*o,nt=D*D*t,M=e/(nt+2*this.limitMotor1.dampingRatio*D);this.cfm1=this.kv00*M,this.limitVelocity1*=nt*M}else this.cfm1=0,this.limitVelocity1*=.05*e;p&&this.limitState2!=2?(M=e/((nt=(D=6.2831853*r)*D*t)+2*this.limitMotor2.dampingRatio*D),this.cfm2=this.kv11*M,this.limitVelocity2*=nt*M):(this.cfm2=0,this.limitVelocity2*=.05*e),d&&this.limitState3!=2?(M=e/((nt=(D=6.2831853*c)*D*t)+2*this.limitMotor3.dampingRatio*D),this.cfm3=this.kv22*M,this.limitVelocity3*=nt*M):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var tt=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*tt,this.d01=(this.k02*this.k21-this.k01*this.k22)*tt,this.d02=(this.k01*this.k12-this.k02*this.k11)*tt,this.d10=(this.k12*this.k20-this.k10*this.k22)*tt,this.d11=(this.k00*this.k22-this.k02*this.k20)*tt,this.d12=(this.k02*this.k10-this.k00*this.k12)*tt,this.d20=(this.k10*this.k21-this.k11*this.k20)*tt,this.d21=(this.k01*this.k20-this.k00*this.k21)*tt,this.d22=(this.k00*this.k11-this.k01*this.k10)*tt,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var it=this.limitImpulse1+this.motorImpulse1,ct=this.limitImpulse2+this.motorImpulse2,ut=this.limitImpulse3+this.motorImpulse3;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z;this.limitVelocity3=30;var a=t*this.ax1+e*this.ay1+n*this.az1-this.limitVelocity1,o=t*this.ax2+e*this.ay2+n*this.az2-this.limitVelocity2,r=t*this.ax3+e*this.ay3+n*this.az3-this.limitVelocity3,c=a*this.d00+o*this.d01+r*this.d02,y=a*this.d10+o*this.d11+r*this.d12,p=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=c,this.limitImpulse2+=y,this.limitImpulse3+=p,this.a1.x+=c*this.a1x1+y*this.a1x2+p*this.a1x3,this.a1.y+=c*this.a1y1+y*this.a1y2+p*this.a1y3,this.a1.z+=c*this.a1z1+y*this.a1z2+p*this.a1z3,this.a2.x-=c*this.a2x1+y*this.a2x2+p*this.a2x3,this.a2.y-=c*this.a2y1+y*this.a2y2+p*this.a2y3,this.a2.z-=c*this.a2z1+y*this.a2z2+p*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,c=this.motorImpulse1,y=this.motorImpulse2,p=this.motorImpulse3,d=0,m=0,S=0;this.enableMotor1&&(d=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=d,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),d=this.motorImpulse1-c),this.enableMotor2&&(m=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=m,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),m=this.motorImpulse2-y),this.enableMotor3&&(S=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=S,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),S=this.motorImpulse3-p),a+=d*this.kv00+m*this.k01+S*this.k02,o+=d*this.k10+m*this.kv11+S*this.k12,r+=d*this.k20+m*this.k21+S*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,I=a*this.d00+o*this.d01+r*this.d02,D=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=I,this.limitImpulse2+=D,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(I=-x)*this.k10,r+=I*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(D=-g)*this.k01,r+=D*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),D=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),I=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),I=(this.k11*a+-this.k01*o)*M,D=(-this.k10*a+this.k00*o)*M;break;case 5:D=o/this.k11;break;case 6:I=a/this.k00}this.limitImpulse1=I+x,this.limitImpulse2=D+g,this.limitImpulse3=nt+P;var it=d+I,ct=m+D,ut=S+nt;this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3,t=this.a2.x-this.a1.x,e=this.a2.y-this.a1.y,n=this.a2.z-this.a1.z,o=t*this.ax2+e*this.ay2+n*this.az2}}),on.prototype=Object.assign(Object.create(je.prototype),{constructor:on,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var n=R.acosClamp(R.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),R.dotVectors(this.nor,this.tmp)<0?this.limitMotor.angle=-n:this.limitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=R.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=R.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.lc.preSolve(t,e)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}}),rn.prototype=Object.assign(Object.create(je.prototype),{constructor:rn,preSolve:function(t,e){this.updateAnchorPoints(),this.lc.preSolve(t,e)},solve:function(){this.lc.solve()},postSolve:function(){}}),Object.assign(In.prototype,{TranslationalConstraint:!0,preSolve:function(t,e){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,c=this.p2.z-this.p1.z,y=o*this.ax+r*this.ay+c*this.az,p=this.limitMotor.frequency,d=p>0;(d&&y>20||y<-20)&&(d=!1),this.lowerLimit<=this.upperLimit?(this.lowerLimit==this.upperLimit?(this.limitState!=0&&(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-y,d||(y=this.lowerLimit)):y<this.lowerLimit?(this.limitState!=-1&&(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-y,d||(y=this.lowerLimit)):y>this.upperLimit?(this.limitState!=1&&(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-y,d||(y=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),d||(this.limitVelocity>.005?this.limitVelocity-=.005:this.limitVelocity<-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&&(this.limitState!=0||d)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var m=y*this.ax,S=y*this.ay,x=y*this.az,g=this.m1/(this.m1+this.m2),P=1-g;if(this.r1x=this.r1.x+m*g,this.r1y=this.r1.y+S*g,this.r1z=this.r1.z+x*g,this.r2x=this.r2.x-m*P,this.r2y=this.r2.y-S*P,this.r2z=this.r2.z-x*P,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,d&&this.limitState!=2){var I=6.2831853*p,D=I*I*t,nt=e/(D+2*this.limitMotor.dampingRatio*I);this.cfm=this.motorDenom*nt,this.limitVelocity*=D*nt}else this.cfm=0,this.limitVelocity*=.05*e;this.invDenom=1/(this.motorDenom+this.cfm);var M=this.limitImpulse+this.motorImpulse;this.l1.x+=M*this.l1x,this.l1.y+=M*this.l1y,this.l1.z+=M*this.l1z,this.a1.x+=M*this.a1x,this.a1.y+=M*this.a1y,this.a1.z+=M*this.a1z,this.l2.x-=M*this.l2x,this.l2.y-=M*this.l2y,this.l2.z-=M*this.l2z,this.a2.x-=M*this.a2x,this.a2.y-=M*this.a2y,this.a2.z-=M*this.a2z},solve:function(){var t,e,n=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(n-this.motorSpeed)*this.invMotorDenom;var a=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse>this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse<-this.maxMotorImpulse&&(this.motorImpulse=-this.maxMotorImpulse),n-=(t=this.motorImpulse-a)*this.motorDenom}else t=0;if(this.limitState!=2){e=(n-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var o=this.limitImpulse;this.limitImpulse+=e,this.limitImpulse*this.limitState<0&&(this.limitImpulse=0),e=this.limitImpulse-o}else e=0;var r=e+t;this.l1.x+=r*this.l1x,this.l1.y+=r*this.l1y,this.l1.z+=r*this.l1z,this.a1.x+=r*this.a1x,this.a1.y+=r*this.a1y,this.a1.z+=r*this.a1z,this.l2.x-=r*this.l2x,this.l2.y-=r*this.l2y,this.l2.z-=r*this.l2z,this.a2.x-=r*this.a2x,this.a2.y-=r*this.a2y,this.a2.z-=r*this.a2z}}),hn.prototype=Object.assign(Object.create(je.prototype),{constructor:hn,preSolve:function(t,e){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(t,e)},solve:function(){this.t.solve()},postSolve:function(){}}),Object.assign(Hn.prototype,{AngularConstraint:!0,preSolve:function(t,e){var n,a,o;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),n=1/((o=new Ui().add(this.ii1,this.ii2).elements)[0]*(o[4]*o[8]-o[7]*o[5])+o[3]*(o[7]*o[2]-o[1]*o[8])+o[6]*(o[1]*o[5]-o[4]*o[2])),this.dd=new Ui().set(o[4]*o[8]-o[5]*o[7],o[2]*o[7]-o[1]*o[8],o[1]*o[5]-o[2]*o[4],o[5]*o[6]-o[3]*o[8],o[0]*o[8]-o[2]*o[6],o[2]*o[3]-o[0]*o[5],o[3]*o[7]-o[4]*o[6],o[1]*o[6]-o[0]*o[7],o[0]*o[4]-o[1]*o[3]).multiplyScalar(n),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),n=2*this.relativeOrientation.w,this.vel.copy(this.relativeOrientation).multiplyScalar(n),(a=this.vel.length())>.02?(a=(.02-a)/a*e*.05,this.vel.multiplyScalar(a)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var t=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(t).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}}),Object.assign(cs.prototype,{Translational3Constraint:!0,preSolve:function(t,e){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1>0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2>0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3>0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var n=this.i1.elements,a=this.i2.elements;this.i1e00=n[0],this.i1e01=n[1],this.i1e02=n[2],this.i1e10=n[3],this.i1e11=n[4],this.i1e12=n[5],this.i1e20=n[6],this.i1e21=n[7],this.i1e22=n[8],this.i2e00=a[0],this.i2e01=a[1],this.i2e02=a[2],this.i2e10=a[3],this.i2e11=a[4],this.i2e12=a[5],this.i2e20=a[6],this.i2e21=a[7],this.i2e22=a[8];var o=this.p2.x-this.p1.x,r=this.p2.y-this.p1.y,c=this.p2.z-this.p1.z,y=o*this.ax1+r*this.ay1+c*this.az1,p=o*this.ax2+r*this.ay2+c*this.az2,d=o*this.ax3+r*this.ay3+c*this.az3,m=this.limitMotor1.frequency,S=this.limitMotor2.frequency,x=this.limitMotor3.frequency,g=m>0,P=S>0,I=x>0,D=this.lowerLimit1<=this.upperLimit1,nt=this.lowerLimit2<=this.upperLimit2,M=this.lowerLimit3<=this.upperLimit3;(g&&y>20||y<-20)&&(g=!1),(P&&p>20||p<-20)&&(P=!1),(I&&d>20||d<-20)&&(I=!1),D?(this.lowerLimit1==this.upperLimit1?(this.limitState1!=0&&(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-y,g||(y=this.lowerLimit1)):y<this.lowerLimit1?(this.limitState1!=-1&&(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-y,g||(y=this.lowerLimit1)):y>this.upperLimit1?(this.limitState1!=1&&(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-y,g||(y=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),g||(this.limitVelocity1>.005?this.limitVelocity1-=.005:this.limitVelocity1<-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),nt?(this.lowerLimit2==this.upperLimit2?(this.limitState2!=0&&(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-p,P||(p=this.lowerLimit2)):p<this.lowerLimit2?(this.limitState2!=-1&&(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-p,P||(p=this.lowerLimit2)):p>this.upperLimit2?(this.limitState2!=1&&(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-p,P||(p=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),P||(this.limitVelocity2>.005?this.limitVelocity2-=.005:this.limitVelocity2<-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),M?(this.lowerLimit3==this.upperLimit3?(this.limitState3!=0&&(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-d,I||(d=this.lowerLimit3)):d<this.lowerLimit3?(this.limitState3!=-1&&(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-d,I||(d=this.lowerLimit3)):d>this.upperLimit3?(this.limitState3!=1&&(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-d,I||(d=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),I||(this.limitVelocity3>.005?this.limitVelocity3-=.005:this.limitVelocity3<-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&&(this.limitState1!=0||g)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&&(this.limitState2!=0||P)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&&(this.limitState3!=0||I)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var tt=y*this.ax1+p*this.ax2+d*this.ax2,it=y*this.ay1+p*this.ay2+d*this.ay2,ct=y*this.az1+p*this.az2+d*this.az2,ut=this.m2/(this.m1+this.m2);this.weight>=0&&(ut=this.weight);var st=1-ut;this.r1x=this.r1.x+tt*ut,this.r1y=this.r1.y+it*ut,this.r1z=this.r1.z+ct*ut,this.r2x=this.r2.x-tt*st,this.r2y=this.r2.y-it*st,this.r2z=this.r2.z-ct*st,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var kt=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*kt,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*kt,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*kt,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*kt,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*kt,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*kt,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*kt,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*kt,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*kt,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,g&&this.limitState1!=2){var G=6.2831853*m,rt=G*G*t,pt=e/(rt+2*this.limitMotor1.dampingRatio*G);this.cfm1=this.kv00*pt,this.limitVelocity1*=rt*pt}else this.cfm1=0,this.limitVelocity1*=.05*e;P&&this.limitState2!=2?(pt=e/((rt=(G=6.2831853*S)*G*t)+2*this.limitMotor2.dampingRatio*G),this.cfm2=this.kv11*pt,this.limitVelocity2*=rt*pt):(this.cfm2=0,this.limitVelocity2*=.05*e),I&&this.limitState3!=2?(pt=e/((rt=(G=6.2831853*x)*G*t)+2*this.limitMotor3.dampingRatio*G),this.cfm3=this.kv22*pt,this.limitVelocity3*=rt*pt):(this.cfm3=0,this.limitVelocity3*=.05*e),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var Q=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*Q,this.d01=(this.k02*this.k21-this.k01*this.k22)*Q,this.d02=(this.k01*this.k12-this.k02*this.k11)*Q,this.d10=(this.k12*this.k20-this.k10*this.k22)*Q,this.d11=(this.k00*this.k22-this.k02*this.k20)*Q,this.d12=(this.k02*this.k10-this.k00*this.k12)*Q,this.d20=(this.k10*this.k21-this.k11*this.k20)*Q,this.d21=(this.k01*this.k20-this.k00*this.k21)*Q,this.d22=(this.k00*this.k11-this.k01*this.k10)*Q;var ht=this.limitImpulse1+this.motorImpulse1,dt=this.limitImpulse2+this.motorImpulse2,Ht=this.limitImpulse3+this.motorImpulse3;this.l1.x+=ht*this.l1x1+dt*this.l1x2+Ht*this.l1x3,this.l1.y+=ht*this.l1y1+dt*this.l1y2+Ht*this.l1y3,this.l1.z+=ht*this.l1z1+dt*this.l1z2+Ht*this.l1z3,this.a1.x+=ht*this.a1x1+dt*this.a1x2+Ht*this.a1x3,this.a1.y+=ht*this.a1y1+dt*this.a1y2+Ht*this.a1y3,this.a1.z+=ht*this.a1z1+dt*this.a1z2+Ht*this.a1z3,this.l2.x-=ht*this.l2x1+dt*this.l2x2+Ht*this.l2x3,this.l2.y-=ht*this.l2y1+dt*this.l2y2+Ht*this.l2y3,this.l2.z-=ht*this.l2z1+dt*this.l2z2+Ht*this.l2z3,this.a2.x-=ht*this.a2x1+dt*this.a2x2+Ht*this.a2x3,this.a2.y-=ht*this.a2y1+dt*this.a2y2+Ht*this.a2y3,this.a2.z-=ht*this.a2z1+dt*this.a2z2+Ht*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,e=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,n=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,a=t*this.ax1+e*this.ay1+n*this.az1,o=t*this.ax2+e*this.ay2+n*this.az2,r=t*this.ax3+e*this.ay3+n*this.az3,c=this.motorImpulse1,y=this.motorImpulse2,p=this.motorImpulse3,d=0,m=0,S=0;this.enableMotor1&&(d=(a-this.motorSpeed1)*this.dv00,this.motorImpulse1+=d,this.motorImpulse1>this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1<-this.maxMotorImpulse1&&(this.motorImpulse1=-this.maxMotorImpulse1),d=this.motorImpulse1-c),this.enableMotor2&&(m=(o-this.motorSpeed2)*this.dv11,this.motorImpulse2+=m,this.motorImpulse2>this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2<-this.maxMotorImpulse2&&(this.motorImpulse2=-this.maxMotorImpulse2),m=this.motorImpulse2-y),this.enableMotor3&&(S=(r-this.motorSpeed3)*this.dv22,this.motorImpulse3+=S,this.motorImpulse3>this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3<-this.maxMotorImpulse3&&(this.motorImpulse3=-this.maxMotorImpulse3),S=this.motorImpulse3-p),a+=d*this.kv00+m*this.k01+S*this.k02,o+=d*this.k10+m*this.kv11+S*this.k12,r+=d*this.k20+m*this.k21+S*this.kv22,a-=this.limitVelocity1+this.limitImpulse1*this.cfm1,o-=this.limitVelocity2+this.limitImpulse2*this.cfm2,r-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var x=this.limitImpulse1,g=this.limitImpulse2,P=this.limitImpulse3,I=a*this.d00+o*this.d01+r*this.d02,D=a*this.d10+o*this.d11+r*this.d12,nt=a*this.d20+o*this.d21+r*this.d22;this.limitImpulse1+=I,this.limitImpulse2+=D,this.limitImpulse3+=nt;var M,tt=0;switch((this.limitState1==2||this.limitImpulse1*this.limitState1<0)&&(o+=(I=-x)*this.k10,r+=I*this.k20,tt|=1),(this.limitState2==2||this.limitImpulse2*this.limitState2<0)&&(a+=(D=-g)*this.k01,r+=D*this.k21,tt|=2),(this.limitState3==2||this.limitImpulse3*this.limitState3<0)&&(a+=(nt=-P)*this.k02,o+=nt*this.k12,tt|=4),tt){case 1:M=1/(this.k11*this.k22-this.k12*this.k21),D=(this.k22*o+-this.k12*r)*M,nt=(-this.k21*o+this.k11*r)*M;break;case 2:M=1/(this.k00*this.k22-this.k02*this.k20),I=(this.k22*a+-this.k02*r)*M,nt=(-this.k20*a+this.k00*r)*M;break;case 3:nt=r/this.k22;break;case 4:M=1/(this.k00*this.k11-this.k01*this.k10),I=(this.k11*a+-this.k01*o)*M,D=(-this.k10*a+this.k00*o)*M;break;case 5:D=o/this.k11;break;case 6:I=a/this.k00}this.limitImpulse1=x+I,this.limitImpulse2=g+D,this.limitImpulse3=P+nt;var it=d+I,ct=m+D,ut=S+nt;this.l1.x+=it*this.l1x1+ct*this.l1x2+ut*this.l1x3,this.l1.y+=it*this.l1y1+ct*this.l1y2+ut*this.l1y3,this.l1.z+=it*this.l1z1+ct*this.l1z2+ut*this.l1z3,this.a1.x+=it*this.a1x1+ct*this.a1x2+ut*this.a1x3,this.a1.y+=it*this.a1y1+ct*this.a1y2+ut*this.a1y3,this.a1.z+=it*this.a1z1+ct*this.a1z2+ut*this.a1z3,this.l2.x-=it*this.l2x1+ct*this.l2x2+ut*this.l2x3,this.l2.y-=it*this.l2y1+ct*this.l2y2+ut*this.l2y3,this.l2.z-=it*this.l2z1+ct*this.l2z2+ut*this.l2z3,this.a2.x-=it*this.a2x1+ct*this.a2x2+ut*this.a2x3,this.a2.y-=it*this.a2y1+ct*this.a2y2+ut*this.a2y3,this.a2.z-=it*this.a2z1+ct*this.a2z2+ut*this.a2z3}}),ms.prototype=Object.assign(Object.create(je.prototype),{constructor:ms,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}}),ln.prototype=Object.assign(Object.create(je.prototype),{constructor:ln,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var n=R.acosClamp(R.dotVectors(this.an1,this.an2));R.dotVectors(this.nor,this.tmp)<0?this.rotationalLimitMotor.angle=-n:this.rotationalLimitMotor.angle=n,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=R.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=R.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),cn.prototype=Object.assign(Object.create(je.prototype),{constructor:cn,preSolve:function(t,e){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=R.dotVectors(this.ax1,this.ax2);var n=R.dotVectors(this.an1,this.ax2);R.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))<0?this.rotationalLimitMotor1.angle=-n:this.rotationalLimitMotor1.angle=n,n=R.dotVectors(this.an2,this.ax1),R.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))<0?this.rotationalLimitMotor2.angle=-n:this.rotationalLimitMotor2.angle=n,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(t,e),this.t3.preSolve(t,e)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),zn.prototype={constructor:zn,reset:function(t,e){this.body1=t.parent,this.body2=e.parent,this.numPoints=0},addPointVec:function(t,e,n,a){var o=this.points[this.numPoints++];o.position.copy(t),o.localPoint1.sub(t,this.body1.position).applyMatrix3(this.body1.rotation),o.localPoint2.sub(t,this.body2.position).applyMatrix3(this.body2.rotation),o.normal.copy(e),a&&o.normal.negate(),o.normalImpulse=0,o.penetration=n,o.warmStarted=!1},addPoint:function(t,e,n,a,o,r,c,y){var p=this.points[this.numPoints++];p.position.set(t,e,n),p.localPoint1.sub(p.position,this.body1.position).applyMatrix3(this.body1.rotation),p.localPoint2.sub(p.position,this.body2.position).applyMatrix3(this.body2.rotation),p.normalImpulse=0,p.normal.set(a,o,r),y&&p.normal.negate(),p.penetration=c,p.warmStarted=!1}},pn.prototype=Object.assign(Object.create(Us.prototype),{constructor:pn,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(t,e){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var n=this.m1+this.m2;this.num=this.manifold.numPoints;for(var a,o,r,c,y,p,d,m=this.cs,S=0;S<this.num;S++)a=this.ps[S],this.tmpP1.sub(a.position,this.p1),this.tmpP2.sub(a.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),m.norImp=a.normalImpulse,m.tanImp=a.tangentImpulse,m.binImp=a.binormalImpulse,m.nor.copy(a.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),o=R.dotVectors(m.nor,this.tmp),m.tan.set(this.tmp.x-o*m.nor.x,this.tmp.y-o*m.nor.y,this.tmp.z-o*m.nor.z),R.dotVectors(m.tan,m.tan)<=.04&&m.tan.tangent(m.nor),m.tan.normalize(),m.bin.crossVectors(m.nor,m.tan),m.norU1.scale(m.nor,this.m1),m.norU2.scale(m.nor,this.m2),m.tanU1.scale(m.tan,this.m1),m.tanU2.scale(m.tan,this.m2),m.binU1.scale(m.bin,this.m1),m.binU2.scale(m.bin,this.m2),m.norT1.crossVectors(this.tmpP1,m.nor),m.tanT1.crossVectors(this.tmpP1,m.tan),m.binT1.crossVectors(this.tmpP1,m.bin),m.norT2.crossVectors(this.tmpP2,m.nor),m.tanT2.crossVectors(this.tmpP2,m.tan),m.binT2.crossVectors(this.tmpP2,m.bin),p=this.i1,d=this.i2,m.norTU1.copy(m.norT1).applyMatrix3(p,!0),m.tanTU1.copy(m.tanT1).applyMatrix3(p,!0),m.binTU1.copy(m.binT1).applyMatrix3(p,!0),m.norTU2.copy(m.norT2).applyMatrix3(d,!0),m.tanTU2.copy(m.tanT2).applyMatrix3(d,!0),m.binTU2.copy(m.binT2).applyMatrix3(d,!0),this.tmpC1.crossVectors(m.norTU1,this.tmpP1),this.tmpC2.crossVectors(m.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.norDen=1/(n+R.dotVectors(m.nor,this.tmp)),this.tmpC1.crossVectors(m.tanTU1,this.tmpP1),this.tmpC2.crossVectors(m.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.tanDen=1/(n+R.dotVectors(m.tan,this.tmp)),this.tmpC1.crossVectors(m.binTU1,this.tmpP1),this.tmpC2.crossVectors(m.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),m.binDen=1/(n+R.dotVectors(m.bin,this.tmp)),a.warmStarted?(r=a.normalImpulse,this.lv1.addScaledVector(m.norU1,r),this.av1.addScaledVector(m.norTU1,r),this.lv2.subScaledVector(m.norU2,r),this.av2.subScaledVector(m.norTU2,r),m.norImp=r,m.tanImp=0,m.binImp=0,o=0):(m.norImp=0,m.tanImp=0,m.binImp=0),o>-1&&(o=0),(c=this.restitution*-o)<(y=-(a.penetration+.005)*e*.05)&&(c=y),m.norTar=c,m.last=S==this.num-1,m=m.next},solve:function(){var t,e,n,a,o,r,c,y,p;this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var d=this.cs;o=d.norImp,r=d.tanImp,c=d.binImp,y=-o*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),t=r,n=c,(p=(r+=e=(R.dotVectors(this.tmp,d.tan)+R.dotVectors(this.tmpav2,d.tanT2)-R.dotVectors(this.tmpav1,d.tanT1))*d.tanDen)*r+(c+=a=(R.dotVectors(this.tmp,d.bin)+R.dotVectors(this.tmpav2,d.binT2)-R.dotVectors(this.tmpav1,d.binT1))*d.binDen)*c)>y*y&&(r*=p=y/R.sqrt(p),c*=p),e=r-t,a=c-n,this.tmp.set(d.tanU1.x*e+d.binU1.x*a,d.tanU1.y*e+d.binU1.y*a,d.tanU1.z*e+d.binU1.z*a),this.tmplv1.addEqual(this.tmp),this.tmp.set(d.tanTU1.x*e+d.binTU1.x*a,d.tanTU1.y*e+d.binTU1.y*a,d.tanTU1.z*e+d.binTU1.z*a),this.tmpav1.addEqual(this.tmp),this.tmp.set(d.tanU2.x*e+d.binU2.x*a,d.tanU2.y*e+d.binU2.y*a,d.tanU2.z*e+d.binU2.z*a),this.tmplv2.subEqual(this.tmp),this.tmp.set(d.tanTU2.x*e+d.binTU2.x*a,d.tanTU2.y*e+d.binTU2.y*a,d.tanTU2.z*e+d.binTU2.z*a),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),t=o,(o+=e=(R.dotVectors(this.tmp,d.nor)+R.dotVectors(this.tmpav2,d.norT2)-R.dotVectors(this.tmpav1,d.norT1)-d.norTar)*d.norDen)>0&&(o=0),e=o-t,this.tmplv1.addScaledVector(d.norU1,e),this.tmpav1.addScaledVector(d.norTU1,e),this.tmplv2.subScaledVector(d.norU2,e),this.tmpav2.subScaledVector(d.norTU2,e),d.norImp=o,d.tanImp=r,d.binImp=c,!d.last;)d=d.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var t,e=this.cs,n=this.num;n--;)(t=this.ps[n]).normal.copy(e.nor),t.tangent.copy(e.tan),t.binormal.copy(e.bin),t.normalImpulse=e.norImp,t.tangentImpulse=e.tanImp,t.binormalImpulse=e.binImp,t.normalDenominator=e.norDen,t.tangentDenominator=e.tanDen,t.binormalDenominator=e.binDen,e=e.next}}),Object.assign(Zs.prototype,{Contact:!0,mixRestitution:function(t,e){return R.sqrt(t*e)},mixFriction:function(t,e){return R.sqrt(t*e)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,e=t;e--;){var n=this.buffer[e],a=this.points[e];n.lp1X=a.localPoint1.x,n.lp1Y=a.localPoint1.y,n.lp1Z=a.localPoint1.z,n.lp2X=a.localPoint2.x,n.lp2Y=a.localPoint2.y,n.lp2Z=a.localPoint2.z,n.impulse=a.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var o=this.manifold.numPoints;if(o==0)return this.touching=!1,this.close=!1,void(this.dist=R.INF);for((this.touching||this.dist<.001)&&(this.close=!0),this.touching=!0,e=o;e--;){for(var r=(a=this.points[e]).localPoint1.x,c=a.localPoint1.y,y=a.localPoint1.z,p=a.localPoint2.x,d=a.localPoint2.y,m=a.localPoint2.z,S=-1,x=4e-4,g=t;g--;){var P=(n=this.buffer[g]).lp1X-r,I=n.lp1Y-c,D=n.lp1Z-y,nt=P*P+I*I+D*D,M=(P=n.lp2X-p)*P+(I=n.lp2Y-d)*I+(D=n.lp2Z-m)*D;nt<M?nt<x&&(x=nt,S=g):M<x&&(x=M,S=g),x<this.dist&&(this.dist=x)}if(S!=-1){var tt=this.buffer[S];this.buffer[S]=this.buffer[--t],this.buffer[t]=tt,a.normalImpulse=tt.impulse,a.warmStarted=!0}else a.normalImpulse=0,a.warmStarted=!1}},attach:function(t,e){this.shape1=t,this.shape2=e,this.body1=t.parent,this.body2=e.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=e,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,t.contactLink!=null?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,e.contactLink!=null?(this.s2Link.next=e.contactLink).prev=this.s2Link:this.s2Link.next=null,e.contactLink=this.s2Link,e.numContacts++,this.b1Link.shape=e,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,this.body1.contactLink!=null?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,this.body2.contactLink!=null?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&&this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,e=this.s1Link.next;t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape1.contactLink==this.s1Link&&(this.shape1.contactLink=e),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,e=this.s2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.shape2.contactLink==this.s2Link&&(this.shape2.contactLink=e),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,e=this.b1Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body1.contactLink==this.b1Link&&(this.body1.contactLink=e),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,e=this.b2Link.next,t!==null&&(t.next=e),e!==null&&(e.prev=t),this.body2.contactLink==this.b2Link&&(this.body2.contactLink=e),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}}),Object.assign(Ns.prototype,{setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(t){t.parent&&ce("RigidBody","It is not possible that you add a shape which already has an associated body."),this.shapes!=null&&((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&&this.parent.addShape(t),this.numShapes++},removeShape:function(t){var e=t;if(e.parent==this){var n=e.prev,a=e.next;n!=null&&(n.next=a),a!=null&&(a.prev=n),this.shapes==e&&(this.shapes=a),e.prev=null,e.next=null,e.parent=null,this.parent&&this.parent.removeShape(e),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,e){var n=e===void 0||e;this.type=t||2,this.isDynamic=this.type===1,this.isStatic=this.type===2,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var a=new Ui,o=new $,r=this.shapes;r!==null;r=r.next){r.calculateMassInfo(this.massInfo);var c=this.massInfo.mass;o.addScaledVector(r.relativePosition,c),this.mass+=c,this.rotateInertia(r.relativeRotation,this.massInfo.inertia,a),this.localInertia.add(a),this.localInertia.addOffset(c,r.relativePosition)}if(this.inverseMass=1/this.mass,o.scaleEqual(this.inverseMass),n){for(this.position.add(o),r=this.shapes;r!==null;r=r.next)r.relativePosition.subEqual(o);this.localInertia.subOffset(this.mass,o)}this.inverseLocalInertia.invert(this.localInertia),this.type===2&&(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&&this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;t!=null;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var e=this.jointLink;e!=null;)e.body.sleepTime=0,e.body.sleeping=!1,e=e.next;for(var n=this.shapes;n!=null;n=n.next)n.updateProxy()}},sleep:function(){if(this.allowSleep&&!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;t!=null;t=t.next)t.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&&this.awake()},isLonely:function(){return this.numJoints==0&&this.numContacts==0},updatePosition:function(t){switch(this.type){case 2:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&&(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&&(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case 1:this.isKinematic&&(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&&(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/t),this.controlPos=!1),this.controlRot&&(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t),this.updateMesh();break;default:ce("RigidBody","Invalid type.")}this.syncShapes(),this.updateMesh()},getAxis:function(){return new $(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(t,e,n){this.tmpInertia.multiplyMatrices(t,e),n.multiplyMatrices(this.tmpInertia,t,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var t=this.shapes;t!=null;t=t.next)t.position.copy(t.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),t.rotation.multiplyMatrices(this.rotation,t.relativeRotation),t.updateProxy()},applyImpulse:function(t,e){this.linearVelocity.addScaledVector(e,this.inverseMass);var n=new $().copy(t).sub(this.position).cross(e).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(n)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(t){this.newOrientation=new Gi().setFromEuler(t.x*R.degtorad,t.y*R.degtorad,t.z*R.degtorad),this.controlRot=!0},resetPosition:function(t,e,n){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,e,n).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new Gi(t.x,t.y,t.z,t.w),this.awake()},resetRotation:function(t,e,n){this.angularVelocity.set(0,0,0),this.orientation=new Gi().setFromEuler(t*R.degtorad,e*R.degtorad,n*R.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(t){this.mesh=t,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),this.mesh!==null&&(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}}),Object.assign(ds.prototype,{BroadPhase:!0,createProxy:function(t){ce("BroadPhase","Inheritance error.")},addProxy:function(t){ce("BroadPhase","Inheritance error.")},removeProxy:function(t){ce("BroadPhase","Inheritance error.")},isAvailablePair:function(t,e){var n,a=t.parent,o=e.parent;if(a==o||!a.isDynamic&&!o.isDynamic||!(t.belongsTo&e.collidesWith)||!(e.belongsTo&t.collidesWith))return!1;for(n=a.numJoints<o.numJoints?a.jointLink:o.jointLink;n!==null;){var r=n.joint;if(!r.allowCollision&&(r.body1==a&&r.body2==o||r.body1==o&&r.body2==a))return!1;n=n.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(t,e){var n=new mn(t,e);this.pairs.push(n),this.numPairs++}});var dn=0;function ts(t){this.shape=t,this.aabb=t.aabb}function us(t){ts.call(this,t),this.id=dn++}function $s(){ds.call(this),this.types=et,this.proxies=[]}function Ms(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}function Bs(t,e){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=e,this.value=0}function Ks(t,e){ts.call(this,e),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new Bs(this,!1),this.max[0]=new Bs(this,!0),this.min[1]=new Bs(this,!1),this.max[1]=new Bs(this,!0),this.min[2]=new Bs(this,!1),this.max[2]=new Bs(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}function Ys(){ds.call(this),this.types=Z,this.numElementsD=0,this.numElementsS=0,this.axesD=[new Ms,new Ms,new Ms],this.axesS=[new Ms,new Ms,new Ms],this.index1=0,this.index2=1}function fn(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new hs}function wn(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new hs}function yn(t){ts.call(this,t),this.leaf=new fn,this.leaf.proxy=this}function vn(){ds.call(this),this.types=Ot,this.tree=new wn,this.stack=[],this.leaves=[],this.numLeaves=0}function Pe(){this.flip=!1}function _n(){Pe.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}function bn(t){Pe.call(this),this.flip=t}function xn(){Pe.call(this)}function _e(t){Pe.call(this),this.flip=t}function Qs(t){Pe.call(this),this.flip=t}function Se(){Pe.call(this)}function Ge(t){Pe.call(this),this.flip=t,this.n=new $,this.p=new $}function Xs(t){Pe.call(this),this.flip=t,this.n=new $,this.p=new $,this.dix=new $,this.diy=new $,this.diz=new $,this.cc=new $,this.cc2=new $}function Tn(t){switch(t instanceof Object||(t={}),this.scale=t.worldscale||1,this.invScale=1/this.scale,this.timeStep=t.timestep||.01666,this.timerate=1e3*this.timeStep,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=t.iterations||8,t.broadphase||2){case 1:this.broadPhase=new $s;break;case 2:default:this.broadPhase=new Ys;break;case 3:this.broadPhase=new vn}this.Btypes=["None","BruteForce","Sweep & Prune","Bounding Volume Tree"],this.broadPhaseType=this.Btypes[t.broadphase||2],this.performance=null,this.isStat=t.info!==void 0&&t.info,this.isStat&&(this.performance=new As(this)),this.enableRandomizer=t.random===void 0||t.random,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new $(0,-9.8,0),t.gravity!==void 0&&this.gravity.fromArray(t.gravity),this.detectors=[],this.detectors.length=5;for(var e=5;e--;)this.detectors[e]=[],this.detectors[e].length=5;this.detectors[It][It]=new Se,this.detectors[It][ei]=new _e(!1),this.detectors[ei][It]=new _e(!0),this.detectors[ei][ei]=new _n,this.detectors[vi][vi]=new xn,this.detectors[vi][ei]=new bn(!0),this.detectors[ei][vi]=new bn(!1),this.detectors[vi][It]=new Qs(!0),this.detectors[It][vi]=new Qs(!1),this.detectors[Bi][It]=new Ge(!0),this.detectors[It][Bi]=new Ge(!1),this.detectors[Bi][ei]=new Xs(!0),this.detectors[ei][Bi]=new Xs(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(ts.prototype,{Proxy:!0,update:function(){ce("Proxy","Inheritance error.")}}),us.prototype=Object.assign(Object.create(ts.prototype),{constructor:us,update:function(){}}),$s.prototype=Object.assign(Object.create(ds.prototype),{constructor:$s,createProxy:function(t){return new us(t)},addProxy:function(t){this.proxies.push(t)},removeProxy:function(t){var e=this.proxies.indexOf(t);e>-1&&this.proxies.splice(e,1)},collectPairs:function(){var t,e,n,a=0,o=this.proxies,r=o.length;for(this.numPairChecks=r*(r-1)>>1;a<r;)for(e=o[a++],t=a+1;t<r;)n=o[t++],!e.aabb.intersectTest(n.aabb)&&this.isAvailablePair(e.shape,n.shape)&&this.addPair(e.shape,n.shape)}}),Object.assign(Ms.prototype,{SAPAxis:!0,addElements:function(t,e){if(this.numElements+2>=this.bufferSize){this.bufferSize*=2;for(var n=[],a=this.numElements;a--;)n[a]=this.elements[a]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=e},removeElements:function(t,e){for(var n=-1,a=-1,o=0,r=this.numElements;o<r;o++){var c=this.elements[o];if(c==t||c==e){if(n!=-1){a=o;break}n=o}}for(o=n+1,r=a;o<r;o++)this.elements[o-1]=this.elements[o];for(o=a+1,r=this.numElements;o<r;o++)this.elements[o-2]=this.elements[o];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,e=1;this.numElements>>e;)e++;e=e*this.numElements>>2,t=0;for(var n=!1,a=this.elements,o=1,r=this.numElements;o<r;o++){var c=a[o],y=c.value,p=a[o-1];if(p.value>y){var d=o;do{if(a[d]=p,--d==0)break;p=a[d-1]}while(p.value>y);if(a[d]=c,(t+=o-d)>e){n=!0;break}}}if(n){t=2;var m=this.stack;for(m[0]=0,m[1]=this.numElements-1;t>0;){var S=m[--t],x=m[--t],g=S-x;if(g>16){var P=x+R.floor(.5*g);for(c=a[P],a[P]=a[S],a[S]=c,y=c.value,o=x-1,d=S;;){var I,D;do I=a[++o];while(I.value<y);do D=a[--d];while(y<D.value&&d!=x);if(o>=d)break;a[o]=D,a[d]=I}a[S]=a[o],a[o]=c,o-x>S-o?(m[t++]=x,m[t++]=o-1,m[t++]=o+1,m[t++]=S):(m[t++]=o+1,m[t++]=S,m[t++]=x,m[t++]=o-1)}else for(o=x+1;o<=S;o++)if(y=(c=a[o]).value,(p=a[o-1]).value>y){d=o;do{if(a[d]=p,--d==0)break;p=a[d-1]}while(p.value>y);a[d]=c}}}},calculateTestCount:function(){for(var t=1,e=0,n=1,a=this.numElements;n<a;n++)this.elements[n].max?t--:(e+=t,t++);return e}}),Ks.prototype=Object.assign(Object.create(ts.prototype),{constructor:Ks,isDynamic:function(){var t=this.shape.parent;return t.isDynamic&&!t.sleeping},update:function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(this.belongsTo==1&&!this.isDynamic()||this.belongsTo==2&&this.isDynamic())&&(this.sap.removeProxy(this),this.sap.addProxy(this))}}),Ys.prototype=Object.assign(Object.create(ds.prototype),{constructor:Ys,createProxy:function(t){return new Ks(this,t)},addProxy:function(t){var e=t;e.isDynamic()?(this.axesD[0].addElements(e.min[0],e.max[0]),this.axesD[1].addElements(e.min[1],e.max[1]),this.axesD[2].addElements(e.min[2],e.max[2]),e.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(e.min[0],e.max[0]),this.axesS[1].addElements(e.min[1],e.max[1]),this.axesS[2].addElements(e.min[2],e.max[2]),e.belongsTo=2,this.numElementsS+=2)},removeProxy:function(t){var e=t;if(e.belongsTo!=0){switch(e.belongsTo){case 1:this.axesD[0].removeElements(e.min[0],e.max[0]),this.axesD[1].removeElements(e.min[1],e.max[1]),this.axesD[2].removeElements(e.min[2],e.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(e.min[0],e.max[0]),this.axesS[1].removeElements(e.min[1],e.max[1]),this.axesS[2].removeElements(e.min[2],e.max[2]),this.numElementsS-=2}e.belongsTo=0}},collectPairs:function(){if(this.numElementsD!=0){var t,e,n,a,o=this.axesD[this.index1],r=this.axesD[this.index2];o.sort(),r.sort(),o.calculateTestCount()<=r.calculateTestCount()?((r=this.axesS[this.index1]).sort(),t=o.elements,e=r.elements):((o=this.axesS[this.index2]).sort(),t=r.elements,e=o.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var c=0,y=0;c<this.numElementsD;){var p,d;if(y==this.numElementsS)p=t[c],d=!0,c++;else{var m=t[c],S=e[y];m.value<S.value?(p=m,d=!0,c++):(p=S,d=!1,y++)}if(p.max){var x=p.pair;if(d){if(x==n){n=n.pair;continue}p=n}else{if(x==a){a=a.pair;continue}p=a}for(;p;){if((M=p.pair)==x){p.pair=M.pair;break}p=M}}else{for(var g=p.proxy.shape,P=p.min1.value,I=p.max1.value,D=p.min2.value,nt=p.max2.value,M=n;M!=null;M=M.pair){var tt=M.proxy.shape;this.numPairChecks++,P>M.max1.value||I<M.min1.value||D>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt)}if(d){for(M=a;M!=null;M=M.pair)tt=M.proxy.shape,this.numPairChecks++,P>M.max1.value||I<M.min1.value||D>M.max2.value||nt<M.min2.value||!this.isAvailablePair(g,tt)||this.addPair(g,tt);p.pair=n,n=p}else p.pair=a,a=p}}this.index2=3^(this.index1|this.index2)}}}),Object.assign(wn.prototype,{DBVT:!0,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(this.root!=null){for(var e,n,a=t.aabb,o=this.root;o.proxy==null;){var r=o.child1,c=o.child2,y=o.aabb,p=r.aabb,d=c.aabb;e=y.surfaceArea(),this.aabb.combine(a,y);var m=2*(n=this.aabb.surfaceArea()),S=2*(n-e),x=S;this.aabb.combine(a,p),r.proxy!=null?x+=this.aabb.surfaceArea():x+=this.aabb.surfaceArea()-p.surfaceArea();var g=S;if(this.aabb.combine(a,d),c.proxy!=null?g+=this.aabb.surfaceArea():g+=this.aabb.surfaceArea()-d.surfaceArea(),x<g){if(m<x)break;o=r}else{if(m<g)break;o=c}}var P,I=o.parent;(P=this.numFreeNodes>0?this.freeNodes[--this.numFreeNodes]:new fn).parent=I,P.child1=t,P.child2=o,P.aabb.combine(t.aabb,o.aabb),P.height=o.height+1,o.parent=P,t.parent=P,o==this.root?this.root=P:I.child1==o?I.child1=P:I.child2=P;do P=this.balance(P),this.fix(P),P=P.parent;while(P!=null)}else this.root=t},getBalance:function(t){return t.proxy!=null?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t!=this.root){var e,n=t.parent;if(e=n.child1==t?n.child2:n.child1,n==this.root)return this.root=e,void(e.parent=null);var a=n.parent;e.parent=a,a.child1==n?a.child1=e:a.child2=e,this.numFreeNodes<16384&&(this.freeNodes[this.numFreeNodes++]=n);do a=this.balance(a),this.fix(a),a=a.parent;while(a!=null)}else this.root=null},balance:function(t){var e=t.height;if(e<2)return t;var n,a=t.parent,o=t.child1,r=t.child2,c=o.height,y=r.height,p=c-y;if(p>1){var d=o.child1,m=o.child2,S=d.height,x=m.height;return S>x?(o.child2=t,t.parent=o,t.child1=m,m.parent=t,t.aabb.combine(m.aabb,r.aabb),n=x-y,t.height=x-(n&n>>31)+1,o.aabb.combine(d.aabb,t.aabb),n=S-e,o.height=S-(n&n>>31)+1):(o.child1=t,t.parent=o,t.child1=d,d.parent=t,t.aabb.combine(d.aabb,r.aabb),n=S-y,t.height=S-(n&n>>31)+1,o.aabb.combine(t.aabb,m.aabb),n=e-x,o.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=o:a.child2=o:this.root=o,o.parent=a,o}if(p<-1){var g=r.child1,P=r.child2,I=g.height,D=P.height;return I>D?(r.child2=t,t.parent=r,t.child2=P,P.parent=t,t.aabb.combine(o.aabb,P.aabb),n=c-D,t.height=c-(n&n>>31)+1,r.aabb.combine(g.aabb,t.aabb),n=I-e,r.height=I-(n&n>>31)+1):(r.child1=t,t.parent=r,t.child2=g,g.parent=t,t.aabb.combine(o.aabb,g.aabb),n=c-I,t.height=c-(n&n>>31)+1,r.aabb.combine(t.aabb,P.aabb),n=e-D,r.height=e-(n&n>>31)+1),a!=null?a.child1==t?a.child1=r:a.child2=r:this.root=r,r.parent=a,r}return t},fix:function(t){var e=t.child1,n=t.child2;t.aabb.combine(e.aabb,n.aabb),t.height=e.height<n.height?n.height+1:e.height+1}}),yn.prototype=Object.assign(Object.create(ts.prototype),{constructor:yn,update:function(){}}),vn.prototype=Object.assign(Object.create(ds.prototype),{constructor:vn,createProxy:function(t){return new yn(t)},addProxy:function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},removeProxy:function(t){this.tree.deleteLeaf(t.leaf);var e=this.leaves.indexOf(t.leaf);e>-1&&(this.leaves.splice(e,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves<2))for(var t,e=this.numLeaves;e--;)(t=this.leaves[e]).proxy.aabb.intersectTestTwo(t.aabb)&&(t.aabb.copy(t.proxy.aabb,.1),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},collide:function(t,e){var n,a,o,r,c,y,p=2;for(this.stack[0]=t,this.stack[1]=e;p>0;)if(o=this.stack[--p],r=this.stack[--p],c=o.proxy!=null,y=r.proxy!=null,this.numPairChecks++,c&&y){if((n=o.proxy.shape)==(a=r.proxy.shape)||n.aabb.intersectTest(a.aabb)||!this.isAvailablePair(n,a))continue;this.addPair(n,a)}else{if(o.aabb.intersectTest(r.aabb))continue;y||!c&&o.aabb.surfaceArea()>r.aabb.surfaceArea()?(this.stack[p++]=o.child1,this.stack[p++]=r,this.stack[p++]=o.child2,this.stack[p++]=r):(this.stack[p++]=o,this.stack[p++]=r.child1,this.stack[p++]=o,this.stack[p++]=r.child2)}}}),Object.assign(Pe.prototype,{CollisionDetector:!0,detectCollision:function(t,e,n){ce("CollisionDetector","Inheritance error.")}}),_n.prototype=Object.assign(Object.create(Pe.prototype),{constructor:_n,detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,c,y,p,d,m,S,x,g,P,I,D,nt,M,tt,it,ct,ut,st,kt,G,rt,pt,Q,ht,dt,Ht,ki,wi,_i,E,Zt,N,z,at,B=a.elements,F=o.elements,At=a.dimentions,$t=o.dimentions,xt=a.position,gt=o.position,U=xt.x,mt=xt.y,zt=xt.z,oe=gt.x,Si=gt.y,Ei=gt.z,bi=oe-U,xi=Si-mt,Nt=Ei-zt,_t=a.halfWidth,K=a.halfHeight,lt=a.halfDepth,wt=o.halfWidth,Pi=o.halfHeight,Qt=o.halfDepth,Tt=At[0],Ut=At[1],Wt=At[2],vt=At[3],ft=At[4],yt=At[5],Kt=At[6],Ct=At[7],qt=At[8],si=At[9],ai=At[10],Bt=At[11],Mt=At[12],l=At[13],f=At[14],_=At[15],k=At[16],w=At[17],L=$t[0],H=$t[1],C=$t[2],O=$t[3],X=$t[4],St=$t[5],Pt=$t[6],Gt=$t[7],Xt=$t[8],ue=$t[9],Mi=$t[10],Li=$t[11],Wi=$t[12],ti=$t[13],be=$t[14],xe=$t[15],ge=$t[16],ci=$t[17],ri=Ut*C-Wt*H,Hi=Wt*L-Tt*C,hi=Tt*H-Ut*L,pe=Ut*St-Wt*X,me=Wt*O-Tt*St,de=Tt*X-Ut*O,fe=Ut*Xt-Wt*Gt,ye=Wt*Pt-Tt*Xt,ve=Tt*Gt-Ut*Pt,Fi=ft*C-yt*H,Di=yt*L-vt*C,Qi=vt*H-ft*L,Ne=ft*St-yt*X,Me=yt*O-vt*St,Le=vt*X-ft*O,Ce=ft*Xt-yt*Gt,Ve=yt*Pt-vt*Xt,Ie=vt*Gt-ft*Pt,He=Ct*C-qt*H,Te=qt*L-Kt*C,Ae=Kt*H-Ct*L,$e=Ct*St-qt*X,Be=qt*O-Kt*St,Ee=Kt*X-Ct*O,bt=Ct*Xt-qt*Gt,Es=qt*Pt-Kt*Xt,Fs=Kt*Gt-Ct*Pt,pa=!1,ma=!1,da=!1,fa=!1,ya=!1,va=!1,_a=!1,ba=!1,xa=!1;if((r=(E=Tt*bi+Ut*xi+Wt*Nt)>0)||(E=-E),(N=Tt*L+Ut*H+Wt*C)<0&&(N=-N),(z=Tt*O+Ut*X+Wt*St)<0&&(z=-z),(at=Tt*Pt+Ut*Gt+Wt*Xt)<0&&(at=-at),!((it=E-(Zt=_t)-(N*wt+z*Pi+at*Qt))>0||((c=(E=vt*bi+ft*xi+yt*Nt)>0)||(E=-E),(N=vt*L+ft*H+yt*C)<0&&(N=-N),(z=vt*O+ft*X+yt*St)<0&&(z=-z),(at=vt*Pt+ft*Gt+yt*Xt)<0&&(at=-at),(ct=E-(Zt=K)-(N*wt+z*Pi+at*Qt))>0||((y=(E=Kt*bi+Ct*xi+qt*Nt)>0)||(E=-E),(N=Kt*L+Ct*H+qt*C)<0&&(N=-N),(z=Kt*O+Ct*X+qt*St)<0&&(z=-z),(at=Kt*Pt+Ct*Gt+qt*Xt)<0&&(at=-at),(ut=E-(Zt=lt)-(N*wt+z*Pi+at*Qt))>0||((p=(E=L*bi+H*xi+C*Nt)>0)||(E=-E),(N=L*Tt+H*Ut+C*Wt)<0&&(N=-N),(z=L*vt+H*ft+C*yt)<0&&(z=-z),(at=L*Kt+H*Ct+C*qt)<0&&(at=-at),(st=1*(E-(Zt=N*_t+z*K+at*lt)-wt))>0||((d=(E=O*bi+X*xi+St*Nt)>0)||(E=-E),(N=O*Tt+X*Ut+St*Wt)<0&&(N=-N),(z=O*vt+X*ft+St*yt)<0&&(z=-z),(at=O*Kt+X*Ct+St*qt)<0&&(at=-at),(kt=1*(E-(Zt=N*_t+z*K+at*lt)-Pi))>0||((m=(E=Pt*bi+Gt*xi+Xt*Nt)>0)||(E=-E),(N=Pt*Tt+Gt*Ut+Xt*Wt)<0&&(N=-N),(z=Pt*vt+Gt*ft+Xt*yt)<0&&(z=-z),(at=Pt*Kt+Gt*Ct+Xt*qt)<0&&(at=-at),(G=1*(E-(Zt=N*_t+z*K+at*lt)-Qt))>0))))))){if((E=ri*ri+Hi*Hi+hi*hi)>1e-5){if((S=(E=(ri*=E=1/R.sqrt(E))*bi+(Hi*=E)*xi+(hi*=E)*Nt)>0)||(E=-E),(N=ri*vt+Hi*ft+hi*yt)<0&&(N=-N),(z=ri*Kt+Hi*Ct+hi*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=ri*O+Hi*X+hi*St)<0&&(N=-N),(z=ri*Pt+Hi*Gt+hi*Xt)<0&&(z=-z),(rt=E-Zt-(N*Pi+z*Qt))>0)return}else S=!1,rt=0,pa=!0;if((E=pe*pe+me*me+de*de)>1e-5){if((x=(E=(pe*=E=1/R.sqrt(E))*bi+(me*=E)*xi+(de*=E)*Nt)>0)||(E=-E),(N=pe*vt+me*ft+de*yt)<0&&(N=-N),(z=pe*Kt+me*Ct+de*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=pe*L+me*H+de*C)<0&&(N=-N),(z=pe*Pt+me*Gt+de*Xt)<0&&(z=-z),(pt=E-Zt-(N*wt+z*Qt))>0)return}else x=!1,pt=0,ma=!0;if((E=fe*fe+ye*ye+ve*ve)>1e-5){if((g=(E=(fe*=E=1/R.sqrt(E))*bi+(ye*=E)*xi+(ve*=E)*Nt)>0)||(E=-E),(N=fe*vt+ye*ft+ve*yt)<0&&(N=-N),(z=fe*Kt+ye*Ct+ve*qt)<0&&(z=-z),Zt=N*K+z*lt,(N=fe*L+ye*H+ve*C)<0&&(N=-N),(z=fe*O+ye*X+ve*St)<0&&(z=-z),(Q=E-Zt-(N*wt+z*Pi))>0)return}else g=!1,Q=0,da=!0;if((E=Fi*Fi+Di*Di+Qi*Qi)>1e-5){if((P=(E=(Fi*=E=1/R.sqrt(E))*bi+(Di*=E)*xi+(Qi*=E)*Nt)>0)||(E=-E),(N=Fi*Tt+Di*Ut+Qi*Wt)<0&&(N=-N),(z=Fi*Kt+Di*Ct+Qi*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Fi*O+Di*X+Qi*St)<0&&(N=-N),(z=Fi*Pt+Di*Gt+Qi*Xt)<0&&(z=-z),(ht=E-Zt-(N*Pi+z*Qt))>0)return}else P=!1,ht=0,fa=!0;if((E=Ne*Ne+Me*Me+Le*Le)>1e-5){if((I=(E=(Ne*=E=1/R.sqrt(E))*bi+(Me*=E)*xi+(Le*=E)*Nt)>0)||(E=-E),(N=Ne*Tt+Me*Ut+Le*Wt)<0&&(N=-N),(z=Ne*Kt+Me*Ct+Le*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Ne*L+Me*H+Le*C)<0&&(N=-N),(z=Ne*Pt+Me*Gt+Le*Xt)<0&&(z=-z),(dt=E-Zt-(N*wt+z*Qt))>0)return}else I=!1,dt=0,ya=!0;if((E=Ce*Ce+Ve*Ve+Ie*Ie)>1e-5){if((D=(E=(Ce*=E=1/R.sqrt(E))*bi+(Ve*=E)*xi+(Ie*=E)*Nt)>0)||(E=-E),(N=Ce*Tt+Ve*Ut+Ie*Wt)<0&&(N=-N),(z=Ce*Kt+Ve*Ct+Ie*qt)<0&&(z=-z),Zt=N*_t+z*lt,(N=Ce*L+Ve*H+Ie*C)<0&&(N=-N),(z=Ce*O+Ve*X+Ie*St)<0&&(z=-z),(Ht=E-Zt-(N*wt+z*Pi))>0)return}else D=!1,Ht=0,va=!0;if((E=He*He+Te*Te+Ae*Ae)>1e-5){if((nt=(E=(He*=E=1/R.sqrt(E))*bi+(Te*=E)*xi+(Ae*=E)*Nt)>0)||(E=-E),(N=He*Tt+Te*Ut+Ae*Wt)<0&&(N=-N),(z=He*vt+Te*ft+Ae*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=He*O+Te*X+Ae*St)<0&&(N=-N),(z=He*Pt+Te*Gt+Ae*Xt)<0&&(z=-z),(ki=E-Zt-(N*Pi+z*Qt))>0)return}else nt=!1,ki=0,_a=!0;if((E=$e*$e+Be*Be+Ee*Ee)>1e-5){if((M=(E=($e*=E=1/R.sqrt(E))*bi+(Be*=E)*xi+(Ee*=E)*Nt)>0)||(E=-E),(N=$e*Tt+Be*Ut+Ee*Wt)<0&&(N=-N),(z=$e*vt+Be*ft+Ee*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=$e*L+Be*H+Ee*C)<0&&(N=-N),(z=$e*Pt+Be*Gt+Ee*Xt)<0&&(z=-z),(wi=E-Zt-(N*wt+z*Qt))>0)return}else M=!1,wi=0,ba=!0;if((E=bt*bt+Es*Es+Fs*Fs)>1e-5){if((tt=(E=(bt*=E=1/R.sqrt(E))*bi+(Es*=E)*xi+(Fs*=E)*Nt)>0)||(E=-E),(N=bt*Tt+Es*Ut+Fs*Wt)<0&&(N=-N),(z=bt*vt+Es*ft+Fs*yt)<0&&(z=-z),Zt=N*_t+z*K,(N=bt*L+Es*H+Fs*C)<0&&(N=-N),(z=bt*O+Es*X+Fs*St)<0&&(z=-z),(_i=E-Zt-(N*wt+z*Pi))>0)return}else tt=!1,_i=0,xa=!0;var ze=it,Ri=it,Ci=0,ke=r;ct>Ri&&(ze=ct,Ri=ct,Ci=1,ke=c),ut>Ri&&(ze=ut,Ri=ut,Ci=2,ke=y),st>Ri&&(ze=st,Ri=st,Ci=3,ke=p),kt>Ri&&(ze=kt,Ri=kt,Ci=4,ke=d),G>Ri&&(ze=G,Ri=G,Ci=5,ke=m),rt-.01>Ri&&!pa&&(ze=rt,Ri=rt-.01,Ci=6,ke=S),pt-.01>Ri&&!ma&&(ze=pt,Ri=pt-.01,Ci=7,ke=x),Q-.01>Ri&&!da&&(ze=Q,Ri=Q-.01,Ci=8,ke=g),ht-.01>Ri&&!fa&&(ze=ht,Ri=ht-.01,Ci=9,ke=P),dt-.01>Ri&&!ya&&(ze=dt,Ri=dt-.01,Ci=10,ke=I),Ht-.01>Ri&&!va&&(ze=Ht,Ri=Ht-.01,Ci=11,ke=D),ki-.01>Ri&&!_a&&(ze=ki,Ri=ki-.01,Ci=12,ke=nt),wi-.01>Ri&&!ba&&(ze=wi,Ri=wi-.01,Ci=13,ke=M),_i-.01>Ri&&!xa&&(ze=_i,Ci=14,ke=tt);var Et=0,Ft=0,Dt=0,Xi=0,te=0,ie=0,re=0,he=0,le=0,qi=0,Ji=0,Zi=0,fs=0,ys=0,vs=0,_s=0,bs=0,xs=0,Sn=!1;if(Ci==0?(ke?(qi=U+si,Ji=mt+ai,Zi=zt+Bt,Et=Tt,Ft=Ut,Dt=Wt):(qi=U-si,Ji=mt-ai,Zi=zt-Bt,Et=-Tt,Ft=-Ut,Dt=-Wt),fs=Mt,ys=l,vs=f,Xi=-vt,te=-ft,ie=-yt,_s=_,bs=k,xs=w,re=-Kt,he=-Ct,le=-qt):Ci==1?(ke?(qi=U+Mt,Ji=mt+l,Zi=zt+f,Et=vt,Ft=ft,Dt=yt):(qi=U-Mt,Ji=mt-l,Zi=zt-f,Et=-vt,Ft=-ft,Dt=-yt),fs=si,ys=ai,vs=Bt,Xi=-Tt,te=-Ut,ie=-Wt,_s=_,bs=k,xs=w,re=-Kt,he=-Ct,le=-qt):Ci==2?(ke?(qi=U+_,Ji=mt+k,Zi=zt+w,Et=Kt,Ft=Ct,Dt=qt):(qi=U-_,Ji=mt-k,Zi=zt-w,Et=-Kt,Ft=-Ct,Dt=-qt),fs=si,ys=ai,vs=Bt,Xi=-Tt,te=-Ut,ie=-Wt,_s=Mt,bs=l,xs=f,re=-vt,he=-ft,le=-yt):Ci==3?(Sn=!0,ke?(qi=oe-ue,Ji=Si-Mi,Zi=Ei-Li,Et=-L,Ft=-H,Dt=-C):(qi=oe+ue,Ji=Si+Mi,Zi=Ei+Li,Et=L,Ft=H,Dt=C),fs=Wi,ys=ti,vs=be,Xi=-O,te=-X,ie=-St,_s=xe,bs=ge,xs=ci,re=-Pt,he=-Gt,le=-Xt):Ci==4?(Sn=!0,ke?(qi=oe-Wi,Ji=Si-ti,Zi=Ei-be,Et=-O,Ft=-X,Dt=-St):(qi=oe+Wi,Ji=Si+ti,Zi=Ei+be,Et=O,Ft=X,Dt=St),fs=ue,ys=Mi,vs=Li,Xi=-L,te=-H,ie=-C,_s=xe,bs=ge,xs=ci,re=-Pt,he=-Gt,le=-Xt):Ci==5?(Sn=!0,ke?(qi=oe-xe,Ji=Si-ge,Zi=Ei-ci,Et=-Pt,Ft=-Gt,Dt=-Xt):(qi=oe+xe,Ji=Si+ge,Zi=Ei+ci,Et=Pt,Ft=Gt,Dt=Xt),fs=ue,ys=Mi,vs=Li,Xi=-L,te=-H,ie=-C,_s=Wi,bs=ti,xs=be,re=-O,he=-X,le=-St):Ci==6?(Et=ri,Ft=Hi,Dt=hi,Xi=Tt,te=Ut,ie=Wt,re=L,he=H,le=C):Ci==7?(Et=pe,Ft=me,Dt=de,Xi=Tt,te=Ut,ie=Wt,re=O,he=X,le=St):Ci==8?(Et=fe,Ft=ye,Dt=ve,Xi=Tt,te=Ut,ie=Wt,re=Pt,he=Gt,le=Xt):Ci==9?(Et=Fi,Ft=Di,Dt=Qi,Xi=vt,te=ft,ie=yt,re=L,he=H,le=C):Ci==10?(Et=Ne,Ft=Me,Dt=Le,Xi=vt,te=ft,ie=yt,re=O,he=X,le=St):Ci==11?(Et=Ce,Ft=Ve,Dt=Ie,Xi=vt,te=ft,ie=yt,re=Pt,he=Gt,le=Xt):Ci==12?(Et=He,Ft=Te,Dt=Ae,Xi=Kt,te=Ct,ie=qt,re=L,he=H,le=C):Ci==13?(Et=$e,Ft=Be,Dt=Ee,Xi=Kt,te=Ct,ie=qt,re=O,he=X,le=St):Ci==14&&(Et=bt,Ft=Es,Dt=Fs,Xi=Kt,te=Ct,ie=qt,re=Pt,he=Gt,le=Xt),Ci>5){var Oi,Vi,Ti,Ai,$i,gs,ks,Ps,Ls,Cs,Vs;ke||(Et=-Et,Ft=-Ft,Dt=-Dt),Vi=Et*(gs=B[0])+Ft*(ks=B[1])+Dt*(Ps=B[2]),(Oi=Et*(Ti=B[3])+Ft*(Ai=B[4])+Dt*($i=B[5]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[6])+Ft*(Ai=B[7])+Dt*($i=B[8]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[9])+Ft*(Ai=B[10])+Dt*($i=B[11]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[12])+Ft*(Ai=B[13])+Dt*($i=B[14]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[15])+Ft*(Ai=B[16])+Dt*($i=B[17]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[18])+Ft*(Ai=B[19])+Dt*($i=B[20]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),(Oi=Et*(Ti=B[21])+Ft*(Ai=B[22])+Dt*($i=B[23]))>Vi&&(Vi=Oi,gs=Ti,ks=Ai,Ps=$i),Vi=Et*(Ls=F[0])+Ft*(Cs=F[1])+Dt*(Vs=F[2]),(Oi=Et*(Ti=F[3])+Ft*(Ai=F[4])+Dt*($i=F[5]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[6])+Ft*(Ai=F[7])+Dt*($i=F[8]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[9])+Ft*(Ai=F[10])+Dt*($i=F[11]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[12])+Ft*(Ai=F[13])+Dt*($i=F[14]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[15])+Ft*(Ai=F[16])+Dt*($i=F[17]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[18])+Ft*(Ai=F[19])+Dt*($i=F[20]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i),(Oi=Et*(Ti=F[21])+Ft*(Ai=F[22])+Dt*($i=F[23]))<Vi&&(Vi=Oi,Ls=Ti,Cs=Ai,Vs=$i);var gi=((Ti=Ls-gs)*(Xi-re*(N=Xi*re+te*he+ie*le))+(Ai=Cs-ks)*(te-he*N)+($i=Vs-Ps)*(ie-le*N))/(1-N*N);n.addPoint(gs+Xi*gi+Et*ze*.5,ks+te*gi+Ft*ze*.5,Ps+ie*gi+Dt*ze*.5,Et,Ft,Dt,ze,!1)}else{var qe,Je,Ze,Ke,Ye,Qe,is,es,ss,ns,as,os,rs,li,W,pi,mi,di,ee,se,ne,Ii=1,oi=0,ae=0;Sn?((oi=Tt*Et+Ut*Ft+Wt*Dt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=vt*Et+ft*Ft+yt*Dt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=Kt*Et+Ct*Ft+qt*Dt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(qe=B[0],Je=B[1],Ze=B[2],Ke=B[6],Ye=B[7],Qe=B[8],is=B[9],es=B[10],ss=B[11],ns=B[3],as=B[4],os=B[5]):ae==1?(qe=B[15],Je=B[16],Ze=B[17],Ke=B[21],Ye=B[22],Qe=B[23],is=B[18],es=B[19],ss=B[20],ns=B[12],as=B[13],os=B[14]):ae==2?(qe=B[12],Je=B[13],Ze=B[14],Ke=B[0],Ye=B[1],Qe=B[2],is=B[3],es=B[4],ss=B[5],ns=B[15],as=B[16],os=B[17]):ae==3?(qe=B[21],Je=B[22],Ze=B[23],Ke=B[9],Ye=B[10],Qe=B[11],is=B[6],es=B[7],ss=B[8],ns=B[18],as=B[19],os=B[20]):ae==4?(qe=B[12],Je=B[13],Ze=B[14],Ke=B[18],Ye=B[19],Qe=B[20],is=B[6],es=B[7],ss=B[8],ns=B[0],as=B[1],os=B[2]):ae==5&&(qe=B[3],Je=B[4],Ze=B[5],Ke=F[9],Ye=F[10],Qe=F[11],is=B[21],es=B[22],ss=B[23],ns=B[15],as=B[16],os=B[17])):((oi=L*Et+H*Ft+C*Dt)<Ii&&(Ii=oi,ae=0),-oi<Ii&&(Ii=-oi,ae=1),(oi=O*Et+X*Ft+St*Dt)<Ii&&(Ii=oi,ae=2),-oi<Ii&&(Ii=-oi,ae=3),(oi=Pt*Et+Gt*Ft+Xt*Dt)<Ii&&(Ii=oi,ae=4),-oi<Ii&&(Ii=-oi,ae=5),ae==0?(qe=F[0],Je=F[1],Ze=F[2],Ke=F[6],Ye=F[7],Qe=F[8],is=F[9],es=F[10],ss=F[11],ns=F[3],as=F[4],os=F[5]):ae==1?(qe=F[15],Je=F[16],Ze=F[17],Ke=F[21],Ye=F[22],Qe=F[23],is=F[18],es=F[19],ss=F[20],ns=F[12],as=F[13],os=F[14]):ae==2?(qe=F[12],Je=F[13],Ze=F[14],Ke=F[0],Ye=F[1],Qe=F[2],is=F[3],es=F[4],ss=F[5],ns=F[15],as=F[16],os=F[17]):ae==3?(qe=F[21],Je=F[22],Ze=F[23],Ke=F[9],Ye=F[10],Qe=F[11],is=F[6],es=F[7],ss=F[8],ns=F[18],as=F[19],os=F[20]):ae==4?(qe=F[12],Je=F[13],Ze=F[14],Ke=F[18],Ye=F[19],Qe=F[20],is=F[6],es=F[7],ss=F[8],ns=F[0],as=F[1],os=F[2]):ae==5&&(qe=F[3],Je=F[4],Ze=F[5],Ke=F[9],Ye=F[10],Qe=F[11],is=F[21],es=F[22],ss=F[23],ns=F[15],as=F[16],os=F[17])),this.clipVertices1[0]=qe,this.clipVertices1[1]=Je,this.clipVertices1[2]=Ze,this.clipVertices1[3]=Ke,this.clipVertices1[4]=Ye,this.clipVertices1[5]=Qe,this.clipVertices1[6]=is,this.clipVertices1[7]=es,this.clipVertices1[8]=ss,this.clipVertices1[9]=ns,this.clipVertices1[10]=as,this.clipVertices1[11]=os,li=0,N=((pi=this.clipVertices1[9])-qi-fs)*Xi+((mi=this.clipVertices1[10])-Ji-ys)*te+((di=this.clipVertices1[11])-Zi-vs)*ie;for(var Ni=0;Ni<4;Ni++)W=3*Ni,z=((ee=this.clipVertices1[W])-qi-fs)*Xi+((se=this.clipVertices1[W+1])-Ji-ys)*te+((ne=this.clipVertices1[W+2])-Zi-vs)*ie,N>0?z>0?(W=3*li,li++,this.clipVertices2[W]=ee,this.clipVertices2[W+1]=se,this.clipVertices2[W+2]=ne):(W=3*li,li++,gi=N/(N-z),this.clipVertices2[W]=pi+(ee-pi)*gi,this.clipVertices2[W+1]=mi+(se-mi)*gi,this.clipVertices2[W+2]=di+(ne-di)*gi):z>0&&(W=3*li,li++,gi=N/(N-z),this.clipVertices2[W]=pi+(ee-pi)*gi,this.clipVertices2[W+1]=mi+(se-mi)*gi,this.clipVertices2[W+2]=di+(ne-di)*gi,W=3*li,li++,this.clipVertices2[W]=ee,this.clipVertices2[W+1]=se,this.clipVertices2[W+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,W=3*(rs-1),N=((pi=this.clipVertices2[W])-qi-_s)*re+((mi=this.clipVertices2[W+1])-Ji-bs)*he+((di=this.clipVertices2[W+2])-Zi-xs)*le,Ni=0;Ni<rs;Ni++)W=3*Ni,z=((ee=this.clipVertices2[W])-qi-_s)*re+((se=this.clipVertices2[W+1])-Ji-bs)*he+((ne=this.clipVertices2[W+2])-Zi-xs)*le,N>0?z>0?(W=3*li,li++,this.clipVertices1[W]=ee,this.clipVertices1[W+1]=se,this.clipVertices1[W+2]=ne):(W=3*li,li++,gi=N/(N-z),this.clipVertices1[W]=pi+(ee-pi)*gi,this.clipVertices1[W+1]=mi+(se-mi)*gi,this.clipVertices1[W+2]=di+(ne-di)*gi):z>0&&(W=3*li,li++,gi=N/(N-z),this.clipVertices1[W]=pi+(ee-pi)*gi,this.clipVertices1[W+1]=mi+(se-mi)*gi,this.clipVertices1[W+2]=di+(ne-di)*gi,W=3*li,li++,this.clipVertices1[W]=ee,this.clipVertices1[W+1]=se,this.clipVertices1[W+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,W=3*(rs-1),N=((pi=this.clipVertices1[W])-qi+fs)*-Xi+((mi=this.clipVertices1[W+1])-Ji+ys)*-te+((di=this.clipVertices1[W+2])-Zi+vs)*-ie,Ni=0;Ni<rs;Ni++)W=3*Ni,z=((ee=this.clipVertices1[W])-qi+fs)*-Xi+((se=this.clipVertices1[W+1])-Ji+ys)*-te+((ne=this.clipVertices1[W+2])-Zi+vs)*-ie,N>0?z>0?(W=3*li,li++,this.clipVertices2[W]=ee,this.clipVertices2[W+1]=se,this.clipVertices2[W+2]=ne):(W=3*li,li++,gi=N/(N-z),this.clipVertices2[W]=pi+(ee-pi)*gi,this.clipVertices2[W+1]=mi+(se-mi)*gi,this.clipVertices2[W+2]=di+(ne-di)*gi):z>0&&(W=3*li,li++,gi=N/(N-z),this.clipVertices2[W]=pi+(ee-pi)*gi,this.clipVertices2[W+1]=mi+(se-mi)*gi,this.clipVertices2[W+2]=di+(ne-di)*gi,W=3*li,li++,this.clipVertices2[W]=ee,this.clipVertices2[W+1]=se,this.clipVertices2[W+2]=ne),pi=ee,mi=se,di=ne,N=z;if((rs=li)!=0){for(li=0,W=3*(rs-1),N=((pi=this.clipVertices2[W])-qi+_s)*-re+((mi=this.clipVertices2[W+1])-Ji+bs)*-he+((di=this.clipVertices2[W+2])-Zi+xs)*-le,Ni=0;Ni<rs;Ni++)W=3*Ni,z=((ee=this.clipVertices2[W])-qi+_s)*-re+((se=this.clipVertices2[W+1])-Ji+bs)*-he+((ne=this.clipVertices2[W+2])-Zi+xs)*-le,N>0?z>0?(W=3*li,li++,this.clipVertices1[W]=ee,this.clipVertices1[W+1]=se,this.clipVertices1[W+2]=ne):(W=3*li,li++,gi=N/(N-z),this.clipVertices1[W]=pi+(ee-pi)*gi,this.clipVertices1[W+1]=mi+(se-mi)*gi,this.clipVertices1[W+2]=di+(ne-di)*gi):z>0&&(W=3*li,li++,gi=N/(N-z),this.clipVertices1[W]=pi+(ee-pi)*gi,this.clipVertices1[W+1]=mi+(se-mi)*gi,this.clipVertices1[W+2]=di+(ne-di)*gi,W=3*li,li++,this.clipVertices1[W]=ee,this.clipVertices1[W+1]=se,this.clipVertices1[W+2]=ne),pi=ee,mi=se,di=ne,N=z;if(Sn){var ja=a;a=o,o=ja}if((rs=li)!=0){var Nn=a!=t;if(rs>4){Xi=qe-(pi=.25*(qe+Ke+is+ns)),te=Je-(mi=.25*(Je+Ye+es+as)),ie=Ze-(di=.25*(Ze+Qe+ss+os)),re=Ke-pi,he=Ye-mi,le=Qe-di;var Jn=0,ga=0,Zn=0,ka=0,Mn=-this.INF;for(Ii=this.INF,Ni=0;Ni<rs;Ni++)this.used[Ni]=!1,W=3*Ni,(oi=(pi=this.clipVertices1[W])*Xi+(mi=this.clipVertices1[W+1])*te+(di=this.clipVertices1[W+2])*ie)<Ii&&(Ii=oi,Jn=Ni),oi>Mn&&(Mn=oi,Zn=Ni);for(this.used[Jn]=!0,this.used[Zn]=!0,Mn=-this.INF,Ii=this.INF,Ni=0;Ni<rs;Ni++)this.used[Ni]||(W=3*Ni,(oi=(pi=this.clipVertices1[W])*re+(mi=this.clipVertices1[W+1])*he+(di=this.clipVertices1[W+2])*le)<Ii&&(Ii=oi,ga=Ni),oi>Mn&&(Mn=oi,ka=Ni));W=3*Jn,(oi=((pi=this.clipVertices1[W])-qi)*Et+((mi=this.clipVertices1[W+1])-Ji)*Ft+((di=this.clipVertices1[W+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,Nn),W=3*ga,(oi=((pi=this.clipVertices1[W])-qi)*Et+((mi=this.clipVertices1[W+1])-Ji)*Ft+((di=this.clipVertices1[W+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,Nn),W=3*Zn,(oi=((pi=this.clipVertices1[W])-qi)*Et+((mi=this.clipVertices1[W+1])-Ji)*Ft+((di=this.clipVertices1[W+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,Nn),W=3*ka,(oi=((pi=this.clipVertices1[W])-qi)*Et+((mi=this.clipVertices1[W+1])-Ji)*Ft+((di=this.clipVertices1[W+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,Nn)}else for(Ni=0;Ni<rs;Ni++)W=3*Ni,(oi=((pi=this.clipVertices1[W])-qi)*Et+((mi=this.clipVertices1[W+1])-Ji)*Ft+((di=this.clipVertices1[W+2])-Zi)*Dt)<0&&n.addPoint(pi,mi,di,Et,Ft,Dt,oi,Nn)}}}}}}}}),bn.prototype=Object.assign(Object.create(Pe.prototype),{constructor:bn,getSep:function(t,e,n,a,o){var r,c,y,p,d,m,S,x,g,P,I,D,nt,M=new $,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,st=e.position.y,kt=e.position.z,G=ut-tt,rt=st-it,pt=kt-ct;G*G+rt*rt+pt*pt==0&&(rt=.001);var Q=-G,ht=-rt,dt=-pt;this.supportPointB(t,-Q,-ht,-dt,M);var Ht=M.x,ki=M.y,wi=M.z;this.supportPointC(e,Q,ht,dt,M);var _i=M.x,E=M.y,Zt=M.z,N=_i-Ht,z=E-ki,at=Zt-wi;if(N*Q+z*ht+at*dt<=0)return!1;if((Q=z*pt-at*rt)*Q+(ht=at*G-N*pt)*ht+(dt=N*rt-z*G)*dt==0)return n.set(N-G,z-rt,at-pt).normalize(),a.set(.5*(Ht+_i),.5*(ki+E),.5*(wi+Zt)),!0;this.supportPointB(t,-Q,-ht,-dt,M);var B=M.x,F=M.y,At=M.z;this.supportPointC(e,Q,ht,dt,M);var $t=M.x,xt=M.y,gt=M.z,U=$t-B,mt=xt-F,zt=gt-At;if(U*Q+mt*ht+zt*dt<=0)return!1;(Q=(c=z-rt)*(m=zt-pt)-(y=at-pt)*(d=mt-rt))*G+(ht=y*(p=U-G)-(r=N-G)*m)*rt+(dt=r*d-c*p)*pt>0&&(r=N,c=z,y=at,N=U,z=mt,at=zt,U=r,mt=c,zt=y,r=Ht,c=ki,y=wi,Ht=B,ki=F,wi=At,B=r,F=c,At=y,r=_i,c=E,y=Zt,_i=$t,E=xt,Zt=gt,$t=r,xt=c,gt=y,Q=-Q,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPointB(t,-Q,-ht,-dt,M);var Si=M.x,Ei=M.y,bi=M.z;this.supportPointC(e,Q,ht,dt,M);var xi=M.x,Nt=M.y,_t=M.z,K=xi-Si,lt=Nt-Ei,wt=_t-bi;if(K*Q+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*G+(at*K-N*wt)*rt+(N*lt-z*K)*pt<0)U=K,mt=lt,zt=wt,B=Si,F=Ei,At=bi,$t=xi,xt=Nt,gt=_t,Q=(c=z-rt)*(m=wt-pt)-(y=at-pt)*(d=lt-rt),ht=y*(p=K-G)-(r=N-G)*m,dt=r*d-c*p;else if((lt*zt-wt*mt)*G+(wt*U-K*zt)*rt+(K*mt-lt*U)*pt<0)N=K,z=lt,at=wt,Ht=Si,ki=Ei,wi=bi,_i=xi,E=Nt,Zt=_t,Q=(c=lt-rt)*(m=zt-pt)-(y=wt-pt)*(d=mt-rt),ht=y*(p=U-G)-(r=K-G)*m,dt=r*d-c*p;else for(var Pi=!1;;){if(Q=(c=mt-z)*(m=wt-at)-(y=zt-at)*(d=lt-z),ht=y*(p=K-N)-(r=U-N)*m,dt=r*d-c*p,(Q*=S=1/R.sqrt(Q*Q+ht*ht+dt*dt))*N+(ht*=S)*z+(dt*=S)*at>=0&&!Pi){var Qt=(z*zt-at*mt)*K+(at*U-N*zt)*lt+(N*mt-z*U)*wt,Tt=(lt*zt-wt*mt)*G+(wt*U-K*zt)*rt+(K*mt-lt*U)*pt,Ut=(rt*at-pt*z)*K+(pt*N-G*at)*lt+(G*z-rt*N)*wt,Wt=(mt*at-zt*z)*G+(zt*N-U*at)*rt+(U*z-mt*N)*pt,vt=Qt+Tt+Ut+Wt;vt<=0&&(Qt=0,vt=(Tt=(mt*wt-zt*lt)*Q+(zt*K-U*wt)*ht+(U*lt-mt*K)*dt)+(Ut=(lt*zt-wt*mt)*Q+(wt*U-K*zt)*ht+(K*mt-lt*U)*dt)+(Wt=(z*zt-at*mt)*Q+(at*U-N*zt)*ht+(N*mt-z*U)*dt));var ft=1/vt;x=(tt*Qt+Ht*Tt+B*Ut+Si*Wt)*ft,g=(it*Qt+ki*Tt+F*Ut+Ei*Wt)*ft,P=(ct*Qt+wi*Tt+At*Ut+bi*Wt)*ft,I=(ut*Qt+_i*Tt+$t*Ut+xi*Wt)*ft,D=(st*Qt+E*Tt+xt*Ut+Nt*Wt)*ft,nt=(kt*Qt+Zt*Tt+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPointB(t,-Q,-ht,-dt,M);var yt=M.x,Kt=M.y,Ct=M.z;this.supportPointC(e,Q,ht,dt,M);var qt=M.x,si=M.y,ai=M.z,Bt=qt-yt,Mt=si-Kt,l=ai-Ct,f=-(Bt*Q+Mt*ht+l*dt);if((Bt-K)*Q+(Mt-lt)*ht+(l-wt)*dt<=.01||f>=0)return!!Pi&&(n.set(-Q,-ht,-dt),a.set(.5*(x+I),.5*(g+D),.5*(P+nt)),o.x=f,!0);(Mt*at-l*z)*G+(l*N-Bt*at)*rt+(Bt*z-Mt*N)*pt<0?(Mt*zt-l*mt)*G+(l*U-Bt*zt)*rt+(Bt*mt-Mt*U)*pt<0?(N=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Ct,_i=qt,E=si,Zt=ai):(K=Bt,lt=Mt,wt=l,Si=yt,Ei=Kt,bi=Ct,xi=qt,Nt=si,_t=ai):(Mt*wt-l*lt)*G+(l*K-Bt*wt)*rt+(Bt*lt-Mt*K)*pt<0?(U=Bt,mt=Mt,zt=l,B=yt,F=Kt,At=Ct,$t=qt,xt=si,gt=ai):(N=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Ct,_i=qt,E=si,Zt=ai)}}},supportPointB:function(t,e,n,a,o){var r,c,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=t.halfWidth,g=t.halfHeight,P=t.halfDepth;r=d<0?-x:x,c=m<0?-g:g,y=S<0?-P:P,d=p[0]*r+p[1]*c+p[2]*y+t.position.x,m=p[3]*r+p[4]*c+p[5]*y+t.position.y,S=p[6]*r+p[7]*c+p[8]*y+t.position.z,o.set(d,m,S)},supportPointC:function(t,e,n,a,o){var r,c,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=d,g=S,P=x*x+g*g,I=t.radius,D=t.halfHeight;P==0?m<0?(r=I,c=-D,y=0):(r=I,c=D,y=0):(P=t.radius/R.sqrt(P),m<0?(r=x*P,c=-D,y=g*P):(r=x*P,c=D,y=g*P)),d=p[0]*r+p[1]*c+p[2]*y+t.position.x,m=p[3]*r+p[4]*c+p[5]*y+t.position.y,S=p[6]*r+p[7]*c+p[8]*y+t.position.z,o.set(d,m,S)},detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=new $,c=new $,y=new $;if(this.getSep(a,o,r,c,y)){var p=a.position.x,d=a.position.y,m=a.position.z,S=o.position.x,x=o.position.y,g=o.position.z,P=a.halfWidth,I=a.halfHeight,D=a.halfDepth,nt=o.halfHeight,M=o.radius,tt=a.dimentions,it=tt[0],ct=tt[1],ut=tt[2],st=tt[3],kt=tt[4],G=tt[5],rt=tt[6],pt=tt[7],Q=tt[8],ht=tt[9],dt=tt[10],Ht=tt[11],ki=tt[12],wi=tt[13],_i=tt[14],E=tt[15],Zt=tt[16],N=tt[17],z=o.normalDirection.x,at=o.normalDirection.y,B=o.normalDirection.z,F=o.halfDirection.x,At=o.halfDirection.y,$t=o.halfDirection.z,xt=r.x,gt=r.y,U=r.z,mt=xt*it+gt*ct+U*ut,zt=xt*st+gt*kt+U*G,oe=xt*rt+gt*pt+U*Q,Si=xt*z+gt*at+U*B,Ei=mt>0,bi=zt>0,xi=oe>0,Nt=Si>0;Ei||(mt=-mt),bi||(zt=-zt),xi||(oe=-oe),Nt||(Si=-Si);var _t,K,lt,wt,Pi,Qt,Tt,Ut,Wt,vt,ft,yt,Kt,Ct,qt,si,ai,Bt,Mt,l,f,_,k,w,L,H,C,O,X,St,Pt,Gt,Xt,ue,Mi,Li,Wi,ti,be,xe,ge,ci,ri,Hi,hi,pe,me,de,fe,ye,ve,Fi,Di,Qi=0;if(Si>.999?Qi=mt>.999?mt>Si?1:4:zt>.999?zt>Si?2:4:oe>.999&&oe>Si?3:4:mt>.999?Qi=1:zt>.999?Qi=2:oe>.999&&(Qi=3),Qi==0)n.addPoint(c.x,c.y,c.z,xt,gt,U,y.x,this.flip);else if(Qi==4){var Ne,Me,Le,Ce,Ve,Ie,He,Te,Ae,$e,Be,Ee;Nt?(wt=S-F,Pi=x-At,Qt=g-$t,xt=-z,gt=-at,U=-B):(wt=S+F,Pi=x+At,Qt=g+$t,xt=z,gt=at,U=B),Qi=0,(ri=it*xt+ct*gt+ut*U)<(l=1)&&(l=ri,Qi=0),-ri<l&&(l=-ri,Qi=1),(ri=st*xt+kt*gt+G*U)<l&&(l=ri,Qi=2),-ri<l&&(l=-ri,Qi=3),(ri=rt*xt+pt*gt+Q*U)<l&&(l=ri,Qi=4),-ri<l&&(l=-ri,Qi=5);var bt=a.elements;switch(Qi){case 0:Ne=bt[0],Me=bt[1],Le=bt[2],Ce=bt[6],Ve=bt[7],Ie=bt[8],He=bt[9],Te=bt[10],Ae=bt[11],$e=bt[3],Be=bt[4],Ee=bt[5];break;case 1:Ne=bt[15],Me=bt[16],Le=bt[17],Ce=bt[21],Ve=bt[22],Ie=bt[23],He=bt[18],Te=bt[19],Ae=bt[20],$e=bt[12],Be=bt[13],Ee=bt[14];break;case 2:Ne=bt[12],Me=bt[13],Le=bt[14],Ce=bt[0],Ve=bt[1],Ie=bt[2],He=bt[3],Te=bt[4],Ae=bt[5],$e=bt[15],Be=bt[16],Ee=bt[17];break;case 3:Ne=bt[21],Me=bt[22],Le=bt[23],Ce=bt[9],Ve=bt[10],Ie=bt[11],He=bt[6],Te=bt[7],Ae=bt[8],$e=bt[18],Be=bt[19],Ee=bt[20];break;case 4:Ne=bt[12],Me=bt[13],Le=bt[14],Ce=bt[18],Ve=bt[19],Ie=bt[20],He=bt[6],Te=bt[7],Ae=bt[8],$e=bt[0],Be=bt[1],Ee=bt[2];break;case 5:Ne=bt[3],Me=bt[4],Le=bt[5],Ce=bt[9],Ve=bt[10],Ie=bt[11],He=bt[21],Te=bt[22],Ae=bt[23],$e=bt[15],Be=bt[16],Ee=bt[17]}(Mt=xt*(Ne-wt)+gt*(Me-Pi)+U*(Le-Qt))<=0&&n.addPoint(Ne,Me,Le,-xt,-gt,-U,Mt,this.flip),(Mt=xt*(Ce-wt)+gt*(Ve-Pi)+U*(Ie-Qt))<=0&&n.addPoint(Ce,Ve,Ie,-xt,-gt,-U,Mt,this.flip),(Mt=xt*(He-wt)+gt*(Te-Pi)+U*(Ae-Qt))<=0&&n.addPoint(He,Te,Ae,-xt,-gt,-U,Mt,this.flip),(Mt=xt*($e-wt)+gt*(Be-Pi)+U*(Ee-Qt))<=0&&n.addPoint($e,Be,Ee,-xt,-gt,-U,Mt,this.flip)}else{switch(Qi){case 1:Ei?(_t=p+ht,K=d+dt,lt=m+Ht,xt=it,gt=ct,U=ut):(_t=p-ht,K=d-dt,lt=m-Ht,xt=-it,gt=-ct,U=-ut),pe=st,me=kt,de=G,Fi=I,fe=rt,ye=pt,ve=Q,Di=D;break;case 2:bi?(_t=p+ki,K=d+wi,lt=m+_i,xt=st,gt=kt,U=G):(_t=p-ki,K=d-wi,lt=m-_i,xt=-st,gt=-kt,U=-G),pe=it,me=ct,de=ut,Fi=P,fe=rt,ye=pt,ve=Q,Di=D;break;case 3:xi?(_t=p+E,K=d+Zt,lt=m+N,xt=rt,gt=pt,U=Q):(_t=p-E,K=d-Zt,lt=m-N,xt=-rt,gt=-pt,U=-Q),pe=it,me=ct,de=ut,Fi=P,fe=st,ye=kt,ve=G,Di=I}if(wt=S+(f=(l=xt*z+gt*at+U*B)<0?nt:-nt)*z,Pi=x+f*at,Qt=g+f*B,Si>=.999999?(_=-gt,k=U,w=xt):(_=xt,k=gt,w=U),H=(f=_*z+k*at+w*B)*z-_,C=f*at-k,O=f*B-w,(f=R.sqrt(H*H+C*C+O*O))==0)return;if(_=wt+(H*=f=M/f),k=Pi+(C*=f),w=Qt+(O*=f),l<-.96||l>.96)Tt=z*z*1.5-.5,Ut=z*at*1.5-.866025403*B,Wt=z*B*1.5+.866025403*at,vt=at*z*1.5+.866025403*B,ft=at*at*1.5-.5,yt=at*B*1.5-.866025403*z,Kt=B*z*1.5-.866025403*at,Ct=B*at*1.5+.866025403*z,qt=B*B*1.5-.5,(ti=pe*(_=(si=_)-(Mt=xt*(si-_t)+gt*((ai=k)-K)+U*((Bt=w)-lt))*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*U-lt))<-Fi?ti=-Fi:ti>Fi&&(ti=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),si=_t+(_=ti*pe+ci*fe),ai=K+(k=ti*me+ci*ye),Bt=lt+(w=ti*de+ci*ve),n.addPoint(si,ai,Bt,xt,gt,U,Mt,this.flip),ai=H*vt+C*ft+O*yt,Bt=H*Kt+C*Ct+O*qt,(Mt=xt*((si=(H=si=H*Tt+C*Ut+O*Wt)+wt)-_t)+gt*((ai=(C=ai)+Pi)-K)+U*((Bt=(O=Bt)+Qt)-lt))<=0&&((ti=pe*(_=si-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*U-lt))<-Fi?ti=-Fi:ti>Fi&&(ti=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),si=_t+(_=ti*pe+ci*fe),ai=K+(k=ti*me+ci*ye),Bt=lt+(w=ti*de+ci*ve),n.addPoint(si,ai,Bt,xt,gt,U,Mt,this.flip)),ai=H*vt+C*ft+O*yt,Bt=H*Kt+C*Ct+O*qt,(Mt=xt*((si=(H=si=H*Tt+C*Ut+O*Wt)+wt)-_t)+gt*((ai=(C=ai)+Pi)-K)+U*((Bt=(O=Bt)+Qt)-lt))<=0&&((ti=pe*(_=si-Mt*xt-_t)+me*(k=ai-Mt*gt-K)+de*(w=Bt-Mt*U-lt))<-Fi?ti=-Fi:ti>Fi&&(ti=Fi),(ci=fe*_+ye*k+ve*w)<-Di?ci=-Di:ci>Di&&(ci=Di),si=_t+(_=ti*pe+ci*fe),ai=K+(k=ti*me+ci*ye),Bt=lt+(w=ti*de+ci*ve),n.addPoint(si,ai,Bt,xt,gt,U,Mt,this.flip));else{if(Mi=_,l>0?(be=_+2*F,xe=k+2*At,ge=w+2*$t):(be=_-2*F,xe=k-2*At,ge=w-2*$t),_=(be-=(ci=xt*(be-_t)+gt*(xe-K)+U*(ge-lt))*xt)-(Mi-=(ti=xt*(Mi-_t)+gt*((Li=k)-K)+U*((Wi=w)-lt))*xt),k=(xe-=ci*gt)-(Li-=ti*gt),w=(ge-=ci*U)-(Wi-=ti*U),L=ci-ti,Hi=(zt=(Gt=be-_t)*pe+(Xt=xe-K)*me+(ue=ge-lt)*de)-Fi,(ri=(mt=(X=Mi-_t)*pe+(St=Li-K)*me+(Pt=Wi-lt)*de)-Fi)>0){if(Hi>0)return;mt=(X=(Mi+=_*(hi=ri/(ri-Hi)))-_t)*pe+(St=(Li+=k*hi)-K)*me+(Pt=(Wi+=w*hi)-lt)*de,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ti+=L*hi)}else Hi>0&&(zt=(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t)*pe+(Xt=(xe=Li+k*hi)-K)*me+(ue=(ge=Wi+w*hi)-lt)*de,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ti+L*hi)-ti);if(Hi=zt+Fi,(ri=mt+Fi)<0){if(Hi<0)return;X=(Mi+=_*(hi=ri/(ri-Hi)))-_t,St=(Li+=k*hi)-K,Pt=(Wi+=w*hi)-lt,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ti+=L*hi)}else Hi<0&&(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t,Xt=(xe=Li+k*hi)-K,ue=(ge=Wi+w*hi)-lt,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ti+L*hi)-ti);if(Hi=(zt=Gt*fe+Xt*ye+ue*ve)-Di,(ri=(mt=X*fe+St*ye+Pt*ve)-Di)>0){if(Hi>0)return;mt=(X=(Mi+=_*(hi=ri/(ri-Hi)))-_t)*fe+(St=(Li+=k*hi)-K)*ye+(Pt=(Wi+=w*hi)-lt)*ve,_=be-Mi,k=xe-Li,w=ge-Wi,L=ci-(ti+=L*hi)}else Hi>0&&(zt=(Gt=(be=Mi+_*(hi=ri/(ri-Hi)))-_t)*fe+(Xt=(xe=Li+k*hi)-K)*ye+(ue=(ge=Wi+w*hi)-lt)*ve,_=be-Mi,k=xe-Li,w=ge-Wi,L=(ci=ti+L*hi)-ti);if(Hi=zt+Di,(ri=mt+Di)<0){if(Hi<0)return;Mi+=_*(hi=ri/(ri-Hi)),Li+=k*hi,Wi+=w*hi,ti+=L*hi}else Hi<0&&(be=Mi+_*(hi=ri/(ri-Hi)),xe=Li+k*hi,ge=Wi+w*hi,ci=ti+L*hi);ti<0&&n.addPoint(Mi,Li,Wi,xt,gt,U,ti,this.flip),ci<0&&n.addPoint(be,xe,ge,xt,gt,U,ci,this.flip)}}}}}),xn.prototype=Object.assign(Object.create(Pe.prototype),{constructor:xn,getSep:function(t,e,n,a,o){var r,c,y,p,d,m,S,x,g,P,I,D,nt,M=new $,tt=t.position.x,it=t.position.y,ct=t.position.z,ut=e.position.x,st=e.position.y,kt=e.position.z,G=ut-tt,rt=st-it,pt=kt-ct;G*G+rt*rt+pt*pt==0&&(rt=.001);var Q=-G,ht=-rt,dt=-pt;this.supportPoint(t,-Q,-ht,-dt,M);var Ht=M.x,ki=M.y,wi=M.z;this.supportPoint(e,Q,ht,dt,M);var _i=M.x,E=M.y,Zt=M.z,N=_i-Ht,z=E-ki,at=Zt-wi;if(N*Q+z*ht+at*dt<=0)return!1;if((Q=z*pt-at*rt)*Q+(ht=at*G-N*pt)*ht+(dt=N*rt-z*G)*dt==0)return n.set(N-G,z-rt,at-pt).normalize(),a.set(.5*(Ht+_i),.5*(ki+E),.5*(wi+Zt)),!0;this.supportPoint(t,-Q,-ht,-dt,M);var B=M.x,F=M.y,At=M.z;this.supportPoint(e,Q,ht,dt,M);var $t=M.x,xt=M.y,gt=M.z,U=$t-B,mt=xt-F,zt=gt-At;if(U*Q+mt*ht+zt*dt<=0)return!1;(Q=(c=z-rt)*(m=zt-pt)-(y=at-pt)*(d=mt-rt))*G+(ht=y*(p=U-G)-(r=N-G)*m)*rt+(dt=r*d-c*p)*pt>0&&(r=N,c=z,y=at,N=U,z=mt,at=zt,U=r,mt=c,zt=y,r=Ht,c=ki,y=wi,Ht=B,ki=F,wi=At,B=r,F=c,At=y,r=_i,c=E,y=Zt,_i=$t,E=xt,Zt=gt,$t=r,xt=c,gt=y,Q=-Q,ht=-ht,dt=-dt);for(var oe=0;;){if(++oe>100)return!1;this.supportPoint(t,-Q,-ht,-dt,M);var Si=M.x,Ei=M.y,bi=M.z;this.supportPoint(e,Q,ht,dt,M);var xi=M.x,Nt=M.y,_t=M.z,K=xi-Si,lt=Nt-Ei,wt=_t-bi;if(K*Q+lt*ht+wt*dt<=0)return!1;if((z*wt-at*lt)*G+(at*K-N*wt)*rt+(N*lt-z*K)*pt<0)U=K,mt=lt,zt=wt,B=Si,F=Ei,At=bi,$t=xi,xt=Nt,gt=_t,Q=(c=z-rt)*(m=wt-pt)-(y=at-pt)*(d=lt-rt),ht=y*(p=K-G)-(r=N-G)*m,dt=r*d-c*p;else if((lt*zt-wt*mt)*G+(wt*U-K*zt)*rt+(K*mt-lt*U)*pt<0)N=K,z=lt,at=wt,Ht=Si,ki=Ei,wi=bi,_i=xi,E=Nt,Zt=_t,Q=(c=lt-rt)*(m=zt-pt)-(y=wt-pt)*(d=mt-rt),ht=y*(p=U-G)-(r=K-G)*m,dt=r*d-c*p;else for(var Pi=!1;;){if(Q=(c=mt-z)*(m=wt-at)-(y=zt-at)*(d=lt-z),ht=y*(p=K-N)-(r=U-N)*m,dt=r*d-c*p,(Q*=S=1/R.sqrt(Q*Q+ht*ht+dt*dt))*N+(ht*=S)*z+(dt*=S)*at>=0&&!Pi){var Qt=(z*zt-at*mt)*K+(at*U-N*zt)*lt+(N*mt-z*U)*wt,Tt=(lt*zt-wt*mt)*G+(wt*U-K*zt)*rt+(K*mt-lt*U)*pt,Ut=(rt*at-pt*z)*K+(pt*N-G*at)*lt+(G*z-rt*N)*wt,Wt=(mt*at-zt*z)*G+(zt*N-U*at)*rt+(U*z-mt*N)*pt,vt=Qt+Tt+Ut+Wt;vt<=0&&(Qt=0,vt=(Tt=(mt*wt-zt*lt)*Q+(zt*K-U*wt)*ht+(U*lt-mt*K)*dt)+(Ut=(lt*zt-wt*mt)*Q+(wt*U-K*zt)*ht+(K*mt-lt*U)*dt)+(Wt=(z*zt-at*mt)*Q+(at*U-N*zt)*ht+(N*mt-z*U)*dt));var ft=1/vt;x=(tt*Qt+Ht*Tt+B*Ut+Si*Wt)*ft,g=(it*Qt+ki*Tt+F*Ut+Ei*Wt)*ft,P=(ct*Qt+wi*Tt+At*Ut+bi*Wt)*ft,I=(ut*Qt+_i*Tt+$t*Ut+xi*Wt)*ft,D=(st*Qt+E*Tt+xt*Ut+Nt*Wt)*ft,nt=(kt*Qt+Zt*Tt+gt*Ut+_t*Wt)*ft,Pi=!0}this.supportPoint(t,-Q,-ht,-dt,M);var yt=M.x,Kt=M.y,Ct=M.z;this.supportPoint(e,Q,ht,dt,M);var qt=M.x,si=M.y,ai=M.z,Bt=qt-yt,Mt=si-Kt,l=ai-Ct,f=-(Bt*Q+Mt*ht+l*dt);if((Bt-K)*Q+(Mt-lt)*ht+(l-wt)*dt<=.01||f>=0)return!!Pi&&(n.set(-Q,-ht,-dt),a.set(.5*(x+I),.5*(g+D),.5*(P+nt)),o.x=f,!0);(Mt*at-l*z)*G+(l*N-Bt*at)*rt+(Bt*z-Mt*N)*pt<0?(Mt*zt-l*mt)*G+(l*U-Bt*zt)*rt+(Bt*mt-Mt*U)*pt<0?(N=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Ct,_i=qt,E=si,Zt=ai):(K=Bt,lt=Mt,wt=l,Si=yt,Ei=Kt,bi=Ct,xi=qt,Nt=si,_t=ai):(Mt*wt-l*lt)*G+(l*K-Bt*wt)*rt+(Bt*lt-Mt*K)*pt<0?(U=Bt,mt=Mt,zt=l,B=yt,F=Kt,At=Ct,$t=qt,xt=si,gt=ai):(N=Bt,z=Mt,at=l,Ht=yt,ki=Kt,wi=Ct,_i=qt,E=si,Zt=ai)}}},supportPoint:function(t,e,n,a,o){var r,c,y,p=t.rotation.elements,d=p[0]*e+p[3]*n+p[6]*a,m=p[1]*e+p[4]*n+p[7]*a,S=p[2]*e+p[5]*n+p[8]*a,x=d,g=S,P=x*x+g*g,I=t.radius,D=t.halfHeight;P==0?m<0?(r=I,c=-D,y=0):(r=I,c=D,y=0):(P=t.radius/R.sqrt(P),m<0?(r=x*P,c=-D,y=g*P):(r=x*P,c=D,y=g*P)),d=p[0]*r+p[1]*c+p[2]*y+t.position.x,m=p[3]*r+p[4]*c+p[5]*y+t.position.y,S=p[6]*r+p[7]*c+p[8]*y+t.position.z,o.set(d,m,S)},detectCollision:function(t,e,n){var a,o;t.id<e.id?(a=t,o=e):(a=e,o=t);var r,c,y,p,d,m,S,x,g,P,I,D,nt,M,tt,it,ct,ut,st,kt,G,rt=a.position,pt=o.position,Q=rt.x,ht=rt.y,dt=rt.z,Ht=pt.x,ki=pt.y,wi=pt.z,_i=a.halfHeight,E=o.halfHeight,Zt=a.normalDirection,N=o.normalDirection,z=a.halfDirection,at=o.halfDirection,B=a.radius,F=o.radius,At=Zt.x,$t=Zt.y,xt=Zt.z,gt=N.x,U=N.y,mt=N.z,zt=z.x,oe=z.y,Si=z.z,Ei=at.x,bi=at.y,xi=at.z,Nt=Q-Ht,_t=ht-ki,K=dt-wi,lt=new $,wt=new $,Pi=new $;if(this.getSep(a,o,lt,wt,Pi)){var Qt=lt.x*At+lt.y*$t+lt.z*xt,Tt=lt.x*gt+lt.y*U+lt.z*mt,Ut=Qt>0,Wt=Tt>0;Ut||(Qt=-Qt),Wt||(Tt=-Tt);var vt,ft,yt,Kt=0;(Qt>.999||Tt>.999)&&(Kt=Qt>Tt?1:2);var Ct,qt,si,ai,Bt,Mt,l,f,_,k,w,L,H,C,O,X,St=Pi.x;switch(vt=lt.x,ft=lt.y,yt=lt.z,Kt){case 0:n.addPoint(wt.x,wt.y,wt.z,vt,ft,yt,St,!1);break;case 1:if(Ut?(c=Q+zt,y=ht+oe,p=dt+Si,vt=At,ft=$t,yt=xt):(c=Q-zt,y=ht-oe,p=dt-Si,vt=-At,ft=-$t,yt=-xt),d=Ht+(r=(st=vt*gt+ft*U+yt*mt)<0?E:-E)*gt,m=ki+r*U,S=wi+r*mt,Tt>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),Nt=(r=x*gt+g*U+P*mt)*gt-x,_t=r*U-g,K=r*mt-P,(r=R.sqrt(Nt*Nt+_t*_t+K*K))==0)break;if(x=d+(Nt*=r=F/r),g=m+(_t*=r),P=S+(K*=r),st<-.96||st>.96)Ct=gt*gt*1.5-.5,qt=gt*U*1.5-.866025403*mt,si=gt*mt*1.5+.866025403*U,ai=U*gt*1.5+.866025403*mt,Bt=U*U*1.5-.5,Mt=U*mt*1.5-.866025403*gt,l=mt*gt*1.5-.866025403*U,f=mt*U*1.5+.866025403*gt,_=mt*mt*1.5-.5,(r=(x=(k=x)-(H=vt*(k-c)+ft*((w=g)-y)+yt*((L=P)-p))*vt-c)*x+(g=w-H*ft-y)*g+(P=L-H*yt-p)*P)>B*B&&(x*=r=B/R.sqrt(r),g*=r,P*=r),k=c+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,H,!1),w=Nt*ai+_t*Bt+K*Mt,L=Nt*l+_t*f+K*_,(H=vt*((k=(Nt=k=Nt*Ct+_t*qt+K*si)+d)-c)+ft*((w=(_t=w)+m)-y)+yt*((L=(K=L)+S)-p))<=0&&((r=(x=k-H*vt-c)*x+(g=w-H*ft-y)*g+(P=L-H*yt-p)*P)>B*B&&(x*=r=B/R.sqrt(r),g*=r,P*=r),k=c+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,H,!1)),w=Nt*ai+_t*Bt+K*Mt,L=Nt*l+_t*f+K*_,(H=vt*((k=(Nt=k=Nt*Ct+_t*qt+K*si)+d)-c)+ft*((w=(_t=w)+m)-y)+yt*((L=(K=L)+S)-p))<=0&&((r=(x=k-H*vt-c)*x+(g=w-H*ft-y)*g+(P=L-H*yt-p)*P)>B*B&&(x*=r=B/R.sqrt(r),g*=r,P*=r),k=c+x,w=y+g,L=p+P,n.addPoint(k,w,L,vt,ft,yt,H,!1));else{if(I=x,st>0?(M=x+gt*E*2,tt=g+U*E*2,it=P+mt*E*2):(M=x-gt*E*2,tt=g-U*E*2,it=P-mt*E*2),(X=(C=(Nt=c-(I-=(ct=vt*(I-c)+ft*((D=g)-y)+yt*((nt=P)-p))*vt))*(x=(M-=(ut=vt*(M-c)+ft*(tt-y)+yt*(it-p))*vt)-I)+(_t=y-(D-=ct*ft))*(g=(tt-=ut*ft)-D)+(K=p-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*C-(O=x*x+g*g+P*P)*(Nt*Nt+_t*_t+K*K-B*B))<0)break;(G=(C-(X=R.sqrt(X)))/O)<(kt=(C+X)/O)&&(r=kt,kt=G,G=r),G>1&&(G=1),kt<0&&(kt=0),x=I+(M-I)*kt,g=D+(tt-D)*kt,P=nt+(it-nt)*kt,M=I+(M-I)*G,tt=D+(tt-D)*G,it=nt+(it-nt)*G,I=x,D=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*G,(ct=r)<0&&n.addPoint(I,D,nt,vt,ft,yt,H,!1),ut<0&&n.addPoint(M,tt,it,vt,ft,yt,H,!1)}break;case 2:if(Wt?(d=Ht-Ei,m=ki-bi,S=wi-xi,vt=-gt,ft=-U,yt=-mt):(d=Ht+Ei,m=ki+bi,S=wi+xi,vt=gt,ft=U,yt=mt),c=Q+(r=(st=vt*At+ft*$t+yt*xt)<0?_i:-_i)*At,y=ht+r*$t,p=dt+r*xt,Qt>=.999999?(x=-ft,g=yt,P=vt):(x=vt,g=ft,P=yt),Nt=(r=x*At+g*$t+P*xt)*At-x,_t=r*$t-g,K=r*xt-P,(r=R.sqrt(Nt*Nt+_t*_t+K*K))==0)break;if(x=c+(Nt*=r=B/r),g=y+(_t*=r),P=p+(K*=r),st<-.96||st>.96)Ct=At*At*1.5-.5,qt=At*$t*1.5-.866025403*xt,si=At*xt*1.5+.866025403*$t,ai=$t*At*1.5+.866025403*xt,Bt=$t*$t*1.5-.5,Mt=$t*xt*1.5-.866025403*At,l=xt*At*1.5-.866025403*$t,f=xt*$t*1.5+.866025403*At,_=xt*xt*1.5-.5,(r=(x=(k=x)-(H=vt*(k-d)+ft*((w=g)-m)+yt*((L=P)-S))*vt-d)*x+(g=w-H*ft-m)*g+(P=L-H*yt-S)*P)>F*F&&(x*=r=F/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1),w=Nt*ai+_t*Bt+K*Mt,L=Nt*l+_t*f+K*_,(H=vt*((k=(Nt=k=Nt*Ct+_t*qt+K*si)+c)-d)+ft*((w=(_t=w)+y)-m)+yt*((L=(K=L)+p)-S))<=0&&((r=(x=k-H*vt-d)*x+(g=w-H*ft-m)*g+(P=L-H*yt-S)*P)>F*F&&(x*=r=F/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1)),w=Nt*ai+_t*Bt+K*Mt,L=Nt*l+_t*f+K*_,(H=vt*((k=(Nt=k=Nt*Ct+_t*qt+K*si)+c)-d)+ft*((w=(_t=w)+y)-m)+yt*((L=(K=L)+p)-S))<=0&&((r=(x=k-H*vt-d)*x+(g=w-H*ft-m)*g+(P=L-H*yt-S)*P)>F*F&&(x*=r=F/R.sqrt(r),g*=r,P*=r),k=d+x,w=m+g,L=S+P,n.addPoint(k,w,L,-vt,-ft,-yt,H,!1));else{if(I=x,st>0?(M=x+At*_i*2,tt=g+$t*_i*2,it=P+xt*_i*2):(M=x-At*_i*2,tt=g-$t*_i*2,it=P-xt*_i*2),(X=(C=(Nt=d-(I-=(ct=vt*(I-d)+ft*((D=g)-m)+yt*((nt=P)-S))*vt))*(x=(M-=(ut=vt*(M-d)+ft*(tt-m)+yt*(it-S))*vt)-I)+(_t=m-(D-=ct*ft))*(g=(tt-=ut*ft)-D)+(K=S-(nt-=ct*yt))*(P=(it-=ut*yt)-nt))*C-(O=x*x+g*g+P*P)*(Nt*Nt+_t*_t+K*K-F*F))<0)break;(G=(C-(X=R.sqrt(X)))/O)<(kt=(C+X)/O)&&(r=kt,kt=G,G=r),G>1&&(G=1),kt<0&&(kt=0),x=I+(M-I)*kt,g=D+(tt-D)*kt,P=nt+(it-nt)*kt,M=I+(M-I)*G,tt=D+(tt-D)*G,it=nt+(it-nt)*G,I=x,D=g,nt=P,r=ct+(ut-ct)*kt,ut=ct+(ut-ct)*G,(ct=r)<0&&n.addPoint(I,D,nt,-vt,-ft,-yt,ct,!1),ut<0&&n.addPoint(M,tt,it,-vt,-ft,-yt,ut,!1)}}}}}),_e.prototype=Object.assign(Object.create(Pe.prototype),{constructor:_e,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r,c,y,p,d,m=o.dimentions,S=a.position,x=S.x,g=S.y,P=S.z,I=o.position,D=I.x,nt=I.y,M=I.z,tt=a.radius,it=o.halfWidth,ct=o.halfHeight,ut=o.halfDepth,st=x-D,kt=g-nt,G=P-M,rt=m[0]*st+m[1]*kt+m[2]*G,pt=m[3]*st+m[4]*kt+m[5]*G,Q=m[6]*st+m[7]*kt+m[8]*G,ht=0;rt>it?rt=it:rt<-it?rt=-it:ht=1,pt>ct?pt=ct:pt<-ct?pt=-ct:ht|=2,Q>ut?Q=ut:Q<-ut?Q=-ut:ht|=4,ht==7?(G=Q<0?ut+Q:ut-Q,(st=rt<0?it+rt:it-rt)<(kt=pt<0?ct+pt:ct-pt)?st<G?(p=st-it,rt<0?(rt=-it,st=m[0],kt=m[1],G=m[2]):(rt=it,st=-m[0],kt=-m[1],G=-m[2])):(p=G-ut,Q<0?(Q=-ut,st=m[6],kt=m[7],G=m[8]):(Q=ut,st=-m[6],kt=-m[7],G=-m[8])):kt<G?(p=kt-ct,pt<0?(pt=-ct,st=m[3],kt=m[4],G=m[5]):(pt=ct,st=-m[3],kt=-m[4],G=-m[5])):(p=G-ut,Q<0?(Q=-ut,st=m[6],kt=m[7],G=m[8]):(Q=ut,st=-m[6],kt=-m[7],G=-m[8])),r=D+rt*m[0]+pt*m[3]+Q*m[6],c=nt+rt*m[1]+pt*m[4]+Q*m[7],y=M+rt*m[2]+pt*m[5]+Q*m[8],n.addPoint(x+tt*st,g+tt*kt,P+tt*G,st,kt,G,p-tt,this.flip)):(r=D+rt*m[0]+pt*m[3]+Q*m[6],c=nt+rt*m[1]+pt*m[4]+Q*m[7],y=M+rt*m[2]+pt*m[5]+Q*m[8],(p=(st=r-S.x)*st+(kt=c-S.y)*kt+(G=y-S.z)*G)>0&&p<tt*tt&&(st*=d=1/(p=R.sqrt(p)),kt*=d,G*=d,n.addPoint(x+tt*st,g+tt*kt,P+tt*G,st,kt,G,p-tt,this.flip)))}}),Qs.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Qs,detectCollision:function(t,e,n){var a,o;this.flip?(a=e,o=t):(a=t,o=e);var r=a.position,c=r.x,y=r.y,p=r.z,d=o.position,m=d.x,S=d.y,x=d.z,g=o.normalDirection.x,P=o.normalDirection.y,I=o.normalDirection.z,D=a.radius,nt=o.radius,M=D+nt,tt=o.halfHeight,it=c-m,ct=y-S,ut=p-x,st=it*g+ct*P+ut*I;if(!(st<-tt-D||st>tt+D)){var kt,G=m+st*g,rt=S+st*P,pt=x+st*I,Q=c-G,ht=y-rt,dt=p-pt,Ht=Q*Q+ht*ht+dt*dt;Ht>M*M||(Ht>nt*nt&&(Q*=Ht=nt/R.sqrt(Ht),ht*=Ht,dt*=Ht),st<-tt?st=-tt:st>tt&&(st=tt),(Ht=(it=(G=m+st*g+Q)-c)*it+(ct=(rt=S+st*P+ht)-y)*ct+(ut=(pt=x+st*I+dt)-p)*ut)>0&&Ht<D*D&&(it*=kt=1/(Ht=R.sqrt(Ht)),ct*=kt,ut*=kt,n.addPoint(c+it*D,y+ct*D,p+ut*D,it,ct,ut,Ht-D,this.flip)))}}}),Se.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Se,detectCollision:function(t,e,n){var a=t,o=e,r=a.position,c=o.position,y=c.x-r.x,p=c.y-r.y,d=c.z-r.z,m=y*y+p*p+d*d,S=a.radius,x=S+o.radius;if(m>0&&m<x*x){var g=1/(m=R.sqrt(m));y*=g,p*=g,d*=g,n.addPoint(r.x+y*S,r.y+p*S,r.z+d*S,y,p,d,m-x,!1)}}}),Ge.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Ge,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,c=this.flip?e:t,y=this.flip?t:e,p=c.radius;o.sub(c.position,y.position),o.x*=y.normal.x,o.y*=y.normal.y,o.z*=y.normal.z,(a=o.lengthSq())>0&&a<p*p&&(a=R.sqrt(a),o.copy(y.normal).negate(),r.copy(c.position).addScaledVector(o,p),n.addPointVec(r,o,a-p,this.flip))}}),Xs.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Xs,detectCollision:function(t,e,n){var a,o=this.n,r=this.p,c=this.cc,y=this.flip?e:t,p=this.flip?t:e,d=y.dimentions,m=y.halfWidth,S=y.halfHeight,x=y.halfDepth,g=0;this.dix.set(d[0],d[1],d[2]),this.diy.set(d[3],d[4],d[5]),this.diz.set(d[6],d[7],d[8]),o.sub(y.position,p.position),o.x*=p.normal.x,o.y*=p.normal.y,o.z*=p.normal.z,c.set(R.dotVectors(this.dix,o),R.dotVectors(this.diy,o),R.dotVectors(this.diz,o)),c.x>m?c.x=m:c.x<-m?c.x=-m:g=1,c.y>S?c.y=S:c.y<-S?c.y=-S:g|=2,c.z>x?c.z=x:c.z<-x?c.z=-x:g|=4,g===7&&(o.set(c.x<0?m+c.x:m-c.x,c.y<0?S+c.y:S-c.y,c.z<0?x+c.z:x-c.z),o.x<o.y?o.x<o.z?(a=o.x-m,c.x<0?(c.x=-m,o.copy(this.dix)):(c.x=m,o.subEqual(this.dix))):(a=o.z-x,c.z<0?(c.z=-x,o.copy(this.diz)):(c.z=x,o.subEqual(this.diz))):o.y<o.z?(a=o.y-S,c.y<0?(c.y=-S,o.copy(this.diy)):(c.y=S,o.subEqual(this.diy))):(a=o.z-x,c.z<0?(c.z=-x,o.copy(this.diz)):(c.z=x,o.subEqual(this.diz))),r.copy(p.position).addScaledVector(o,1),n.addPointVec(r,o,a,this.flip))}}),Object.assign(Tn.prototype,{World:!0,play:function(){if(this.timer===null){var t=this;this.timer=setInterval(function(){t.step()},this.timerate)}},stop:function(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)},setGravity:function(t){this.gravity.fromArray(t)},getInfo:function(){return this.isStat?this.performance.show():""},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;this.joints!==null;)this.removeJoint(this.joints);for(;this.contacts!==null;)this.removeContact(this.contacts);for(;this.rigidBodies!==null;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(t){t.parent&&ce("World","It is not possible to be added to more than one world one of the rigid body"),t.setParent(this);for(var e=t.shapes;e!==null;e=e.next)this.addShape(e);this.rigidBodies!==null&&((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var e=t;if(e.parent===this){e.awake();for(var n=e.jointLink;n!=null;){var a=n.joint;n=n.next,this.removeJoint(a)}for(var o=t.shapes;o!==null;o=o.next)this.removeShape(o);var r=e.prev,c=e.next;r!==null&&(r.next=c),c!==null&&(c.prev=r),this.rigidBodies==e&&(this.rigidBodies=c),e.prev=null,e.next=null,e.parent=null,this.numRigidBodies--}},getByName:function(t){for(var e=this.rigidBodies;e!==null;){if(e.name===t)return e;e=e.next}for(var n=this.joints;n!==null;){if(n.name===t)return n;n=n.next}return null},addShape:function(t){t.parent&&t.parent.parent||ce("World","It is not possible to be added alone to shape world"),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&&ce("World","It is not possible to be added to more than one world one of the joint"),this.joints!=null&&((this.joints.prev=t).next=this.joints),this.joints=t,t.setParent(this),this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var e=t,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),this.joints==e&&(this.joints=a),e.prev=null,e.next=null,this.numJoints--,e.awake(),e.detach(),e.parent=null},addContact:function(t,e){var n;this.unusedContacts!==null?(n=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):n=new Zs,n.attach(t,e),n.detector=this.detectors[t.type][e.type],this.contacts&&((this.contacts.prev=n).next=this.contacts),this.contacts=n,this.numContacts++},removeContact:function(t){var e=t.prev,n=t.next;n&&(n.prev=e),e&&(e.next=n),this.contacts==t&&(this.contacts=n),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},getContact:function(t,e){var n,a;t=t.constructor===Ns?t.name:t,e=e.constructor===Ns?e.name:e;for(var o=this.contacts;o!==null;){if(n=o.body1.name,a=o.body2.name,n===t&&a===e||a===t&&n===e)return o.touching?o:null;o=o.next}return null},checkContact:function(t,e){for(var n,a,o=this.contacts;o!==null;){if(n=o.body1.name||" ",a=o.body2.name||" ",n==t&&a==e||a==t&&n==e)return!!o.touching;o=o.next}},callSleep:function(t){return!!t.allowSleep&&!(t.linearVelocity.lengthSq()>.04)&&!(t.angularVelocity.lengthSq()>.25)},step:function(){var t=this.isStat;t&&this.performance.setTime(0);for(var e=this.rigidBodies;e!==null;)e.addedToIsland=!1,e.sleeping&&e.testWakeUp(),e=e.next;t&&this.performance.setTime(1),this.broadPhase.detectPairs();for(var n=this.broadPhase.pairs,a=this.broadPhase.numPairs;a--;){var o,r,c,y=n[a];y.shape1.id<y.shape2.id?(o=y.shape1,r=y.shape2):(o=y.shape2,r=y.shape1),c=o.numContacts<r.numContacts?o.contactLink:r.contactLink;for(var p=!1;c;){if((it=c.contact).shape1==o&&it.shape2==r){it.persisting=!0,p=!0;break}c=c.next}p||this.addContact(o,r)}for(t&&this.performance.calcBroadPhase(),this.numContactPoints=0,it=this.contacts;it!==null;)if(it.persisting||!it.shape1.aabb.intersectTest(it.shape2.aabb)){var d=it.body1,m=it.body2;(d.isDynamic&&!d.sleeping||m.isDynamic&&!m.sleeping)&&it.updateManifold(),this.numContactPoints+=it.manifold.numPoints,it.persisting=!1,it.constraint.addedToIsland=!1,it=it.next}else{var S=it.next;this.removeContact(it),it=S}t&&this.performance.calcNarrowPhase();var x,g,P=1/this.timeStep;for(x=this.joints;x!==null;x=x.next)x.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],t&&this.performance.setTime(1),this.numIslands=0;for(var I=this.rigidBodies;I!==null;I=I.next)if(!(I.addedToIsland||I.isStatic||I.sleeping))if(I.isLonely())I.isDynamic&&I.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(I)?(I.sleepTime+=this.timeStep,I.sleepTime>.5?I.sleep():I.updatePosition(this.timeStep)):(I.sleepTime=0,I.updatePosition(this.timeStep)),this.numIslands++;else{var D=0,nt=0,M=1;this.islandStack[0]=I,I.addedToIsland=!0;do if(e=this.islandStack[--M],this.islandStack[M]=null,e.sleeping=!1,this.islandRigidBodies[D++]=e,!e.isStatic){for(var tt=e.contactLink;tt!==null;tt=tt.next){var it;!(g=(it=tt.contact).constraint).addedToIsland&&it.touching&&(this.islandConstraints[nt++]=g,g.addedToIsland=!0,(S=tt.body).addedToIsland||(this.islandStack[M++]=S,S.addedToIsland=!0))}for(var ct=e.jointLink;ct!==null;ct=ct.next)(g=ct.joint).addedToIsland||(this.islandConstraints[nt++]=g,g.addedToIsland=!0,!(S=ct.body).addedToIsland&&S.isDynamic&&(this.islandStack[M++]=S,S.addedToIsland=!0))}while(M!=0);for(var ut=new $().addScaledVector(this.gravity,this.timeStep),st=D;st--;)(e=this.islandRigidBodies[st]).isDynamic&&e.linearVelocity.addEqual(ut);if(this.enableRandomizer){for(st=nt;st--;)if(st!==0){var kt=(this.randX=this.randX*this.randA+this.randB&2147483647)/2147483648*st|0;g=this.islandConstraints[st],this.islandConstraints[st]=this.islandConstraints[kt],this.islandConstraints[kt]=g}}for(st=nt;st--;)this.islandConstraints[st].preSolve(this.timeStep,P);for(var G=this.numIterations;G--;)for(st=nt;st--;)this.islandConstraints[st].solve();for(st=nt;st--;)this.islandConstraints[st].postSolve(),this.islandConstraints[st]=null;var rt=10;for(st=D;st--;)e=this.islandRigidBodies[st],this.callSleep(e)?(e.sleepTime+=this.timeStep,e.sleepTime<rt&&(rt=e.sleepTime)):(e.sleepTime=0,rt=0);if(rt>.5)for(st=D;st--;)this.islandRigidBodies[st].sleep(),this.islandRigidBodies[st]=null;else for(st=D;st--;)this.islandRigidBodies[st].updatePosition(this.timeStep),this.islandRigidBodies[st]=null;this.numIslands++}t&&this.performance.calcEnd(),this.postLoop!==null&&this.postLoop()},remove:function(t){},add:function(t){var e=(t=t||{}).type||"box";return e.constructor===String&&(e=[e]),e[0].substring(0,5)==="joint"?this.initJoint(e[0],t):this.initBody(e,t)},initBody:function(t,e){var n=this.invScale,a=e.move||!1,o=e.kinematic||!1,r=e.pos||[0,0,0];r=r.map(function(I){return I*n});var c=e.posShape||[0,0,0];c=c.map(function(I){return I*n});var y=e.rot||[0,0,0];y=y.map(function(I){return I*R.degtorad});var p=e.rotShape;p=y.map(function(I){return I*R.degtorad});var d=e.size===void 0?[1,1,1]:e.size;d.length===1&&(d[1]=d[0]),d.length===2&&(d[2]=d[0]),d=d.map(function(I){return I*n});var m=new gn;e.density!==void 0&&(m.density=e.density),e.friction!==void 0&&(m.friction=e.friction),e.restitution!==void 0&&(m.restitution=e.restitution),e.belongsTo!==void 0&&(m.belongsTo=e.belongsTo),e.collidesWith!==void 0&&(m.collidesWith=e.collidesWith),e.config!==void 0&&(e.config[0]!==void 0&&(m.density=e.config[0]),e.config[1]!==void 0&&(m.friction=e.config[1]),e.config[2]!==void 0&&(m.restitution=e.config[2]),e.config[3]!==void 0&&(m.belongsTo=e.config[3]),e.config[4]!==void 0&&(m.collidesWith=e.config[4]));for(var S,x,g=new Ns(new $(r[0],r[1],r[2]),new Gi().setFromEuler(y[0],y[1],y[2])),P=0;P<t.length;P++){switch(c[x=3*P]!==void 0&&m.relativePosition.set(c[x],c[x+1],c[x+2]),p[x]!==void 0&&m.relativeRotation.setQuat(new Gi().setFromEuler(p[x],p[x+1],p[x+2])),t[P]){case"sphere":S=new Rs(m,d[x]);break;case"cylinder":S=new js(m,d[x],d[x+1]);break;case"box":S=new Os(m,d[x],d[x+1],d[x+2]);break;case"plane":S=new Gs(m)}g.addShape(S)}return e.neverSleep||o?g.allowSleep=!1:g.allowSleep=!0,g.isKinematic=o,a?e.massPos||e.massRot?g.setupMass(1,!1):g.setupMass(1,!0):g.setupMass(2),e.name!==void 0&&(g.name=e.name),this.addRigidBody(g),a&&(e.sleep?g.sleep():g.awake()),g},initJoint:function(t,e){var n,a,o=this.invScale,r=e.axe1||[1,0,0],c=e.axe2||[1,0,0],y=e.pos1||[0,0,0],p=e.pos2||[0,0,0];y=y.map(function(D){return D*o}),p=p.map(function(D){return D*o}),t==="jointDistance"?(n=e.min||0,a=e.max||10,n*=o,a*=o):(n=e.min||57.29578,a=e.max||0,n*=R.degtorad,a*=R.degtorad);var d=e.limit||null,m=e.spring||null,S=e.motor||null,x=new Ws;x.scale=this.scale,x.invScale=this.invScale,x.allowCollision=e.collision||!1,x.localAxis1.set(r[0],r[1],r[2]),x.localAxis2.set(c[0],c[1],c[2]),x.localAnchorPoint1.set(y[0],y[1],y[2]),x.localAnchorPoint2.set(p[0],p[1],p[2]);var g,P=null,I=null;if(e.body1===void 0||e.body2===void 0)return ce("World","Can't add joint if attach rigidbodys not define !");if(e.body1.constructor===String?P=this.getByName(e.body1):e.body1.constructor===Number?P=this.getByName(e.body1):e.body1.constructor===Ns&&(P=e.body1),e.body2.constructor===String?I=this.getByName(e.body2):e.body2.constructor===Number?I=this.getByName(e.body2):e.body2.constructor===Ns&&(I=e.body2),P===null||I===null)return ce("World","Can't add joint attach rigidbodys not find !");switch(x.body1=P,x.body2=I,t){case"jointDistance":g=new hn(x,n,a),m!==null&&g.limitMotor.setSpring(m[0],m[1]),S!==null&&g.limitMotor.setMotor(S[0],S[1]);break;case"jointHinge":case"joint":g=new on(x,n,a),m!==null&&g.limitMotor.setSpring(m[0],m[1]),S!==null&&g.limitMotor.setMotor(S[0],S[1]);break;case"jointPrisme":g=new ms(x,n,a);break;case"jointSlide":g=new ln(x,n,a);break;case"jointBall":g=new rn(x);break;case"jointWheel":g=new cn(x),d!==null&&g.rotationalLimitMotor1.setLimit(d[0],d[1]),m!==null&&g.rotationalLimitMotor1.setSpring(m[0],m[1]),S!==null&&g.rotationalLimitMotor1.setMotor(S[0],S[1])}return g.name=e.name||"",this.addJoint(g),g}}),u.Math=R,u.Vec3=$,u.Quat=Gi,u.Mat33=Ui,u.Shape=We,u.Box=Os,u.Sphere=Rs,u.Cylinder=js,u.Plane=Gs,u.Particle=nn,u.ShapeConfig=gn,u.LimitMotor=Yi,u.HingeJoint=on,u.BallAndSocketJoint=rn,u.DistanceJoint=hn,u.PrismaticJoint=ms,u.SliderJoint=ln,u.WheelJoint=cn,u.JointConfig=Ws,u.RigidBody=Ns,u.World=Tn,u.REVISION=A,u.BR_NULL=j,u.BR_BRUTE_FORCE=et,u.BR_SWEEP_AND_PRUNE=Z,u.BR_BOUNDING_VOLUME_TREE=Ot,u.BODY_NULL=ni,u.BODY_DYNAMIC=1,u.BODY_STATIC=2,u.BODY_KINEMATIC=3,u.BODY_GHOST=4,u.SHAPE_NULL=Jt,u.SHAPE_SPHERE=It,u.SHAPE_BOX=ei,u.SHAPE_CYLINDER=vi,u.SHAPE_PLANE=Bi,u.SHAPE_PARTICLE=ui,u.SHAPE_TETRA=6,u.JOINT_NULL=Ue,u.JOINT_DISTANCE=Oe,u.JOINT_BALL_AND_SOCKET=ls,u.JOINT_HINGE=Ss,u.JOINT_WHEEL=Ts,u.JOINT_SLIDER=Cn,u.JOINT_PRISMATIC=Vn,u.AABB_PROX=.005,u.printError=ce,u.InfoDisplay=As,Object.defineProperty(u,"__esModule",{value:!0})});var i1=(()=>{var u=import.meta.url;return function(h){h=h||{};var s=typeof h<"u"?h:{},b,v;s.ready=new Promise(function(l,f){b=l,v=f});var A=Object.assign({},s),j=(l,f)=>{throw f},et=!0,Z="";function Ot(l){return s.locateFile?s.locateFile(l,Z):Z+l}var ni;typeof document<"u"&&document.currentScript&&(Z=document.currentScript.src),u&&(Z=u),Z.indexOf("blob:")!==0?Z=Z.substr(0,Z.replace(/[?#].*/,"").lastIndexOf("/")+1):Z="";var Jt=s.print||console.log.bind(console),It=s.printErr||console.warn.bind(console);Object.assign(s,A),A=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&(j=s.quit);var ei=4,vi;s.wasmBinary&&(vi=s.wasmBinary);var Bi=s.noExitRuntime||!0;typeof WebAssembly!="object"&&Ws("no native wasm support detected");var ui,Ue=!1,Oe,ls=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ss(l,f,_){for(var k=f+_,w=f;l[w]&&!(w>=k);)++w;if(w-f>16&&l.buffer&&ls)return ls.decode(l.subarray(f,w));for(var L="";f<w;){var H=l[f++];if(!(H&128)){L+=String.fromCharCode(H);continue}var C=l[f++]&63;if((H&224)==192){L+=String.fromCharCode((H&31)<<6|C);continue}var O=l[f++]&63;if((H&240)==224?H=(H&15)<<12|C<<6|O:H=(H&7)<<18|C<<12|O<<6|l[f++]&63,H<65536)L+=String.fromCharCode(H);else{var X=H-65536;L+=String.fromCharCode(55296|X>>10,56320|X&1023)}}return L}function Ts(l,f){return l?Ss($,l,f):""}function Cn(l,f,_,k){if(!(k>0))return 0;for(var w=_,L=_+k-1,H=0;H<l.length;++H){var C=l.charCodeAt(H);if(C>=55296&&C<=57343){var O=l.charCodeAt(++H);C=65536+((C&1023)<<10)|O&1023}if(C<=127){if(_>=L)break;f[_++]=C}else if(C<=2047){if(_+1>=L)break;f[_++]=192|C>>6,f[_++]=128|C&63}else if(C<=65535){if(_+2>=L)break;f[_++]=224|C>>12,f[_++]=128|C>>6&63,f[_++]=128|C&63}else{if(_+3>=L)break;f[_++]=240|C>>18,f[_++]=128|C>>12&63,f[_++]=128|C>>6&63,f[_++]=128|C&63}}return f[_]=0,_-w}function Vn(l,f,_){return Cn(l,$,f,_)}function R(l){for(var f=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k<=127?f++:k<=2047?f+=2:k>=55296&&k<=57343?(f+=4,++_):f+=3}return f}var ce,As,$,Gi,Ui,hs,Re,We,Os,Rs,js;function Gs(l){ce=l,s.HEAP8=As=new Int8Array(l),s.HEAP16=Gi=new Int16Array(l),s.HEAP32=hs=new Int32Array(l),s.HEAPU8=$=new Uint8Array(l),s.HEAPU16=Ui=new Uint16Array(l),s.HEAPU32=Re=new Uint32Array(l),s.HEAPF32=We=new Float32Array(l),s.HEAPF64=js=new Float64Array(l),s.HEAP64=Os=new BigInt64Array(l),s.HEAPU64=Rs=new BigUint64Array(l)}s.INITIAL_MEMORY;var nn,gn=[],Yi=[],Us=[],kn=[];function je(){return Bi}function Pn(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)In(s.preRun.shift());Zs(gn)}function an(){Zs(Yi)}function on(){Zs(Us)}function rn(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Hn(s.postRun.shift());Zs(kn)}function In(l){gn.unshift(l)}function hn(l){Yi.unshift(l)}function Hn(l){kn.unshift(l)}var cs=0,ms=null;function ln(l){cs++,s.monitorRunDependencies&&s.monitorRunDependencies(cs)}function cn(l){if(cs--,s.monitorRunDependencies&&s.monitorRunDependencies(cs),cs==0&&ms){var f=ms;ms=null,f()}}function Ws(l){s.onAbort&&s.onAbort(l),l="Aborted("+l+")",It(l),Ue=!0,Oe=1,l+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(l);throw v(f),f}var qn="data:application/octet-stream;base64,";function qs(l){return l.startsWith(qn)}var we;s.locateFile?(we="HavokPhysics.wasm",qs(we)||(we=Ot(we))):we=new URL("/assets/HavokPhysics.CjZXfFYQ.wasm",import.meta.url).toString();function Js(l){try{if(l==we&&vi)return new Uint8Array(vi);throw"both async and sync fetching of the wasm failed"}catch(f){Ws(f)}}function zn(){return!vi&&et&&typeof fetch=="function"?fetch(we,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+we+"'";return l.arrayBuffer()}).catch(function(){return Js(we)}):Promise.resolve().then(function(){return Js(we)})}function un(){var l={env:yt,wasi_snapshot_preview1:yt};function f(H,C){var O=H.exports;s.asm=O,ui=s.asm.memory,Gs(ui.buffer),nn=s.asm.__indirect_function_table,hn(s.asm.__wasm_call_ctors),cn()}ln();function _(H){f(H.instance)}function k(H){return zn().then(function(C){return WebAssembly.instantiate(C,l)}).then(function(C){return C}).then(H,function(C){It("failed to asynchronously prepare wasm: "+C),Ws(C)})}function w(){return!vi&&typeof WebAssembly.instantiateStreaming=="function"&&!qs(we)&&typeof fetch=="function"?fetch(we,{credentials:"same-origin"}).then(function(H){var C=WebAssembly.instantiateStreaming(H,l);return C.then(_,function(O){return It("wasm streaming compile failed: "+O),It("falling back to ArrayBuffer instantiation"),k(_)})}):k(_)}if(s.instantiateWasm)try{var L=s.instantiateWasm(l,f);return L}catch(H){It("Module.instantiateWasm callback failed with error: "+H),v(H)}return w().catch(v),{}}function pn(l){this.name="ExitStatus",this.message="Program terminated with exit("+l+")",this.status=l}function Zs(l){for(;l.length>0;)l.shift()(s)}function Ns(l){if(l instanceof pn||l=="unwind")return Oe;j(1,l)}var mn={};function ds(l){for(;l.length;){var f=l.pop(),_=l.pop();_(f)}}function dn(l){return this.fromWireType(hs[l>>2])}var ts={},us={},$s={},Ms=48,Bs=57;function Ks(l){if(l===void 0)return"_unknown";l=l.replace(/[^a-zA-Z0-9_]/g,"$");var f=l.charCodeAt(0);return f>=Ms&&f<=Bs?"_"+l:l}function Ys(l,f){return l=Ks(l),new Function("body","return function "+l+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(f)}function fn(l,f){var _=Ys(f,function(k){this.name=f,this.message=k;var w=new Error(k).stack;w!==void 0&&(this.stack=this.toString()+`
`+w.replace(/^Error(:[^\n]*)?\n/,""))});return _.prototype=Object.create(l.prototype),_.prototype.constructor=_,_.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},_}var wn=void 0;function yn(l){throw new wn(l)}function vn(l,f,_){l.forEach(function(C){$s[C]=f});function k(C){var O=_(C);O.length!==l.length&&yn("Mismatched type converter count");for(var X=0;X<l.length;++X)Ge(l[X],O[X])}var w=new Array(f.length),L=[],H=0;f.forEach((C,O)=>{us.hasOwnProperty(C)?w[O]=us[C]:(L.push(C),ts.hasOwnProperty(C)||(ts[C]=[]),ts[C].push(()=>{w[O]=us[C],++H,H===L.length&&k(w)}))}),L.length===0&&k(w)}function Pe(l){var f=mn[l];delete mn[l];var _=f.elements,k=_.length,w=_.map(function(C){return C.getterReturnType}).concat(_.map(function(C){return C.setterArgumentType})),L=f.rawConstructor,H=f.rawDestructor;vn([l],w,function(C){return _.forEach((O,X)=>{var St=C[X],Pt=O.getter,Gt=O.getterContext,Xt=C[X+k],ue=O.setter,Mi=O.setterContext;O.read=Li=>St.fromWireType(Pt(Gt,Li)),O.write=(Li,Wi)=>{var ti=[];ue(Mi,Li,Xt.toWireType(ti,Wi)),ds(ti)}}),[{name:f.name,fromWireType:function(O){for(var X=new Array(k),St=0;St<k;++St)X[St]=_[St].read(O);return H(O),X},toWireType:function(O,X){if(k!==X.length)throw new TypeError("Incorrect number of tuple elements for "+f.name+": expected="+k+", actual="+X.length);for(var St=L(),Pt=0;Pt<k;++Pt)_[Pt].write(St,X[Pt]);return O!==null&&O.push(H,St),St},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:H}]})}function _n(l){if(l===null)return"null";var f=typeof l;return f==="object"||f==="array"||f==="function"?l.toString():""+l}function bn(){for(var l=new Array(256),f=0;f<256;++f)l[f]=String.fromCharCode(f);xn=l}var xn=void 0;function _e(l){for(var f="",_=l;$[_];)f+=xn[$[_++]];return f}var Qs=void 0;function Se(l){throw new Qs(l)}function Ge(l,f,_={}){if(!("argPackAdvance"in f))throw new TypeError("registerType registeredInstance requires argPackAdvance");var k=f.name;if(l||Se('type "'+k+'" must have a positive integer typeid pointer'),us.hasOwnProperty(l)){if(_.ignoreDuplicateRegistrations)return;Se("Cannot register type '"+k+"' twice")}if(us[l]=f,delete $s[l],ts.hasOwnProperty(l)){var w=ts[l];delete ts[l],w.forEach(L=>L())}}function Xs(l,f,_){switch(f){case 0:return _?function(w){return As[w]}:function(w){return $[w]};case 1:return _?function(w){return Gi[w>>1]}:function(w){return Ui[w>>1]};case 2:return _?function(w){return hs[w>>2]}:function(w){return Re[w>>2]};case 3:return _?function(w){return Os[w>>3]}:function(w){return Rs[w>>3]};default:throw new TypeError("Unknown integer type: "+l)}}function Tn(l,f,_,k,w){f=_e(f);var L=t(_),H=f.indexOf("u")!=-1;H&&(w=(1n<<64n)-1n),Ge(l,{name:f,fromWireType:function(C){return C},toWireType:function(C,O){if(typeof O!="bigint"&&typeof O!="number")throw new TypeError('Cannot convert "'+_n(O)+'" to '+this.name);if(O<k||O>w)throw new TypeError('Passing a number "'+_n(O)+'" from JS side to C/C++ side to an argument of type "'+f+'", which is outside the valid range ['+k+", "+w+"]!");return O},argPackAdvance:8,readValueFromPointer:Xs(f,L,!H),destructorFunction:null})}function t(l){switch(l){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+l)}}function e(l,f,_,k,w){var L=t(_);f=_e(f),Ge(l,{name:f,fromWireType:function(H){return!!H},toWireType:function(H,C){return C?k:w},argPackAdvance:8,readValueFromPointer:function(H){var C;if(_===1)C=As;else if(_===2)C=Gi;else if(_===4)C=hs;else throw new TypeError("Unknown boolean type size: "+f);return this.fromWireType(C[H>>L])},destructorFunction:null})}var n=[],a=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function o(l){l>4&&--a[l].refcount===0&&(a[l]=void 0,n.push(l))}function r(){for(var l=0,f=5;f<a.length;++f)a[f]!==void 0&&++l;return l}function c(){for(var l=5;l<a.length;++l)if(a[l]!==void 0)return a[l];return null}function y(){s.count_emval_handles=r,s.get_first_emval=c}var p={toValue:l=>(l||Se("Cannot use deleted val. handle = "+l),a[l].value),toHandle:l=>{switch(l){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var f=n.length?n.pop():a.length;return a[f]={refcount:1,value:l},f}}}};function d(l,f){f=_e(f),Ge(l,{name:f,fromWireType:function(_){var k=p.toValue(_);return o(_),k},toWireType:function(_,k){return p.toHandle(k)},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:null})}function m(l,f,_){if(l[f].overloadTable===void 0){var k=l[f];l[f]=function(){return l[f].overloadTable.hasOwnProperty(arguments.length)||Se("Function '"+_+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+l[f].overloadTable+")!"),l[f].overloadTable[arguments.length].apply(this,arguments)},l[f].overloadTable=[],l[f].overloadTable[k.argCount]=k}}function S(l,f,_){s.hasOwnProperty(l)?((_===void 0||s[l].overloadTable!==void 0&&s[l].overloadTable[_]!==void 0)&&Se("Cannot register public name '"+l+"' twice"),m(s,l,l),s.hasOwnProperty(_)&&Se("Cannot register multiple overloads of a function with the same number of arguments ("+_+")!"),s[l].overloadTable[_]=f):(s[l]=f,_!==void 0&&(s[l].numArguments=_))}function x(l,f,_){switch(f){case 0:return function(k){var w=_?As:$;return this.fromWireType(w[k])};case 1:return function(k){var w=_?Gi:Ui;return this.fromWireType(w[k>>1])};case 2:return function(k){var w=_?hs:Re;return this.fromWireType(w[k>>2])};default:throw new TypeError("Unknown integer type: "+l)}}function g(l,f,_,k){var w=t(_);f=_e(f);function L(){}L.values={},Ge(l,{name:f,constructor:L,fromWireType:function(H){return this.constructor.values[H]},toWireType:function(H,C){return C.value},argPackAdvance:8,readValueFromPointer:x(f,w,k),destructorFunction:null}),S(f,L)}function P(l){var f=qt(l),_=_e(f);return Ct(f),_}function I(l,f){var _=us[l];return _===void 0&&Se(f+" has unknown type "+P(l)),_}function D(l,f,_){var k=I(l,"enum");f=_e(f);var w=k.constructor,L=Object.create(k.constructor.prototype,{value:{value:_},constructor:{value:Ys(k.name+"_"+f,function(){})}});w.values[_]=L,w[f]=L}function nt(l,f){switch(f){case 2:return function(_){return this.fromWireType(We[_>>2])};case 3:return function(_){return this.fromWireType(js[_>>3])};default:throw new TypeError("Unknown float type: "+l)}}function M(l,f,_){var k=t(_);f=_e(f),Ge(l,{name:f,fromWireType:function(w){return w},toWireType:function(w,L){return L},argPackAdvance:8,readValueFromPointer:nt(f,k),destructorFunction:null})}function tt(l,f){if(!(l instanceof Function))throw new TypeError("new_ called with constructor type "+typeof l+" which is not a function");var _=Ys(l.name||"unknownFunctionName",function(){});_.prototype=l.prototype;var k=new _,w=l.apply(k,f);return w instanceof Object?w:k}function it(l,f,_,k,w){var L=f.length;L<2&&Se("argTypes array size mismatch! Must at least get return value and 'this' types!"),f[1];for(var H=!1,C=1;C<f.length;++C)if(f[C]!==null&&f[C].destructorFunction===void 0){H=!0;break}for(var O=f[0].name!=="void",X="",St="",C=0;C<L-2;++C)X+=(C!==0?", ":"")+"arg"+C,St+=(C!==0?", ":"")+"arg"+C+"Wired";var Pt="return function "+Ks(l)+"("+X+`) {
if (arguments.length !== `+(L-2)+`) {
throwBindingError('function `+l+" called with ' + arguments.length + ' arguments, expected "+(L-2)+` args!');
}
`;H&&(Pt+=`var destructors = [];
`);for(var Gt=H?"destructors":"null",Xt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ue=[Se,k,w,ds,f[0],f[1]],C=0;C<L-2;++C)Pt+="var arg"+C+"Wired = argType"+C+".toWireType("+Gt+", arg"+C+"); // "+f[C+2].name+`
`,Xt.push("argType"+C),ue.push(f[C+2]);if(Pt+=(O?"var rv = ":"")+"invoker(fn"+(St.length>0?", ":"")+St+`);
`,H)Pt+=`runDestructors(destructors);
`;else for(var C=2;C<f.length;++C){var Mi=C===1?"thisWired":"arg"+(C-2)+"Wired";f[C].destructorFunction!==null&&(Pt+=Mi+"_dtor("+Mi+"); // "+f[C].name+`
`,Xt.push(Mi+"_dtor"),ue.push(f[C].destructorFunction))}O&&(Pt+=`var ret = retType.fromWireType(rv);
return ret;
`),Pt+=`}
`,Xt.push(Pt);var Li=tt(Function,Xt).apply(null,ue);return Li}function ct(l,f){for(var _=[],k=0;k<l;k++)_.push(Re[f+k*4>>2]);return _}function ut(l,f,_){s.hasOwnProperty(l)||yn("Replacing nonexistant public symbol"),s[l].overloadTable!==void 0&&_!==void 0?s[l].overloadTable[_]=f:(s[l]=f,s[l].argCount=_)}var st=[];function kt(l){var f=st[l];return f||(l>=st.length&&(st.length=l+1),st[l]=f=nn.get(l)),f}function G(l,f){l=_e(l);function _(){return kt(f)}var k=_();return typeof k!="function"&&Se("unknown function pointer with signature "+l+": "+f),k}var rt=void 0;function pt(l,f){var _=[],k={};function w(L){if(!k[L]&&!us[L]){if($s[L]){$s[L].forEach(w);return}_.push(L),k[L]=!0}}throw f.forEach(w),new rt(l+": "+_.map(P).join([", "]))}function Q(l,f,_,k,w,L){var H=ct(f,_);l=_e(l),w=G(k,w),S(l,function(){pt("Cannot call "+l+" due to unbound types",H)},f-1),vn([],H,function(C){var O=[C[0],null].concat(C.slice(1));return ut(l,it(l,O,null,w,L),f-1),[]})}function ht(l,f,_,k,w){f=_e(f);var L=t(_),H=Pt=>Pt;if(k===0){var C=32-8*_;H=Pt=>Pt<<C>>>C}var O=f.includes("unsigned"),X=(Pt,Gt)=>{},St;O?St=function(Pt,Gt){return X(Gt,this.name),Gt>>>0}:St=function(Pt,Gt){return X(Gt,this.name),Gt},Ge(l,{name:f,fromWireType:H,toWireType:St,argPackAdvance:8,readValueFromPointer:Xs(f,L,k!==0),destructorFunction:null})}function dt(l,f,_){var k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],w=k[f];function L(H){H=H>>2;var C=Re,O=C[H],X=C[H+1];return new w(ce,X,O)}_=_e(_),Ge(l,{name:_,fromWireType:L,argPackAdvance:8,readValueFromPointer:L},{ignoreDuplicateRegistrations:!0})}function Ht(l,f){f=_e(f);var _=f==="std::string";Ge(l,{name:f,fromWireType:function(k){var w=Re[k>>2],L=k+4,H;if(_)for(var C=L,O=0;O<=w;++O){var X=L+O;if(O==w||$[X]==0){var St=X-C,Pt=Ts(C,St);H===void 0?H=Pt:(H+="\0",H+=Pt),C=X+1}}else{for(var Gt=new Array(w),O=0;O<w;++O)Gt[O]=String.fromCharCode($[L+O]);H=Gt.join("")}return Ct(k),H},toWireType:function(k,w){w instanceof ArrayBuffer&&(w=new Uint8Array(w));var L,H=typeof w=="string";H||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int8Array||Se("Cannot pass non-string to std::string"),_&&H?L=R(w):L=w.length;var C=Kt(4+L+1),O=C+4;if(Re[C>>2]=L,_&&H)Vn(w,O,L+1);else if(H)for(var X=0;X<L;++X){var St=w.charCodeAt(X);St>255&&(Ct(O),Se("String has UTF-16 code units that do not fit in 8 bits")),$[O+X]=St}else for(var X=0;X<L;++X)$[O+X]=w[X];return k!==null&&k.push(Ct,C),C},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:function(k){Ct(k)}})}var ki=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function wi(l,f){for(var _=l,k=_>>1,w=k+f/2;!(k>=w)&&Ui[k];)++k;if(_=k<<1,_-l>32&&ki)return ki.decode($.subarray(l,_));for(var L="",H=0;!(H>=f/2);++H){var C=Gi[l+H*2>>1];if(C==0)break;L+=String.fromCharCode(C)}return L}function _i(l,f,_){if(_===void 0&&(_=2147483647),_<2)return 0;_-=2;for(var k=f,w=_<l.length*2?_/2:l.length,L=0;L<w;++L){var H=l.charCodeAt(L);Gi[f>>1]=H,f+=2}return Gi[f>>1]=0,f-k}function E(l){return l.length*2}function Zt(l,f){for(var _=0,k="";!(_>=f/4);){var w=hs[l+_*4>>2];if(w==0)break;if(++_,w>=65536){var L=w-65536;k+=String.fromCharCode(55296|L>>10,56320|L&1023)}else k+=String.fromCharCode(w)}return k}function N(l,f,_){if(_===void 0&&(_=2147483647),_<4)return 0;for(var k=f,w=k+_-4,L=0;L<l.length;++L){var H=l.charCodeAt(L);if(H>=55296&&H<=57343){var C=l.charCodeAt(++L);H=65536+((H&1023)<<10)|C&1023}if(hs[f>>2]=H,f+=4,f+4>w)break}return hs[f>>2]=0,f-k}function z(l){for(var f=0,_=0;_<l.length;++_){var k=l.charCodeAt(_);k>=55296&&k<=57343&&++_,f+=4}return f}function at(l,f,_){_=_e(_);var k,w,L,H,C;f===2?(k=wi,w=_i,H=E,L=()=>Ui,C=1):f===4&&(k=Zt,w=N,H=z,L=()=>Re,C=2),Ge(l,{name:_,fromWireType:function(O){for(var X=Re[O>>2],St=L(),Pt,Gt=O+4,Xt=0;Xt<=X;++Xt){var ue=O+4+Xt*f;if(Xt==X||St[ue>>C]==0){var Mi=ue-Gt,Li=k(Gt,Mi);Pt===void 0?Pt=Li:(Pt+="\0",Pt+=Li),Gt=ue+f}}return Ct(O),Pt},toWireType:function(O,X){typeof X!="string"&&Se("Cannot pass non-string to C++ string type "+_);var St=H(X),Pt=Kt(4+St+f);return Re[Pt>>2]=St>>C,w(X,Pt+4,St+f),O!==null&&O.push(Ct,Pt),Pt},argPackAdvance:8,readValueFromPointer:dn,destructorFunction:function(O){Ct(O)}})}function B(l,f,_,k,w,L){mn[l]={name:_e(f),rawConstructor:G(_,k),rawDestructor:G(w,L),elements:[]}}function F(l,f,_,k,w,L,H,C,O){mn[l].elements.push({getterReturnType:f,getter:G(_,k),getterContext:w,setterArgumentType:L,setter:G(H,C),setterContext:O})}function At(l,f){f=_e(f),Ge(l,{isVoid:!0,name:f,argPackAdvance:0,fromWireType:function(){},toWireType:function(_,k){}})}var $t=!0;function xt(){return $t}var gt={};function U(l){var f=gt[l];return f===void 0?_e(l):f}var mt=[];function zt(l,f,_,k){l=mt[l],f=p.toValue(f),_=U(_),l(f,_,null,k)}function oe(l){var f=mt.length;return mt.push(l),f}function Si(l,f){for(var _=new Array(l),k=0;k<l;++k)_[k]=I(Re[f+k*ei>>2],"parameter "+k);return _}var Ei=[];function bi(l,f){var _=Si(l,f),k=_[0],w=k.name+"_$"+_.slice(1).map(function(ue){return ue.name}).join("_")+"$",L=Ei[w];if(L!==void 0)return L;for(var H=["retType"],C=[k],O="",X=0;X<l-1;++X)O+=(X!==0?", ":"")+"arg"+X,H.push("argType"+X),C.push(_[1+X]);for(var St=Ks("methodCaller_"+w),Pt="return function "+St+`(handle, name, destructors, args) {
`,Gt=0,X=0;X<l-1;++X)Pt+="    var arg"+X+" = argType"+X+".readValueFromPointer(args"+(Gt?"+"+Gt:"")+`);
`,Gt+=_[X+1].argPackAdvance;Pt+="    var rv = handle[name]("+O+`);
`;for(var X=0;X<l-1;++X)_[X+1].deleteObject&&(Pt+="    argType"+X+".deleteObject(arg"+X+`);
`);k.isVoid||(Pt+=`    return retType.toWireType(destructors, rv);
`),Pt+=`};
`,H.push(Pt);var Xt=tt(Function,H).apply(null,C);return L=oe(Xt),Ei[w]=L,L}function xi(){Ws("")}function Nt(){return Date.now()}function _t(){return 2147483648}function K(){return _t()}var lt;lt=()=>performance.now();function wt(l,f,_){$.copyWithin(l,f,f+_)}function Pi(l){try{return ui.grow(l-ce.byteLength+65535>>>16),Gs(ui.buffer),1}catch{}}function Qt(l){var f=$.length;l=l>>>0;var _=_t();if(l>_)return!1;let k=(O,X)=>O+(X-O%X)%X;for(var w=1;w<=4;w*=2){var L=f*(1+.2/w);L=Math.min(L,l+100663296);var H=Math.min(_,k(Math.max(l,L),65536)),C=Pi(H);if(C)return!0}return!1}var Tt=[null,[],[]];function Ut(l,f){var _=Tt[l];f===0||f===10?((l===1?Jt:It)(Ss(_,0)),_.length=0):_.push(f)}function Wt(l,f,_,k){for(var w=0,L=0;L<_;L++){var H=Re[f>>2],C=Re[f+4>>2];f+=8;for(var O=0;O<C;O++)Ut(l,$[H+O]);w+=C}return Re[k>>2]=w,0}function vt(l){Oe=l,je()||(s.onExit&&s.onExit(l),Ue=!0),j(l,new pn(l))}function ft(l,f){Oe=l,vt(l)}wn=s.InternalError=fn(Error,"InternalError"),bn(),Qs=s.BindingError=fn(Error,"BindingError"),y(),rt=s.UnboundTypeError=fn(Error,"UnboundTypeError");var yt={_embind_finalize_value_array:Pe,_embind_register_bigint:Tn,_embind_register_bool:e,_embind_register_emval:d,_embind_register_enum:g,_embind_register_enum_value:D,_embind_register_float:M,_embind_register_function:Q,_embind_register_integer:ht,_embind_register_memory_view:dt,_embind_register_std_string:Ht,_embind_register_std_wstring:at,_embind_register_value_array:B,_embind_register_value_array_element:F,_embind_register_void:At,_emscripten_get_now_is_monotonic:xt,_emval_call_void_method:zt,_emval_decref:o,_emval_get_method_caller:bi,abort:xi,emscripten_date_now:Nt,emscripten_get_heap_max:K,emscripten_get_now:lt,emscripten_memcpy_big:wt,emscripten_resize_heap:Qt,fd_write:Wt};un(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._HP_GetStatistics=function(){return(s._HP_GetStatistics=s.asm.HP_GetStatistics).apply(null,arguments)},s._HP_Shape_CreateSphere=function(){return(s._HP_Shape_CreateSphere=s.asm.HP_Shape_CreateSphere).apply(null,arguments)},s._HP_Shape_CreateCapsule=function(){return(s._HP_Shape_CreateCapsule=s.asm.HP_Shape_CreateCapsule).apply(null,arguments)},s._HP_Shape_CreateCylinder=function(){return(s._HP_Shape_CreateCylinder=s.asm.HP_Shape_CreateCylinder).apply(null,arguments)},s._HP_Shape_CreateBox=function(){return(s._HP_Shape_CreateBox=s.asm.HP_Shape_CreateBox).apply(null,arguments)},s._HP_Shape_CreateConvexHull=function(){return(s._HP_Shape_CreateConvexHull=s.asm.HP_Shape_CreateConvexHull).apply(null,arguments)},s._HP_Shape_CreateMesh=function(){return(s._HP_Shape_CreateMesh=s.asm.HP_Shape_CreateMesh).apply(null,arguments)},s._HP_Shape_CreateHeightField=function(){return(s._HP_Shape_CreateHeightField=s.asm.HP_Shape_CreateHeightField).apply(null,arguments)},s._HP_Shape_CreateContainer=function(){return(s._HP_Shape_CreateContainer=s.asm.HP_Shape_CreateContainer).apply(null,arguments)},s._HP_Shape_Release=function(){return(s._HP_Shape_Release=s.asm.HP_Shape_Release).apply(null,arguments)},s._HP_Shape_GetType=function(){return(s._HP_Shape_GetType=s.asm.HP_Shape_GetType).apply(null,arguments)},s._HP_Shape_AddChild=function(){return(s._HP_Shape_AddChild=s.asm.HP_Shape_AddChild).apply(null,arguments)},s._HP_Shape_RemoveChild=function(){return(s._HP_Shape_RemoveChild=s.asm.HP_Shape_RemoveChild).apply(null,arguments)},s._HP_Shape_GetNumChildren=function(){return(s._HP_Shape_GetNumChildren=s.asm.HP_Shape_GetNumChildren).apply(null,arguments)},s._HP_Shape_SetChildQSTransform=function(){return(s._HP_Shape_SetChildQSTransform=s.asm.HP_Shape_SetChildQSTransform).apply(null,arguments)},s._HP_Shape_GetChildQSTransform=function(){return(s._HP_Shape_GetChildQSTransform=s.asm.HP_Shape_GetChildQSTransform).apply(null,arguments)},s._HP_Shape_SetFilterInfo=function(){return(s._HP_Shape_SetFilterInfo=s.asm.HP_Shape_SetFilterInfo).apply(null,arguments)},s._HP_Shape_GetFilterInfo=function(){return(s._HP_Shape_GetFilterInfo=s.asm.HP_Shape_GetFilterInfo).apply(null,arguments)},s._HP_Shape_SetMaterial=function(){return(s._HP_Shape_SetMaterial=s.asm.HP_Shape_SetMaterial).apply(null,arguments)},s._HP_Shape_GetMaterial=function(){return(s._HP_Shape_GetMaterial=s.asm.HP_Shape_GetMaterial).apply(null,arguments)},s._HP_Shape_SetDensity=function(){return(s._HP_Shape_SetDensity=s.asm.HP_Shape_SetDensity).apply(null,arguments)},s._HP_Shape_GetDensity=function(){return(s._HP_Shape_GetDensity=s.asm.HP_Shape_GetDensity).apply(null,arguments)},s._HP_Shape_CastRay=function(){return(s._HP_Shape_CastRay=s.asm.HP_Shape_CastRay).apply(null,arguments)},s._HP_Shape_BuildMassProperties=function(){return(s._HP_Shape_BuildMassProperties=s.asm.HP_Shape_BuildMassProperties).apply(null,arguments)},s._HP_ShapePathIterator_GetNext=function(){return(s._HP_ShapePathIterator_GetNext=s.asm.HP_ShapePathIterator_GetNext).apply(null,arguments)},s._HP_Shape_CreateDebugDisplayGeometry=function(){return(s._HP_Shape_CreateDebugDisplayGeometry=s.asm.HP_Shape_CreateDebugDisplayGeometry).apply(null,arguments)},s._HP_DebugGeometry_GetInfo=function(){return(s._HP_DebugGeometry_GetInfo=s.asm.HP_DebugGeometry_GetInfo).apply(null,arguments)},s._HP_DebugGeometry_Release=function(){return(s._HP_DebugGeometry_Release=s.asm.HP_DebugGeometry_Release).apply(null,arguments)},s._HP_Body_Create=function(){return(s._HP_Body_Create=s.asm.HP_Body_Create).apply(null,arguments)},s._HP_Body_Release=function(){return(s._HP_Body_Release=s.asm.HP_Body_Release).apply(null,arguments)},s._HP_Body_SetShape=function(){return(s._HP_Body_SetShape=s.asm.HP_Body_SetShape).apply(null,arguments)},s._HP_Body_GetShape=function(){return(s._HP_Body_GetShape=s.asm.HP_Body_GetShape).apply(null,arguments)},s._HP_Body_SetMotionType=function(){return(s._HP_Body_SetMotionType=s.asm.HP_Body_SetMotionType).apply(null,arguments)},s._HP_Body_GetMotionType=function(){return(s._HP_Body_GetMotionType=s.asm.HP_Body_GetMotionType).apply(null,arguments)},s._HP_Body_SetEventMask=function(){return(s._HP_Body_SetEventMask=s.asm.HP_Body_SetEventMask).apply(null,arguments)},s._HP_Body_GetEventMask=function(){return(s._HP_Body_GetEventMask=s.asm.HP_Body_GetEventMask).apply(null,arguments)},s._HP_Body_SetMassProperties=function(){return(s._HP_Body_SetMassProperties=s.asm.HP_Body_SetMassProperties).apply(null,arguments)},s._HP_Body_GetMassProperties=function(){return(s._HP_Body_GetMassProperties=s.asm.HP_Body_GetMassProperties).apply(null,arguments)},s._HP_Body_SetLinearDamping=function(){return(s._HP_Body_SetLinearDamping=s.asm.HP_Body_SetLinearDamping).apply(null,arguments)},s._HP_Body_GetLinearDamping=function(){return(s._HP_Body_GetLinearDamping=s.asm.HP_Body_GetLinearDamping).apply(null,arguments)},s._HP_Body_SetAngularDamping=function(){return(s._HP_Body_SetAngularDamping=s.asm.HP_Body_SetAngularDamping).apply(null,arguments)},s._HP_Body_GetAngularDamping=function(){return(s._HP_Body_GetAngularDamping=s.asm.HP_Body_GetAngularDamping).apply(null,arguments)},s._HP_Body_SetGravityFactor=function(){return(s._HP_Body_SetGravityFactor=s.asm.HP_Body_SetGravityFactor).apply(null,arguments)},s._HP_Body_GetGravityFactor=function(){return(s._HP_Body_GetGravityFactor=s.asm.HP_Body_GetGravityFactor).apply(null,arguments)},s._HP_Body_GetWorld=function(){return(s._HP_Body_GetWorld=s.asm.HP_Body_GetWorld).apply(null,arguments)},s._HP_Body_SetPosition=function(){return(s._HP_Body_SetPosition=s.asm.HP_Body_SetPosition).apply(null,arguments)},s._HP_Body_GetPosition=function(){return(s._HP_Body_GetPosition=s.asm.HP_Body_GetPosition).apply(null,arguments)},s._HP_Body_SetOrientation=function(){return(s._HP_Body_SetOrientation=s.asm.HP_Body_SetOrientation).apply(null,arguments)},s._HP_Body_GetOrientation=function(){return(s._HP_Body_GetOrientation=s.asm.HP_Body_GetOrientation).apply(null,arguments)},s._HP_Body_SetQTransform=function(){return(s._HP_Body_SetQTransform=s.asm.HP_Body_SetQTransform).apply(null,arguments)},s._HP_Body_GetWorldTransformOffset=function(){return(s._HP_Body_GetWorldTransformOffset=s.asm.HP_Body_GetWorldTransformOffset).apply(null,arguments)},s._HP_Body_GetQTransform=function(){return(s._HP_Body_GetQTransform=s.asm.HP_Body_GetQTransform).apply(null,arguments)},s._HP_Body_SetLinearVelocity=function(){return(s._HP_Body_SetLinearVelocity=s.asm.HP_Body_SetLinearVelocity).apply(null,arguments)},s._HP_Body_GetLinearVelocity=function(){return(s._HP_Body_GetLinearVelocity=s.asm.HP_Body_GetLinearVelocity).apply(null,arguments)},s._HP_Body_SetAngularVelocity=function(){return(s._HP_Body_SetAngularVelocity=s.asm.HP_Body_SetAngularVelocity).apply(null,arguments)},s._HP_Body_GetAngularVelocity=function(){return(s._HP_Body_GetAngularVelocity=s.asm.HP_Body_GetAngularVelocity).apply(null,arguments)},s._HP_Body_ApplyImpulse=function(){return(s._HP_Body_ApplyImpulse=s.asm.HP_Body_ApplyImpulse).apply(null,arguments)},s._HP_Body_SetTargetQTransform=function(){return(s._HP_Body_SetTargetQTransform=s.asm.HP_Body_SetTargetQTransform).apply(null,arguments)},s._HP_Constraint_Create=function(){return(s._HP_Constraint_Create=s.asm.HP_Constraint_Create).apply(null,arguments)},s._HP_Constraint_Release=function(){return(s._HP_Constraint_Release=s.asm.HP_Constraint_Release).apply(null,arguments)},s._HP_Constraint_SetParentBody=function(){return(s._HP_Constraint_SetParentBody=s.asm.HP_Constraint_SetParentBody).apply(null,arguments)},s._HP_Constraint_GetParentBody=function(){return(s._HP_Constraint_GetParentBody=s.asm.HP_Constraint_GetParentBody).apply(null,arguments)},s._HP_Constraint_SetChildBody=function(){return(s._HP_Constraint_SetChildBody=s.asm.HP_Constraint_SetChildBody).apply(null,arguments)},s._HP_Constraint_GetChildBody=function(){return(s._HP_Constraint_GetChildBody=s.asm.HP_Constraint_GetChildBody).apply(null,arguments)},s._HP_Constraint_SetAnchorInParent=function(){return(s._HP_Constraint_SetAnchorInParent=s.asm.HP_Constraint_SetAnchorInParent).apply(null,arguments)},s._HP_Constraint_SetAnchorInChild=function(){return(s._HP_Constraint_SetAnchorInChild=s.asm.HP_Constraint_SetAnchorInChild).apply(null,arguments)},s._HP_Constraint_SetCollisionsEnabled=function(){return(s._HP_Constraint_SetCollisionsEnabled=s.asm.HP_Constraint_SetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_GetCollisionsEnabled=function(){return(s._HP_Constraint_GetCollisionsEnabled=s.asm.HP_Constraint_GetCollisionsEnabled).apply(null,arguments)},s._HP_Constraint_SetEnabled=function(){return(s._HP_Constraint_SetEnabled=s.asm.HP_Constraint_SetEnabled).apply(null,arguments)},s._HP_Constraint_GetEnabled=function(){return(s._HP_Constraint_GetEnabled=s.asm.HP_Constraint_GetEnabled).apply(null,arguments)},s._HP_Constraint_SetAxisMinLimit=function(){return(s._HP_Constraint_SetAxisMinLimit=s.asm.HP_Constraint_SetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMinLimit=function(){return(s._HP_Constraint_GetAxisMinLimit=s.asm.HP_Constraint_GetAxisMinLimit).apply(null,arguments)},s._HP_Constraint_SetAxisMaxLimit=function(){return(s._HP_Constraint_SetAxisMaxLimit=s.asm.HP_Constraint_SetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMaxLimit=function(){return(s._HP_Constraint_GetAxisMaxLimit=s.asm.HP_Constraint_GetAxisMaxLimit).apply(null,arguments)},s._HP_Constraint_GetAxisMode=function(){return(s._HP_Constraint_GetAxisMode=s.asm.HP_Constraint_GetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisMode=function(){return(s._HP_Constraint_SetAxisMode=s.asm.HP_Constraint_SetAxisMode).apply(null,arguments)},s._HP_Constraint_SetAxisFriction=function(){return(s._HP_Constraint_SetAxisFriction=s.asm.HP_Constraint_SetAxisFriction).apply(null,arguments)},s._HP_Constraint_GetAxisFriction=function(){return(s._HP_Constraint_GetAxisFriction=s.asm.HP_Constraint_GetAxisFriction).apply(null,arguments)},s._HP_Constraint_SetAxisMotorType=function(){return(s._HP_Constraint_SetAxisMotorType=s.asm.HP_Constraint_SetAxisMotorType).apply(null,arguments)},s._HP_Constraint_GetAxisMotorType=function(){return(s._HP_Constraint_GetAxisMotorType=s.asm.HP_Constraint_GetAxisMotorType).apply(null,arguments)},s._HP_Constraint_SetAxisMotorTarget=function(){return(s._HP_Constraint_SetAxisMotorTarget=s.asm.HP_Constraint_SetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_GetAxisMotorTarget=function(){return(s._HP_Constraint_GetAxisMotorTarget=s.asm.HP_Constraint_GetAxisMotorTarget).apply(null,arguments)},s._HP_Constraint_SetAxisMotorMaxForce=function(){return(s._HP_Constraint_SetAxisMotorMaxForce=s.asm.HP_Constraint_SetAxisMotorMaxForce).apply(null,arguments)},s._HP_Constraint_GetAxisMotorMaxForce=function(){return(s._HP_Constraint_GetAxisMotorMaxForce=s.asm.HP_Constraint_GetAxisMotorMaxForce).apply(null,arguments)},s._HP_World_Create=function(){return(s._HP_World_Create=s.asm.HP_World_Create).apply(null,arguments)},s._HP_World_Release=function(){return(s._HP_World_Release=s.asm.HP_World_Release).apply(null,arguments)},s._HP_World_GetBodyBuffer=function(){return(s._HP_World_GetBodyBuffer=s.asm.HP_World_GetBodyBuffer).apply(null,arguments)},s._HP_World_SetGravity=function(){return(s._HP_World_SetGravity=s.asm.HP_World_SetGravity).apply(null,arguments)},s._HP_World_GetGravity=function(){return(s._HP_World_GetGravity=s.asm.HP_World_GetGravity).apply(null,arguments)},s._HP_World_AddBody=function(){return(s._HP_World_AddBody=s.asm.HP_World_AddBody).apply(null,arguments)},s._HP_World_RemoveBody=function(){return(s._HP_World_RemoveBody=s.asm.HP_World_RemoveBody).apply(null,arguments)},s._HP_World_GetNumBodies=function(){return(s._HP_World_GetNumBodies=s.asm.HP_World_GetNumBodies).apply(null,arguments)},s._HP_World_CastRayWithCollector=function(){return(s._HP_World_CastRayWithCollector=s.asm.HP_World_CastRayWithCollector).apply(null,arguments)},s._HP_World_Step=function(){return(s._HP_World_Step=s.asm.HP_World_Step).apply(null,arguments)},s._HP_World_GetNextCollisionEvent=function(){return(s._HP_World_GetNextCollisionEvent=s.asm.HP_World_GetNextCollisionEvent).apply(null,arguments)},s._HP_QueryCollector_Create=function(){return(s._HP_QueryCollector_Create=s.asm.HP_QueryCollector_Create).apply(null,arguments)},s._HP_QueryCollector_Release=function(){return(s._HP_QueryCollector_Release=s.asm.HP_QueryCollector_Release).apply(null,arguments)},s._HP_QueryCollector_GetNumHits=function(){return(s._HP_QueryCollector_GetNumHits=s.asm.HP_QueryCollector_GetNumHits).apply(null,arguments)},s._HP_QueryCollector_GetCastRayResult=function(){return(s._HP_QueryCollector_GetCastRayResult=s.asm.HP_QueryCollector_GetCastRayResult).apply(null,arguments)},s._main=function(){return(s._main=s.asm.main).apply(null,arguments)};var Kt=s._malloc=function(){return(Kt=s._malloc=s.asm.malloc).apply(null,arguments)},Ct=s._free=function(){return(Ct=s._free=s.asm.free).apply(null,arguments)};s._HP_Debug_StartRecordingStats=function(){return(s._HP_Debug_StartRecordingStats=s.asm.HP_Debug_StartRecordingStats).apply(null,arguments)},s._HP_Debug_StopRecordingStats=function(){return(s._HP_Debug_StopRecordingStats=s.asm.HP_Debug_StopRecordingStats).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s._htons=function(){return(s._htons=s.asm.htons).apply(null,arguments)},s._ntohs=function(){return(s._ntohs=s.asm.ntohs).apply(null,arguments)};var qt=s.___getTypeName=function(){return(qt=s.___getTypeName=s.asm.__getTypeName).apply(null,arguments)};s.__embind_initialize_bindings=function(){return(s.__embind_initialize_bindings=s.asm._embind_initialize_bindings).apply(null,arguments)},s._htonl=function(){return(s._htonl=s.asm.htonl).apply(null,arguments)},s._setThrew=function(){return(s._setThrew=s.asm.setThrew).apply(null,arguments)},s._saveSetjmp=function(){return(s._saveSetjmp=s.asm.saveSetjmp).apply(null,arguments)},s.stackSave=function(){return(s.stackSave=s.asm.stackSave).apply(null,arguments)},s.stackRestore=function(){return(s.stackRestore=s.asm.stackRestore).apply(null,arguments)},s.stackAlloc=function(){return(s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};var si;ms=function l(){si||Bt(),si||(ms=l)};function ai(l){var f=s._main,_=0,k=0;try{var w=f(_,k);return ft(w,!0),w}catch(L){return Ns(L)}}function Bt(l){if(cs>0||(Pn(),cs>0))return;function f(){si||(si=!0,s.calledRun=!0,!Ue&&(an(),on(),b(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),Mt&&ai(),rn()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),f()},1)):f()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();var Mt=!0;return s.noInitialRun&&(Mt=!1),Bt(),h.ready}})();const e1=typeof window<"u"?window:global;e1.HavokPhysics=i1;const n1={...Pu,enhanceApp({app:u}){u.component("demo-preview",t1)}};export{n1 as R};
