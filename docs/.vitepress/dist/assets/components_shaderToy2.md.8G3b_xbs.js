const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/GlslCanvas.es.CWX1RJa-.js","assets/chunks/commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{d as D,s as l,o as A,c as s,j as C,t as p,e as t,R as h,a5 as k,D as r,I as n,w as c,a as o}from"./chunks/framework.C9yAFGvZ.js";const y={key:0,id:"sea1",class:"stage"},g=D({__name:"sea1",setup(e){const E=l(!1),F=async()=>{E.value?E.value=!1:(E.value=!0,await h(),B())},B=()=>{k(()=>import("./chunks/GlslCanvas.es.CWX1RJa-.js"),__vite__mapDeps([0,1])).then(i=>{const a=document.getElementById("sea1");new i.default(a).load(`
      #extension GL_OES_standard_derivatives : enable
      precision highp float;

      uniform float u_time;
      uniform vec2 u_resolution;
      uniform vec2 u_mouse;

      #define EPSILON_NRM (0.1 / u_resolution.x) // 是一个宏定义，用于定义一个常量 
      const int NUM_STEPS = 32;
      const float PI = 3.1415926;
      const float EPSILON	= 1e-3; // 'epsilon'(ε)

      // sea
      const int ITERATION_GEOMETRY = 3; // 迭代几何
      const int ITERATION_FRAGMENT = 5; // 迭代片段
      const float SEA_HEIGHT = 0.6; // 海平面高度
      const float SEA_CHOPPY = 4.0; // 海浪的波动
      const float SEA_SPEED = 0.8; // 海浪的速度
      const float SEA_FREQ = 0.16; // 海浪的频率
      const vec3 SEA_BASE = vec3(0.0, 0.09, 0.18); // 海浪的基础颜色
      const vec3 SEA_WATER_COLOR = vec3(0.8, 0.9, 0.6) * 0.6; // 海水的颜色
      #define SEA_TIME (1.0 + u_time * SEA_SPEED) // 海浪的时间
      const mat2 octave_m = mat2(1.6, 1.2, -1.2, 1.6); // 倍频程矩阵

      // 这段代码将一个包含欧拉角的向量 vec3 ang 转换为一个旋转矩阵 mat3 m
      // 欧拉角是三个角度，分别表示绕x轴、y轴和z轴的旋转
      // 这个函数的目的是根据这三个角度计算出相应的旋转矩阵
      // 旋转矩阵的计算基于欧拉角的旋转顺序
      // 通常，旋转顺序可以是任意的，但这段代码假设的旋转顺序是先绕x轴旋转，然后绕y轴旋转，最后绕z轴旋转
      // 旋转矩阵的计算公式是：
      // R=RzRyRx
      // --------------------
      // Rx=
      // 1	0	       0
      // 0	cos⁡(θx)	−sin⁡(θx)
      // 0	sin⁡(θx)	cos⁡(θx)
      // --------------------
      // Ry=
      // cos⁡(θy)	  0	 sin⁡(θy)
      // 0	       1  0
      // −sin⁡(θy)	0	 cos⁡(θy)
      // --------------------
      // Rz=
      // cos⁡(θz)	−sin⁡(θz)	0
      // sin⁡(θz)	cos⁡(θz)	0
      // 0	     0	      1
      // --------------------
      // RyRx=
      // cos⁡(θy)	  sin⁡(θy)sin⁡(θx)	sin⁡(θy)cos⁡(θx)
      // 0	       cos⁡(θx)	        −sin⁡(θx)
      // −sin⁡(θy)	cos⁡(θy)sin⁡(θx)	cos⁡(θy)cos⁡(θx)
      // --------------------
      // Rz(RyRx)=
      // cos⁡(θz)	−sin⁡(θz)	0          cos⁡(θy)	  sin⁡(θy)sin⁡(θx)	sin⁡(θy)cos⁡(θx)
      // sin⁡(θz)	cos⁡(θz)	0     *    0	       cos⁡(θx)	        −sin⁡(θx) 
      // 0	     0	      1          −sin⁡(θy)	cos⁡(θy)sin⁡(θx)	cos⁡(θy)cos⁡(θx)
      // 得到最终的finalMatrix
      // cos⁡(θy)cos⁡(θz)	   sin⁡(θy)sin⁡(θx)cos⁡(θz)−cos⁡(θx)sin⁡(θz)	   sin⁡(θy)cos⁡(θx)cos⁡(θz)+sin⁡(θx)sin⁡(θz)
      // cos⁡(θy)sin⁡(θz)	   sin⁡(θy)sin⁡(θx)sin⁡(θz)+cos⁡(θx)cos⁡(θz)	   sin⁡(θy)cos⁡(θx)sin⁡(θz)−sin⁡(θx)cos⁡(θz)
      // −sin⁡(θy)	        cos⁡(θy)sin⁡(θx)	                         cos⁡(θy)cos⁡(θx)
      mat3 getRotationMatrixByEulerAngle(vec3 ang) {
        vec2 a1 = vec2(sin(ang.x), cos(ang.x)); // 计算绕x轴旋转的角度 ang.x 的正弦和余弦值类似人头上下点头的动作
        vec2 a2 = vec2(sin(ang.y), cos(ang.y)); // 计算绕y轴旋转的角度 ang.y 的正弦和余弦值类似人头左右摇头的动作
        vec2 a3 = vec2(sin(ang.z), cos(ang.z)); // 计算绕z轴旋转的角度 ang.z 的正弦和余弦值类似人头左右摆头的动作
        mat3 finalMatrix; // 定义一个3x3的矩阵
        finalMatrix[0] = vec3(a1.y * a3.y + a1.x * a2.x * a3.x, a1.y * a2.x * a3.x + a3.y * a1.x, -a2.y * a3.x); // 计算旋转矩阵的第一行
        finalMatrix[1] = vec3(-a2.y * a1.x, a1.y * a2.y, a2.x); // 计算旋转矩阵的第二行
        finalMatrix[2] = vec3(a3.y * a1.x * a2.x + a1.y * a3.x, a1.x * a3.x  -a1.y * a3.y * a2.x, a2.y * a3.y); // 计算旋转矩阵的第三行
        return finalMatrix;
      }



      // sky
      // 根据给定的方向向量e计算天空的颜色这个函数模拟了天空的渐变效果，从地平线到天顶的颜色变化
      vec3 getSkyColor(vec3 e) {
        // max(e.y, 0.0)：确保e.y的值不小于0，因为天空的颜色通常在地平线以上
        // max(e.y, 0.0) * 0.8：将e.y的值乘以0.8，使颜色变化更加平缓
        // max(e.y, 0.0) * 0.8 + 0.2：在乘以0.8的基础上加上0.2，确保地平线处的颜色不会太暗
        // (max(e.y, 0.0) * 0.8 + 0.2) * 0.8：再次乘以0.8，进一步调整颜色的亮度
        e.y = (max(e.y, 0.0) * 0.8 + 0.2) * 0.8;
        // pow(1.0 - e.y, 2.0)：计算1.0 - e.y的平方，用于模拟天空颜色的非线性变化这个值将用于红色分量，使天空在地平线处更红
        // 1.0 - e.y：直接使用1.0 - e.y作为绿色分量，使天空在地平线处更绿
        // 0.6 + (1.0 - e.y) * 0.4：计算蓝色分量，使天空在地平线处更蓝0.6是基础蓝色，(1.0 - e.y) * 0.4根据e.y的值增加蓝色
        // vec3(pow(1.0 - e.y, 2.0), 1.0 - e.y, 0.6 + (1.0 - e.y) * 0.4)：将计算得到的红、绿、蓝分量组合成一个颜色向量
        // vec3(pow(1.0 - e.y, 2.0), 1.0 - e.y, 0.6 + (1.0 - e.y) * 0.4) * 1.1：将颜色向量乘以1.1，增加颜色的亮度
        return vec3(pow(1.0 - e.y, 2.0), 1.0 - e.y, 0.6 + (1.0 - e.y) * 0.4) * 1.1;
      }



      float hash(vec2 p) {
        float h = dot(p,vec2(127.1, 311.7));	
        return fract(sin(h) * 43758.5453123);
      }


      float noise(in vec2 p) {
        vec2 i = floor(p);
        vec2 f = fract(p);	
        vec2 u = f * f * (3.0 - 2.0 * f);
        return -1.0 + 2.0 * mix(mix(hash(i + vec2(0.0, 0.0)), 
                                hash(i + vec2(1.0, 0.0)), u.x),
                                mix(hash(i + vec2(0.0, 1.0)), 
                                hash(i + vec2(1.0, 1.0)), u.x), u.y);
      }


      // 函数旨在计算漫反射光的强度
      // 接受三个参数：法向量 n、光源方向 l 和一个粗糙度参数 p（有时也称为“漫反射指数”）
      // 函数返回一个浮点数，代表漫反射光的强度
      float diffuse(vec3 n, vec3 l, float p) {
        // 首先，使用 dot 函数计算法向量 n 和光源方向 l 之间的夹角的余弦值
        // 这个余弦值表示了光线与表面法线之间的对齐程度：当光线垂直于表面时，余弦值为 1；当光线与表面平行时，余弦值为 0（或负值，但在此上下文中我们只关心其绝对值，因为负值表示光线实际上是从表面后面照射过来的，这在物理上是没有意义的）
        // 接下来，将这个余弦值乘以 0.4 并加上 0.6，这个操作为了调整漫反射光的强度分布（可要可不要）
        // 乘以 0.4 会降低余弦值对最终强度的影响，而加上 0.6 则确保即使余弦值为 0（即光线与表面几乎平行）时，漫反射光也会有一定的基础强度，这种调整可能是基于特定的光照模型或艺术效果需求
        // 然后，使用 pow 函数将这个调整后的值提升到 p 次方
        // 这个操作通常用于模拟表面的粗糙度
        // 当 p 值较大时，漫反射光的强度分布会更加集中在法线附近（即光线更垂直于表面时强度更高），模拟出更光滑的表面
        // 而当 p 值较小时，漫反射光的强度分布会更加均匀，模拟出更粗糙的表面
        return pow(dot(n, l) * 0.4 + 0.6, p);
      }


      // 函数旨在计算镜面反射光的强度
      // 它接受四个参数：法向量 n、光源方向 l、观察方向 e 和一个光泽度参数 s（通常称为“镜面高光指数”或“粗糙度”的倒数）
      // 函数返回一个浮点数，代表镜面反射光的强度
      float specular(vec3 n, vec3 l, vec3 e, float s) {    
        float nrm = (s + 8.0) / (PI * 8.0);

        // 首先，reflect(e, n) 函数计算光线从表面反射的方向
        // 然后，使用 dot 函数计算这个反射方向与光源方向 l 之间的夹角的余弦值
        // max 函数确保这个余弦值不会小于 0.0，因为余弦值在光线和表面法线之间的夹角大于 90 度时为负，而负值在物理上是没有意义的（因为这意味着光线实际上并没有照射到表面上）
        // 接下来，使用 pow 函数将这个余弦值的 s 次方计算出来
        // 这个操作增强了高光效果：当 s 值较大时，只有反射方向与光源方向几乎完全对齐时，结果才会显著（产生尖锐的高光）；而当 s 值较小时，即使反射方向与光源方向不完全对齐，结果也会相对较大（产生柔和的高光）
        return pow(max(dot(reflect(e, n), l), 0.0), s) * nrm;
      }



      // choppy需要每次迭代都不一样，计算海浪的波浪起伏
      float seaOctave(vec2 uv, float choppy) {
        uv += noise(uv);        
        vec2 wave1 = 1.0 - abs(sin(uv)); // 计算海浪的波浪起伏
        vec2 wave2 = abs(cos(uv)); // 计算海浪的波浪起伏
        wave1 = mix(wave1, wave2, wave1); // 混合
        return pow(1.0 - pow(wave1.x * wave1.y, 0.65), choppy);
      }



      // 该函数基于给定的位置返回海洋平面的高度
      float computedSeaPlaneHeight(vec3 point, int iteration) {
        float freq = SEA_FREQ;
        float amplitude = SEA_HEIGHT;
        float choppy = SEA_CHOPPY;
        vec2 tempUv = point.xz; 
        tempUv.x *= 0.75;

        float d = 0.0; // 每个海浪分量的高度差
        float h = 0.0; // 海洋高度


        // 由于 WebGL 1.0 的限制，最简单且通常最可行的解决方案是使用固定的迭代次数
        // WebGL 2.0则不用这样，可以用动态传入的iteration
        if(iteration == ITERATION_GEOMETRY) {
          for(int j = 0; j < ITERATION_GEOMETRY; j += 1) {
            d = seaOctave((tempUv + SEA_TIME) * freq, choppy); // 计算海浪分量的高度差
            d += seaOctave((tempUv - SEA_TIME) * freq, choppy); // 计算海浪分量的高度差
            h += d * amplitude; // 将当前海浪分量的高度差 d 乘以振幅 amp，然后累加到总高度 h 上
            tempUv *= octave_m;
            freq *= 1.9;  // 频率
            amplitude *= 0.22; // 振幅
            choppy = mix(choppy, 1.0, 0.2); // 混合
          }
        }

        // 由于 WebGL 1.0 的限制，最简单且通常最可行的解决方案是使用固定的迭代次数
        // WebGL 2.0则不用这样，可以用动态传入的iteration
        if(iteration == ITERATION_FRAGMENT) {
          for(int j = 0; j < ITERATION_FRAGMENT; j += 1) {
            d = seaOctave((tempUv + SEA_TIME) * freq, choppy); // 计算海浪分量的高度差
            d += seaOctave((tempUv - SEA_TIME) * freq, choppy); // 计算海浪分量的高度差
            h += d * amplitude; // 将当前海浪分量的高度差 d 乘以振幅 amp，然后累加到总高度 h 上
            tempUv *= octave_m;
            freq *= 1.9;  // 频率
            amplitude *= 0.22; // 振幅
            choppy = mix(choppy, 1.0, 0.2); // 混合
          }
        }

        

        // 返回输入位置 point 的 y 分量减去计算出的海浪高度 h这给出了该点相对于海平面的高度
        return point.y - h;
      }



      // 目的是计算给定空间位置 p 处的法向量 n
      // 这个函数采用了数值微分的方法来估算法向量，这通常用于基于体素（voxel）、高度图（heightMap）或其他形式的三维数据集中
      // eps 是一个小的浮点数，用于计算相邻位置之间的差异，从而估算法向量的方向
      vec3 getNormal(vec3 p, float eps) {
        vec3 n;
        n.y = computedSeaPlaneHeight(p, ITERATION_FRAGMENT); // 计算位置 p 处的地形高度或密度，并将其存储在 n.y 中
        n.x = computedSeaPlaneHeight(vec3(p.x + eps, p.y, p.z), ITERATION_FRAGMENT) - n.y; // 计算位置 p 在 x 方向偏移 eps 后的地形高度或密度，并将其与 n.y（即原始位置 p 的高度或密度）相减，以估算 x 方向的斜率
        n.z = computedSeaPlaneHeight(vec3(p.x, p.y, p.z + eps), ITERATION_FRAGMENT) - n.y; // 计算位置 p 在 z 方向偏移 eps 后的地形高度或密度，并将其与 n.y（即原始位置 p 的高度或密度）相减，以估算 z 方向的斜率
      
        // eps是dot(distanceVector, distanceVector) * EPSILON_NRM
        n.y = eps;
        return normalize(n);
      }


      // 函数旨在计算海洋表面某一点 p 的颜色，考虑到法向量 n、光源方向 l、观察方向 eye 和到观察者的距离 dist
      vec3 getSeaColor(vec3 p, vec3 n, vec3 l, vec3 eye, vec3 dist) {
        // 计算菲涅耳效应，即光线从一种介质进入另一种介质时反射和折射的比例
        // 这里使用点积来计算法向量 n 和观察方向 -eye (因为观察方向通常指向观察者，而我们需要的是指向光源或表面的相反方向)之间的夹角的余弦值，然后用 1.0 减去这个值得到菲涅耳因子
        // clamp 函数确保这个值在 0.0 到 1.0 之间
        float fresnel = clamp(1.0 - dot(n, -eye), 0.0, 1.0);
        
        // 对菲涅耳因子进行三次方运算，以增强菲涅耳效应在高角度时的效果（即当观察方向几乎与表面平行时）
        // 然后，使用 min 函数确保结果不会超过 0.5，这可能是为了限制反射光的强度
        fresnel = min(fresnel * fresnel * fresnel, 0.5);
        
        // 计算反射光颜色reflect 函数计算光线从表面反射的方向，然后 getSkyColor 函数返回该方向上的天空颜色
        vec3 reflected = getSkyColor(reflect(eye, n));

        // 计算折射光颜色
        // 这里 SEA_BASE 表示海水的基础颜色
        // diffuse 函数根据法向量 n、光源方向 l 和一个粗糙度参数（这里是 80.0）返回漫反射光的强度
        // 这个强度乘以 SEA_WATER_COLOR（海水的颜色）和一个缩放因子（0.12）来得到折射光的颜色部分
        // 然后，将这个部分加到 SEA_BASE 上
        vec3 refracted = SEA_BASE + diffuse(n, l, 80.0) * SEA_WATER_COLOR * 0.12; 
        
        // 使用 mix 函数根据菲涅耳因子将折射光和反射光的颜色混合在一起菲涅耳因子越高，反射光的成分就越多；反之，折射光的成分就越多
        vec3 color = mix(refracted, reflected, fresnel);
        
        // 计算衰减因子
        // 这里使用 dist 向量与其自身的点积（即 dist 的长度的平方）乘以一个衰减系数（0.001）
        // 然后从 1.0 中减去这个结果
        // max 函数确保结果不会小于 0.0
        // 这个衰减因子用于模拟随着距离增加海水颜色逐渐减弱的效果
        float attenuation = max(1.0 - dot(dist, dist) * 0.001, 0.0);

        // 根据点 p 的 y 坐标与海面高度 SEA_HEIGHT 的差异来调整颜色
        // 这个差异乘以一个缩放因子（0.18）和之前计算的衰减因子 atten
        // 然后乘以 SEA_WATER_COLOR 并加到最终颜色上
        // 这可能用于模拟海水深浅不同时的颜色变化
        color += SEA_WATER_COLOR * (p.y - SEA_HEIGHT) * 0.18 * attenuation;
        
        // 计算并添加镜面反射光颜色
        // specular 函数返回镜面反射光的颜色
        // 这个颜色被直接加到最终颜色上
        color += specular(n, l, eye, 60.0);
        
        return color;
      }



      // 高度图的描图
      // 作用是进行光线与高度图（如海面）的交点追踪，用于在给定起点和方向的情况下，找到与海面相交的位置
      // 具体来说，通过一系列的迭代计算，确定光线从起点rayOrigin沿着方向direction出发，与高度图（在这个场景中是海面）相交的具体位置，并将这个交点位置输出到参数intersectionPoint中
      // 这个函数是渲染海洋场景的关键部分，它结合了深度映射（depth mapping）和步进（stepping）技术来确定光线与海洋表面的交点
      float heightMapTracing(vec3 rayOrigin, vec3 direction, out vec3 intersectionPoint) {
        float nearPlane = 0.0; // 初始化近平面（near plane）的距离为0
        float farPlane = 1000.0; // 初始化远平面（far plane）的距离farPlane为一个较大的数（1000.0），这是光线投射的最大距离
        
        // 先计算farHeight，再计算nearHeight的原因
        // 在渲染或图形处理中，远处的物体通常对最终图像的影响较小，因此可以先以较低的精度或分辨率计算远处的高度（hx），以减少计算量
        // 随后，再对近处的物体进行更精细的计算（hm），以确保图像质量
        // 所以会return farPlane

        float farHeight = computedSeaPlaneHeight(rayOrigin + direction * farPlane, ITERATION_GEOMETRY); // 计算远平面位置的高度
        // 如果farHeight小于0，则表明了远平面位置的高度小于0，即光线投射方向上没有海面的交点，这时直接返回0.0，表示没有交点
        // 需要计算近平面位置的高度，以确定光线投射方向上的海面交点位置
        if(farHeight > 0.0) {
          intersectionPoint = rayOrigin + direction * farPlane; // 如果远平面位置的高度大于0，则将远平面位置作为交点位置
          return farPlane; // 返回远平面的距离
        }

        // for循环用于迭代计算光线投射方向上的海面交点位置，光线步进算法
        float nearHeight = computedSeaPlaneHeight(rayOrigin + direction * nearPlane, ITERATION_GEOMETRY); // 计算近平面位置的高度
        for(int i = 0; i < NUM_STEPS; i++) { // 开始一个循环，循环次数由NUM_STEPS定义，这是光线投射过程中的步进次数
          // 计算当前步的中点距离middle distance这是通过线性插值（mix）nearPlane和farPlane得到的，插值因子基于当前步的高度差与总高度差的比例
          float tempDistance = mix(nearPlane, farPlane, nearHeight / (nearHeight - farHeight)); // 注意，此时的farHeight永远是小于0的
          intersectionPoint = rayOrigin + direction * tempDistance;
          float tempHeight = computedSeaPlaneHeight(rayOrigin + direction * tempDistance, ITERATION_GEOMETRY);
          
          // 如果 tempHeight < 0.0，这意味着中点位置 p 的高度低于基准面，即光线投射方向上没有海面的交点，这时需要继续迭代步进，以确定交点位置，因此，更新远平面的时间（或距离）和高度
          // 由于近平面的高度值 nearHeight 通常是正数（因为近平面被设置为稍高于地形表面），所以交点不可能位于近平面和中点之间
          // 因此，可以推断出交点必定位于当前步的中点到远平面之间的某个位置
          // 为了缩小搜索范围，算法将远平面的时间（或距离） farPlane 和高度值 farHeight 更新为中点的时间 tempDistance 和高度 tempHeight
          // 因为所有比此刻的tempDistance更大的值，求出来的tempHeight也是小于0的，所以要把farPlane的值，变小
          if(tempHeight < 0.0) {    
            farPlane = tempDistance; 
            farHeight = tempHeight;
          } else {
            nearPlane = tempDistance;
            nearHeight = tempHeight;
          }        
          if(abs(tempHeight) < EPSILON) break;
        }

        // 循环结束后，通过线性插值返回最终的交点距离这个插值是基于最终步的高度差与总高度差的比例来计算的
        return mix(nearPlane, farPlane, nearHeight / (nearHeight - farHeight));
      }




      vec3 getPixel(in vec2 uv, float time) {

        // ray的内容---start
        // ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
        // 这一行定义了一个三维向量ang，表示欧拉角（Euler angles），用于描述光线方向的旋转
        vec3 angle = vec3(sin(1.25 * time) * 0.1, sin(time) * 0.2 + 0.3, time * 0.5);   

        // 表示从观察点（通常是相机位置）到屏幕上的某个像素点的方向向量这个向量用于光线追踪，确定光线从相机出发，穿过屏幕上的某个像素点，进入场景的方向
        // 通过归一化操作，将从相机位置到屏幕上的某个像素点的方向向量转换为一个单位向量
        // 这个方向向量用于光线追踪，确定光线在场景中的传播路径，确保计算结果的准确性和高效性
        vec3 direction = normalize(vec3(uv.xy, -2.0));
        // 这一行的作用是对光线的方向向量dir的z分量进行调整具体来说，通过增加一个与uv向量长度成比例的值来改变光线的倾斜角度这种调整可以模拟出从不同视角观察场景时，光线方向的变化，从而增强场景的立体感和深度感
        direction.z += length(uv) * 0.14;
        // 这一行的作用是将光线的方向向量dir进行归一化，保持方向一致性，并根据欧拉角ang对光线方向进行旋转
        direction = normalize(direction) * getRotationMatrixByEulerAngle(angle);

        // rayOrigin表示光线的起源点，即射线的起点
        // 作用：
        // 1、光线追踪的起点：在光线追踪算法中，从rayOrigin这个点出发，沿着direction（光线的方向向量）进行追踪，与场景中的物体（如海面）进行交点计算
        // 2、影响观察视角和场景动态：rayOrigin的z坐标随时间变化，使得光线的起点在z轴方向上随时间移动，从而产生动态的观察效果，增加了场景的真实感和动态感同时，其y坐标值决定了观察视角的高度，影响观察者对场景的视野范围和细节感知
        vec3 rayOrigin = vec3(0.0, 3.5, 5.0); 
        // ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑
        // ray的内容---end

        // tracing的内容---start
        // ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
        // 相交点
        vec3 intersectionPoint;
        // distanceFromStart2End表示从起点到相交点的距离
        float distanceFromStart2End = heightMapTracing(rayOrigin, direction, intersectionPoint);
        vec3 distanceVector = intersectionPoint - rayOrigin; // 计算相交点与起点的距离
        vec3 n = getNormal(intersectionPoint, dot(distanceVector, distanceVector) * EPSILON_NRM);
        // ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑
        // tracing的内容---end


        // light
        // light表示光源的方向
        // normalize(vec3(0.0, 1.0, 0.8))得到的结果是一个单位向量，大约为vec3(0.0, 0.7810, 0.6248)
        // 这个向量的方向与原始向量相同，但长度为1，常用于表示方向，特别是在光照计算中作为光源方向向量
        // 作用：
        // 1、光照计算的依据：在光照模型中，light用于计算光线与物体表面的交互效果，如漫反射和镜面反射等它指定了光源相对于场景中物体的方向，从而影响物体表面的明暗、颜色和高光等视觉效果
        // 2、影响场景的光照效果：通过与物体表面的法线向量等进行点乘等运算，计算出不同光照成分（如漫反射光、镜面反射光等）的强度，进而影响最终渲染出的图像的光影效果，使场景具有立体感和真实感
        vec3 light = normalize(vec3(0.0, 1.0, 0.8)); 

        return mix(
              getSkyColor(direction),
              getSeaColor(intersectionPoint, n, light, direction, distanceVector),
              pow(smoothstep(0.0, -0.02, direction.y), 0.2));
      }



      void main() {
         vec2 fragCoord = gl_FragCoord.xy;
        vec2 uv = (fragCoord.xy - 0.5 * u_resolution.xy) / min(u_resolution.y, u_resolution.x);
        uv *= 3.0;


        float time = u_time * 0.3 + u_mouse.x * 0.01;
        vec3 color = getPixel(uv, time);

        gl_FragColor = vec4(pow(color, vec3(0.65)), 1.0);
      }`)})};return(i,a)=>(A(),s("div",null,[C("div",{onClick:F,class:"pointer"},"点击"+p(E.value?"关闭":"运行"),1),E.value?(A(),s("canvas",y)):t("",!0)]))}}),d=C("h2",{id:"大海-1",tabindex:"-1"},[o("大海-1 "),C("a",{class:"header-anchor",href:"#大海-1","aria-label":'Permalink to "大海-1"'},"​")],-1),x=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"components/shaderToy2.md","filePath":"components/shaderToy2.md"}'),v={name:"components/shaderToy2.md"},u=D({...v,setup(e){return(E,F)=>{const B=r("demo-preview");return A(),s("div",null,[d,n(B,{title:"",description:"",code:"%0D%0A%3Ctemplate%3E%0D%0A%20%20%3Cdiv%3E%0D%0A%20%20%20%20%3Cdiv%20@click=%22onTrigger%22%20class=%22pointer%22%3E%E7%82%B9%E5%87%BB%7B%7B%20!isRunning%20?%20'%E8%BF%90%E8%A1%8C'%20:%20'%E5%85%B3%E9%97%AD'%20%7D%7D%3C/div%3E%0D%0A%20%20%20%20%3Ccanvas%20v-if=%22isRunning%22%20id=%22sea1%22%20class=%22stage%22%3E%3C/canvas%3E%0D%0A%20%20%3C/div%3E%0D%0A%3C/template%3E%0D%0A%0D%0A%3Cscript%20lang=%22ts%22%20setup%3E%0D%0Aimport%20%7B%20ref,%20nextTick%20%7D%20from%20'vue'%0D%0A%0D%0Aconst%20isRunning%20=%20ref(false)%0D%0A%0D%0Aconst%20onTrigger%20=%20async%20()%20=%3E%20%7B%0D%0A%20%20if%20(!isRunning.value)%20%7B%0D%0A%20%20%20%20isRunning.value%20=%20true%0D%0A%20%20%20%20await%20nextTick()%0D%0A%20%20%20%20onStart()%0D%0A%20%20%7D%20else%20%7B%0D%0A%20%20%20%20isRunning.value%20=%20false%0D%0A%20%20%7D%0D%0A%7D%0D%0A%0D%0Aconst%20onStart%20=%20()%20=%3E%20%7B%0D%0A%20%20import('glslCanvas').then(module%20=%3E%20%7B%0D%0A%20%20%20%20const%20canvas%20=%20document.getElementById('sea1')%0D%0A%20%20%20%20const%20glslCanvas:%20any%20=%20new%20module.default(canvas)%0D%0A%20%0D%0A%20%20%20%20glslCanvas.load(%60%0D%0A%20%20%20%20%20%20#extension%20GL_OES_standard_derivatives%20:%20enable%0D%0A%20%20%20%20%20%20precision%20highp%20float;%0D%0A%0D%0A%20%20%20%20%20%20uniform%20float%20u_time;%0D%0A%20%20%20%20%20%20uniform%20vec2%20u_resolution;%0D%0A%20%20%20%20%20%20uniform%20vec2%20u_mouse;%0D%0A%0D%0A%20%20%20%20%20%20#define%20EPSILON_NRM%20(0.1%20/%20u_resolution.x)%20//%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AE%8F%E5%AE%9A%E4%B9%89%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%B8%B8%E9%87%8F%20%0D%0A%20%20%20%20%20%20const%20int%20NUM_STEPS%20=%2032;%0D%0A%20%20%20%20%20%20const%20float%20PI%20=%203.1415926;%0D%0A%20%20%20%20%20%20const%20float%20EPSILON%09=%201e-3;%20//%20'epsilon'(%CE%B5)%0D%0A%0D%0A%20%20%20%20%20%20//%20sea%0D%0A%20%20%20%20%20%20const%20int%20ITERATION_GEOMETRY%20=%203;%20//%20%E8%BF%AD%E4%BB%A3%E5%87%A0%E4%BD%95%0D%0A%20%20%20%20%20%20const%20int%20ITERATION_FRAGMENT%20=%205;%20//%20%E8%BF%AD%E4%BB%A3%E7%89%87%E6%AE%B5%0D%0A%20%20%20%20%20%20const%20float%20SEA_HEIGHT%20=%200.6;%20//%20%E6%B5%B7%E5%B9%B3%E9%9D%A2%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20const%20float%20SEA_CHOPPY%20=%204.0;%20//%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E5%8A%A8%0D%0A%20%20%20%20%20%20const%20float%20SEA_SPEED%20=%200.8;%20//%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E9%80%9F%E5%BA%A6%0D%0A%20%20%20%20%20%20const%20float%20SEA_FREQ%20=%200.16;%20//%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E9%A2%91%E7%8E%87%0D%0A%20%20%20%20%20%20const%20vec3%20SEA_BASE%20=%20vec3(0.0,%200.09,%200.18);%20//%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E5%9F%BA%E7%A1%80%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20const%20vec3%20SEA_WATER_COLOR%20=%20vec3(0.8,%200.9,%200.6)%20*%200.6;%20//%20%E6%B5%B7%E6%B0%B4%E7%9A%84%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20#define%20SEA_TIME%20(1.0%20+%20u_time%20*%20SEA_SPEED)%20//%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%97%B6%E9%97%B4%0D%0A%20%20%20%20%20%20const%20mat2%20octave_m%20=%20mat2(1.6,%201.2,%20-1.2,%201.6);%20//%20%E5%80%8D%E9%A2%91%E7%A8%8B%E7%9F%A9%E9%98%B5%0D%0A%0D%0A%20%20%20%20%20%20//%20%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%8C%85%E5%90%AB%E6%AC%A7%E6%8B%89%E8%A7%92%E7%9A%84%E5%90%91%E9%87%8F%20vec3%20ang%20%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%20mat3%20m%0D%0A%20%20%20%20%20%20//%20%E6%AC%A7%E6%8B%89%E8%A7%92%E6%98%AF%E4%B8%89%E4%B8%AA%E8%A7%92%E5%BA%A6%EF%BC%8C%E5%88%86%E5%88%AB%E8%A1%A8%E7%A4%BA%E7%BB%95x%E8%BD%B4%E3%80%81y%E8%BD%B4%E5%92%8Cz%E8%BD%B4%E7%9A%84%E6%97%8B%E8%BD%AC%0D%0A%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E6%A0%B9%E6%8D%AE%E8%BF%99%E4%B8%89%E4%B8%AA%E8%A7%92%E5%BA%A6%E8%AE%A1%E7%AE%97%E5%87%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%0D%0A%20%20%20%20%20%20//%20%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E8%AE%A1%E7%AE%97%E5%9F%BA%E4%BA%8E%E6%AC%A7%E6%8B%89%E8%A7%92%E7%9A%84%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%0D%0A%20%20%20%20%20%20//%20%E9%80%9A%E5%B8%B8%EF%BC%8C%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%BB%BB%E6%84%8F%E7%9A%84%EF%BC%8C%E4%BD%86%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%81%87%E8%AE%BE%E7%9A%84%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%E6%98%AF%E5%85%88%E7%BB%95x%E8%BD%B4%E6%97%8B%E8%BD%AC%EF%BC%8C%E7%84%B6%E5%90%8E%E7%BB%95y%E8%BD%B4%E6%97%8B%E8%BD%AC%EF%BC%8C%E6%9C%80%E5%90%8E%E7%BB%95z%E8%BD%B4%E6%97%8B%E8%BD%AC%0D%0A%20%20%20%20%20%20//%20%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F%E6%98%AF%EF%BC%9A%0D%0A%20%20%20%20%20%20//%20R=RzRyRx%0D%0A%20%20%20%20%20%20//%20--------------------%0D%0A%20%20%20%20%20%20//%20Rx=%0D%0A%20%20%20%20%20%20//%201%090%09%20%20%20%20%20%20%200%0D%0A%20%20%20%20%20%20//%200%09cos%E2%81%A1(%CE%B8x)%09%E2%88%92sin%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%200%09sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%20--------------------%0D%0A%20%20%20%20%20%20//%20Ry=%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8y)%09%20%200%09%20sin%E2%81%A1(%CE%B8y)%0D%0A%20%20%20%20%20%20//%200%09%20%20%20%20%20%20%201%20%200%0D%0A%20%20%20%20%20%20//%20%E2%88%92sin%E2%81%A1(%CE%B8y)%090%09%20cos%E2%81%A1(%CE%B8y)%0D%0A%20%20%20%20%20%20//%20--------------------%0D%0A%20%20%20%20%20%20//%20Rz=%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8z)%09%E2%88%92sin%E2%81%A1(%CE%B8z)%090%0D%0A%20%20%20%20%20%20//%20sin%E2%81%A1(%CE%B8z)%09cos%E2%81%A1(%CE%B8z)%090%0D%0A%20%20%20%20%20%20//%200%09%20%20%20%20%200%09%20%20%20%20%20%201%0D%0A%20%20%20%20%20%20//%20--------------------%0D%0A%20%20%20%20%20%20//%20RyRx=%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8y)%09%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%200%09%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%20--------------------%0D%0A%20%20%20%20%20%20//%20Rz(RyRx)=%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8z)%09%E2%88%92sin%E2%81%A1(%CE%B8z)%090%20%20%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)%09%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%20sin%E2%81%A1(%CE%B8z)%09cos%E2%81%A1(%CE%B8z)%090%20%20%20%20%20*%20%20%20%200%09%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8x)%20%0D%0A%20%20%20%20%20%20//%200%09%20%20%20%20%200%09%20%20%20%20%20%201%20%20%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20//%20%E5%BE%97%E5%88%B0%E6%9C%80%E7%BB%88%E7%9A%84finalMatrix%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%E2%88%92cos%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)+sin%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%0D%0A%20%20%20%20%20%20//%20cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)+cos%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%E2%88%92sin%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%0D%0A%20%20%20%20%20%20//%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%0D%0A%20%20%20%20%20%20mat3%20getRotationMatrixByEulerAngle(vec3%20ang)%20%7B%0D%0A%20%20%20%20%20%20%20%20vec2%20a1%20=%20vec2(sin(ang.x),%20cos(ang.x));%20//%20%E8%AE%A1%E7%AE%97%E7%BB%95x%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.x%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E4%B8%8A%E4%B8%8B%E7%82%B9%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%0D%0A%20%20%20%20%20%20%20%20vec2%20a2%20=%20vec2(sin(ang.y),%20cos(ang.y));%20//%20%E8%AE%A1%E7%AE%97%E7%BB%95y%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.y%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E5%B7%A6%E5%8F%B3%E6%91%87%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%0D%0A%20%20%20%20%20%20%20%20vec2%20a3%20=%20vec2(sin(ang.z),%20cos(ang.z));%20//%20%E8%AE%A1%E7%AE%97%E7%BB%95z%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.z%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E5%B7%A6%E5%8F%B3%E6%91%86%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%0D%0A%20%20%20%20%20%20%20%20mat3%20finalMatrix;%20//%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA3x3%E7%9A%84%E7%9F%A9%E9%98%B5%0D%0A%20%20%20%20%20%20%20%20finalMatrix%5B0%5D%20=%20vec3(a1.y%20*%20a3.y%20+%20a1.x%20*%20a2.x%20*%20a3.x,%20a1.y%20*%20a2.x%20*%20a3.x%20+%20a3.y%20*%20a1.x,%20-a2.y%20*%20a3.x);%20//%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%B8%80%E8%A1%8C%0D%0A%20%20%20%20%20%20%20%20finalMatrix%5B1%5D%20=%20vec3(-a2.y%20*%20a1.x,%20a1.y%20*%20a2.y,%20a2.x);%20//%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%BA%8C%E8%A1%8C%0D%0A%20%20%20%20%20%20%20%20finalMatrix%5B2%5D%20=%20vec3(a3.y%20*%20a1.x%20*%20a2.x%20+%20a1.y%20*%20a3.x,%20a1.x%20*%20a3.x%20%20-a1.y%20*%20a3.y%20*%20a2.x,%20a2.y%20*%20a3.y);%20//%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%B8%89%E8%A1%8C%0D%0A%20%20%20%20%20%20%20%20return%20finalMatrix;%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20sky%0D%0A%20%20%20%20%20%20//%20%E6%A0%B9%E6%8D%AE%E7%BB%99%E5%AE%9A%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fe%E8%AE%A1%E7%AE%97%E5%A4%A9%E7%A9%BA%E7%9A%84%E9%A2%9C%E8%89%B2%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%A8%A1%E6%8B%9F%E4%BA%86%E5%A4%A9%E7%A9%BA%E7%9A%84%E6%B8%90%E5%8F%98%E6%95%88%E6%9E%9C%EF%BC%8C%E4%BB%8E%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%88%B0%E5%A4%A9%E9%A1%B6%E7%9A%84%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%0D%0A%20%20%20%20%20%20vec3%20getSkyColor(vec3%20e)%20%7B%0D%0A%20%20%20%20%20%20%20%20//%20max(e.y,%200.0)%EF%BC%9A%E7%A1%AE%E4%BF%9De.y%E7%9A%84%E5%80%BC%E4%B8%8D%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%A4%A9%E7%A9%BA%E7%9A%84%E9%A2%9C%E8%89%B2%E9%80%9A%E5%B8%B8%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E4%BB%A5%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20//%20max(e.y,%200.0)%20*%200.8%EF%BC%9A%E5%B0%86e.y%E7%9A%84%E5%80%BC%E4%B9%98%E4%BB%A50.8%EF%BC%8C%E4%BD%BF%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%E6%9B%B4%E5%8A%A0%E5%B9%B3%E7%BC%93%0D%0A%20%20%20%20%20%20%20%20//%20max(e.y,%200.0)%20*%200.8%20+%200.2%EF%BC%9A%E5%9C%A8%E4%B9%98%E4%BB%A50.8%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%8A%A0%E4%B8%8A0.2%EF%BC%8C%E7%A1%AE%E4%BF%9D%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E7%9A%84%E9%A2%9C%E8%89%B2%E4%B8%8D%E4%BC%9A%E5%A4%AA%E6%9A%97%0D%0A%20%20%20%20%20%20%20%20//%20(max(e.y,%200.0)%20*%200.8%20+%200.2)%20*%200.8%EF%BC%9A%E5%86%8D%E6%AC%A1%E4%B9%98%E4%BB%A50.8%EF%BC%8C%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%B0%83%E6%95%B4%E9%A2%9C%E8%89%B2%E7%9A%84%E4%BA%AE%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20e.y%20=%20(max(e.y,%200.0)%20*%200.8%20+%200.2)%20*%200.8;%0D%0A%20%20%20%20%20%20%20%20//%20pow(1.0%20-%20e.y,%202.0)%EF%BC%9A%E8%AE%A1%E7%AE%971.0%20-%20e.y%E7%9A%84%E5%B9%B3%E6%96%B9%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E5%A4%A9%E7%A9%BA%E9%A2%9C%E8%89%B2%E7%9A%84%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96%E8%BF%99%E4%B8%AA%E5%80%BC%E5%B0%86%E7%94%A8%E4%BA%8E%E7%BA%A2%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E7%BA%A2%0D%0A%20%20%20%20%20%20%20%20//%201.0%20-%20e.y%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A81.0%20-%20e.y%E4%BD%9C%E4%B8%BA%E7%BB%BF%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E7%BB%BF%0D%0A%20%20%20%20%20%20%20%20//%200.6%20+%20(1.0%20-%20e.y)%20*%200.4%EF%BC%9A%E8%AE%A1%E7%AE%97%E8%93%9D%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E8%93%9D0.6%E6%98%AF%E5%9F%BA%E7%A1%80%E8%93%9D%E8%89%B2%EF%BC%8C(1.0%20-%20e.y)%20*%200.4%E6%A0%B9%E6%8D%AEe.y%E7%9A%84%E5%80%BC%E5%A2%9E%E5%8A%A0%E8%93%9D%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20vec3(pow(1.0%20-%20e.y,%202.0),%201.0%20-%20e.y,%200.6%20+%20(1.0%20-%20e.y)%20*%200.4)%EF%BC%9A%E5%B0%86%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84%E7%BA%A2%E3%80%81%E7%BB%BF%E3%80%81%E8%93%9D%E5%88%86%E9%87%8F%E7%BB%84%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AA%E9%A2%9C%E8%89%B2%E5%90%91%E9%87%8F%0D%0A%20%20%20%20%20%20%20%20//%20vec3(pow(1.0%20-%20e.y,%202.0),%201.0%20-%20e.y,%200.6%20+%20(1.0%20-%20e.y)%20*%200.4)%20*%201.1%EF%BC%9A%E5%B0%86%E9%A2%9C%E8%89%B2%E5%90%91%E9%87%8F%E4%B9%98%E4%BB%A51.1%EF%BC%8C%E5%A2%9E%E5%8A%A0%E9%A2%9C%E8%89%B2%E7%9A%84%E4%BA%AE%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20return%20vec3(pow(1.0%20-%20e.y,%202.0),%201.0%20-%20e.y,%200.6%20+%20(1.0%20-%20e.y)%20*%200.4)%20*%201.1;%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20float%20hash(vec2%20p)%20%7B%0D%0A%20%20%20%20%20%20%20%20float%20h%20=%20dot(p,vec2(127.1,%20311.7));%09%0D%0A%20%20%20%20%20%20%20%20return%20fract(sin(h)%20*%2043758.5453123);%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20float%20noise(in%20vec2%20p)%20%7B%0D%0A%20%20%20%20%20%20%20%20vec2%20i%20=%20floor(p);%0D%0A%20%20%20%20%20%20%20%20vec2%20f%20=%20fract(p);%09%0D%0A%20%20%20%20%20%20%20%20vec2%20u%20=%20f%20*%20f%20*%20(3.0%20-%202.0%20*%20f);%0D%0A%20%20%20%20%20%20%20%20return%20-1.0%20+%202.0%20*%20mix(mix(hash(i%20+%20vec2(0.0,%200.0)),%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash(i%20+%20vec2(1.0,%200.0)),%20u.x),%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mix(hash(i%20+%20vec2(0.0,%201.0)),%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash(i%20+%20vec2(1.0,%201.0)),%20u.x),%20u.y);%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20//%20%E6%8E%A5%E5%8F%97%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E5%92%8C%E4%B8%80%E4%B8%AA%E7%B2%97%E7%B3%99%E5%BA%A6%E5%8F%82%E6%95%B0%20p%EF%BC%88%E6%9C%89%E6%97%B6%E4%B9%9F%E7%A7%B0%E4%B8%BA%E2%80%9C%E6%BC%AB%E5%8F%8D%E5%B0%84%E6%8C%87%E6%95%B0%E2%80%9D%EF%BC%89%0D%0A%20%20%20%20%20%20//%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E4%BB%A3%E8%A1%A8%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20float%20diffuse(vec3%20n,%20vec3%20l,%20float%20p)%20%7B%0D%0A%20%20%20%20%20%20%20%20//%20%E9%A6%96%E5%85%88%EF%BC%8C%E4%BD%BF%E7%94%A8%20dot%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%20n%20%E5%92%8C%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E8%A1%A8%E7%A4%BA%E4%BA%86%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E6%B3%95%E7%BA%BF%E4%B9%8B%E9%97%B4%E7%9A%84%E5%AF%B9%E9%BD%90%E7%A8%8B%E5%BA%A6%EF%BC%9A%E5%BD%93%E5%85%89%E7%BA%BF%E5%9E%82%E7%9B%B4%E4%BA%8E%E8%A1%A8%E9%9D%A2%E6%97%B6%EF%BC%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%201%EF%BC%9B%E5%BD%93%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%B9%B3%E8%A1%8C%E6%97%B6%EF%BC%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%200%EF%BC%88%E6%88%96%E8%B4%9F%E5%80%BC%EF%BC%8C%E4%BD%86%E5%9C%A8%E6%AD%A4%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%AD%E6%88%91%E4%BB%AC%E5%8F%AA%E5%85%B3%E5%BF%83%E5%85%B6%E7%BB%9D%E5%AF%B9%E5%80%BC%EF%BC%8C%E5%9B%A0%E4%B8%BA%E8%B4%9F%E5%80%BC%E8%A1%A8%E7%A4%BA%E5%85%89%E7%BA%BF%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%90%8E%E9%9D%A2%E7%85%A7%E5%B0%84%E8%BF%87%E6%9D%A5%E7%9A%84%EF%BC%8C%E8%BF%99%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%8A%E6%98%AF%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20//%20%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B9%98%E4%BB%A5%200.4%20%E5%B9%B6%E5%8A%A0%E4%B8%8A%200.6%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E4%B8%BA%E4%BA%86%E8%B0%83%E6%95%B4%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%EF%BC%88%E5%8F%AF%E8%A6%81%E5%8F%AF%E4%B8%8D%E8%A6%81%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20//%20%E4%B9%98%E4%BB%A5%200.4%20%E4%BC%9A%E9%99%8D%E4%BD%8E%E4%BD%99%E5%BC%A6%E5%80%BC%E5%AF%B9%E6%9C%80%E7%BB%88%E5%BC%BA%E5%BA%A6%E7%9A%84%E5%BD%B1%E5%93%8D%EF%BC%8C%E8%80%8C%E5%8A%A0%E4%B8%8A%200.6%20%E5%88%99%E7%A1%AE%E4%BF%9D%E5%8D%B3%E4%BD%BF%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%200%EF%BC%88%E5%8D%B3%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%87%A0%E4%B9%8E%E5%B9%B3%E8%A1%8C%EF%BC%89%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E4%B9%9F%E4%BC%9A%E6%9C%89%E4%B8%80%E5%AE%9A%E7%9A%84%E5%9F%BA%E7%A1%80%E5%BC%BA%E5%BA%A6%EF%BC%8C%E8%BF%99%E7%A7%8D%E8%B0%83%E6%95%B4%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9F%BA%E4%BA%8E%E7%89%B9%E5%AE%9A%E7%9A%84%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B%E6%88%96%E8%89%BA%E6%9C%AF%E6%95%88%E6%9E%9C%E9%9C%80%E6%B1%82%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20pow%20%E5%87%BD%E6%95%B0%E5%B0%86%E8%BF%99%E4%B8%AA%E8%B0%83%E6%95%B4%E5%90%8E%E7%9A%84%E5%80%BC%E6%8F%90%E5%8D%87%E5%88%B0%20p%20%E6%AC%A1%E6%96%B9%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E8%A1%A8%E9%9D%A2%E7%9A%84%E7%B2%97%E7%B3%99%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20//%20%E5%BD%93%20p%20%E5%80%BC%E8%BE%83%E5%A4%A7%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%E4%BC%9A%E6%9B%B4%E5%8A%A0%E9%9B%86%E4%B8%AD%E5%9C%A8%E6%B3%95%E7%BA%BF%E9%99%84%E8%BF%91%EF%BC%88%E5%8D%B3%E5%85%89%E7%BA%BF%E6%9B%B4%E5%9E%82%E7%9B%B4%E4%BA%8E%E8%A1%A8%E9%9D%A2%E6%97%B6%E5%BC%BA%E5%BA%A6%E6%9B%B4%E9%AB%98%EF%BC%89%EF%BC%8C%E6%A8%A1%E6%8B%9F%E5%87%BA%E6%9B%B4%E5%85%89%E6%BB%91%E7%9A%84%E8%A1%A8%E9%9D%A2%0D%0A%20%20%20%20%20%20%20%20//%20%E8%80%8C%E5%BD%93%20p%20%E5%80%BC%E8%BE%83%E5%B0%8F%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%E4%BC%9A%E6%9B%B4%E5%8A%A0%E5%9D%87%E5%8C%80%EF%BC%8C%E6%A8%A1%E6%8B%9F%E5%87%BA%E6%9B%B4%E7%B2%97%E7%B3%99%E7%9A%84%E8%A1%A8%E9%9D%A2%0D%0A%20%20%20%20%20%20%20%20return%20pow(dot(n,%20l)%20*%200.4%20+%200.6,%20p);%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20//%20%E5%AE%83%E6%8E%A5%E5%8F%97%E5%9B%9B%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%E3%80%81%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20e%20%E5%92%8C%E4%B8%80%E4%B8%AA%E5%85%89%E6%B3%BD%E5%BA%A6%E5%8F%82%E6%95%B0%20s%EF%BC%88%E9%80%9A%E5%B8%B8%E7%A7%B0%E4%B8%BA%E2%80%9C%E9%95%9C%E9%9D%A2%E9%AB%98%E5%85%89%E6%8C%87%E6%95%B0%E2%80%9D%E6%88%96%E2%80%9C%E7%B2%97%E7%B3%99%E5%BA%A6%E2%80%9D%E7%9A%84%E5%80%92%E6%95%B0%EF%BC%89%0D%0A%20%20%20%20%20%20//%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E4%BB%A3%E8%A1%A8%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20float%20specular(vec3%20n,%20vec3%20l,%20vec3%20e,%20float%20s)%20%7B%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20float%20nrm%20=%20(s%20+%208.0)%20/%20(PI%20*%208.0);%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E9%A6%96%E5%85%88%EF%BC%8Creflect(e,%20n)%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%9A%84%E6%96%B9%E5%90%91%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20dot%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E8%BF%99%E4%B8%AA%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%0D%0A%20%20%20%20%20%20%20%20//%20max%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%8D%E4%BC%9A%E5%B0%8F%E4%BA%8E%200.0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%BD%99%E5%BC%A6%E5%80%BC%E5%9C%A8%E5%85%89%E7%BA%BF%E5%92%8C%E8%A1%A8%E9%9D%A2%E6%B3%95%E7%BA%BF%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E5%A4%A7%E4%BA%8E%2090%20%E5%BA%A6%E6%97%B6%E4%B8%BA%E8%B4%9F%EF%BC%8C%E8%80%8C%E8%B4%9F%E5%80%BC%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%8A%E6%98%AF%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%EF%BC%88%E5%9B%A0%E4%B8%BA%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%85%89%E7%BA%BF%E5%AE%9E%E9%99%85%E4%B8%8A%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%85%A7%E5%B0%84%E5%88%B0%E8%A1%A8%E9%9D%A2%E4%B8%8A%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20//%20%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E4%BD%BF%E7%94%A8%20pow%20%E5%87%BD%E6%95%B0%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E7%9A%84%20s%20%E6%AC%A1%E6%96%B9%E8%AE%A1%E7%AE%97%E5%87%BA%E6%9D%A5%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%A2%9E%E5%BC%BA%E4%BA%86%E9%AB%98%E5%85%89%E6%95%88%E6%9E%9C%EF%BC%9A%E5%BD%93%20s%20%E5%80%BC%E8%BE%83%E5%A4%A7%E6%97%B6%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E5%87%A0%E4%B9%8E%E5%AE%8C%E5%85%A8%E5%AF%B9%E9%BD%90%E6%97%B6%EF%BC%8C%E7%BB%93%E6%9E%9C%E6%89%8D%E4%BC%9A%E6%98%BE%E8%91%97%EF%BC%88%E4%BA%A7%E7%94%9F%E5%B0%96%E9%94%90%E7%9A%84%E9%AB%98%E5%85%89%EF%BC%89%EF%BC%9B%E8%80%8C%E5%BD%93%20s%20%E5%80%BC%E8%BE%83%E5%B0%8F%E6%97%B6%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E4%B8%8D%E5%AE%8C%E5%85%A8%E5%AF%B9%E9%BD%90%EF%BC%8C%E7%BB%93%E6%9E%9C%E4%B9%9F%E4%BC%9A%E7%9B%B8%E5%AF%B9%E8%BE%83%E5%A4%A7%EF%BC%88%E4%BA%A7%E7%94%9F%E6%9F%94%E5%92%8C%E7%9A%84%E9%AB%98%E5%85%89%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20return%20pow(max(dot(reflect(e,%20n),%20l),%200.0),%20s)%20*%20nrm;%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20choppy%E9%9C%80%E8%A6%81%E6%AF%8F%E6%AC%A1%E8%BF%AD%E4%BB%A3%E9%83%BD%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%8C%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%0D%0A%20%20%20%20%20%20float%20seaOctave(vec2%20uv,%20float%20choppy)%20%7B%0D%0A%20%20%20%20%20%20%20%20uv%20+=%20noise(uv);%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20vec2%20wave1%20=%201.0%20-%20abs(sin(uv));%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%0D%0A%20%20%20%20%20%20%20%20vec2%20wave2%20=%20abs(cos(uv));%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%0D%0A%20%20%20%20%20%20%20%20wave1%20=%20mix(wave1,%20wave2,%20wave1);%20//%20%E6%B7%B7%E5%90%88%0D%0A%20%20%20%20%20%20%20%20return%20pow(1.0%20-%20pow(wave1.x%20*%20wave1.y,%200.65),%20choppy);%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E8%AF%A5%E5%87%BD%E6%95%B0%E5%9F%BA%E4%BA%8E%E7%BB%99%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE%E8%BF%94%E5%9B%9E%E6%B5%B7%E6%B4%8B%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20float%20computedSeaPlaneHeight(vec3%20point,%20int%20iteration)%20%7B%0D%0A%20%20%20%20%20%20%20%20float%20freq%20=%20SEA_FREQ;%0D%0A%20%20%20%20%20%20%20%20float%20amplitude%20=%20SEA_HEIGHT;%0D%0A%20%20%20%20%20%20%20%20float%20choppy%20=%20SEA_CHOPPY;%0D%0A%20%20%20%20%20%20%20%20vec2%20tempUv%20=%20point.xz;%20%0D%0A%20%20%20%20%20%20%20%20tempUv.x%20*=%200.75;%0D%0A%0D%0A%20%20%20%20%20%20%20%20float%20d%20=%200.0;%20//%20%E6%AF%8F%E4%B8%AA%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%0D%0A%20%20%20%20%20%20%20%20float%20h%20=%200.0;%20//%20%E6%B5%B7%E6%B4%8B%E9%AB%98%E5%BA%A6%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E7%94%B1%E4%BA%8E%20WebGL%201.0%20%E7%9A%84%E9%99%90%E5%88%B6%EF%BC%8C%E6%9C%80%E7%AE%80%E5%8D%95%E4%B8%94%E9%80%9A%E5%B8%B8%E6%9C%80%E5%8F%AF%E8%A1%8C%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%98%AF%E4%BD%BF%E7%94%A8%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%BF%AD%E4%BB%A3%E6%AC%A1%E6%95%B0%0D%0A%20%20%20%20%20%20%20%20//%20WebGL%202.0%E5%88%99%E4%B8%8D%E7%94%A8%E8%BF%99%E6%A0%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8A%A8%E6%80%81%E4%BC%A0%E5%85%A5%E7%9A%84iteration%0D%0A%20%20%20%20%20%20%20%20if(iteration%20==%20ITERATION_GEOMETRY)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for(int%20j%20=%200;%20j%20%3C%20ITERATION_GEOMETRY;%20j%20+=%201)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20=%20seaOctave((tempUv%20+%20SEA_TIME)%20*%20freq,%20choppy);%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20+=%20seaOctave((tempUv%20-%20SEA_TIME)%20*%20freq,%20choppy);%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20+=%20d%20*%20amplitude;%20//%20%E5%B0%86%E5%BD%93%E5%89%8D%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%20d%20%E4%B9%98%E4%BB%A5%E6%8C%AF%E5%B9%85%20amp%EF%BC%8C%E7%84%B6%E5%90%8E%E7%B4%AF%E5%8A%A0%E5%88%B0%E6%80%BB%E9%AB%98%E5%BA%A6%20h%20%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20tempUv%20*=%20octave_m;%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20freq%20*=%201.9;%20%20//%20%E9%A2%91%E7%8E%87%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20amplitude%20*=%200.22;%20//%20%E6%8C%AF%E5%B9%85%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20choppy%20=%20mix(choppy,%201.0,%200.2);%20//%20%E6%B7%B7%E5%90%88%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E7%94%B1%E4%BA%8E%20WebGL%201.0%20%E7%9A%84%E9%99%90%E5%88%B6%EF%BC%8C%E6%9C%80%E7%AE%80%E5%8D%95%E4%B8%94%E9%80%9A%E5%B8%B8%E6%9C%80%E5%8F%AF%E8%A1%8C%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%98%AF%E4%BD%BF%E7%94%A8%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%BF%AD%E4%BB%A3%E6%AC%A1%E6%95%B0%0D%0A%20%20%20%20%20%20%20%20//%20WebGL%202.0%E5%88%99%E4%B8%8D%E7%94%A8%E8%BF%99%E6%A0%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8A%A8%E6%80%81%E4%BC%A0%E5%85%A5%E7%9A%84iteration%0D%0A%20%20%20%20%20%20%20%20if(iteration%20==%20ITERATION_FRAGMENT)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for(int%20j%20=%200;%20j%20%3C%20ITERATION_FRAGMENT;%20j%20+=%201)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20=%20seaOctave((tempUv%20+%20SEA_TIME)%20*%20freq,%20choppy);%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20+=%20seaOctave((tempUv%20-%20SEA_TIME)%20*%20freq,%20choppy);%20//%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20+=%20d%20*%20amplitude;%20//%20%E5%B0%86%E5%BD%93%E5%89%8D%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%20d%20%E4%B9%98%E4%BB%A5%E6%8C%AF%E5%B9%85%20amp%EF%BC%8C%E7%84%B6%E5%90%8E%E7%B4%AF%E5%8A%A0%E5%88%B0%E6%80%BB%E9%AB%98%E5%BA%A6%20h%20%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20tempUv%20*=%20octave_m;%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20freq%20*=%201.9;%20%20//%20%E9%A2%91%E7%8E%87%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20amplitude%20*=%200.22;%20//%20%E6%8C%AF%E5%B9%85%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20choppy%20=%20mix(choppy,%201.0,%200.2);%20//%20%E6%B7%B7%E5%90%88%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%94%E5%9B%9E%E8%BE%93%E5%85%A5%E4%BD%8D%E7%BD%AE%20point%20%E7%9A%84%20y%20%E5%88%86%E9%87%8F%E5%87%8F%E5%8E%BB%E8%AE%A1%E7%AE%97%E5%87%BA%E7%9A%84%E6%B5%B7%E6%B5%AA%E9%AB%98%E5%BA%A6%20h%E8%BF%99%E7%BB%99%E5%87%BA%E4%BA%86%E8%AF%A5%E7%82%B9%E7%9B%B8%E5%AF%B9%E4%BA%8E%E6%B5%B7%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20return%20point.y%20-%20h;%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E7%9B%AE%E7%9A%84%E6%98%AF%E8%AE%A1%E7%AE%97%E7%BB%99%E5%AE%9A%E7%A9%BA%E9%97%B4%E4%BD%8D%E7%BD%AE%20p%20%E5%A4%84%E7%9A%84%E6%B3%95%E5%90%91%E9%87%8F%20n%0D%0A%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E9%87%87%E7%94%A8%E4%BA%86%E6%95%B0%E5%80%BC%E5%BE%AE%E5%88%86%E7%9A%84%E6%96%B9%E6%B3%95%E6%9D%A5%E4%BC%B0%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%EF%BC%8C%E8%BF%99%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E5%9F%BA%E4%BA%8E%E4%BD%93%E7%B4%A0%EF%BC%88voxel%EF%BC%89%E3%80%81%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88heightMap%EF%BC%89%E6%88%96%E5%85%B6%E4%BB%96%E5%BD%A2%E5%BC%8F%E7%9A%84%E4%B8%89%E7%BB%B4%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%AD%0D%0A%20%20%20%20%20%20//%20eps%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%9A%84%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E7%9B%B8%E9%82%BB%E4%BD%8D%E7%BD%AE%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BC%B0%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%0D%0A%20%20%20%20%20%20vec3%20getNormal(vec3%20p,%20float%20eps)%20%7B%0D%0A%20%20%20%20%20%20%20%20vec3%20n;%0D%0A%20%20%20%20%20%20%20%20n.y%20=%20computedSeaPlaneHeight(p,%20ITERATION_FRAGMENT);%20//%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%A4%84%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E5%AD%98%E5%82%A8%E5%9C%A8%20n.y%20%E4%B8%AD%0D%0A%20%20%20%20%20%20%20%20n.x%20=%20computedSeaPlaneHeight(vec3(p.x%20+%20eps,%20p.y,%20p.z),%20ITERATION_FRAGMENT)%20-%20n.y;%20//%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%9C%A8%20x%20%E6%96%B9%E5%90%91%E5%81%8F%E7%A7%BB%20eps%20%E5%90%8E%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E4%B8%8E%20n.y%EF%BC%88%E5%8D%B3%E5%8E%9F%E5%A7%8B%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%89%E7%9B%B8%E5%87%8F%EF%BC%8C%E4%BB%A5%E4%BC%B0%E7%AE%97%20x%20%E6%96%B9%E5%90%91%E7%9A%84%E6%96%9C%E7%8E%87%0D%0A%20%20%20%20%20%20%20%20n.z%20=%20computedSeaPlaneHeight(vec3(p.x,%20p.y,%20p.z%20+%20eps),%20ITERATION_FRAGMENT)%20-%20n.y;%20//%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%9C%A8%20z%20%E6%96%B9%E5%90%91%E5%81%8F%E7%A7%BB%20eps%20%E5%90%8E%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E4%B8%8E%20n.y%EF%BC%88%E5%8D%B3%E5%8E%9F%E5%A7%8B%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%89%E7%9B%B8%E5%87%8F%EF%BC%8C%E4%BB%A5%E4%BC%B0%E7%AE%97%20z%20%E6%96%B9%E5%90%91%E7%9A%84%E6%96%9C%E7%8E%87%0D%0A%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20eps%E6%98%AFdot(distanceVector,%20distanceVector)%20*%20EPSILON_NRM%0D%0A%20%20%20%20%20%20%20%20n.y%20=%20eps;%0D%0A%20%20%20%20%20%20%20%20return%20normalize(n);%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B4%8B%E8%A1%A8%E9%9D%A2%E6%9F%90%E4%B8%80%E7%82%B9%20p%20%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%8C%E8%80%83%E8%99%91%E5%88%B0%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%E3%80%81%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20eye%20%E5%92%8C%E5%88%B0%E8%A7%82%E5%AF%9F%E8%80%85%E7%9A%84%E8%B7%9D%E7%A6%BB%20dist%0D%0A%20%20%20%20%20%20vec3%20getSeaColor(vec3%20p,%20vec3%20n,%20vec3%20l,%20vec3%20eye,%20vec3%20dist)%20%7B%0D%0A%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E8%8F%B2%E6%B6%85%E8%80%B3%E6%95%88%E5%BA%94%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E4%BB%8E%E4%B8%80%E7%A7%8D%E4%BB%8B%E8%B4%A8%E8%BF%9B%E5%85%A5%E5%8F%A6%E4%B8%80%E7%A7%8D%E4%BB%8B%E8%B4%A8%E6%97%B6%E5%8F%8D%E5%B0%84%E5%92%8C%E6%8A%98%E5%B0%84%E7%9A%84%E6%AF%94%E4%BE%8B%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%82%B9%E7%A7%AF%E6%9D%A5%E8%AE%A1%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%20n%20%E5%92%8C%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20-eye%20(%E5%9B%A0%E4%B8%BA%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%E9%80%9A%E5%B8%B8%E6%8C%87%E5%90%91%E8%A7%82%E5%AF%9F%E8%80%85%EF%BC%8C%E8%80%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E7%9A%84%E6%98%AF%E6%8C%87%E5%90%91%E5%85%89%E6%BA%90%E6%88%96%E8%A1%A8%E9%9D%A2%E7%9A%84%E7%9B%B8%E5%8F%8D%E6%96%B9%E5%90%91)%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%EF%BC%8C%E7%84%B6%E5%90%8E%E7%94%A8%201.0%20%E5%87%8F%E5%8E%BB%E8%BF%99%E4%B8%AA%E5%80%BC%E5%BE%97%E5%88%B0%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%0D%0A%20%20%20%20%20%20%20%20//%20clamp%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E8%BF%99%E4%B8%AA%E5%80%BC%E5%9C%A8%200.0%20%E5%88%B0%201.0%20%E4%B9%8B%E9%97%B4%0D%0A%20%20%20%20%20%20%20%20float%20fresnel%20=%20clamp(1.0%20-%20dot(n,%20-eye),%200.0,%201.0);%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E5%AF%B9%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E8%BF%9B%E8%A1%8C%E4%B8%89%E6%AC%A1%E6%96%B9%E8%BF%90%E7%AE%97%EF%BC%8C%E4%BB%A5%E5%A2%9E%E5%BC%BA%E8%8F%B2%E6%B6%85%E8%80%B3%E6%95%88%E5%BA%94%E5%9C%A8%E9%AB%98%E8%A7%92%E5%BA%A6%E6%97%B6%E7%9A%84%E6%95%88%E6%9E%9C%EF%BC%88%E5%8D%B3%E5%BD%93%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%E5%87%A0%E4%B9%8E%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%B9%B3%E8%A1%8C%E6%97%B6%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20min%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%BC%9A%E8%B6%85%E8%BF%87%200.5%EF%BC%8C%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%BA%E4%BA%86%E9%99%90%E5%88%B6%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20fresnel%20=%20min(fresnel%20*%20fresnel%20*%20fresnel,%200.5);%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E5%8F%8D%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2reflect%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%9A%84%E6%96%B9%E5%90%91%EF%BC%8C%E7%84%B6%E5%90%8E%20getSkyColor%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E8%AF%A5%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E5%A4%A9%E7%A9%BA%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20vec3%20reflected%20=%20getSkyColor(reflect(eye,%20n));%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E6%8A%98%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E9%87%8C%20SEA_BASE%20%E8%A1%A8%E7%A4%BA%E6%B5%B7%E6%B0%B4%E7%9A%84%E5%9F%BA%E7%A1%80%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20diffuse%20%E5%87%BD%E6%95%B0%E6%A0%B9%E6%8D%AE%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E5%92%8C%E4%B8%80%E4%B8%AA%E7%B2%97%E7%B3%99%E5%BA%A6%E5%8F%82%E6%95%B0%EF%BC%88%E8%BF%99%E9%87%8C%E6%98%AF%2080.0%EF%BC%89%E8%BF%94%E5%9B%9E%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%BC%BA%E5%BA%A6%E4%B9%98%E4%BB%A5%20SEA_WATER_COLOR%EF%BC%88%E6%B5%B7%E6%B0%B4%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%89%E5%92%8C%E4%B8%80%E4%B8%AA%E7%BC%A9%E6%94%BE%E5%9B%A0%E5%AD%90%EF%BC%880.12%EF%BC%89%E6%9D%A5%E5%BE%97%E5%88%B0%E6%8A%98%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%E9%83%A8%E5%88%86%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%EF%BC%8C%E5%B0%86%E8%BF%99%E4%B8%AA%E9%83%A8%E5%88%86%E5%8A%A0%E5%88%B0%20SEA_BASE%20%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20vec3%20refracted%20=%20SEA_BASE%20+%20diffuse(n,%20l,%2080.0)%20*%20SEA_WATER_COLOR%20*%200.12;%20%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E4%BD%BF%E7%94%A8%20mix%20%E5%87%BD%E6%95%B0%E6%A0%B9%E6%8D%AE%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E5%B0%86%E6%8A%98%E5%B0%84%E5%85%89%E5%92%8C%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%E6%B7%B7%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E8%B6%8A%E9%AB%98%EF%BC%8C%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E6%88%90%E5%88%86%E5%B0%B1%E8%B6%8A%E5%A4%9A%EF%BC%9B%E5%8F%8D%E4%B9%8B%EF%BC%8C%E6%8A%98%E5%B0%84%E5%85%89%E7%9A%84%E6%88%90%E5%88%86%E5%B0%B1%E8%B6%8A%E5%A4%9A%0D%0A%20%20%20%20%20%20%20%20vec3%20color%20=%20mix(refracted,%20reflected,%20fresnel);%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%20dist%20%E5%90%91%E9%87%8F%E4%B8%8E%E5%85%B6%E8%87%AA%E8%BA%AB%E7%9A%84%E7%82%B9%E7%A7%AF%EF%BC%88%E5%8D%B3%20dist%20%E7%9A%84%E9%95%BF%E5%BA%A6%E7%9A%84%E5%B9%B3%E6%96%B9%EF%BC%89%E4%B9%98%E4%BB%A5%E4%B8%80%E4%B8%AA%E8%A1%B0%E5%87%8F%E7%B3%BB%E6%95%B0%EF%BC%880.001%EF%BC%89%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%E4%BB%8E%201.0%20%E4%B8%AD%E5%87%8F%E5%8E%BB%E8%BF%99%E4%B8%AA%E7%BB%93%E6%9E%9C%0D%0A%20%20%20%20%20%20%20%20//%20max%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%BC%9A%E5%B0%8F%E4%BA%8E%200.0%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%9A%8F%E7%9D%80%E8%B7%9D%E7%A6%BB%E5%A2%9E%E5%8A%A0%E6%B5%B7%E6%B0%B4%E9%A2%9C%E8%89%B2%E9%80%90%E6%B8%90%E5%87%8F%E5%BC%B1%E7%9A%84%E6%95%88%E6%9E%9C%0D%0A%20%20%20%20%20%20%20%20float%20attenuation%20=%20max(1.0%20-%20dot(dist,%20dist)%20*%200.001,%200.0);%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E6%A0%B9%E6%8D%AE%E7%82%B9%20p%20%E7%9A%84%20y%20%E5%9D%90%E6%A0%87%E4%B8%8E%E6%B5%B7%E9%9D%A2%E9%AB%98%E5%BA%A6%20SEA_HEIGHT%20%E7%9A%84%E5%B7%AE%E5%BC%82%E6%9D%A5%E8%B0%83%E6%95%B4%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%B7%AE%E5%BC%82%E4%B9%98%E4%BB%A5%E4%B8%80%E4%B8%AA%E7%BC%A9%E6%94%BE%E5%9B%A0%E5%AD%90%EF%BC%880.18%EF%BC%89%E5%92%8C%E4%B9%8B%E5%89%8D%E8%AE%A1%E7%AE%97%E7%9A%84%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%20atten%0D%0A%20%20%20%20%20%20%20%20//%20%E7%84%B6%E5%90%8E%E4%B9%98%E4%BB%A5%20SEA_WATER_COLOR%20%E5%B9%B6%E5%8A%A0%E5%88%B0%E6%9C%80%E7%BB%88%E9%A2%9C%E8%89%B2%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E5%8F%AF%E8%83%BD%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E6%B5%B7%E6%B0%B4%E6%B7%B1%E6%B5%85%E4%B8%8D%E5%90%8C%E6%97%B6%E7%9A%84%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%0D%0A%20%20%20%20%20%20%20%20color%20+=%20SEA_WATER_COLOR%20*%20(p.y%20-%20SEA_HEIGHT)%20*%200.18%20*%20attenuation;%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E5%B9%B6%E6%B7%BB%E5%8A%A0%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20specular%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E9%A2%9C%E8%89%B2%E8%A2%AB%E7%9B%B4%E6%8E%A5%E5%8A%A0%E5%88%B0%E6%9C%80%E7%BB%88%E9%A2%9C%E8%89%B2%E4%B8%8A%0D%0A%20%20%20%20%20%20%20%20color%20+=%20specular(n,%20l,%20eye,%2060.0);%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20return%20color;%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20//%20%E9%AB%98%E5%BA%A6%E5%9B%BE%E7%9A%84%E6%8F%8F%E5%9B%BE%0D%0A%20%20%20%20%20%20//%20%E4%BD%9C%E7%94%A8%E6%98%AF%E8%BF%9B%E8%A1%8C%E5%85%89%E7%BA%BF%E4%B8%8E%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88%E5%A6%82%E6%B5%B7%E9%9D%A2%EF%BC%89%E7%9A%84%E4%BA%A4%E7%82%B9%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%9C%A8%E7%BB%99%E5%AE%9A%E8%B5%B7%E7%82%B9%E5%92%8C%E6%96%B9%E5%90%91%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%89%BE%E5%88%B0%E4%B8%8E%E6%B5%B7%E9%9D%A2%E7%9B%B8%E4%BA%A4%E7%9A%84%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20//%20%E5%85%B7%E4%BD%93%E6%9D%A5%E8%AF%B4%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E7%B3%BB%E5%88%97%E7%9A%84%E8%BF%AD%E4%BB%A3%E8%AE%A1%E7%AE%97%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%BB%8E%E8%B5%B7%E7%82%B9rayOrigin%E6%B2%BF%E7%9D%80%E6%96%B9%E5%90%91direction%E5%87%BA%E5%8F%91%EF%BC%8C%E4%B8%8E%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%9C%BA%E6%99%AF%E4%B8%AD%E6%98%AF%E6%B5%B7%E9%9D%A2%EF%BC%89%E7%9B%B8%E4%BA%A4%E7%9A%84%E5%85%B7%E4%BD%93%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%B9%B6%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%E8%BE%93%E5%87%BA%E5%88%B0%E5%8F%82%E6%95%B0intersectionPoint%E4%B8%AD%0D%0A%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%98%AF%E6%B8%B2%E6%9F%93%E6%B5%B7%E6%B4%8B%E5%9C%BA%E6%99%AF%E7%9A%84%E5%85%B3%E9%94%AE%E9%83%A8%E5%88%86%EF%BC%8C%E5%AE%83%E7%BB%93%E5%90%88%E4%BA%86%E6%B7%B1%E5%BA%A6%E6%98%A0%E5%B0%84%EF%BC%88depth%20mapping%EF%BC%89%E5%92%8C%E6%AD%A5%E8%BF%9B%EF%BC%88stepping%EF%BC%89%E6%8A%80%E6%9C%AF%E6%9D%A5%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%B8%8E%E6%B5%B7%E6%B4%8B%E8%A1%A8%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%0D%0A%20%20%20%20%20%20float%20heightMapTracing(vec3%20rayOrigin,%20vec3%20direction,%20out%20vec3%20intersectionPoint)%20%7B%0D%0A%20%20%20%20%20%20%20%20float%20nearPlane%20=%200.0;%20//%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%91%E5%B9%B3%E9%9D%A2%EF%BC%88near%20plane%EF%BC%89%E7%9A%84%E8%B7%9D%E7%A6%BB%E4%B8%BA0%0D%0A%20%20%20%20%20%20%20%20float%20farPlane%20=%201000.0;%20//%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%9C%E5%B9%B3%E9%9D%A2%EF%BC%88far%20plane%EF%BC%89%E7%9A%84%E8%B7%9D%E7%A6%BBfarPlane%E4%B8%BA%E4%B8%80%E4%B8%AA%E8%BE%83%E5%A4%A7%E7%9A%84%E6%95%B0%EF%BC%881000.0%EF%BC%89%EF%BC%8C%E8%BF%99%E6%98%AF%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E7%9A%84%E6%9C%80%E5%A4%A7%E8%B7%9D%E7%A6%BB%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20//%20%E5%85%88%E8%AE%A1%E7%AE%97farHeight%EF%BC%8C%E5%86%8D%E8%AE%A1%E7%AE%97nearHeight%E7%9A%84%E5%8E%9F%E5%9B%A0%0D%0A%20%20%20%20%20%20%20%20//%20%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%88%96%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8C%E8%BF%9C%E5%A4%84%E7%9A%84%E7%89%A9%E4%BD%93%E9%80%9A%E5%B8%B8%E5%AF%B9%E6%9C%80%E7%BB%88%E5%9B%BE%E5%83%8F%E7%9A%84%E5%BD%B1%E5%93%8D%E8%BE%83%E5%B0%8F%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E5%85%88%E4%BB%A5%E8%BE%83%E4%BD%8E%E7%9A%84%E7%B2%BE%E5%BA%A6%E6%88%96%E5%88%86%E8%BE%A8%E7%8E%87%E8%AE%A1%E7%AE%97%E8%BF%9C%E5%A4%84%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%88hx%EF%BC%89%EF%BC%8C%E4%BB%A5%E5%87%8F%E5%B0%91%E8%AE%A1%E7%AE%97%E9%87%8F%0D%0A%20%20%20%20%20%20%20%20//%20%E9%9A%8F%E5%90%8E%EF%BC%8C%E5%86%8D%E5%AF%B9%E8%BF%91%E5%A4%84%E7%9A%84%E7%89%A9%E4%BD%93%E8%BF%9B%E8%A1%8C%E6%9B%B4%E7%B2%BE%E7%BB%86%E7%9A%84%E8%AE%A1%E7%AE%97%EF%BC%88hm%EF%BC%89%EF%BC%8C%E4%BB%A5%E7%A1%AE%E4%BF%9D%E5%9B%BE%E5%83%8F%E8%B4%A8%E9%87%8F%0D%0A%20%20%20%20%20%20%20%20//%20%E6%89%80%E4%BB%A5%E4%BC%9Areturn%20farPlane%0D%0A%0D%0A%20%20%20%20%20%20%20%20float%20farHeight%20=%20computedSeaPlaneHeight(rayOrigin%20+%20direction%20*%20farPlane,%20ITERATION_GEOMETRY);%20//%20%E8%AE%A1%E7%AE%97%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20//%20%E5%A6%82%E6%9E%9CfarHeight%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%88%99%E8%A1%A8%E6%98%8E%E4%BA%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E6%B2%A1%E6%9C%89%E6%B5%B7%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E0.0%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%B2%A1%E6%9C%89%E4%BA%A4%E7%82%B9%0D%0A%20%20%20%20%20%20%20%20//%20%E9%9C%80%E8%A6%81%E8%AE%A1%E7%AE%97%E8%BF%91%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E4%BB%A5%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E6%B5%B7%E9%9D%A2%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20%20%20if(farHeight%20%3E%200.0)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20intersectionPoint%20=%20rayOrigin%20+%20direction%20*%20farPlane;%20//%20%E5%A6%82%E6%9E%9C%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%E5%A4%A7%E4%BA%8E0%EF%BC%8C%E5%88%99%E5%B0%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E4%BD%9C%E4%B8%BA%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20%20%20%20%20return%20farPlane;%20//%20%E8%BF%94%E5%9B%9E%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E8%B7%9D%E7%A6%BB%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20for%E5%BE%AA%E7%8E%AF%E7%94%A8%E4%BA%8E%E8%BF%AD%E4%BB%A3%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E6%B5%B7%E9%9D%A2%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%85%89%E7%BA%BF%E6%AD%A5%E8%BF%9B%E7%AE%97%E6%B3%95%0D%0A%20%20%20%20%20%20%20%20float%20nearHeight%20=%20computedSeaPlaneHeight(rayOrigin%20+%20direction%20*%20nearPlane,%20ITERATION_GEOMETRY);%20//%20%E8%AE%A1%E7%AE%97%E8%BF%91%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20for(int%20i%20=%200;%20i%20%3C%20NUM_STEPS;%20i++)%20%7B%20//%20%E5%BC%80%E5%A7%8B%E4%B8%80%E4%B8%AA%E5%BE%AA%E7%8E%AF%EF%BC%8C%E5%BE%AA%E7%8E%AF%E6%AC%A1%E6%95%B0%E7%94%B1NUM_STEPS%E5%AE%9A%E4%B9%89%EF%BC%8C%E8%BF%99%E6%98%AF%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%AD%A5%E8%BF%9B%E6%AC%A1%E6%95%B0%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E8%AE%A1%E7%AE%97%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E4%B8%AD%E7%82%B9%E8%B7%9D%E7%A6%BBmiddle%20distance%E8%BF%99%E6%98%AF%E9%80%9A%E8%BF%87%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%EF%BC%88mix%EF%BC%89nearPlane%E5%92%8CfarPlane%E5%BE%97%E5%88%B0%E7%9A%84%EF%BC%8C%E6%8F%92%E5%80%BC%E5%9B%A0%E5%AD%90%E5%9F%BA%E4%BA%8E%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%E4%B8%8E%E6%80%BB%E9%AB%98%E5%BA%A6%E5%B7%AE%E7%9A%84%E6%AF%94%E4%BE%8B%0D%0A%20%20%20%20%20%20%20%20%20%20float%20tempDistance%20=%20mix(nearPlane,%20farPlane,%20nearHeight%20/%20(nearHeight%20-%20farHeight));%20//%20%E6%B3%A8%E6%84%8F%EF%BC%8C%E6%AD%A4%E6%97%B6%E7%9A%84farHeight%E6%B0%B8%E8%BF%9C%E6%98%AF%E5%B0%8F%E4%BA%8E0%E7%9A%84%0D%0A%20%20%20%20%20%20%20%20%20%20intersectionPoint%20=%20rayOrigin%20+%20direction%20*%20tempDistance;%0D%0A%20%20%20%20%20%20%20%20%20%20float%20tempHeight%20=%20computedSeaPlaneHeight(rayOrigin%20+%20direction%20*%20tempDistance,%20ITERATION_GEOMETRY);%0D%0A%20%20%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E5%A6%82%E6%9E%9C%20tempHeight%20%3C%200.0%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E4%B8%AD%E7%82%B9%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E4%BD%8E%E4%BA%8E%E5%9F%BA%E5%87%86%E9%9D%A2%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E6%B2%A1%E6%9C%89%E6%B5%B7%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E9%9C%80%E8%A6%81%E7%BB%A7%E7%BB%AD%E8%BF%AD%E4%BB%A3%E6%AD%A5%E8%BF%9B%EF%BC%8C%E4%BB%A5%E7%A1%AE%E5%AE%9A%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%9B%A0%E6%AD%A4%EF%BC%8C%E6%9B%B4%E6%96%B0%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%88%E6%88%96%E8%B7%9D%E7%A6%BB%EF%BC%89%E5%92%8C%E9%AB%98%E5%BA%A6%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E7%94%B1%E4%BA%8E%E8%BF%91%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%E5%80%BC%20nearHeight%20%E9%80%9A%E5%B8%B8%E6%98%AF%E6%AD%A3%E6%95%B0%EF%BC%88%E5%9B%A0%E4%B8%BA%E8%BF%91%E5%B9%B3%E9%9D%A2%E8%A2%AB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%A8%8D%E9%AB%98%E4%BA%8E%E5%9C%B0%E5%BD%A2%E8%A1%A8%E9%9D%A2%EF%BC%89%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BA%A4%E7%82%B9%E4%B8%8D%E5%8F%AF%E8%83%BD%E4%BD%8D%E4%BA%8E%E8%BF%91%E5%B9%B3%E9%9D%A2%E5%92%8C%E4%B8%AD%E7%82%B9%E4%B9%8B%E9%97%B4%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8E%A8%E6%96%AD%E5%87%BA%E4%BA%A4%E7%82%B9%E5%BF%85%E5%AE%9A%E4%BD%8D%E4%BA%8E%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E4%B8%AD%E7%82%B9%E5%88%B0%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9F%90%E4%B8%AA%E4%BD%8D%E7%BD%AE%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E4%B8%BA%E4%BA%86%E7%BC%A9%E5%B0%8F%E6%90%9C%E7%B4%A2%E8%8C%83%E5%9B%B4%EF%BC%8C%E7%AE%97%E6%B3%95%E5%B0%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%88%E6%88%96%E8%B7%9D%E7%A6%BB%EF%BC%89%20farPlane%20%E5%92%8C%E9%AB%98%E5%BA%A6%E5%80%BC%20farHeight%20%E6%9B%B4%E6%96%B0%E4%B8%BA%E4%B8%AD%E7%82%B9%E7%9A%84%E6%97%B6%E9%97%B4%20tempDistance%20%E5%92%8C%E9%AB%98%E5%BA%A6%20tempHeight%0D%0A%20%20%20%20%20%20%20%20%20%20//%20%E5%9B%A0%E4%B8%BA%E6%89%80%E6%9C%89%E6%AF%94%E6%AD%A4%E5%88%BB%E7%9A%84tempDistance%E6%9B%B4%E5%A4%A7%E7%9A%84%E5%80%BC%EF%BC%8C%E6%B1%82%E5%87%BA%E6%9D%A5%E7%9A%84tempHeight%E4%B9%9F%E6%98%AF%E5%B0%8F%E4%BA%8E0%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A6%81%E6%8A%8AfarPlane%E7%9A%84%E5%80%BC%EF%BC%8C%E5%8F%98%E5%B0%8F%0D%0A%20%20%20%20%20%20%20%20%20%20if(tempHeight%20%3C%200.0)%20%7B%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20farPlane%20=%20tempDistance;%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20farHeight%20=%20tempHeight;%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20nearPlane%20=%20tempDistance;%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20nearHeight%20=%20tempHeight;%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20if(abs(tempHeight)%20%3C%20EPSILON)%20break;%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E9%80%9A%E8%BF%87%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E8%BF%94%E5%9B%9E%E6%9C%80%E7%BB%88%E7%9A%84%E4%BA%A4%E7%82%B9%E8%B7%9D%E7%A6%BB%E8%BF%99%E4%B8%AA%E6%8F%92%E5%80%BC%E6%98%AF%E5%9F%BA%E4%BA%8E%E6%9C%80%E7%BB%88%E6%AD%A5%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%E4%B8%8E%E6%80%BB%E9%AB%98%E5%BA%A6%E5%B7%AE%E7%9A%84%E6%AF%94%E4%BE%8B%E6%9D%A5%E8%AE%A1%E7%AE%97%E7%9A%84%0D%0A%20%20%20%20%20%20%20%20return%20mix(nearPlane,%20farPlane,%20nearHeight%20/%20(nearHeight%20-%20farHeight));%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20vec3%20getPixel(in%20vec2%20uv,%20float%20time)%20%7B%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20ray%E7%9A%84%E5%86%85%E5%AE%B9---start%0D%0A%20%20%20%20%20%20%20%20//%20%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%80%E8%A1%8C%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E4%B8%89%E7%BB%B4%E5%90%91%E9%87%8Fang%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%AC%A7%E6%8B%89%E8%A7%92%EF%BC%88Euler%20angles%EF%BC%89%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%8F%8F%E8%BF%B0%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E7%9A%84%E6%97%8B%E8%BD%AC%0D%0A%20%20%20%20%20%20%20%20vec3%20angle%20=%20vec3(sin(1.25%20*%20time)%20*%200.1,%20sin(time)%20*%200.2%20+%200.3,%20time%20*%200.5);%20%20%20%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20%E8%A1%A8%E7%A4%BA%E4%BB%8E%E8%A7%82%E5%AF%9F%E7%82%B9%EF%BC%88%E9%80%9A%E5%B8%B8%E6%98%AF%E7%9B%B8%E6%9C%BA%E4%BD%8D%E7%BD%AE%EF%BC%89%E5%88%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E8%BF%99%E4%B8%AA%E5%90%91%E9%87%8F%E7%94%A8%E4%BA%8E%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%BB%8E%E7%9B%B8%E6%9C%BA%E5%87%BA%E5%8F%91%EF%BC%8C%E7%A9%BF%E8%BF%87%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%9C%BA%E6%99%AF%E7%9A%84%E6%96%B9%E5%90%91%0D%0A%20%20%20%20%20%20%20%20//%20%E9%80%9A%E8%BF%87%E5%BD%92%E4%B8%80%E5%8C%96%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%B0%86%E4%BB%8E%E7%9B%B8%E6%9C%BA%E4%BD%8D%E7%BD%AE%E5%88%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E7%94%A8%E4%BA%8E%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E5%9C%A8%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E4%BC%A0%E6%92%AD%E8%B7%AF%E5%BE%84%EF%BC%8C%E7%A1%AE%E4%BF%9D%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%E7%9A%84%E5%87%86%E7%A1%AE%E6%80%A7%E5%92%8C%E9%AB%98%E6%95%88%E6%80%A7%0D%0A%20%20%20%20%20%20%20%20vec3%20direction%20=%20normalize(vec3(uv.xy,%20-2.0));%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%80%E8%A1%8C%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E5%AF%B9%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fdir%E7%9A%84z%E5%88%86%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%B0%83%E6%95%B4%E5%85%B7%E4%BD%93%E6%9D%A5%E8%AF%B4%EF%BC%8C%E9%80%9A%E8%BF%87%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E4%B8%8Euv%E5%90%91%E9%87%8F%E9%95%BF%E5%BA%A6%E6%88%90%E6%AF%94%E4%BE%8B%E7%9A%84%E5%80%BC%E6%9D%A5%E6%94%B9%E5%8F%98%E5%85%89%E7%BA%BF%E7%9A%84%E5%80%BE%E6%96%9C%E8%A7%92%E5%BA%A6%E8%BF%99%E7%A7%8D%E8%B0%83%E6%95%B4%E5%8F%AF%E4%BB%A5%E6%A8%A1%E6%8B%9F%E5%87%BA%E4%BB%8E%E4%B8%8D%E5%90%8C%E8%A7%86%E8%A7%92%E8%A7%82%E5%AF%9F%E5%9C%BA%E6%99%AF%E6%97%B6%EF%BC%8C%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E7%9A%84%E5%8F%98%E5%8C%96%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%A2%9E%E5%BC%BA%E5%9C%BA%E6%99%AF%E7%9A%84%E7%AB%8B%E4%BD%93%E6%84%9F%E5%92%8C%E6%B7%B1%E5%BA%A6%E6%84%9F%0D%0A%20%20%20%20%20%20%20%20direction.z%20+=%20length(uv)%20*%200.14;%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%80%E8%A1%8C%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E5%B0%86%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fdir%E8%BF%9B%E8%A1%8C%E5%BD%92%E4%B8%80%E5%8C%96%EF%BC%8C%E4%BF%9D%E6%8C%81%E6%96%B9%E5%90%91%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%8C%E5%B9%B6%E6%A0%B9%E6%8D%AE%E6%AC%A7%E6%8B%89%E8%A7%92ang%E5%AF%B9%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E8%BF%9B%E8%A1%8C%E6%97%8B%E8%BD%AC%0D%0A%20%20%20%20%20%20%20%20direction%20=%20normalize(direction)%20*%20getRotationMatrixByEulerAngle(angle);%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20rayOrigin%E8%A1%A8%E7%A4%BA%E5%85%89%E7%BA%BF%E7%9A%84%E8%B5%B7%E6%BA%90%E7%82%B9%EF%BC%8C%E5%8D%B3%E5%B0%84%E7%BA%BF%E7%9A%84%E8%B5%B7%E7%82%B9%0D%0A%20%20%20%20%20%20%20%20//%20%E4%BD%9C%E7%94%A8%EF%BC%9A%0D%0A%20%20%20%20%20%20%20%20//%201%E3%80%81%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%9A%84%E8%B5%B7%E7%82%B9%EF%BC%9A%E5%9C%A8%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%AE%97%E6%B3%95%E4%B8%AD%EF%BC%8C%E4%BB%8ErayOrigin%E8%BF%99%E4%B8%AA%E7%82%B9%E5%87%BA%E5%8F%91%EF%BC%8C%E6%B2%BF%E7%9D%80direction%EF%BC%88%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%EF%BC%89%E8%BF%9B%E8%A1%8C%E8%BF%BD%E8%B8%AA%EF%BC%8C%E4%B8%8E%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E7%89%A9%E4%BD%93%EF%BC%88%E5%A6%82%E6%B5%B7%E9%9D%A2%EF%BC%89%E8%BF%9B%E8%A1%8C%E4%BA%A4%E7%82%B9%E8%AE%A1%E7%AE%97%0D%0A%20%20%20%20%20%20%20%20//%202%E3%80%81%E5%BD%B1%E5%93%8D%E8%A7%82%E5%AF%9F%E8%A7%86%E8%A7%92%E5%92%8C%E5%9C%BA%E6%99%AF%E5%8A%A8%E6%80%81%EF%BC%9ArayOrigin%E7%9A%84z%E5%9D%90%E6%A0%87%E9%9A%8F%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%EF%BC%8C%E4%BD%BF%E5%BE%97%E5%85%89%E7%BA%BF%E7%9A%84%E8%B5%B7%E7%82%B9%E5%9C%A8z%E8%BD%B4%E6%96%B9%E5%90%91%E4%B8%8A%E9%9A%8F%E6%97%B6%E9%97%B4%E7%A7%BB%E5%8A%A8%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BA%A7%E7%94%9F%E5%8A%A8%E6%80%81%E7%9A%84%E8%A7%82%E5%AF%9F%E6%95%88%E6%9E%9C%EF%BC%8C%E5%A2%9E%E5%8A%A0%E4%BA%86%E5%9C%BA%E6%99%AF%E7%9A%84%E7%9C%9F%E5%AE%9E%E6%84%9F%E5%92%8C%E5%8A%A8%E6%80%81%E6%84%9F%E5%90%8C%E6%97%B6%EF%BC%8C%E5%85%B6y%E5%9D%90%E6%A0%87%E5%80%BC%E5%86%B3%E5%AE%9A%E4%BA%86%E8%A7%82%E5%AF%9F%E8%A7%86%E8%A7%92%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E5%BD%B1%E5%93%8D%E8%A7%82%E5%AF%9F%E8%80%85%E5%AF%B9%E5%9C%BA%E6%99%AF%E7%9A%84%E8%A7%86%E9%87%8E%E8%8C%83%E5%9B%B4%E5%92%8C%E7%BB%86%E8%8A%82%E6%84%9F%E7%9F%A5%0D%0A%20%20%20%20%20%20%20%20vec3%20rayOrigin%20=%20vec3(0.0,%203.5,%205.0);%20%0D%0A%20%20%20%20%20%20%20%20//%20%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%0D%0A%20%20%20%20%20%20%20%20//%20ray%E7%9A%84%E5%86%85%E5%AE%B9---end%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20tracing%E7%9A%84%E5%86%85%E5%AE%B9---start%0D%0A%20%20%20%20%20%20%20%20//%20%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%0D%0A%20%20%20%20%20%20%20%20//%20%E7%9B%B8%E4%BA%A4%E7%82%B9%0D%0A%20%20%20%20%20%20%20%20vec3%20intersectionPoint;%0D%0A%20%20%20%20%20%20%20%20//%20distanceFromStart2End%E8%A1%A8%E7%A4%BA%E4%BB%8E%E8%B5%B7%E7%82%B9%E5%88%B0%E7%9B%B8%E4%BA%A4%E7%82%B9%E7%9A%84%E8%B7%9D%E7%A6%BB%0D%0A%20%20%20%20%20%20%20%20float%20distanceFromStart2End%20=%20heightMapTracing(rayOrigin,%20direction,%20intersectionPoint);%0D%0A%20%20%20%20%20%20%20%20vec3%20distanceVector%20=%20intersectionPoint%20-%20rayOrigin;%20//%20%E8%AE%A1%E7%AE%97%E7%9B%B8%E4%BA%A4%E7%82%B9%E4%B8%8E%E8%B5%B7%E7%82%B9%E7%9A%84%E8%B7%9D%E7%A6%BB%0D%0A%20%20%20%20%20%20%20%20vec3%20n%20=%20getNormal(intersectionPoint,%20dot(distanceVector,%20distanceVector)%20*%20EPSILON_NRM);%0D%0A%20%20%20%20%20%20%20%20//%20%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%0D%0A%20%20%20%20%20%20%20%20//%20tracing%E7%9A%84%E5%86%85%E5%AE%B9---end%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20%20%20//%20light%0D%0A%20%20%20%20%20%20%20%20//%20light%E8%A1%A8%E7%A4%BA%E5%85%89%E6%BA%90%E7%9A%84%E6%96%B9%E5%90%91%0D%0A%20%20%20%20%20%20%20%20//%20normalize(vec3(0.0,%201.0,%200.8))%E5%BE%97%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F%EF%BC%8C%E5%A4%A7%E7%BA%A6%E4%B8%BAvec3(0.0,%200.7810,%200.6248)%0D%0A%20%20%20%20%20%20%20%20//%20%E8%BF%99%E4%B8%AA%E5%90%91%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%8E%9F%E5%A7%8B%E5%90%91%E9%87%8F%E7%9B%B8%E5%90%8C%EF%BC%8C%E4%BD%86%E9%95%BF%E5%BA%A6%E4%B8%BA1%EF%BC%8C%E5%B8%B8%E7%94%A8%E4%BA%8E%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%90%91%EF%BC%8C%E7%89%B9%E5%88%AB%E6%98%AF%E5%9C%A8%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97%E4%B8%AD%E4%BD%9C%E4%B8%BA%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%0D%0A%20%20%20%20%20%20%20%20//%20%E4%BD%9C%E7%94%A8%EF%BC%9A%0D%0A%20%20%20%20%20%20%20%20//%201%E3%80%81%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97%E7%9A%84%E4%BE%9D%E6%8D%AE%EF%BC%9A%E5%9C%A8%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B%E4%B8%AD%EF%BC%8Clight%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%B8%8E%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E4%BA%A4%E4%BA%92%E6%95%88%E6%9E%9C%EF%BC%8C%E5%A6%82%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%92%8C%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%AD%89%E5%AE%83%E6%8C%87%E5%AE%9A%E4%BA%86%E5%85%89%E6%BA%90%E7%9B%B8%E5%AF%B9%E4%BA%8E%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%89%A9%E4%BD%93%E7%9A%84%E6%96%B9%E5%90%91%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%BD%B1%E5%93%8D%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E6%98%8E%E6%9A%97%E3%80%81%E9%A2%9C%E8%89%B2%E5%92%8C%E9%AB%98%E5%85%89%E7%AD%89%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C%0D%0A%20%20%20%20%20%20%20%20//%202%E3%80%81%E5%BD%B1%E5%93%8D%E5%9C%BA%E6%99%AF%E7%9A%84%E5%85%89%E7%85%A7%E6%95%88%E6%9E%9C%EF%BC%9A%E9%80%9A%E8%BF%87%E4%B8%8E%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E6%B3%95%E7%BA%BF%E5%90%91%E9%87%8F%E7%AD%89%E8%BF%9B%E8%A1%8C%E7%82%B9%E4%B9%98%E7%AD%89%E8%BF%90%E7%AE%97%EF%BC%8C%E8%AE%A1%E7%AE%97%E5%87%BA%E4%B8%8D%E5%90%8C%E5%85%89%E7%85%A7%E6%88%90%E5%88%86%EF%BC%88%E5%A6%82%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E3%80%81%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%AD%89%EF%BC%89%E7%9A%84%E5%BC%BA%E5%BA%A6%EF%BC%8C%E8%BF%9B%E8%80%8C%E5%BD%B1%E5%93%8D%E6%9C%80%E7%BB%88%E6%B8%B2%E6%9F%93%E5%87%BA%E7%9A%84%E5%9B%BE%E5%83%8F%E7%9A%84%E5%85%89%E5%BD%B1%E6%95%88%E6%9E%9C%EF%BC%8C%E4%BD%BF%E5%9C%BA%E6%99%AF%E5%85%B7%E6%9C%89%E7%AB%8B%E4%BD%93%E6%84%9F%E5%92%8C%E7%9C%9F%E5%AE%9E%E6%84%9F%0D%0A%20%20%20%20%20%20%20%20vec3%20light%20=%20normalize(vec3(0.0,%201.0,%200.8));%20%0D%0A%0D%0A%20%20%20%20%20%20%20%20return%20mix(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20getSkyColor(direction),%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20getSeaColor(intersectionPoint,%20n,%20light,%20direction,%20distanceVector),%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pow(smoothstep(0.0,%20-0.02,%20direction.y),%200.2));%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20void%20main()%20%7B%0D%0A%20%20%20%20%20%20%20%20%20vec2%20fragCoord%20=%20gl_FragCoord.xy;%0D%0A%20%20%20%20%20%20%20%20vec2%20uv%20=%20(fragCoord.xy%20-%200.5%20*%20u_resolution.xy)%20/%20min(u_resolution.y,%20u_resolution.x);%0D%0A%20%20%20%20%20%20%20%20uv%20*=%203.0;%0D%0A%0D%0A%0D%0A%20%20%20%20%20%20%20%20float%20time%20=%20u_time%20*%200.3%20+%20u_mouse.x%20*%200.01;%0D%0A%20%20%20%20%20%20%20%20vec3%20color%20=%20getPixel(uv,%20time);%0D%0A%0D%0A%20%20%20%20%20%20%20%20gl_FragColor%20=%20vec4(pow(color,%20vec3(0.65)),%201.0);%0D%0A%20%20%20%20%20%20%7D%60)%0D%0A%20%20%7D)%0D%0A%7D%0D%0A%0D%0A%3C/script%3E%0D%0A",showCode:"%3Cpre%20class%3D%22shiki%20shiki-themes%20github-light%20github-dark%20vp-code%22%20tabindex%3D%220%22%20v-pre%3D%22%22%3E%3Ccode%3E%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%40%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Eclick%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EonTrigger%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20class%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22pointer%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%E7%82%B9%E5%87%BB%7B%7B%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E!%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EisRunning%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'%E8%BF%90%E8%A1%8C'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3A%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'%E5%85%B3%E9%97%AD'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7D%7D%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20v-if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EisRunning%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20id%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22sea1%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20class%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22stage%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ecanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Ediv%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Etemplate%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20lang%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%22ts%22%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20setup%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eimport%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%20ref%2C%20nextTick%20%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Efrom%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20'vue'%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20isRunning%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20ref%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3Efalse%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20onTrigger%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20async%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20if%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E!%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3EisRunning.value)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20isRunning.value%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20true%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20await%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20nextTick%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20%20%20%20onStart%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E()%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Eelse%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20isRunning.value%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20false%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3Econst%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3E%20onStart%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20()%20%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20import%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'glslCanvas'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E).%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Ethen%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23E36209%3B--shiki-dark%3A%23FFAB70%22%3Emodule%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3E%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20canvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20document.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3EgetElementById%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E'sea1'%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%20%20%20const%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20glslCanvas%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%3A%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20any%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20%3D%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23D73A49%3B--shiki-dark%3A%23F97583%22%3E%20new%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23005CC5%3B--shiki-dark%3A%2379B8FF%22%3E%20module%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Edefault%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(canvas)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%20%20glslCanvas.%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%236F42C1%3B--shiki-dark%3A%23B392F0%22%3Eload%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E(%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%60%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%23extension%20GL_OES_standard_derivatives%20%3A%20enable%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20precision%20highp%20float%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20uniform%20float%20u_time%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20uniform%20vec2%20u_resolution%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20uniform%20vec2%20u_mouse%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%23define%20EPSILON_NRM%20(0.1%20%2F%20u_resolution.x)%20%2F%2F%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AE%8F%E5%AE%9A%E4%B9%89%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%B8%B8%E9%87%8F%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20int%20NUM_STEPS%20%3D%2032%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20PI%20%3D%203.1415926%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20EPSILON%09%3D%201e-3%3B%20%2F%2F%20'epsilon'(%CE%B5)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20sea%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20int%20ITERATION_GEOMETRY%20%3D%203%3B%20%2F%2F%20%E8%BF%AD%E4%BB%A3%E5%87%A0%E4%BD%95%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20int%20ITERATION_FRAGMENT%20%3D%205%3B%20%2F%2F%20%E8%BF%AD%E4%BB%A3%E7%89%87%E6%AE%B5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20SEA_HEIGHT%20%3D%200.6%3B%20%2F%2F%20%E6%B5%B7%E5%B9%B3%E9%9D%A2%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20SEA_CHOPPY%20%3D%204.0%3B%20%2F%2F%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E5%8A%A8%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20SEA_SPEED%20%3D%200.8%3B%20%2F%2F%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E9%80%9F%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20float%20SEA_FREQ%20%3D%200.16%3B%20%2F%2F%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E9%A2%91%E7%8E%87%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20vec3%20SEA_BASE%20%3D%20vec3(0.0%2C%200.09%2C%200.18)%3B%20%2F%2F%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E5%9F%BA%E7%A1%80%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20vec3%20SEA_WATER_COLOR%20%3D%20vec3(0.8%2C%200.9%2C%200.6)%20*%200.6%3B%20%2F%2F%20%E6%B5%B7%E6%B0%B4%E7%9A%84%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%23define%20SEA_TIME%20(1.0%20%2B%20u_time%20*%20SEA_SPEED)%20%2F%2F%20%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%97%B6%E9%97%B4%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20const%20mat2%20octave_m%20%3D%20mat2(1.6%2C%201.2%2C%20-1.2%2C%201.6)%3B%20%2F%2F%20%E5%80%8D%E9%A2%91%E7%A8%8B%E7%9F%A9%E9%98%B5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%8C%85%E5%90%AB%E6%AC%A7%E6%8B%89%E8%A7%92%E7%9A%84%E5%90%91%E9%87%8F%20vec3%20ang%20%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%20mat3%20m%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E6%AC%A7%E6%8B%89%E8%A7%92%E6%98%AF%E4%B8%89%E4%B8%AA%E8%A7%92%E5%BA%A6%EF%BC%8C%E5%88%86%E5%88%AB%E8%A1%A8%E7%A4%BA%E7%BB%95x%E8%BD%B4%E3%80%81y%E8%BD%B4%E5%92%8Cz%E8%BD%B4%E7%9A%84%E6%97%8B%E8%BD%AC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E6%A0%B9%E6%8D%AE%E8%BF%99%E4%B8%89%E4%B8%AA%E8%A7%92%E5%BA%A6%E8%AE%A1%E7%AE%97%E5%87%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E8%AE%A1%E7%AE%97%E5%9F%BA%E4%BA%8E%E6%AC%A7%E6%8B%89%E8%A7%92%E7%9A%84%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E9%80%9A%E5%B8%B8%EF%BC%8C%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%BB%BB%E6%84%8F%E7%9A%84%EF%BC%8C%E4%BD%86%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%81%87%E8%AE%BE%E7%9A%84%E6%97%8B%E8%BD%AC%E9%A1%BA%E5%BA%8F%E6%98%AF%E5%85%88%E7%BB%95x%E8%BD%B4%E6%97%8B%E8%BD%AC%EF%BC%8C%E7%84%B6%E5%90%8E%E7%BB%95y%E8%BD%B4%E6%97%8B%E8%BD%AC%EF%BC%8C%E6%9C%80%E5%90%8E%E7%BB%95z%E8%BD%B4%E6%97%8B%E8%BD%AC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F%E6%98%AF%EF%BC%9A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20R%3DRzRyRx%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20--------------------%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20Rx%3D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%201%090%09%20%20%20%20%20%20%200%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09cos%E2%81%A1(%CE%B8x)%09%E2%88%92sin%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20--------------------%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20Ry%3D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8y)%09%20%200%09%20sin%E2%81%A1(%CE%B8y)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09%20%20%20%20%20%20%201%20%200%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E2%88%92sin%E2%81%A1(%CE%B8y)%090%09%20cos%E2%81%A1(%CE%B8y)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20--------------------%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20Rz%3D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8z)%09%E2%88%92sin%E2%81%A1(%CE%B8z)%090%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20sin%E2%81%A1(%CE%B8z)%09cos%E2%81%A1(%CE%B8z)%090%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09%20%20%20%20%200%09%20%20%20%20%20%201%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20--------------------%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20RyRx%3D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8y)%09%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20--------------------%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20Rz(RyRx)%3D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8z)%09%E2%88%92sin%E2%81%A1(%CE%B8z)%090%20%20%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)%09%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20sin%E2%81%A1(%CE%B8z)%09cos%E2%81%A1(%CE%B8z)%090%20%20%20%20%20*%20%20%20%200%09%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8x)%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%200%09%20%20%20%20%200%09%20%20%20%20%20%201%20%20%20%20%20%20%20%20%20%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%BE%97%E5%88%B0%E6%9C%80%E7%BB%88%E7%9A%84finalMatrix%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%E2%88%92cos%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%2Bsin%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%2Bcos%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%09%20%20%20sin%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)sin%E2%81%A1(%CE%B8z)%E2%88%92sin%E2%81%A1(%CE%B8x)cos%E2%81%A1(%CE%B8z)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E2%88%92sin%E2%81%A1(%CE%B8y)%09%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)sin%E2%81%A1(%CE%B8x)%09%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cos%E2%81%A1(%CE%B8y)cos%E2%81%A1(%CE%B8x)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20mat3%20getRotationMatrixByEulerAngle(vec3%20ang)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20a1%20%3D%20vec2(sin(ang.x)%2C%20cos(ang.x))%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BB%95x%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.x%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E4%B8%8A%E4%B8%8B%E7%82%B9%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20a2%20%3D%20vec2(sin(ang.y)%2C%20cos(ang.y))%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BB%95y%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.y%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E5%B7%A6%E5%8F%B3%E6%91%87%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20a3%20%3D%20vec2(sin(ang.z)%2C%20cos(ang.z))%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BB%95z%E8%BD%B4%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A7%92%E5%BA%A6%20ang.z%20%E7%9A%84%E6%AD%A3%E5%BC%A6%E5%92%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E7%B1%BB%E4%BC%BC%E4%BA%BA%E5%A4%B4%E5%B7%A6%E5%8F%B3%E6%91%86%E5%A4%B4%E7%9A%84%E5%8A%A8%E4%BD%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20mat3%20finalMatrix%3B%20%2F%2F%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA3x3%E7%9A%84%E7%9F%A9%E9%98%B5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20finalMatrix%5B0%5D%20%3D%20vec3(a1.y%20*%20a3.y%20%2B%20a1.x%20*%20a2.x%20*%20a3.x%2C%20a1.y%20*%20a2.x%20*%20a3.x%20%2B%20a3.y%20*%20a1.x%2C%20-a2.y%20*%20a3.x)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%B8%80%E8%A1%8C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20finalMatrix%5B1%5D%20%3D%20vec3(-a2.y%20*%20a1.x%2C%20a1.y%20*%20a2.y%2C%20a2.x)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%BA%8C%E8%A1%8C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20finalMatrix%5B2%5D%20%3D%20vec3(a3.y%20*%20a1.x%20*%20a2.x%20%2B%20a1.y%20*%20a3.x%2C%20a1.x%20*%20a3.x%20%20-a1.y%20*%20a3.y%20*%20a2.x%2C%20a2.y%20*%20a3.y)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%9A%84%E7%AC%AC%E4%B8%89%E8%A1%8C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20finalMatrix%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20sky%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E6%A0%B9%E6%8D%AE%E7%BB%99%E5%AE%9A%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fe%E8%AE%A1%E7%AE%97%E5%A4%A9%E7%A9%BA%E7%9A%84%E9%A2%9C%E8%89%B2%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%A8%A1%E6%8B%9F%E4%BA%86%E5%A4%A9%E7%A9%BA%E7%9A%84%E6%B8%90%E5%8F%98%E6%95%88%E6%9E%9C%EF%BC%8C%E4%BB%8E%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%88%B0%E5%A4%A9%E9%A1%B6%E7%9A%84%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20vec3%20getSkyColor(vec3%20e)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20max(e.y%2C%200.0)%EF%BC%9A%E7%A1%AE%E4%BF%9De.y%E7%9A%84%E5%80%BC%E4%B8%8D%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%A4%A9%E7%A9%BA%E7%9A%84%E9%A2%9C%E8%89%B2%E9%80%9A%E5%B8%B8%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E4%BB%A5%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20max(e.y%2C%200.0)%20*%200.8%EF%BC%9A%E5%B0%86e.y%E7%9A%84%E5%80%BC%E4%B9%98%E4%BB%A50.8%EF%BC%8C%E4%BD%BF%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%E6%9B%B4%E5%8A%A0%E5%B9%B3%E7%BC%93%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20max(e.y%2C%200.0)%20*%200.8%20%2B%200.2%EF%BC%9A%E5%9C%A8%E4%B9%98%E4%BB%A50.8%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%8A%A0%E4%B8%8A0.2%EF%BC%8C%E7%A1%AE%E4%BF%9D%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E7%9A%84%E9%A2%9C%E8%89%B2%E4%B8%8D%E4%BC%9A%E5%A4%AA%E6%9A%97%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20(max(e.y%2C%200.0)%20*%200.8%20%2B%200.2)%20*%200.8%EF%BC%9A%E5%86%8D%E6%AC%A1%E4%B9%98%E4%BB%A50.8%EF%BC%8C%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%B0%83%E6%95%B4%E9%A2%9C%E8%89%B2%E7%9A%84%E4%BA%AE%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20e.y%20%3D%20(max(e.y%2C%200.0)%20*%200.8%20%2B%200.2)%20*%200.8%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20pow(1.0%20-%20e.y%2C%202.0)%EF%BC%9A%E8%AE%A1%E7%AE%971.0%20-%20e.y%E7%9A%84%E5%B9%B3%E6%96%B9%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E5%A4%A9%E7%A9%BA%E9%A2%9C%E8%89%B2%E7%9A%84%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96%E8%BF%99%E4%B8%AA%E5%80%BC%E5%B0%86%E7%94%A8%E4%BA%8E%E7%BA%A2%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E7%BA%A2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%201.0%20-%20e.y%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A81.0%20-%20e.y%E4%BD%9C%E4%B8%BA%E7%BB%BF%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E7%BB%BF%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%200.6%20%2B%20(1.0%20-%20e.y)%20*%200.4%EF%BC%9A%E8%AE%A1%E7%AE%97%E8%93%9D%E8%89%B2%E5%88%86%E9%87%8F%EF%BC%8C%E4%BD%BF%E5%A4%A9%E7%A9%BA%E5%9C%A8%E5%9C%B0%E5%B9%B3%E7%BA%BF%E5%A4%84%E6%9B%B4%E8%93%9D0.6%E6%98%AF%E5%9F%BA%E7%A1%80%E8%93%9D%E8%89%B2%EF%BC%8C(1.0%20-%20e.y)%20*%200.4%E6%A0%B9%E6%8D%AEe.y%E7%9A%84%E5%80%BC%E5%A2%9E%E5%8A%A0%E8%93%9D%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20vec3(pow(1.0%20-%20e.y%2C%202.0)%2C%201.0%20-%20e.y%2C%200.6%20%2B%20(1.0%20-%20e.y)%20*%200.4)%EF%BC%9A%E5%B0%86%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84%E7%BA%A2%E3%80%81%E7%BB%BF%E3%80%81%E8%93%9D%E5%88%86%E9%87%8F%E7%BB%84%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AA%E9%A2%9C%E8%89%B2%E5%90%91%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20vec3(pow(1.0%20-%20e.y%2C%202.0)%2C%201.0%20-%20e.y%2C%200.6%20%2B%20(1.0%20-%20e.y)%20*%200.4)%20*%201.1%EF%BC%9A%E5%B0%86%E9%A2%9C%E8%89%B2%E5%90%91%E9%87%8F%E4%B9%98%E4%BB%A51.1%EF%BC%8C%E5%A2%9E%E5%8A%A0%E9%A2%9C%E8%89%B2%E7%9A%84%E4%BA%AE%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20vec3(pow(1.0%20-%20e.y%2C%202.0)%2C%201.0%20-%20e.y%2C%200.6%20%2B%20(1.0%20-%20e.y)%20*%200.4)%20*%201.1%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20hash(vec2%20p)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20h%20%3D%20dot(p%2Cvec2(127.1%2C%20311.7))%3B%09%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20fract(sin(h)%20*%2043758.5453123)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20noise(in%20vec2%20p)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20i%20%3D%20floor(p)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20f%20%3D%20fract(p)%3B%09%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20u%20%3D%20f%20*%20f%20*%20(3.0%20-%202.0%20*%20f)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20-1.0%20%2B%202.0%20*%20mix(mix(hash(i%20%2B%20vec2(0.0%2C%200.0))%2C%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash(i%20%2B%20vec2(1.0%2C%200.0))%2C%20u.x)%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mix(hash(i%20%2B%20vec2(0.0%2C%201.0))%2C%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hash(i%20%2B%20vec2(1.0%2C%201.0))%2C%20u.x)%2C%20u.y)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E6%8E%A5%E5%8F%97%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E5%92%8C%E4%B8%80%E4%B8%AA%E7%B2%97%E7%B3%99%E5%BA%A6%E5%8F%82%E6%95%B0%20p%EF%BC%88%E6%9C%89%E6%97%B6%E4%B9%9F%E7%A7%B0%E4%B8%BA%E2%80%9C%E6%BC%AB%E5%8F%8D%E5%B0%84%E6%8C%87%E6%95%B0%E2%80%9D%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E4%BB%A3%E8%A1%A8%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20diffuse(vec3%20n%2C%20vec3%20l%2C%20float%20p)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E9%A6%96%E5%85%88%EF%BC%8C%E4%BD%BF%E7%94%A8%20dot%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%20n%20%E5%92%8C%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E8%A1%A8%E7%A4%BA%E4%BA%86%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E6%B3%95%E7%BA%BF%E4%B9%8B%E9%97%B4%E7%9A%84%E5%AF%B9%E9%BD%90%E7%A8%8B%E5%BA%A6%EF%BC%9A%E5%BD%93%E5%85%89%E7%BA%BF%E5%9E%82%E7%9B%B4%E4%BA%8E%E8%A1%A8%E9%9D%A2%E6%97%B6%EF%BC%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%201%EF%BC%9B%E5%BD%93%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%B9%B3%E8%A1%8C%E6%97%B6%EF%BC%8C%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%200%EF%BC%88%E6%88%96%E8%B4%9F%E5%80%BC%EF%BC%8C%E4%BD%86%E5%9C%A8%E6%AD%A4%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%AD%E6%88%91%E4%BB%AC%E5%8F%AA%E5%85%B3%E5%BF%83%E5%85%B6%E7%BB%9D%E5%AF%B9%E5%80%BC%EF%BC%8C%E5%9B%A0%E4%B8%BA%E8%B4%9F%E5%80%BC%E8%A1%A8%E7%A4%BA%E5%85%89%E7%BA%BF%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%90%8E%E9%9D%A2%E7%85%A7%E5%B0%84%E8%BF%87%E6%9D%A5%E7%9A%84%EF%BC%8C%E8%BF%99%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%8A%E6%98%AF%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B9%98%E4%BB%A5%200.4%20%E5%B9%B6%E5%8A%A0%E4%B8%8A%200.6%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E4%B8%BA%E4%BA%86%E8%B0%83%E6%95%B4%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%EF%BC%88%E5%8F%AF%E8%A6%81%E5%8F%AF%E4%B8%8D%E8%A6%81%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E4%B9%98%E4%BB%A5%200.4%20%E4%BC%9A%E9%99%8D%E4%BD%8E%E4%BD%99%E5%BC%A6%E5%80%BC%E5%AF%B9%E6%9C%80%E7%BB%88%E5%BC%BA%E5%BA%A6%E7%9A%84%E5%BD%B1%E5%93%8D%EF%BC%8C%E8%80%8C%E5%8A%A0%E4%B8%8A%200.6%20%E5%88%99%E7%A1%AE%E4%BF%9D%E5%8D%B3%E4%BD%BF%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%BA%200%EF%BC%88%E5%8D%B3%E5%85%89%E7%BA%BF%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%87%A0%E4%B9%8E%E5%B9%B3%E8%A1%8C%EF%BC%89%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E4%B9%9F%E4%BC%9A%E6%9C%89%E4%B8%80%E5%AE%9A%E7%9A%84%E5%9F%BA%E7%A1%80%E5%BC%BA%E5%BA%A6%EF%BC%8C%E8%BF%99%E7%A7%8D%E8%B0%83%E6%95%B4%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9F%BA%E4%BA%8E%E7%89%B9%E5%AE%9A%E7%9A%84%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B%E6%88%96%E8%89%BA%E6%9C%AF%E6%95%88%E6%9E%9C%E9%9C%80%E6%B1%82%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20pow%20%E5%87%BD%E6%95%B0%E5%B0%86%E8%BF%99%E4%B8%AA%E8%B0%83%E6%95%B4%E5%90%8E%E7%9A%84%E5%80%BC%E6%8F%90%E5%8D%87%E5%88%B0%20p%20%E6%AC%A1%E6%96%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E8%A1%A8%E9%9D%A2%E7%9A%84%E7%B2%97%E7%B3%99%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%BD%93%20p%20%E5%80%BC%E8%BE%83%E5%A4%A7%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%E4%BC%9A%E6%9B%B4%E5%8A%A0%E9%9B%86%E4%B8%AD%E5%9C%A8%E6%B3%95%E7%BA%BF%E9%99%84%E8%BF%91%EF%BC%88%E5%8D%B3%E5%85%89%E7%BA%BF%E6%9B%B4%E5%9E%82%E7%9B%B4%E4%BA%8E%E8%A1%A8%E9%9D%A2%E6%97%B6%E5%BC%BA%E5%BA%A6%E6%9B%B4%E9%AB%98%EF%BC%89%EF%BC%8C%E6%A8%A1%E6%8B%9F%E5%87%BA%E6%9B%B4%E5%85%89%E6%BB%91%E7%9A%84%E8%A1%A8%E9%9D%A2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%80%8C%E5%BD%93%20p%20%E5%80%BC%E8%BE%83%E5%B0%8F%E6%97%B6%EF%BC%8C%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%88%86%E5%B8%83%E4%BC%9A%E6%9B%B4%E5%8A%A0%E5%9D%87%E5%8C%80%EF%BC%8C%E6%A8%A1%E6%8B%9F%E5%87%BA%E6%9B%B4%E7%B2%97%E7%B3%99%E7%9A%84%E8%A1%A8%E9%9D%A2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20pow(dot(n%2C%20l)%20*%200.4%20%2B%200.6%2C%20p)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%AE%83%E6%8E%A5%E5%8F%97%E5%9B%9B%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%E3%80%81%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20e%20%E5%92%8C%E4%B8%80%E4%B8%AA%E5%85%89%E6%B3%BD%E5%BA%A6%E5%8F%82%E6%95%B0%20s%EF%BC%88%E9%80%9A%E5%B8%B8%E7%A7%B0%E4%B8%BA%E2%80%9C%E9%95%9C%E9%9D%A2%E9%AB%98%E5%85%89%E6%8C%87%E6%95%B0%E2%80%9D%E6%88%96%E2%80%9C%E7%B2%97%E7%B3%99%E5%BA%A6%E2%80%9D%E7%9A%84%E5%80%92%E6%95%B0%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E4%BB%A3%E8%A1%A8%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20specular(vec3%20n%2C%20vec3%20l%2C%20vec3%20e%2C%20float%20s)%20%7B%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20nrm%20%3D%20(s%20%2B%208.0)%20%2F%20(PI%20*%208.0)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E9%A6%96%E5%85%88%EF%BC%8Creflect(e%2C%20n)%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%9A%84%E6%96%B9%E5%90%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20dot%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E8%BF%99%E4%B8%AA%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20max%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E4%B8%8D%E4%BC%9A%E5%B0%8F%E4%BA%8E%200.0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%BD%99%E5%BC%A6%E5%80%BC%E5%9C%A8%E5%85%89%E7%BA%BF%E5%92%8C%E8%A1%A8%E9%9D%A2%E6%B3%95%E7%BA%BF%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E5%A4%A7%E4%BA%8E%2090%20%E5%BA%A6%E6%97%B6%E4%B8%BA%E8%B4%9F%EF%BC%8C%E8%80%8C%E8%B4%9F%E5%80%BC%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%8A%E6%98%AF%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%EF%BC%88%E5%9B%A0%E4%B8%BA%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%85%89%E7%BA%BF%E5%AE%9E%E9%99%85%E4%B8%8A%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%85%A7%E5%B0%84%E5%88%B0%E8%A1%A8%E9%9D%A2%E4%B8%8A%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E4%BD%BF%E7%94%A8%20pow%20%E5%87%BD%E6%95%B0%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BD%99%E5%BC%A6%E5%80%BC%E7%9A%84%20s%20%E6%AC%A1%E6%96%B9%E8%AE%A1%E7%AE%97%E5%87%BA%E6%9D%A5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%A2%9E%E5%BC%BA%E4%BA%86%E9%AB%98%E5%85%89%E6%95%88%E6%9E%9C%EF%BC%9A%E5%BD%93%20s%20%E5%80%BC%E8%BE%83%E5%A4%A7%E6%97%B6%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E5%87%A0%E4%B9%8E%E5%AE%8C%E5%85%A8%E5%AF%B9%E9%BD%90%E6%97%B6%EF%BC%8C%E7%BB%93%E6%9E%9C%E6%89%8D%E4%BC%9A%E6%98%BE%E8%91%97%EF%BC%88%E4%BA%A7%E7%94%9F%E5%B0%96%E9%94%90%E7%9A%84%E9%AB%98%E5%85%89%EF%BC%89%EF%BC%9B%E8%80%8C%E5%BD%93%20s%20%E5%80%BC%E8%BE%83%E5%B0%8F%E6%97%B6%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%8F%8D%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E4%B8%8D%E5%AE%8C%E5%85%A8%E5%AF%B9%E9%BD%90%EF%BC%8C%E7%BB%93%E6%9E%9C%E4%B9%9F%E4%BC%9A%E7%9B%B8%E5%AF%B9%E8%BE%83%E5%A4%A7%EF%BC%88%E4%BA%A7%E7%94%9F%E6%9F%94%E5%92%8C%E7%9A%84%E9%AB%98%E5%85%89%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20pow(max(dot(reflect(e%2C%20n)%2C%20l)%2C%200.0)%2C%20s)%20*%20nrm%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20choppy%E9%9C%80%E8%A6%81%E6%AF%8F%E6%AC%A1%E8%BF%AD%E4%BB%A3%E9%83%BD%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%8C%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20seaOctave(vec2%20uv%2C%20float%20choppy)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20uv%20%2B%3D%20noise(uv)%3B%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20wave1%20%3D%201.0%20-%20abs(sin(uv))%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20wave2%20%3D%20abs(cos(uv))%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E7%9A%84%E6%B3%A2%E6%B5%AA%E8%B5%B7%E4%BC%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20wave1%20%3D%20mix(wave1%2C%20wave2%2C%20wave1)%3B%20%2F%2F%20%E6%B7%B7%E5%90%88%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20pow(1.0%20-%20pow(wave1.x%20*%20wave1.y%2C%200.65)%2C%20choppy)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E8%AF%A5%E5%87%BD%E6%95%B0%E5%9F%BA%E4%BA%8E%E7%BB%99%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE%E8%BF%94%E5%9B%9E%E6%B5%B7%E6%B4%8B%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20computedSeaPlaneHeight(vec3%20point%2C%20int%20iteration)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20freq%20%3D%20SEA_FREQ%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20amplitude%20%3D%20SEA_HEIGHT%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20choppy%20%3D%20SEA_CHOPPY%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20tempUv%20%3D%20point.xz%3B%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20tempUv.x%20*%3D%200.75%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20d%20%3D%200.0%3B%20%2F%2F%20%E6%AF%8F%E4%B8%AA%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20h%20%3D%200.0%3B%20%2F%2F%20%E6%B5%B7%E6%B4%8B%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%B1%E4%BA%8E%20WebGL%201.0%20%E7%9A%84%E9%99%90%E5%88%B6%EF%BC%8C%E6%9C%80%E7%AE%80%E5%8D%95%E4%B8%94%E9%80%9A%E5%B8%B8%E6%9C%80%E5%8F%AF%E8%A1%8C%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%98%AF%E4%BD%BF%E7%94%A8%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%BF%AD%E4%BB%A3%E6%AC%A1%E6%95%B0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20WebGL%202.0%E5%88%99%E4%B8%8D%E7%94%A8%E8%BF%99%E6%A0%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8A%A8%E6%80%81%E4%BC%A0%E5%85%A5%E7%9A%84iteration%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20if(iteration%20%3D%3D%20ITERATION_GEOMETRY)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20for(int%20j%20%3D%200%3B%20j%20%26%23x3C%3B%20ITERATION_GEOMETRY%3B%20j%20%2B%3D%201)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20d%20%3D%20seaOctave((tempUv%20%2B%20SEA_TIME)%20*%20freq%2C%20choppy)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20d%20%2B%3D%20seaOctave((tempUv%20-%20SEA_TIME)%20*%20freq%2C%20choppy)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20h%20%2B%3D%20d%20*%20amplitude%3B%20%2F%2F%20%E5%B0%86%E5%BD%93%E5%89%8D%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%20d%20%E4%B9%98%E4%BB%A5%E6%8C%AF%E5%B9%85%20amp%EF%BC%8C%E7%84%B6%E5%90%8E%E7%B4%AF%E5%8A%A0%E5%88%B0%E6%80%BB%E9%AB%98%E5%BA%A6%20h%20%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20tempUv%20*%3D%20octave_m%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20freq%20*%3D%201.9%3B%20%20%2F%2F%20%E9%A2%91%E7%8E%87%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20amplitude%20*%3D%200.22%3B%20%2F%2F%20%E6%8C%AF%E5%B9%85%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20choppy%20%3D%20mix(choppy%2C%201.0%2C%200.2)%3B%20%2F%2F%20%E6%B7%B7%E5%90%88%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%B1%E4%BA%8E%20WebGL%201.0%20%E7%9A%84%E9%99%90%E5%88%B6%EF%BC%8C%E6%9C%80%E7%AE%80%E5%8D%95%E4%B8%94%E9%80%9A%E5%B8%B8%E6%9C%80%E5%8F%AF%E8%A1%8C%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%98%AF%E4%BD%BF%E7%94%A8%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%BF%AD%E4%BB%A3%E6%AC%A1%E6%95%B0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20WebGL%202.0%E5%88%99%E4%B8%8D%E7%94%A8%E8%BF%99%E6%A0%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8A%A8%E6%80%81%E4%BC%A0%E5%85%A5%E7%9A%84iteration%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20if(iteration%20%3D%3D%20ITERATION_FRAGMENT)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20for(int%20j%20%3D%200%3B%20j%20%26%23x3C%3B%20ITERATION_FRAGMENT%3B%20j%20%2B%3D%201)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20d%20%3D%20seaOctave((tempUv%20%2B%20SEA_TIME)%20*%20freq%2C%20choppy)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20d%20%2B%3D%20seaOctave((tempUv%20-%20SEA_TIME)%20*%20freq%2C%20choppy)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20h%20%2B%3D%20d%20*%20amplitude%3B%20%2F%2F%20%E5%B0%86%E5%BD%93%E5%89%8D%E6%B5%B7%E6%B5%AA%E5%88%86%E9%87%8F%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%20d%20%E4%B9%98%E4%BB%A5%E6%8C%AF%E5%B9%85%20amp%EF%BC%8C%E7%84%B6%E5%90%8E%E7%B4%AF%E5%8A%A0%E5%88%B0%E6%80%BB%E9%AB%98%E5%BA%A6%20h%20%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20tempUv%20*%3D%20octave_m%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20freq%20*%3D%201.9%3B%20%20%2F%2F%20%E9%A2%91%E7%8E%87%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20amplitude%20*%3D%200.22%3B%20%2F%2F%20%E6%8C%AF%E5%B9%85%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20choppy%20%3D%20mix(choppy%2C%201.0%2C%200.2)%3B%20%2F%2F%20%E6%B7%B7%E5%90%88%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E8%BE%93%E5%85%A5%E4%BD%8D%E7%BD%AE%20point%20%E7%9A%84%20y%20%E5%88%86%E9%87%8F%E5%87%8F%E5%8E%BB%E8%AE%A1%E7%AE%97%E5%87%BA%E7%9A%84%E6%B5%B7%E6%B5%AA%E9%AB%98%E5%BA%A6%20h%E8%BF%99%E7%BB%99%E5%87%BA%E4%BA%86%E8%AF%A5%E7%82%B9%E7%9B%B8%E5%AF%B9%E4%BA%8E%E6%B5%B7%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20point.y%20-%20h%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E7%9B%AE%E7%9A%84%E6%98%AF%E8%AE%A1%E7%AE%97%E7%BB%99%E5%AE%9A%E7%A9%BA%E9%97%B4%E4%BD%8D%E7%BD%AE%20p%20%E5%A4%84%E7%9A%84%E6%B3%95%E5%90%91%E9%87%8F%20n%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E9%87%87%E7%94%A8%E4%BA%86%E6%95%B0%E5%80%BC%E5%BE%AE%E5%88%86%E7%9A%84%E6%96%B9%E6%B3%95%E6%9D%A5%E4%BC%B0%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%EF%BC%8C%E8%BF%99%E9%80%9A%E5%B8%B8%E7%94%A8%E4%BA%8E%E5%9F%BA%E4%BA%8E%E4%BD%93%E7%B4%A0%EF%BC%88voxel%EF%BC%89%E3%80%81%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88heightMap%EF%BC%89%E6%88%96%E5%85%B6%E4%BB%96%E5%BD%A2%E5%BC%8F%E7%9A%84%E4%B8%89%E7%BB%B4%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%AD%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20eps%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%9A%84%E6%B5%AE%E7%82%B9%E6%95%B0%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E7%9B%B8%E9%82%BB%E4%BD%8D%E7%BD%AE%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BC%B0%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20vec3%20getNormal(vec3%20p%2C%20float%20eps)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20n%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20n.y%20%3D%20computedSeaPlaneHeight(p%2C%20ITERATION_FRAGMENT)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%A4%84%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E5%AD%98%E5%82%A8%E5%9C%A8%20n.y%20%E4%B8%AD%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20n.x%20%3D%20computedSeaPlaneHeight(vec3(p.x%20%2B%20eps%2C%20p.y%2C%20p.z)%2C%20ITERATION_FRAGMENT)%20-%20n.y%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%9C%A8%20x%20%E6%96%B9%E5%90%91%E5%81%8F%E7%A7%BB%20eps%20%E5%90%8E%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E4%B8%8E%20n.y%EF%BC%88%E5%8D%B3%E5%8E%9F%E5%A7%8B%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%89%E7%9B%B8%E5%87%8F%EF%BC%8C%E4%BB%A5%E4%BC%B0%E7%AE%97%20x%20%E6%96%B9%E5%90%91%E7%9A%84%E6%96%9C%E7%8E%87%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20n.z%20%3D%20computedSeaPlaneHeight(vec3(p.x%2C%20p.y%2C%20p.z%20%2B%20eps)%2C%20ITERATION_FRAGMENT)%20-%20n.y%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE%20p%20%E5%9C%A8%20z%20%E6%96%B9%E5%90%91%E5%81%8F%E7%A7%BB%20eps%20%E5%90%8E%E7%9A%84%E5%9C%B0%E5%BD%A2%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%B6%E4%B8%8E%20n.y%EF%BC%88%E5%8D%B3%E5%8E%9F%E5%A7%8B%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E6%88%96%E5%AF%86%E5%BA%A6%EF%BC%89%E7%9B%B8%E5%87%8F%EF%BC%8C%E4%BB%A5%E4%BC%B0%E7%AE%97%20z%20%E6%96%B9%E5%90%91%E7%9A%84%E6%96%9C%E7%8E%87%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20eps%E6%98%AFdot(distanceVector%2C%20distanceVector)%20*%20EPSILON_NRM%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20n.y%20%3D%20eps%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20normalize(n)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%87%BD%E6%95%B0%E6%97%A8%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%B5%B7%E6%B4%8B%E8%A1%A8%E9%9D%A2%E6%9F%90%E4%B8%80%E7%82%B9%20p%20%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%8C%E8%80%83%E8%99%91%E5%88%B0%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%E3%80%81%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20eye%20%E5%92%8C%E5%88%B0%E8%A7%82%E5%AF%9F%E8%80%85%E7%9A%84%E8%B7%9D%E7%A6%BB%20dist%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20vec3%20getSeaColor(vec3%20p%2C%20vec3%20n%2C%20vec3%20l%2C%20vec3%20eye%2C%20vec3%20dist)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E8%8F%B2%E6%B6%85%E8%80%B3%E6%95%88%E5%BA%94%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E4%BB%8E%E4%B8%80%E7%A7%8D%E4%BB%8B%E8%B4%A8%E8%BF%9B%E5%85%A5%E5%8F%A6%E4%B8%80%E7%A7%8D%E4%BB%8B%E8%B4%A8%E6%97%B6%E5%8F%8D%E5%B0%84%E5%92%8C%E6%8A%98%E5%B0%84%E7%9A%84%E6%AF%94%E4%BE%8B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%82%B9%E7%A7%AF%E6%9D%A5%E8%AE%A1%E7%AE%97%E6%B3%95%E5%90%91%E9%87%8F%20n%20%E5%92%8C%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%20-eye%20(%E5%9B%A0%E4%B8%BA%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%E9%80%9A%E5%B8%B8%E6%8C%87%E5%90%91%E8%A7%82%E5%AF%9F%E8%80%85%EF%BC%8C%E8%80%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E7%9A%84%E6%98%AF%E6%8C%87%E5%90%91%E5%85%89%E6%BA%90%E6%88%96%E8%A1%A8%E9%9D%A2%E7%9A%84%E7%9B%B8%E5%8F%8D%E6%96%B9%E5%90%91)%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92%E7%9A%84%E4%BD%99%E5%BC%A6%E5%80%BC%EF%BC%8C%E7%84%B6%E5%90%8E%E7%94%A8%201.0%20%E5%87%8F%E5%8E%BB%E8%BF%99%E4%B8%AA%E5%80%BC%E5%BE%97%E5%88%B0%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20clamp%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E8%BF%99%E4%B8%AA%E5%80%BC%E5%9C%A8%200.0%20%E5%88%B0%201.0%20%E4%B9%8B%E9%97%B4%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20fresnel%20%3D%20clamp(1.0%20-%20dot(n%2C%20-eye)%2C%200.0%2C%201.0)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%AF%B9%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E8%BF%9B%E8%A1%8C%E4%B8%89%E6%AC%A1%E6%96%B9%E8%BF%90%E7%AE%97%EF%BC%8C%E4%BB%A5%E5%A2%9E%E5%BC%BA%E8%8F%B2%E6%B6%85%E8%80%B3%E6%95%88%E5%BA%94%E5%9C%A8%E9%AB%98%E8%A7%92%E5%BA%A6%E6%97%B6%E7%9A%84%E6%95%88%E6%9E%9C%EF%BC%88%E5%8D%B3%E5%BD%93%E8%A7%82%E5%AF%9F%E6%96%B9%E5%90%91%E5%87%A0%E4%B9%8E%E4%B8%8E%E8%A1%A8%E9%9D%A2%E5%B9%B3%E8%A1%8C%E6%97%B6%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%20min%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%BC%9A%E8%B6%85%E8%BF%87%200.5%EF%BC%8C%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%BA%E4%BA%86%E9%99%90%E5%88%B6%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20fresnel%20%3D%20min(fresnel%20*%20fresnel%20*%20fresnel%2C%200.5)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E5%8F%8D%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2reflect%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%BB%8E%E8%A1%A8%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%9A%84%E6%96%B9%E5%90%91%EF%BC%8C%E7%84%B6%E5%90%8E%20getSkyColor%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E8%AF%A5%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E5%A4%A9%E7%A9%BA%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20reflected%20%3D%20getSkyColor(reflect(eye%2C%20n))%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E6%8A%98%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E9%87%8C%20SEA_BASE%20%E8%A1%A8%E7%A4%BA%E6%B5%B7%E6%B0%B4%E7%9A%84%E5%9F%BA%E7%A1%80%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20diffuse%20%E5%87%BD%E6%95%B0%E6%A0%B9%E6%8D%AE%E6%B3%95%E5%90%91%E9%87%8F%20n%E3%80%81%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%20l%20%E5%92%8C%E4%B8%80%E4%B8%AA%E7%B2%97%E7%B3%99%E5%BA%A6%E5%8F%82%E6%95%B0%EF%BC%88%E8%BF%99%E9%87%8C%E6%98%AF%2080.0%EF%BC%89%E8%BF%94%E5%9B%9E%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E5%BC%BA%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%BC%BA%E5%BA%A6%E4%B9%98%E4%BB%A5%20SEA_WATER_COLOR%EF%BC%88%E6%B5%B7%E6%B0%B4%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%89%E5%92%8C%E4%B8%80%E4%B8%AA%E7%BC%A9%E6%94%BE%E5%9B%A0%E5%AD%90%EF%BC%880.12%EF%BC%89%E6%9D%A5%E5%BE%97%E5%88%B0%E6%8A%98%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%E9%83%A8%E5%88%86%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%EF%BC%8C%E5%B0%86%E8%BF%99%E4%B8%AA%E9%83%A8%E5%88%86%E5%8A%A0%E5%88%B0%20SEA_BASE%20%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20refracted%20%3D%20SEA_BASE%20%2B%20diffuse(n%2C%20l%2C%2080.0)%20*%20SEA_WATER_COLOR%20*%200.12%3B%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E4%BD%BF%E7%94%A8%20mix%20%E5%87%BD%E6%95%B0%E6%A0%B9%E6%8D%AE%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E5%B0%86%E6%8A%98%E5%B0%84%E5%85%89%E5%92%8C%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%E6%B7%B7%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7%E8%8F%B2%E6%B6%85%E8%80%B3%E5%9B%A0%E5%AD%90%E8%B6%8A%E9%AB%98%EF%BC%8C%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E6%88%90%E5%88%86%E5%B0%B1%E8%B6%8A%E5%A4%9A%EF%BC%9B%E5%8F%8D%E4%B9%8B%EF%BC%8C%E6%8A%98%E5%B0%84%E5%85%89%E7%9A%84%E6%88%90%E5%88%86%E5%B0%B1%E8%B6%8A%E5%A4%9A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20color%20%3D%20mix(refracted%2C%20reflected%2C%20fresnel)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%20dist%20%E5%90%91%E9%87%8F%E4%B8%8E%E5%85%B6%E8%87%AA%E8%BA%AB%E7%9A%84%E7%82%B9%E7%A7%AF%EF%BC%88%E5%8D%B3%20dist%20%E7%9A%84%E9%95%BF%E5%BA%A6%E7%9A%84%E5%B9%B3%E6%96%B9%EF%BC%89%E4%B9%98%E4%BB%A5%E4%B8%80%E4%B8%AA%E8%A1%B0%E5%87%8F%E7%B3%BB%E6%95%B0%EF%BC%880.001%EF%BC%89%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%E4%BB%8E%201.0%20%E4%B8%AD%E5%87%8F%E5%8E%BB%E8%BF%99%E4%B8%AA%E7%BB%93%E6%9E%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20max%20%E5%87%BD%E6%95%B0%E7%A1%AE%E4%BF%9D%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%BC%9A%E5%B0%8F%E4%BA%8E%200.0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%9A%8F%E7%9D%80%E8%B7%9D%E7%A6%BB%E5%A2%9E%E5%8A%A0%E6%B5%B7%E6%B0%B4%E9%A2%9C%E8%89%B2%E9%80%90%E6%B8%90%E5%87%8F%E5%BC%B1%E7%9A%84%E6%95%88%E6%9E%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20attenuation%20%3D%20max(1.0%20-%20dot(dist%2C%20dist)%20*%200.001%2C%200.0)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E6%A0%B9%E6%8D%AE%E7%82%B9%20p%20%E7%9A%84%20y%20%E5%9D%90%E6%A0%87%E4%B8%8E%E6%B5%B7%E9%9D%A2%E9%AB%98%E5%BA%A6%20SEA_HEIGHT%20%E7%9A%84%E5%B7%AE%E5%BC%82%E6%9D%A5%E8%B0%83%E6%95%B4%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%B7%AE%E5%BC%82%E4%B9%98%E4%BB%A5%E4%B8%80%E4%B8%AA%E7%BC%A9%E6%94%BE%E5%9B%A0%E5%AD%90%EF%BC%880.18%EF%BC%89%E5%92%8C%E4%B9%8B%E5%89%8D%E8%AE%A1%E7%AE%97%E7%9A%84%E8%A1%B0%E5%87%8F%E5%9B%A0%E5%AD%90%20atten%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%84%B6%E5%90%8E%E4%B9%98%E4%BB%A5%20SEA_WATER_COLOR%20%E5%B9%B6%E5%8A%A0%E5%88%B0%E6%9C%80%E7%BB%88%E9%A2%9C%E8%89%B2%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E5%8F%AF%E8%83%BD%E7%94%A8%E4%BA%8E%E6%A8%A1%E6%8B%9F%E6%B5%B7%E6%B0%B4%E6%B7%B1%E6%B5%85%E4%B8%8D%E5%90%8C%E6%97%B6%E7%9A%84%E9%A2%9C%E8%89%B2%E5%8F%98%E5%8C%96%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20color%20%2B%3D%20SEA_WATER_COLOR%20*%20(p.y%20-%20SEA_HEIGHT)%20*%200.18%20*%20attenuation%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E5%B9%B6%E6%B7%BB%E5%8A%A0%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20specular%20%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%9A%84%E9%A2%9C%E8%89%B2%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E9%A2%9C%E8%89%B2%E8%A2%AB%E7%9B%B4%E6%8E%A5%E5%8A%A0%E5%88%B0%E6%9C%80%E7%BB%88%E9%A2%9C%E8%89%B2%E4%B8%8A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20color%20%2B%3D%20specular(n%2C%20l%2C%20eye%2C%2060.0)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20color%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E9%AB%98%E5%BA%A6%E5%9B%BE%E7%9A%84%E6%8F%8F%E5%9B%BE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E4%BD%9C%E7%94%A8%E6%98%AF%E8%BF%9B%E8%A1%8C%E5%85%89%E7%BA%BF%E4%B8%8E%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88%E5%A6%82%E6%B5%B7%E9%9D%A2%EF%BC%89%E7%9A%84%E4%BA%A4%E7%82%B9%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%9C%A8%E7%BB%99%E5%AE%9A%E8%B5%B7%E7%82%B9%E5%92%8C%E6%96%B9%E5%90%91%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%89%BE%E5%88%B0%E4%B8%8E%E6%B5%B7%E9%9D%A2%E7%9B%B8%E4%BA%A4%E7%9A%84%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E5%85%B7%E4%BD%93%E6%9D%A5%E8%AF%B4%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E7%B3%BB%E5%88%97%E7%9A%84%E8%BF%AD%E4%BB%A3%E8%AE%A1%E7%AE%97%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%BB%8E%E8%B5%B7%E7%82%B9rayOrigin%E6%B2%BF%E7%9D%80%E6%96%B9%E5%90%91direction%E5%87%BA%E5%8F%91%EF%BC%8C%E4%B8%8E%E9%AB%98%E5%BA%A6%E5%9B%BE%EF%BC%88%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%9C%BA%E6%99%AF%E4%B8%AD%E6%98%AF%E6%B5%B7%E9%9D%A2%EF%BC%89%E7%9B%B8%E4%BA%A4%E7%9A%84%E5%85%B7%E4%BD%93%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%B9%B6%E5%B0%86%E8%BF%99%E4%B8%AA%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%E8%BE%93%E5%87%BA%E5%88%B0%E5%8F%82%E6%95%B0intersectionPoint%E4%B8%AD%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%98%AF%E6%B8%B2%E6%9F%93%E6%B5%B7%E6%B4%8B%E5%9C%BA%E6%99%AF%E7%9A%84%E5%85%B3%E9%94%AE%E9%83%A8%E5%88%86%EF%BC%8C%E5%AE%83%E7%BB%93%E5%90%88%E4%BA%86%E6%B7%B1%E5%BA%A6%E6%98%A0%E5%B0%84%EF%BC%88depth%20mapping%EF%BC%89%E5%92%8C%E6%AD%A5%E8%BF%9B%EF%BC%88stepping%EF%BC%89%E6%8A%80%E6%9C%AF%E6%9D%A5%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%B8%8E%E6%B5%B7%E6%B4%8B%E8%A1%A8%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20float%20heightMapTracing(vec3%20rayOrigin%2C%20vec3%20direction%2C%20out%20vec3%20intersectionPoint)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20nearPlane%20%3D%200.0%3B%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%91%E5%B9%B3%E9%9D%A2%EF%BC%88near%20plane%EF%BC%89%E7%9A%84%E8%B7%9D%E7%A6%BB%E4%B8%BA0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20farPlane%20%3D%201000.0%3B%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%9C%E5%B9%B3%E9%9D%A2%EF%BC%88far%20plane%EF%BC%89%E7%9A%84%E8%B7%9D%E7%A6%BBfarPlane%E4%B8%BA%E4%B8%80%E4%B8%AA%E8%BE%83%E5%A4%A7%E7%9A%84%E6%95%B0%EF%BC%881000.0%EF%BC%89%EF%BC%8C%E8%BF%99%E6%98%AF%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E7%9A%84%E6%9C%80%E5%A4%A7%E8%B7%9D%E7%A6%BB%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%85%88%E8%AE%A1%E7%AE%97farHeight%EF%BC%8C%E5%86%8D%E8%AE%A1%E7%AE%97nearHeight%E7%9A%84%E5%8E%9F%E5%9B%A0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%88%96%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8C%E8%BF%9C%E5%A4%84%E7%9A%84%E7%89%A9%E4%BD%93%E9%80%9A%E5%B8%B8%E5%AF%B9%E6%9C%80%E7%BB%88%E5%9B%BE%E5%83%8F%E7%9A%84%E5%BD%B1%E5%93%8D%E8%BE%83%E5%B0%8F%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E5%85%88%E4%BB%A5%E8%BE%83%E4%BD%8E%E7%9A%84%E7%B2%BE%E5%BA%A6%E6%88%96%E5%88%86%E8%BE%A8%E7%8E%87%E8%AE%A1%E7%AE%97%E8%BF%9C%E5%A4%84%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%88hx%EF%BC%89%EF%BC%8C%E4%BB%A5%E5%87%8F%E5%B0%91%E8%AE%A1%E7%AE%97%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E9%9A%8F%E5%90%8E%EF%BC%8C%E5%86%8D%E5%AF%B9%E8%BF%91%E5%A4%84%E7%9A%84%E7%89%A9%E4%BD%93%E8%BF%9B%E8%A1%8C%E6%9B%B4%E7%B2%BE%E7%BB%86%E7%9A%84%E8%AE%A1%E7%AE%97%EF%BC%88hm%EF%BC%89%EF%BC%8C%E4%BB%A5%E7%A1%AE%E4%BF%9D%E5%9B%BE%E5%83%8F%E8%B4%A8%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E6%89%80%E4%BB%A5%E4%BC%9Areturn%20farPlane%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20farHeight%20%3D%20computedSeaPlaneHeight(rayOrigin%20%2B%20direction%20*%20farPlane%2C%20ITERATION_GEOMETRY)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%A6%82%E6%9E%9CfarHeight%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%88%99%E8%A1%A8%E6%98%8E%E4%BA%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B0%8F%E4%BA%8E0%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E6%B2%A1%E6%9C%89%E6%B5%B7%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E0.0%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%B2%A1%E6%9C%89%E4%BA%A4%E7%82%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E9%9C%80%E8%A6%81%E8%AE%A1%E7%AE%97%E8%BF%91%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E4%BB%A5%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E6%B5%B7%E9%9D%A2%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20if(farHeight%20%3E%200.0)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20intersectionPoint%20%3D%20rayOrigin%20%2B%20direction%20*%20farPlane%3B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%E5%A4%A7%E4%BA%8E0%EF%BC%8C%E5%88%99%E5%B0%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E4%BD%9C%E4%B8%BA%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20return%20farPlane%3B%20%2F%2F%20%E8%BF%94%E5%9B%9E%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E8%B7%9D%E7%A6%BB%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20for%E5%BE%AA%E7%8E%AF%E7%94%A8%E4%BA%8E%E8%BF%AD%E4%BB%A3%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E6%B5%B7%E9%9D%A2%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%85%89%E7%BA%BF%E6%AD%A5%E8%BF%9B%E7%AE%97%E6%B3%95%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20nearHeight%20%3D%20computedSeaPlaneHeight(rayOrigin%20%2B%20direction%20*%20nearPlane%2C%20ITERATION_GEOMETRY)%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E8%BF%91%E5%B9%B3%E9%9D%A2%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20for(int%20i%20%3D%200%3B%20i%20%26%23x3C%3B%20NUM_STEPS%3B%20i%2B%2B)%20%7B%20%2F%2F%20%E5%BC%80%E5%A7%8B%E4%B8%80%E4%B8%AA%E5%BE%AA%E7%8E%AF%EF%BC%8C%E5%BE%AA%E7%8E%AF%E6%AC%A1%E6%95%B0%E7%94%B1NUM_STEPS%E5%AE%9A%E4%B9%89%EF%BC%8C%E8%BF%99%E6%98%AF%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%AD%A5%E8%BF%9B%E6%AC%A1%E6%95%B0%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%A1%E7%AE%97%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E4%B8%AD%E7%82%B9%E8%B7%9D%E7%A6%BBmiddle%20distance%E8%BF%99%E6%98%AF%E9%80%9A%E8%BF%87%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%EF%BC%88mix%EF%BC%89nearPlane%E5%92%8CfarPlane%E5%BE%97%E5%88%B0%E7%9A%84%EF%BC%8C%E6%8F%92%E5%80%BC%E5%9B%A0%E5%AD%90%E5%9F%BA%E4%BA%8E%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%E4%B8%8E%E6%80%BB%E9%AB%98%E5%BA%A6%E5%B7%AE%E7%9A%84%E6%AF%94%E4%BE%8B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20float%20tempDistance%20%3D%20mix(nearPlane%2C%20farPlane%2C%20nearHeight%20%2F%20(nearHeight%20-%20farHeight))%3B%20%2F%2F%20%E6%B3%A8%E6%84%8F%EF%BC%8C%E6%AD%A4%E6%97%B6%E7%9A%84farHeight%E6%B0%B8%E8%BF%9C%E6%98%AF%E5%B0%8F%E4%BA%8E0%E7%9A%84%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20intersectionPoint%20%3D%20rayOrigin%20%2B%20direction%20*%20tempDistance%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20float%20tempHeight%20%3D%20computedSeaPlaneHeight(rayOrigin%20%2B%20direction%20*%20tempDistance%2C%20ITERATION_GEOMETRY)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%A6%82%E6%9E%9C%20tempHeight%20%26%23x3C%3B%200.0%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E4%B8%AD%E7%82%B9%E4%BD%8D%E7%BD%AE%20p%20%E7%9A%84%E9%AB%98%E5%BA%A6%E4%BD%8E%E4%BA%8E%E5%9F%BA%E5%87%86%E9%9D%A2%EF%BC%8C%E5%8D%B3%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84%E6%96%B9%E5%90%91%E4%B8%8A%E6%B2%A1%E6%9C%89%E6%B5%B7%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E9%9C%80%E8%A6%81%E7%BB%A7%E7%BB%AD%E8%BF%AD%E4%BB%A3%E6%AD%A5%E8%BF%9B%EF%BC%8C%E4%BB%A5%E7%A1%AE%E5%AE%9A%E4%BA%A4%E7%82%B9%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%9B%A0%E6%AD%A4%EF%BC%8C%E6%9B%B4%E6%96%B0%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%88%E6%88%96%E8%B7%9D%E7%A6%BB%EF%BC%89%E5%92%8C%E9%AB%98%E5%BA%A6%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%B1%E4%BA%8E%E8%BF%91%E5%B9%B3%E9%9D%A2%E7%9A%84%E9%AB%98%E5%BA%A6%E5%80%BC%20nearHeight%20%E9%80%9A%E5%B8%B8%E6%98%AF%E6%AD%A3%E6%95%B0%EF%BC%88%E5%9B%A0%E4%B8%BA%E8%BF%91%E5%B9%B3%E9%9D%A2%E8%A2%AB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%A8%8D%E9%AB%98%E4%BA%8E%E5%9C%B0%E5%BD%A2%E8%A1%A8%E9%9D%A2%EF%BC%89%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BA%A4%E7%82%B9%E4%B8%8D%E5%8F%AF%E8%83%BD%E4%BD%8D%E4%BA%8E%E8%BF%91%E5%B9%B3%E9%9D%A2%E5%92%8C%E4%B8%AD%E7%82%B9%E4%B9%8B%E9%97%B4%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8E%A8%E6%96%AD%E5%87%BA%E4%BA%A4%E7%82%B9%E5%BF%85%E5%AE%9A%E4%BD%8D%E4%BA%8E%E5%BD%93%E5%89%8D%E6%AD%A5%E7%9A%84%E4%B8%AD%E7%82%B9%E5%88%B0%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9F%90%E4%B8%AA%E4%BD%8D%E7%BD%AE%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E4%B8%BA%E4%BA%86%E7%BC%A9%E5%B0%8F%E6%90%9C%E7%B4%A2%E8%8C%83%E5%9B%B4%EF%BC%8C%E7%AE%97%E6%B3%95%E5%B0%86%E8%BF%9C%E5%B9%B3%E9%9D%A2%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%88%E6%88%96%E8%B7%9D%E7%A6%BB%EF%BC%89%20farPlane%20%E5%92%8C%E9%AB%98%E5%BA%A6%E5%80%BC%20farHeight%20%E6%9B%B4%E6%96%B0%E4%B8%BA%E4%B8%AD%E7%82%B9%E7%9A%84%E6%97%B6%E9%97%B4%20tempDistance%20%E5%92%8C%E9%AB%98%E5%BA%A6%20tempHeight%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%9B%A0%E4%B8%BA%E6%89%80%E6%9C%89%E6%AF%94%E6%AD%A4%E5%88%BB%E7%9A%84tempDistance%E6%9B%B4%E5%A4%A7%E7%9A%84%E5%80%BC%EF%BC%8C%E6%B1%82%E5%87%BA%E6%9D%A5%E7%9A%84tempHeight%E4%B9%9F%E6%98%AF%E5%B0%8F%E4%BA%8E0%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A6%81%E6%8A%8AfarPlane%E7%9A%84%E5%80%BC%EF%BC%8C%E5%8F%98%E5%B0%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20if(tempHeight%20%26%23x3C%3B%200.0)%20%7B%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20farPlane%20%3D%20tempDistance%3B%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20farHeight%20%3D%20tempHeight%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20nearPlane%20%3D%20tempDistance%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20nearHeight%20%3D%20tempHeight%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20if(abs(tempHeight)%20%26%23x3C%3B%20EPSILON)%20break%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E9%80%9A%E8%BF%87%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E8%BF%94%E5%9B%9E%E6%9C%80%E7%BB%88%E7%9A%84%E4%BA%A4%E7%82%B9%E8%B7%9D%E7%A6%BB%E8%BF%99%E4%B8%AA%E6%8F%92%E5%80%BC%E6%98%AF%E5%9F%BA%E4%BA%8E%E6%9C%80%E7%BB%88%E6%AD%A5%E7%9A%84%E9%AB%98%E5%BA%A6%E5%B7%AE%E4%B8%8E%E6%80%BB%E9%AB%98%E5%BA%A6%E5%B7%AE%E7%9A%84%E6%AF%94%E4%BE%8B%E6%9D%A5%E8%AE%A1%E7%AE%97%E7%9A%84%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20mix(nearPlane%2C%20farPlane%2C%20nearHeight%20%2F%20(nearHeight%20-%20farHeight))%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20vec3%20getPixel(in%20vec2%20uv%2C%20float%20time)%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20ray%E7%9A%84%E5%86%85%E5%AE%B9---start%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%80%E8%A1%8C%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E4%B8%89%E7%BB%B4%E5%90%91%E9%87%8Fang%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%AC%A7%E6%8B%89%E8%A7%92%EF%BC%88Euler%20angles%EF%BC%89%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%8F%8F%E8%BF%B0%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E7%9A%84%E6%97%8B%E8%BD%AC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20angle%20%3D%20vec3(sin(1.25%20*%20time)%20*%200.1%2C%20sin(time)%20*%200.2%20%2B%200.3%2C%20time%20*%200.5)%3B%20%20%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%A1%A8%E7%A4%BA%E4%BB%8E%E8%A7%82%E5%AF%9F%E7%82%B9%EF%BC%88%E9%80%9A%E5%B8%B8%E6%98%AF%E7%9B%B8%E6%9C%BA%E4%BD%8D%E7%BD%AE%EF%BC%89%E5%88%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E8%BF%99%E4%B8%AA%E5%90%91%E9%87%8F%E7%94%A8%E4%BA%8E%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E4%BB%8E%E7%9B%B8%E6%9C%BA%E5%87%BA%E5%8F%91%EF%BC%8C%E7%A9%BF%E8%BF%87%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%9C%BA%E6%99%AF%E7%9A%84%E6%96%B9%E5%90%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E9%80%9A%E8%BF%87%E5%BD%92%E4%B8%80%E5%8C%96%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%B0%86%E4%BB%8E%E7%9B%B8%E6%9C%BA%E4%BD%8D%E7%BD%AE%E5%88%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%9F%90%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%E7%94%A8%E4%BA%8E%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%EF%BC%8C%E7%A1%AE%E5%AE%9A%E5%85%89%E7%BA%BF%E5%9C%A8%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E4%BC%A0%E6%92%AD%E8%B7%AF%E5%BE%84%EF%BC%8C%E7%A1%AE%E4%BF%9D%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%E7%9A%84%E5%87%86%E7%A1%AE%E6%80%A7%E5%92%8C%E9%AB%98%E6%95%88%E6%80%A7%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20direction%20%3D%20normalize(vec3(uv.xy%2C%20-2.0))%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%80%E8%A1%8C%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E5%AF%B9%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fdir%E7%9A%84z%E5%88%86%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%B0%83%E6%95%B4%E5%85%B7%E4%BD%93%E6%9D%A5%E8%AF%B4%EF%BC%8C%E9%80%9A%E8%BF%87%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E4%B8%8Euv%E5%90%91%E9%87%8F%E9%95%BF%E5%BA%A6%E6%88%90%E6%AF%94%E4%BE%8B%E7%9A%84%E5%80%BC%E6%9D%A5%E6%94%B9%E5%8F%98%E5%85%89%E7%BA%BF%E7%9A%84%E5%80%BE%E6%96%9C%E8%A7%92%E5%BA%A6%E8%BF%99%E7%A7%8D%E8%B0%83%E6%95%B4%E5%8F%AF%E4%BB%A5%E6%A8%A1%E6%8B%9F%E5%87%BA%E4%BB%8E%E4%B8%8D%E5%90%8C%E8%A7%86%E8%A7%92%E8%A7%82%E5%AF%9F%E5%9C%BA%E6%99%AF%E6%97%B6%EF%BC%8C%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E7%9A%84%E5%8F%98%E5%8C%96%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%A2%9E%E5%BC%BA%E5%9C%BA%E6%99%AF%E7%9A%84%E7%AB%8B%E4%BD%93%E6%84%9F%E5%92%8C%E6%B7%B1%E5%BA%A6%E6%84%9F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20direction.z%20%2B%3D%20length(uv)%20*%200.14%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%80%E8%A1%8C%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E5%B0%86%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8Fdir%E8%BF%9B%E8%A1%8C%E5%BD%92%E4%B8%80%E5%8C%96%EF%BC%8C%E4%BF%9D%E6%8C%81%E6%96%B9%E5%90%91%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%8C%E5%B9%B6%E6%A0%B9%E6%8D%AE%E6%AC%A7%E6%8B%89%E8%A7%92ang%E5%AF%B9%E5%85%89%E7%BA%BF%E6%96%B9%E5%90%91%E8%BF%9B%E8%A1%8C%E6%97%8B%E8%BD%AC%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20direction%20%3D%20normalize(direction)%20*%20getRotationMatrixByEulerAngle(angle)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20rayOrigin%E8%A1%A8%E7%A4%BA%E5%85%89%E7%BA%BF%E7%9A%84%E8%B5%B7%E6%BA%90%E7%82%B9%EF%BC%8C%E5%8D%B3%E5%B0%84%E7%BA%BF%E7%9A%84%E8%B5%B7%E7%82%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E4%BD%9C%E7%94%A8%EF%BC%9A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%201%E3%80%81%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%9A%84%E8%B5%B7%E7%82%B9%EF%BC%9A%E5%9C%A8%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%AE%97%E6%B3%95%E4%B8%AD%EF%BC%8C%E4%BB%8ErayOrigin%E8%BF%99%E4%B8%AA%E7%82%B9%E5%87%BA%E5%8F%91%EF%BC%8C%E6%B2%BF%E7%9D%80direction%EF%BC%88%E5%85%89%E7%BA%BF%E7%9A%84%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%EF%BC%89%E8%BF%9B%E8%A1%8C%E8%BF%BD%E8%B8%AA%EF%BC%8C%E4%B8%8E%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E7%89%A9%E4%BD%93%EF%BC%88%E5%A6%82%E6%B5%B7%E9%9D%A2%EF%BC%89%E8%BF%9B%E8%A1%8C%E4%BA%A4%E7%82%B9%E8%AE%A1%E7%AE%97%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%202%E3%80%81%E5%BD%B1%E5%93%8D%E8%A7%82%E5%AF%9F%E8%A7%86%E8%A7%92%E5%92%8C%E5%9C%BA%E6%99%AF%E5%8A%A8%E6%80%81%EF%BC%9ArayOrigin%E7%9A%84z%E5%9D%90%E6%A0%87%E9%9A%8F%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%EF%BC%8C%E4%BD%BF%E5%BE%97%E5%85%89%E7%BA%BF%E7%9A%84%E8%B5%B7%E7%82%B9%E5%9C%A8z%E8%BD%B4%E6%96%B9%E5%90%91%E4%B8%8A%E9%9A%8F%E6%97%B6%E9%97%B4%E7%A7%BB%E5%8A%A8%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BA%A7%E7%94%9F%E5%8A%A8%E6%80%81%E7%9A%84%E8%A7%82%E5%AF%9F%E6%95%88%E6%9E%9C%EF%BC%8C%E5%A2%9E%E5%8A%A0%E4%BA%86%E5%9C%BA%E6%99%AF%E7%9A%84%E7%9C%9F%E5%AE%9E%E6%84%9F%E5%92%8C%E5%8A%A8%E6%80%81%E6%84%9F%E5%90%8C%E6%97%B6%EF%BC%8C%E5%85%B6y%E5%9D%90%E6%A0%87%E5%80%BC%E5%86%B3%E5%AE%9A%E4%BA%86%E8%A7%82%E5%AF%9F%E8%A7%86%E8%A7%92%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E5%BD%B1%E5%93%8D%E8%A7%82%E5%AF%9F%E8%80%85%E5%AF%B9%E5%9C%BA%E6%99%AF%E7%9A%84%E8%A7%86%E9%87%8E%E8%8C%83%E5%9B%B4%E5%92%8C%E7%BB%86%E8%8A%82%E6%84%9F%E7%9F%A5%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20rayOrigin%20%3D%20vec3(0.0%2C%203.5%2C%205.0)%3B%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20ray%E7%9A%84%E5%86%85%E5%AE%B9---end%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20tracing%E7%9A%84%E5%86%85%E5%AE%B9---start%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%E2%86%93%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E7%9B%B8%E4%BA%A4%E7%82%B9%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20intersectionPoint%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20distanceFromStart2End%E8%A1%A8%E7%A4%BA%E4%BB%8E%E8%B5%B7%E7%82%B9%E5%88%B0%E7%9B%B8%E4%BA%A4%E7%82%B9%E7%9A%84%E8%B7%9D%E7%A6%BB%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20distanceFromStart2End%20%3D%20heightMapTracing(rayOrigin%2C%20direction%2C%20intersectionPoint)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20distanceVector%20%3D%20intersectionPoint%20-%20rayOrigin%3B%20%2F%2F%20%E8%AE%A1%E7%AE%97%E7%9B%B8%E4%BA%A4%E7%82%B9%E4%B8%8E%E8%B5%B7%E7%82%B9%E7%9A%84%E8%B7%9D%E7%A6%BB%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20n%20%3D%20getNormal(intersectionPoint%2C%20dot(distanceVector%2C%20distanceVector)%20*%20EPSILON_NRM)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%E2%86%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20tracing%E7%9A%84%E5%86%85%E5%AE%B9---end%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20light%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20light%E8%A1%A8%E7%A4%BA%E5%85%89%E6%BA%90%E7%9A%84%E6%96%B9%E5%90%91%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20normalize(vec3(0.0%2C%201.0%2C%200.8))%E5%BE%97%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F%EF%BC%8C%E5%A4%A7%E7%BA%A6%E4%B8%BAvec3(0.0%2C%200.7810%2C%200.6248)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%90%91%E9%87%8F%E7%9A%84%E6%96%B9%E5%90%91%E4%B8%8E%E5%8E%9F%E5%A7%8B%E5%90%91%E9%87%8F%E7%9B%B8%E5%90%8C%EF%BC%8C%E4%BD%86%E9%95%BF%E5%BA%A6%E4%B8%BA1%EF%BC%8C%E5%B8%B8%E7%94%A8%E4%BA%8E%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%90%91%EF%BC%8C%E7%89%B9%E5%88%AB%E6%98%AF%E5%9C%A8%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97%E4%B8%AD%E4%BD%9C%E4%B8%BA%E5%85%89%E6%BA%90%E6%96%B9%E5%90%91%E5%90%91%E9%87%8F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%20%E4%BD%9C%E7%94%A8%EF%BC%9A%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%201%E3%80%81%E5%85%89%E7%85%A7%E8%AE%A1%E7%AE%97%E7%9A%84%E4%BE%9D%E6%8D%AE%EF%BC%9A%E5%9C%A8%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B%E4%B8%AD%EF%BC%8Clight%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E5%85%89%E7%BA%BF%E4%B8%8E%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E4%BA%A4%E4%BA%92%E6%95%88%E6%9E%9C%EF%BC%8C%E5%A6%82%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%92%8C%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%AD%89%E5%AE%83%E6%8C%87%E5%AE%9A%E4%BA%86%E5%85%89%E6%BA%90%E7%9B%B8%E5%AF%B9%E4%BA%8E%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%89%A9%E4%BD%93%E7%9A%84%E6%96%B9%E5%90%91%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%BD%B1%E5%93%8D%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E6%98%8E%E6%9A%97%E3%80%81%E9%A2%9C%E8%89%B2%E5%92%8C%E9%AB%98%E5%85%89%E7%AD%89%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%2F%2F%202%E3%80%81%E5%BD%B1%E5%93%8D%E5%9C%BA%E6%99%AF%E7%9A%84%E5%85%89%E7%85%A7%E6%95%88%E6%9E%9C%EF%BC%9A%E9%80%9A%E8%BF%87%E4%B8%8E%E7%89%A9%E4%BD%93%E8%A1%A8%E9%9D%A2%E7%9A%84%E6%B3%95%E7%BA%BF%E5%90%91%E9%87%8F%E7%AD%89%E8%BF%9B%E8%A1%8C%E7%82%B9%E4%B9%98%E7%AD%89%E8%BF%90%E7%AE%97%EF%BC%8C%E8%AE%A1%E7%AE%97%E5%87%BA%E4%B8%8D%E5%90%8C%E5%85%89%E7%85%A7%E6%88%90%E5%88%86%EF%BC%88%E5%A6%82%E6%BC%AB%E5%8F%8D%E5%B0%84%E5%85%89%E3%80%81%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E5%85%89%E7%AD%89%EF%BC%89%E7%9A%84%E5%BC%BA%E5%BA%A6%EF%BC%8C%E8%BF%9B%E8%80%8C%E5%BD%B1%E5%93%8D%E6%9C%80%E7%BB%88%E6%B8%B2%E6%9F%93%E5%87%BA%E7%9A%84%E5%9B%BE%E5%83%8F%E7%9A%84%E5%85%89%E5%BD%B1%E6%95%88%E6%9E%9C%EF%BC%8C%E4%BD%BF%E5%9C%BA%E6%99%AF%E5%85%B7%E6%9C%89%E7%AB%8B%E4%BD%93%E6%84%9F%E5%92%8C%E7%9C%9F%E5%AE%9E%E6%84%9F%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20light%20%3D%20normalize(vec3(0.0%2C%201.0%2C%200.8))%3B%20%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20return%20mix(%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20getSkyColor(direction)%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20getSeaColor(intersectionPoint%2C%20n%2C%20light%2C%20direction%2C%20distanceVector)%2C%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20pow(smoothstep(0.0%2C%20-0.02%2C%20direction.y)%2C%200.2))%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20void%20main()%20%7B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20%20vec2%20fragCoord%20%3D%20gl_FragCoord.xy%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec2%20uv%20%3D%20(fragCoord.xy%20-%200.5%20*%20u_resolution.xy)%20%2F%20min(u_resolution.y%2C%20u_resolution.x)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20uv%20*%3D%203.0%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20float%20time%20%3D%20u_time%20*%200.3%20%2B%20u_mouse.x%20*%200.01%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20vec3%20color%20%3D%20getPixel(uv%2C%20time)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%20%20gl_FragColor%20%3D%20vec4(pow(color%2C%20vec3(0.65))%2C%201.0)%3B%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%23032F62%3B--shiki-dark%3A%239ECBFF%22%3E%20%20%20%20%20%20%7D%60%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%20%20%7D)%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%7D%3C%2Fspan%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3C%2Fspan%3E%0A%3Cspan%20class%3D%22line%22%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%26%23x3C%3B%2F%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2322863A%3B--shiki-dark%3A%2385E89D%22%3Escript%3C%2Fspan%3E%3Cspan%20style%3D%22--shiki-light%3A%2324292E%3B--shiki-dark%3A%23E1E4E8%22%3E%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fcode%3E%3C%2Fpre%3E",suffixName:"vue",absolutePath:"D:\\test\\docs\\demo\\shaderToy\\shaderToy2\\sea1.vue",relativePath:"../demo/shaderToy/shaderToy2/sea1.vue"},{default:c(()=>[n(g)]),_:1})])}}});export{x as __pageData,u as default};
